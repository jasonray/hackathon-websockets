<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Hackathon - Websockets</title>
	<script type="text/javascript" src="https://raw.github.com/krukow/stomple/master/src/stomple.js"></script>
	<script>

	function refreshContent(){
		document.getElementById("output").innerHTML = '';
		for (var i = 0; i < localStorage.length; i++){
		    var task = JSON.parse(localStorage.getItem(localStorage.key(i)));
			document.getElementById("output").innerHTML = document.getElementById("output").innerHTML + task.title + ": " + task.state + "<br />";
		}

	}	
	function saveTask() {
		var title = document.getElementById("title").value;
		var state = document.getElementById("state").value;
		var taskToSend = new Task(title, state);

		localStorage.setItem(UUIDv4(), JSON.stringify(taskToSend));

		refreshContent();
		send_task(client, taskToSend);
	  }
	  

	

	  
	  

	
	</script>
</head>
<body>
	<label for="title">Title</label>
	<input type="text" id="title" /> <br />
	<label for="state">State</label>	
	<input type="text" id="state" />
	
	<input type="button" onclick="saveTask()" value="Save" /><br />
	
	<div id="output" style="border: 1px solid #ccc; margin-top: 10px; padding: 5px;">
	
	</div>
	
	<script type="text/javascript">
		document.getElementById("output").innerHTML = tasks.title + ": " + tasks.state + "<br />";
	</script>
	
	
	<!--
	<div id="">
	<p id="title"></p>
	<p id="state"></p>
	<input id="open" type="radio" name="task">
	<label for="open">Open</label>
	<input id="inprogress" type="radio" name="task">
	<label for="inprogress">In Progress</label>
	<input id="done" type="radio" name="task">
	<label for="done">Done</label>
	-->
    <a href="test.html">test!</a>
</body>
</html>
