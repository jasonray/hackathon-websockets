<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;44.&nbsp;Intercepting Operations</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1 User Manual"><link rel="up" href="index.html" title="HornetQ 2.1 User Manual"><link rel="previous" href="embedding-hornetq.html" title="Chapter&nbsp;43.&nbsp;Embedding HornetQ"><link rel="next" href="interoperability.html" title="Chapter&nbsp;45.&nbsp;Interoperability"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;44.&nbsp;Intercepting Operations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="embedding-hornetq.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="interoperability.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="intercepting-operations"></a>Chapter&nbsp;44.&nbsp;Intercepting Operations</h2></div></div><div></div></div><p>HornetQ supports <span class="emphasis"><em>interceptors</em></span> to intercept packets entering
       the server. Any supplied interceptors would be called for any packet entering 
        the server, this allows custom code to be executed, e.g. for auditing packets,
      filtering or other reasons. Interceptors can change the packets they intercept.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11099"></a>44.1.&nbsp;Implementing The Interceptors</h2></div></div><div></div></div><p>A interceptor must implement the <tt class="literal">Interceptor interface</tt>:</p><pre class="programlisting">
package org.hornetq.api.core.interceptor;

public interface Interceptor
{   
   boolean intercept(Packet packet, RemotingConnection connection) 
                throws HornetQException;
}
         </pre><p>The returned boolean value is important:</p><div class="itemizedlist"><ul type="disc"><li><p>if <tt class="literal">true</tt> is returned, the process continues normally</p></li><li><p>if <tt class="literal">false</tt> is returned, the process is aborted, no other
               interceptors will be called and the packet will not be handled by the server at
               all.</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11124"></a>44.2.&nbsp;Configuring The Interceptors</h2></div></div><div></div></div><p>The interceptors are configured in <tt class="literal">hornetq-configuration.xml</tt>:</p><pre class="programlisting">
&lt;remoting-interceptors&gt;
   &lt;class-name&gt;org.hornetq.jms.example.LoginInterceptor&lt;/class-name&gt;
   &lt;class-name&gt;org.hornetq.jms.example.AdditionalPropertyInterceptor&lt;/class-name&gt;
&lt;/remoting-interceptors&gt;
         </pre><p>The interceptors classes (and their dependencies) must be added to the server classpath
         to be properly instantiated and called.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11136"></a>44.3.&nbsp;Interceptors on the Client Side</h2></div></div><div></div></div><p>The interceptors can also be run on the client side to intercept packets
         <span class="emphasis"><em>sent by the server</em></span> by adding the interceptor to the <tt class="code">ClientSessionFactory</tt>
         with the <tt class="code">addInterceptor()</tt> method.</p><p>The interceptors classes (and their dependencies) must be added to the client classpath
         to be properly instantiated and called from the client side.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11152"></a>44.4.&nbsp;Example</h2></div></div><div></div></div><p>See <a href="examples.html#examples.interceptor" title="11.1.18.&nbsp;Interceptor">Section&nbsp;11.1.18, &#8220;Interceptor&#8221;</a> for an example which
         shows how to use interceptors to add properties to a message on the server.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="embedding-hornetq.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="interoperability.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;43.&nbsp;Embedding HornetQ&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;45.&nbsp;Interoperability</td></tr></table></div></body></html>