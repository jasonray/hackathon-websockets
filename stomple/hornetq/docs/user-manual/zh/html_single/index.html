<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HornetQ 2.1&#29992;&#25143;&#25163;&#20876;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e18"></a>HornetQ 2.1&#29992;&#25143;&#25163;&#20876;</h1></div><div><h2 class="subtitle">Putting the buzz in messaging</h2></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#notice">1. &#27861;&#24459;&#22768;&#26126;</a></span></dt><dt><span class="chapter"><a href="#preface">2. &#21069;&#35328;</a></span></dt><dt><span class="chapter"><a href="#project-info">3. &#39033;&#30446;&#20449;&#24687;</a></span></dt><dd><dl><dt><span class="section"><a href="#download.software">3.1. &#36719;&#20214;&#19979;&#36733;</a></span></dt><dt><span class="section"><a href="#download.svn">3.2. &#20854;&#23427;&#30456;&#20851;&#20449;&#24687;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#messaging-concepts">4. &#28040;&#24687;&#30340;&#30456;&#20851;&#27010;&#24565;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e262">4.1. &#28040;&#24687;&#30456;&#20851;&#30340;&#27010;&#24565;</a></span></dt><dt><span class="section"><a href="#d0e287">4.2. &#28040;&#24687;&#30340;&#31181;&#31867;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e298">4.2.1. &#28040;&#24687;&#38431;&#21015;&#27169;&#24335;</a></span></dt><dt><span class="section"><a href="#d0e312">4.2.2. &#28040;&#24687;&#30340;&#24191;&#25773;&#65295;&#35746;&#38405;&#27169;&#24335;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e326">4.3. &#20256;&#36865;&#30340;&#21487;&#38752;&#24615;</a></span></dt><dt><span class="section"><a href="#d0e336">4.4. &#20132;&#26131;&#65288;Transactions)</a></span></dt><dt><span class="section"><a href="#d0e341">4.5. &#25345;&#20037;&#24615;&#65288;Durability&#65289;</a></span></dt><dt><span class="section"><a href="#d0e346">4.6. &#28040;&#24687;API&#21644;&#21327;&#35758;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e357">4.6.1. Java&#28040;&#24687;&#26381;&#21153;&#65288;JMS&#65289;</a></span></dt><dt><span class="section"><a href="#d0e370">4.6.2. &#19987;&#26377;&#30340;API</a></span></dt><dt><span class="section"><a href="#d0e377">4.6.3. RESTful API</a></span></dt><dt><span class="section"><a href="#d0e393">4.6.4. STOMP</a></span></dt><dt><span class="section"><a href="#d0e404">4.6.5. AMQP</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e413">4.7. &#39640;&#21487;&#33719;&#24471;&#24615;&#65288;Availability&#65289;</a></span></dt><dt><span class="section"><a href="#d0e423">4.8. &#38598;&#32676;</a></span></dt><dt><span class="section"><a href="#d0e438">4.9. &#26725;&#25509;&#65288;Bridge)&#21644;&#36335;&#30001;&#65288;Routing&#65289;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#architecture">5. &#24635;&#20307;&#26550;&#26500;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e477">5.1. &#26680;&#24515;&#26550;&#26500;</a></span></dt><dt><span class="section"><a href="#d0e518">5.2. &#23558;HornetQ&#23884;&#20837;&#21040;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;</a></span></dt><dt><span class="section"><a href="#d0e527">5.3. &#23558;HornetQ&#19982;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;</a></span></dt><dt><span class="section"><a href="#d0e551">5.4. HornetQ&#20316;&#20026;&#29420;&#31435;&#30340;&#26381;&#21153;&#65288;standalone&#65289;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#using-server">6. &#20351;&#29992;HornetQ&#26381;&#21153;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e603">6.1. &#26381;&#21153;&#30340;&#21551;&#21160;&#21644;&#20572;&#27490;</a></span></dt><dt><span class="section"><a href="#d0e641">6.2. &#26381;&#21153;&#22120;&#31471;JVM&#21442;&#25968;&#30340;&#35774;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e662">6.3. &#26381;&#21153;&#22120;&#31471;&#30340;classpath</a></span></dt><dt><span class="section"><a href="#using-server.library.path">6.4. Library Path</a></span></dt><dt><span class="section"><a href="#d0e714">6.5. &#31995;&#32479;&#21464;&#37327;</a></span></dt><dt><span class="section"><a href="#using-server.configuration">6.6. &#37197;&#32622;&#25991;&#20214;</a></span></dt><dt><span class="section"><a href="#server.microcontainer.configuration">6.7. JBoss Microcontainer Beans &#25991;&#20214;</a></span></dt><dt><span class="section"><a href="#server.microkernel.configuration">6.8. JBoss AS4 MBean &#26381;&#21153;</a></span></dt><dt><span class="section"><a href="#usingserver.mainconfig">6.9. &#20027;&#37197;&#32622;&#25991;&#20214;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#using-jms">7. &#20351;&#29992;JMS</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e966">7.1. &#19968;&#20010;&#31616;&#21333;&#30340;&#35746;&#36141;&#31995;&#32479;</a></span></dt><dt><span class="section"><a href="#using-jms.server.configuration">7.2. JMS&#26381;&#21153;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e1020">7.3. JNDI&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e1061">7.4. &#31243;&#24207;&#20195;&#30721;</a></span></dt><dt><span class="section"><a href="#d0e1118">7.5. &#19981;&#20351;&#29992;JNDI&#32780;&#30452;&#25509;&#21019;&#24314;JMS&#30340;&#23545;&#35937;</a></span></dt><dt><span class="section"><a href="#using-jms.clientid">7.6. Client ID&#30340;&#35774;&#32622;</a></span></dt><dt><span class="section"><a href="#using-jms.dupsokbatchsize">7.7. &#35774;&#32622;DUPS_OK&#30340;Batch Size </a></span></dt><dt><span class="section"><a href="#using-jms.txbatchsize">7.8. &#35774;&#32622;&#20107;&#21153;&#65288;Transaction&#65289;&#30340;Batch Size</a></span></dt></dl></dd><dt><span class="chapter"><a href="#using-core">8. &#20351;&#29992;HornetQ&#20869;&#26680;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1226">8.1. &#20869;&#26680;&#28040;&#24687;&#31995;&#32479;&#30340;&#30456;&#20851;&#27010;&#24565;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1231">8.1.1. &#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#d0e1268">8.1.2. &#22320;&#22336;&#65288;Address&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1289">8.1.3. Queue</a></span></dt><dt><span class="section"><a href="#d0e1300">8.1.4. ClientSessionFactory</a></span></dt><dt><span class="section"><a href="#d0e1321">8.1.5. ClientSession</a></span></dt><dt><span class="section"><a href="#d0e1341">8.1.6. ClientConsumer</a></span></dt><dt><span class="section"><a href="#d0e1352">8.1.7. ClientProducer</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e1373">8.2. &#19968;&#20010;&#20869;&#26680;&#30340;&#24212;&#29992;&#23454;&#20363;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#jms-core-mapping">9. JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;</a></span></dt><dt><span class="chapter"><a href="#client-classpath">10. &#23458;&#25143;&#31471;&#30340;Classpath</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1448">10.1. &#20351;&#29992;HornetQ&#20869;&#26680;&#30340;&#23458;&#25143;&#31471;</a></span></dt><dt><span class="section"><a href="#d0e1467">10.2. JMS&#23458;&#25143;&#31471;</a></span></dt><dt><span class="section"><a href="#d0e1494">10.3. &#38656;&#35201;JNDI&#30340;JMS&#23458;&#25143;&#31471;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#examples">11. &#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e1531">11.1. JMS &#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#application-level-failover">11.1.1. &#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;</a></span></dt><dt><span class="section"><a href="#examples.bridge">11.1.2. &#20869;&#26680;&#26725;&#65288;Bridge&#65289;&#20363;&#23376;</a></span></dt><dt><span class="section"><a href="#examples.browsers">11.1.3. &#27983;&#35272;&#22120;&#65288;Browser&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1587">11.1.4. Client Kickoff</a></span></dt><dt><span class="section"><a href="#d0e1594">11.1.5. &#23458;&#25143;&#31471;&#30340;&#36127;&#36733;&#22343;&#34913;</a></span></dt><dt><span class="section"><a href="#examples.clustered.grouping">11.1.6. &#38598;&#32676;&#20998;&#32452;</a></span></dt><dt><span class="section"><a href="#d0e1606">11.1.7. &#38598;&#32676;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e1613">11.1.8. &#21333;&#26426;&#38598;&#32676;</a></span></dt><dt><span class="section"><a href="#d0e1620">11.1.9. &#38598;&#32676;&#30340;Topic</a></span></dt><dt><span class="section"><a href="#examples.consumer-rate-limit">11.1.10. &#38480;&#21046;&#25509;&#25910;&#36895;&#29575;</a></span></dt><dt><span class="section"><a href="#examples.dead-letter">11.1.11. &#27515;&#28040;&#24687;&#65288;Dead Letter&#65289;</a></span></dt><dt><span class="section"><a href="#examples.delayed-redelivery">11.1.12. &#24310;&#36831;&#20877;&#21457;&#36865;</a></span></dt><dt><span class="section"><a href="#divert-example">11.1.13. &#36716;&#31227;&#65288;Divert&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1659">11.1.14. &#25345;&#20037;&#35746;&#38405;&#65288;Durable Subscription&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1668">11.1.15. &#23884;&#20837;&#26041;&#24335;&#65288;Embedded&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1675">11.1.16. HTTP &#20256;&#36755;&#21327;&#35758;&#30340;&#25903;&#25345;</a></span></dt><dt><span class="section"><a href="#d0e1682">11.1.17. &#30452;&#25509;&#23454;&#20363;&#21270;JMS&#23545;&#35937;</a></span></dt><dt><span class="section"><a href="#examples.interceptor">11.1.18. &#25318;&#25130;&#22120;&#65288;Interceptor&#65289;</a></span></dt><dt><span class="section"><a href="#examples.jaas">11.1.19. JAAS</a></span></dt><dt><span class="section"><a href="#examples.jms.jms-bridge">11.1.20. JMS&#26725;&#65288;Bridge&#65289;</a></span></dt><dt><span class="section"><a href="#examples.jmx">11.1.21. JMX&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#examples.large-message">11.1.22. &#22823;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#examples.last-value-queue">11.1.23. &#26368;&#26032;&#20540;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e1742">11.1.24. &#20998;&#24067;&#24335;&#38431;&#21015;&#30340;&#36127;&#36733;&#22343;&#34913;</a></span></dt><dt><span class="section"><a href="#examples.management">11.1.25. &#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#examples.management-notifications">11.1.26. &#31649;&#29702;&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#examples.message-counters">11.1.27. &#28040;&#24687;&#35745;&#25968;&#22120;</a></span></dt><dt><span class="section"><a href="#examples.expiry">11.1.28. &#28040;&#24687;&#22833;&#25928;</a></span></dt><dt><span class="section"><a href="#examples.message-group">11.1.29. &#28040;&#24687;&#32452;</a></span></dt><dt><span class="section"><a href="#examples.message-group2">11.1.30. &#28040;&#24687;&#32452;&#65288;&#20363;2&#65289;</a></span></dt><dt><span class="section"><a href="#examples.message-priority">11.1.31. &#28040;&#24687;&#20248;&#20808;&#32423;</a></span></dt><dt><span class="section"><a href="#examples.no-consumer-buffering">11.1.32. &#38646;&#25509;&#25910;&#32531;&#20914;</a></span></dt><dt><span class="section"><a href="#examples.non-transaction-failover">11.1.33. &#24102;&#26377;&#26381;&#21153;&#22120;&#25968;&#25454;&#22797;&#21046;&#30340;&#38750;&#20107;&#21153;&#22833;&#25928;&#22791;&#25588;</a></span></dt><dt><span class="section"><a href="#examples.paging">11.1.34. &#20998;&#39029;&#65288;paging&#65289;</a></span></dt><dt><span class="section"><a href="#examples.pre-acknowledge">11.1.35. &#39044;&#20808;&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#producer-rate-limiting-example">11.1.36. &#28040;&#24687;&#21457;&#36865;&#36895;&#24230;&#38480;&#21046;</a></span></dt><dt><span class="section"><a href="#d0e1867">11.1.37. &#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e1872">11.1.38. Message&#20877;&#20998;&#37197;</a></span></dt><dt><span class="section"><a href="#d0e1879">11.1.39. &#38431;&#21015;&#35831;&#27714;</a></span></dt><dt><span class="section"><a href="#d0e1884">11.1.40. &#24102;&#28040;&#24687;&#36873;&#25321;&#22120;&#65288;selector&#65289;&#30340;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e1891">11.1.41. &#33410;&#28857;&#36830;&#25509;&#37325;&#35797;</a></span></dt><dt><span class="section"><a href="#d0e1898">11.1.42. &#35831;&#27714;&#65295;&#24212;&#31572;</a></span></dt><dt><span class="section"><a href="#examples.scheduled-message">11.1.43. &#23450;&#26102;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#d0e1910">11.1.44. &#23433;&#20840;</a></span></dt><dt><span class="section"><a href="#asynchronous-send-acknowledgements-example">11.1.45. &#21457;&#36865;&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#d0e1927">11.1.46. SSL&#20256;&#36755;&#25903;&#25345;</a></span></dt><dt><span class="section"><a href="#d0e1934">11.1.47. &#38745;&#24577;&#28040;&#24687;&#36873;&#25321;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e1941">11.1.48. &#20351;&#29992;JMS&#26041;&#27861;&#26469;&#37197;&#32622;&#38745;&#24577;&#28040;&#24687;&#36873;&#25321;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e1948">11.1.49. Stomp</a></span></dt><dt><span class="section"><a href="#d0e1955">11.1.50. Stomp&#19982;Web Sockets</a></span></dt><dt><span class="section"><a href="#d0e1962">11.1.51. &#23545;&#31216;&#22411;&#38598;&#32676;</a></span></dt><dt><span class="section"><a href="#d0e1973">11.1.52. &#20020;&#26102;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e1978">11.1.53. &#35805;&#39064;&#65288;Topic&#65289;</a></span></dt><dt><span class="section"><a href="#topic-hierarchy-example">11.1.54. &#35805;&#39064;&#20307;&#31995;&#65288;Topic Hierarchy&#65289;</a></span></dt><dt><span class="section"><a href="#d0e1988">11.1.55. &#35805;&#39064;&#36873;&#25321;&#22120;&#20363;1</a></span></dt><dt><span class="section"><a href="#d0e1995">11.1.56. &#35805;&#39064;&#36873;&#25321;&#22120;&#20363;2</a></span></dt><dt><span class="section"><a href="#examples.transaction-failover">11.1.57. &#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;</a></span></dt><dt><span class="section"><a href="#d0e2011">11.1.58. &#20107;&#21153;&#24615;&#20250;&#35805;</a></span></dt><dt><span class="section"><a href="#d0e2018">11.1.59. XA Heuristic</a></span></dt><dt><span class="section"><a href="#d0e2025">11.1.60. XA &#25509;&#25910;</a></span></dt><dt><span class="section"><a href="#d0e2032">11.1.61. XA &#21457;&#36865;</a></span></dt><dt><span class="section"><a href="#d0e2039">11.1.62. XA&#19982;&#20107;&#21153;&#31649;&#29702;&#22120;&#65288;transaction manager&#65289;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e2046">11.2. &#26680;&#24515;API&#30340;&#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#examples.embedded">11.2.1. &#23884;&#20837;&#24335;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e2059">11.3. Java EE &#20363;&#23376;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2070">11.3.1. EJB/JMS &#20107;&#21153;</a></span></dt><dt><span class="section"><a href="#d0e2075">11.3.2. HAJNDI (High Availability)</a></span></dt><dt><span class="section"><a href="#d0e2080">11.3.3. &#36164;&#28304;&#36866;&#37197;&#22120;&#30340;&#37197;&#32622;&#65288;JCA&#65289;</a></span></dt><dt><span class="section"><a href="#d0e2085">11.3.4. &#36164;&#28304;&#36866;&#37197;&#22120;&#36816;&#31243;&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#examples.javaee.jms-bridge">11.3.5. JMS &#26725;&#65288;Bridge&#65289;</a></span></dt><dt><span class="section"><a href="#d0e2095">11.3.6. MDB (&#28040;&#24687;&#39537;&#21160;Bean)</a></span></dt><dt><span class="section"><a href="#d0e2100">11.3.7. Servlet&#20256;&#36755;</a></span></dt><dt><span class="section"><a href="#d0e2105">11.3.8. Servlet SSL &#20256;&#36755;</a></span></dt><dt><span class="section"><a href="#xa-recovery-example">11.3.9. XA &#24674;&#22797;&#65288;recovery&#65289;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#wildcard-routing">12. &#20351;&#29992;&#36890;&#37197;&#31526;&#23454;&#29616;&#28040;&#24687;&#36335;&#30001;</a></span></dt><dt><span class="chapter"><a href="#wildcard-syntax">13. &#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</a></span></dt><dt><span class="chapter"><a href="#filter-expressions">14. &#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</a></span></dt><dt><span class="chapter"><a href="#persistence">15. &#25345;&#20037;&#21270;</a></span></dt><dd><dl><dt><span class="section"><a href="#configuring.bindings.journal">15.1. &#37197;&#32622;&#32465;&#23450;&#26085;&#24535;</a></span></dt><dt><span class="section"><a href="#configuring.bindings.jms">15.2. &#37197;&#32622;JMS&#26085;&#24535;</a></span></dt><dt><span class="section"><a href="#configuring.message.journal">15.3. &#37197;&#32622;&#28040;&#24687;&#26085;&#24535;</a></span></dt><dt><span class="section"><a href="#disk-write-cache">15.4. &#20851;&#20110;&#20851;&#38381;&#30913;&#30424;&#20889;&#32531;&#20914;&#30340;&#37325;&#35201;&#35828;&#26126;</a></span></dt><dt><span class="section"><a href="#installing-aio">15.5. &#23433;&#35013;AIO</a></span></dt><dt><span class="section"><a href="#persistence.enabled">15.6. &#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#21270;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#configuring-transports">16. &#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</a></span></dt><dd><dl><dt><span class="section"><a href="#configuring-transports.acceptors">16.1. &#25509;&#25910;&#22120;&#65288;Acceptor&#65289;</a></span></dt><dt><span class="section"><a href="#configuring-transports.connectors">16.2. &#36830;&#25509;&#22120;&#65288;Connectors&#65289;</a></span></dt><dt><span class="section"><a href="#configuring-transports.client.side">16.3. &#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#37197;&#32622;&#20256;&#36755;&#23618;</a></span></dt><dt><span class="section"><a href="#d0e2860">16.4. &#37197;&#32622; Netty &#20256;&#36755;&#23618;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e2872">16.4.1. &#37197;&#32622; Netty TCP</a></span></dt><dt><span class="section"><a href="#d0e3013">16.4.2. &#37197;&#32622;Netty SSL</a></span></dt><dt><span class="section"><a href="#d0e3051">16.4.3. &#37197;&#32622;Netty HTTP</a></span></dt><dt><span class="section"><a href="#d0e3094">16.4.4. &#37197;&#32622;Netty Servlet</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#connection-ttl">17. &#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;</a></span></dt><dd><dl><dt><span class="section"><a href="#dead.connections">17.1. &#26381;&#21153;&#22120;&#31471;&#23545;&#22833;&#25928;&#36830;&#25509;&#30340;&#28165;&#38500;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3243">17.1.1. &#20851;&#38381;&#27809;&#26377;&#34987;&#25104;&#21151;&#20851;&#38381;&#30340;&#26680;&#24515;&#20250;&#35805;&#25110;JMS&#36830;&#25509;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e3259">17.2. &#23458;&#25143;&#31471;&#30340;&#25925;&#38556;&#26816;&#27979;</a></span></dt><dt><span class="section"><a href="#connection-ttl.async-connection-execution">17.3. &#37197;&#32622;&#24322;&#27493;&#36830;&#25509;&#20219;&#21153;&#25191;&#34892;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#transaction-config">18. &#37197;&#32622;&#36164;&#28304;&#31649;&#29702;&#22120;&#65288;Resource Manager&#65289;</a></span></dt><dt><span class="chapter"><a href="#flow-control">19. &#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3375">19.1. &#25509;&#25910;&#32773;&#65288;consumer&#65289;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-control.consumer.window">19.1.1. &#22522;&#20110;&#31383;&#21475;&#30340;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-control.core.api">19.1.1.1. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;&#36827;&#34892;&#27969;&#25511;&#21046;</a></span></dt><dt><span class="section"><a href="#d0e3469">19.1.1.2. &#20351;&#29992;JMS&#30340;&#27969;&#25511;&#21046;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e3488">19.1.2. &#36895;&#29575;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-control.rate.core.api">19.1.2.1. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</a></span></dt><dt><span class="section"><a href="#d0e3519">19.1.2.2. &#20351;&#29992;JMS</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#d0e3541">19.2. &#21457;&#36865;&#32773;&#65288;producer&#65289;&#30340;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3546">19.2.1. &#22522;&#20110;&#31383;&#21475;&#30340;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3560">19.2.1.1. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</a></span></dt><dt><span class="section"><a href="#d0e3568">19.2.1.2. &#20351;&#29992;JMS</a></span></dt><dt><span class="section"><a href="#d0e3583">19.2.1.3. &#38480;&#23450;&#21457;&#36865;&#32773;&#31383;&#21475;&#27969;&#25511;&#21046;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e3628">19.2.2. &#36895;&#29575;&#27969;&#25511;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#flow-control.producer.rate.core.api">19.2.2.1. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</a></span></dt><dt><span class="section"><a href="#d0e3656">19.2.2.2. &#20351;&#29992; JMS</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#send-guarantees">20. &#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3691">20.1. &#20107;&#21153;&#20445;&#35777;</a></span></dt><dt><span class="section"><a href="#non-transactional-sends">20.2. &#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;</a></span></dt><dt><span class="section"><a href="#send-guarantees.nontrans.acks">20.3. &#38750;&#20107;&#21153;&#24615;&#36890;&#30693;&#30340;&#20445;&#35777;</a></span></dt><dt><span class="section"><a href="#asynchronous-send-acknowledgements">20.4. &#24322;&#27493;&#21457;&#36865;&#36890;&#30693;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3827">20.4.1. &#24322;&#27493;&#21457;&#36865;&#36890;&#30693;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#undelivered-messages">21. &#28040;&#24687;&#20877;&#20256;&#36882;&#21450;&#26410;&#20256;&#36882;&#30340;&#28040;&#24687;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e3892">21.1. &#24310;&#36831;&#20877;&#20256;&#36882;</a></span></dt><dd><dl><dt><span class="section"><a href="#undelivered-messages.delay">21.1.1. &#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e3918">21.1.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e3925">21.2. &#27515;&#20449;&#22320;&#22336;</a></span></dt><dd><dl><dt><span class="section"><a href="#undelivered-messages.configuring">21.2.1. &#37197;&#32622;&#27515;&#20449;&#22320;&#22336;</a></span></dt><dt><span class="section"><a href="#d0e3969">21.2.2. &#27515;&#20449;&#30340;&#23646;&#24615;</a></span></dt><dt><span class="section"><a href="#d0e3984">21.2.3. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#configuring.delivery.count.persistence">21.3. &#20256;&#36882;&#35745;&#25968;&#30340;&#25345;&#20037;&#21270;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#message-expiry">22. &#36807;&#26399;&#30340;&#28040;&#24687;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4054">22.1. &#36807;&#26399;&#28040;&#24687;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#message-expiry.configuring">22.2. &#37197;&#32622;&#36807;&#26399;&#22320;&#22336;</a></span></dt><dt><span class="section"><a href="#configuring.expiry.reaper">22.3. &#37197;&#32622;&#36807;&#26399;&#22238;&#25910;&#32447;&#31243;</a></span></dt><dt><span class="section"><a href="#d0e4123">22.4. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#large-messages">23. &#22823;&#28040;&#24687;</a></span></dt><dd><dl><dt><span class="section"><a href="#large.message.configuring">23.1. &#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e4190">23.2. &#35774;&#23450;&#38480;&#21046;</a></span></dt><dd><dl><dt><span class="section"><a href="#large-messages.core.config">23.2.1. &#20351;&#29992;&#26680;&#24515;&#30340;API</a></span></dt><dt><span class="section"><a href="#d0e4213">23.2.2. &#20351;&#29992;JMS</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4228">23.3. &#22823;&#28040;&#24687;&#19982;&#27969;&#65288;stream&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4260">23.3.1. &#26680;&#24515;API&#20013;&#27969;&#30340;&#20351;&#29992;</a></span></dt><dt><span class="section"><a href="#large-messages.streaming.over.jms">23.3.2. &#22312;JMS&#20013;&#20351;&#29992;&#27969;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4353">23.4. &#19981;&#20351;&#29992;&#27969;&#30340;&#26041;&#24335;</a></span></dt><dt><span class="section"><a href="#large-messages.cache.client">23.5. &#22312;&#23458;&#25143;&#31471;&#32531;&#23384;&#22823;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#large-messages.example">23.6. &#22823;&#28040;&#24687;&#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#paging">24. &#20998;&#39029;&#36716;&#23384;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4422">24.1. &#20998;&#39029;&#25991;&#20214;</a></span></dt><dt><span class="section"><a href="#paging.main.config">24.2. &#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#paging.mode">24.3. &#20998;&#39029;&#36716;&#23384;&#27169;&#24335;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4477">24.3.1. &#37197;&#32622;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e4532">24.4. &#20002;&#24323;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#d0e4545">24.5. &#38459;&#22622;&#21457;&#36865;&#32773;&#65288;producer&#65289;</a></span></dt><dt><span class="section"><a href="#d0e4562">24.6. &#23545;&#20110;&#26377;&#22810;&#20010;&#38431;&#21015;&#32465;&#23450;&#30340;&#22320;&#22336;&#30340;&#37197;&#32622;&#27880;&#24847;&#20107;&#39033;</a></span></dt><dt><span class="section"><a href="#d0e4584">24.7. &#20998;&#39029;&#36716;&#23384;&#19982;&#28040;&#24687;&#30340;&#36873;&#25321;&#22120;&#65288;selector&#65289;</a></span></dt><dt><span class="section"><a href="#d0e4590">24.8. &#20998;&#39029;&#36716;&#23384;&#19982;&#27983;&#35272;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e4599">24.9. &#20998;&#39029;&#36716;&#23384;&#19982;&#26410;&#36890;&#30693;&#30340;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#d0e4611">24.10. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#queue-attributes">25. &#38431;&#21015;&#23646;&#24615;</a></span></dt><dd><dl><dt><span class="section"><a href="#predefined.queues">25.1. &#39044;&#23450;&#20041;&#30340;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e4689">25.2. &#20351;&#29992;&#25509;&#21475;&#65288;API&#65289;&#21019;&#24314;&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#queue-attributes.address-settings">25.3. &#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#scheduled-messages">26. &#23450;&#26399;&#28040;&#24687;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4833">26.1. &#23450;&#26399;&#20256;&#36882;&#21442;&#25968;</a></span></dt><dt><span class="section"><a href="#d0e4850">26.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#last-value-queues">27. &#26368;&#26032;&#20540;&#38431;&#21015;&#65288;Last-Value Queues&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4881">27.1. &#26368;&#26032;&#20540;&#38431;&#21015;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e4895">27.2. &#20351;&#29992;Last-Value&#21442;&#25968;</a></span></dt><dt><span class="section"><a href="#d0e4910">27.3. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#message-grouping">28. &#28040;&#24687;&#20998;&#32452;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e4958">28.1. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;</a></span></dt><dt><span class="section"><a href="#message-grouping.jmsconfigure">28.2. &#20351;&#29992;JMS</a></span></dt><dt><span class="section"><a href="#d0e5008">28.3. &#20363;&#23376;</a></span></dt><dt><span class="section"><a href="#d0e5015">28.4. &#20363;&#23376;</a></span></dt><dt><span class="section"><a href="#d0e5021">28.5. &#38598;&#32676;&#20013;&#30340;&#28040;&#24687;&#32452;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5047">28.5.1. &#38598;&#32676;&#28040;&#24687;&#32452;&#30340;&#26368;&#20339;&#20351;&#29992;&#24815;&#20363;</a></span></dt><dt><span class="section"><a href="#d0e5062">28.5.2. &#38598;&#32676;&#28040;&#24687;&#32452;&#20363;&#23376;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#pre-acknowledge">29. &#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#pre-acknowledge.configure">29.1. &#20351;&#29992;PRE_ACKNOWLEDGE</a></span></dt><dt><span class="section"><a href="#d0e5156">29.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#management">30. &#31649;&#29702;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5210">30.1. &#31649;&#29702;&#25509;&#21475;API</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5256">30.1.1. &#26680;&#24515;&#31649;&#29702;&#25509;&#21475;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5261">30.1.1.1. &#26680;&#24515;&#26381;&#21153;&#22120;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5406">30.1.1.2. &#26680;&#24515;&#22320;&#22336;&#30340;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5435">30.1.1.3. &#26680;&#24515;&#38431;&#21015;&#30340;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5550">30.1.1.4. &#20854;&#23427;&#26680;&#24515;&#36164;&#28304;&#30340;&#31649;&#29702;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e5706">30.1.2. JMS&#31649;&#29702;&#25509;&#21475;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e5714">30.1.2.1. JMS&#26381;&#21153;&#22120;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5807">30.1.2.2. JMS&#36830;&#25509;&#24037;&#21378;&#30340;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5832">30.1.2.3. JMS&#38431;&#21015;&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e5943">30.1.2.4. JMS&#35805;&#39064;&#65288;Topic&#65289;&#30340;&#31649;&#29702;</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#management.jmx">30.2. &#20351;&#29992;JMX</a></span></dt><dd><dl><dt><span class="section"><a href="#management.jmx.configuration">30.2.1. &#37197;&#32622;JMX</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6078">30.2.1.1. MBeanServer&#30340;&#37197;&#32622;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6094">30.2.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6101">30.3. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;</a></span></dt><dd><dl><dt><span class="section"><a href="#management.core.configuration">30.3.1. &#37197;&#32622;&#26680;&#24515;&#31649;&#29702;</a></span></dt></dl></dd><dt><span class="section"><a href="#management.jms">30.4. &#20351;&#29992;JMS&#36827;&#34892;&#31649;&#29702;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6278">30.4.1. &#37197;&#32622;JMS&#31649;&#29702;</a></span></dt><dt><span class="section"><a href="#d0e6285">30.4.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#management.notifications">30.5. &#31649;&#29702;&#36890;&#30693;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6312">30.5.1. JMX&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#d0e6336">30.5.2. &#26680;&#24515;&#28040;&#24687;&#36890;&#30693;</a></span></dt><dd><dl><dt><span class="section"><a href="#management.notifications.core.configuration">30.5.2.1. &#37197;&#32622;&#26680;&#24515;&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6365">30.5.3. JMS&#28040;&#24687;&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#d0e6389">30.5.4. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#management.message-counters">30.6. &#28040;&#24687;&#35745;&#25968;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#configuring.message.counters">30.6.1. &#37197;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e6495">30.6.2. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6502">30.7. &#36890;&#36807;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;Admin Console&#26469;&#31649;&#29702;HornetQ&#30340;&#36164;&#28304;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6511">30.7.1. JMS&#38431;&#21015;</a></span></dt><dt><span class="section"><a href="#d0e6536">30.7.2. JMS&#35805;&#39064;</a></span></dt><dt><span class="section"><a href="#d0e6541">30.7.3. JMS&#36830;&#25509;&#24037;&#21378;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#security">31. &#23433;&#20840;</a></span></dt><dd><dl><dt><span class="section"><a href="#security.settings.roles">31.1. &#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;</a></span></dt><dt><span class="section"><a href="#d0e6734">31.2. &#23433;&#20840;&#22871;&#25509;&#23383;&#23618;(SSL)&#20256;&#36755;</a></span></dt><dt><span class="section"><a href="#d0e6743">31.3. &#22522;&#26412;&#29992;&#25143;&#36523;&#20221;&#20449;&#24687;&#65288;Credentials&#65289;</a></span></dt><dt><span class="section"><a href="#change-security-manager">31.4. &#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e6829">31.5. JAAS&#23433;&#20840;&#31649;&#29702;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6862">31.5.1. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6869">31.6. JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#23433;&#20840;&#31649;&#29702;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6884">31.6.1. &#37197;&#32622;&#23458;&#25143;&#31471;&#30331;&#24405;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e6903">31.7. &#38598;&#32676;&#29992;&#25143;&#21517;&#65295;&#23494;&#30721;&#30340;&#37197;&#32622;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#appserver-integration">32. Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6940">32.1. &#37197;&#32622;&#28040;&#24687;Bean</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e6990">32.1.1. &#20351;&#29992;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;&#65288;CMT&#65289;</a></span></dt><dt><span class="section"><a href="#d0e7021">32.1.2. &#20351;&#29992;Bean&#31649;&#29702;&#20107;&#21153;&#65288;BMT&#65289;</a></span></dt><dt><span class="section"><a href="#d0e7043">32.1.3. &#22312;MDB&#20013;&#20351;&#29992;&#36873;&#25321;&#22120;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7050">32.2. &#22312;JEE&#27169;&#22359;&#20869;&#21457;&#36865;&#28040;&#24687;</a></span></dt><dt><span class="section"><a href="#d0e7067">32.3. MDB&#19982;&#25509;&#25910;&#27744;&#30340;&#22823;&#23567;</a></span></dt><dt><span class="section"><a href="#d0e7080">32.4. &#37197;&#32622;JCA&#36866;&#37197;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7109">32.4.1. &#36866;&#37197;&#22120;&#30340;&#20840;&#23616;&#21442;&#25968;</a></span></dt><dt><span class="section"><a href="#d0e7438">32.4.2. &#36866;&#37197;&#22120;&#22806;&#37096;&#65288;outbound&#65289;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e7506">32.4.3. &#36866;&#37197;&#22120;&#20869;&#37096;&#65288;inbound&#65289;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e7615">32.4.4. &#37197;&#32622;&#36866;&#37197;&#22120;&#35775;&#38382;&#21333;&#29420;&#30340;HornetQ&#26381;&#21153;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7620">32.4.4.1. </a></span></dt></dl></dd><dt><span class="section"><a href="#d0e7750">32.4.5. &#39640;&#21487;&#33719;&#24471;&#24615;JNDI (HA-JNDI)</a></span></dt><dt><span class="section"><a href="#xa-recovery">32.4.6. XA&#24674;&#22797;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7778">32.4.6.1. XA&#24674;&#22797;&#30340;&#37197;&#32622;</a></span></dt><dt><span class="section"><a href="#d0e7873">32.4.6.2. &#20363;&#23376;</a></span></dt></dl></dd></dl></dd></dl></dd><dt><span class="chapter"><a href="#jms-bridge">33. JMS&#26725;&#65288;Bridge&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e7928">33.1. JMS&#26725;&#30340;&#37197;&#32622;&#21442;&#25968;</a></span></dt><dt><span class="section"><a href="#d0e8133">33.2. &#28304;&#21644;&#30446;&#30340;&#30340;&#36830;&#25509;&#24037;&#21378;</a></span></dt><dt><span class="section"><a href="#d0e8143">33.3. &#28304;&#21644;&#30446;&#30340;&#30340;&#30446;&#26631;&#24037;&#21378;</a></span></dt><dt><span class="section"><a href="#quality-of-service">33.4. &#26381;&#21153;&#36136;&#37327;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e8160">33.4.1. AT_MOST_ONCE</a></span></dt><dt><span class="section"><a href="#d0e8167">33.4.2. DUPLICATES_OK</a></span></dt><dt><span class="section"><a href="#d0e8174">33.4.3. ONCE_AND_ONLY_ONCE</a></span></dt><dt><span class="section"><a href="#d0e8184">33.4.4. JMS bridge&#20013;&#30340;&#36229;&#26102;&#38382;&#39064;</a></span></dt><dt><span class="section"><a href="#d0e8211">33.4.5. &#20363;&#23376;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#client-reconnection">34. &#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e8244">34.1. 100%&#36879;&#26126;&#30340;&#20250;&#35805;&#24674;&#22797;&#65288;re-attachment&#65289;</a></span></dt><dt><span class="section"><a href="#d0e8293">34.2. &#20250;&#35805;&#37325;&#26032;&#36830;&#25509;</a></span></dt><dt><span class="section"><a href="#d0e8312">34.3. &#37325;&#26032;&#36830;&#25509;&#65295;&#20250;&#35805;&#24674;&#22797;&#30340;&#37197;&#32622;&#21442;&#25968;</a></span></dt><dt><span class="section"><a href="#client-reconnection.exceptionlistener">34.4. ExceptionListeners and SessionFailureListeners</a></span></dt></dl></dd><dt><span class="chapter"><a href="#diverts">35. &#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e8487">35.1. &#21807;&#19968;&#24335;&#36716;&#21457;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e8525">35.2. &#19981;&#21807;&#19968;&#36716;&#21457;&#22120;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#core-bridges">36. &#26680;&#24515;&#26725;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e8596">36.1. &#26725;&#30340;&#37197;&#32622;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#duplicate-detection">37. &#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e8862">37.1. &#22312;&#28040;&#24687;&#21457;&#36865;&#20013;&#24212;&#29992;&#37325;&#22797;&#26816;&#27979;</a></span></dt><dt><span class="section"><a href="#duplicate.id.cache">37.2. &#37197;&#32622;&#37325;&#22797;ID&#32531;&#23384;</a></span></dt><dt><span class="section"><a href="#d0e8949">37.3. &#26725;&#19982;&#37325;&#22797;&#26816;&#27979;</a></span></dt><dt><span class="section"><a href="#d0e8974">37.4. &#37325;&#22797;&#26816;&#27979;&#19982;&#38598;&#32676;&#36830;&#25509;</a></span></dt><dt><span class="section"><a href="#d0e8999">37.5. &#20998;&#39029;&#36716;&#23384;&#19982;&#37325;&#22797;&#26816;&#27979;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#clusters">38. &#38598;&#32676;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e9028">38.1. &#38598;&#32676;&#27010;&#36848;</a></span></dt><dt><span class="section"><a href="#clusters.server-discovery">38.2. &#26381;&#21153;&#22120;&#21457;&#29616;</a></span></dt><dd><dl><dt><span class="section"><a href="#clusters.broadcast-groups">38.2.1. &#24191;&#25773;&#32452;</a></span></dt><dt><span class="section"><a href="#clusters.discovery-groups">38.2.2. &#21457;&#29616;&#32452;</a></span></dt><dt><span class="section"><a href="#d0e9193">38.2.3. &#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#21457;&#29616;&#32452;&#12290;</a></span></dt><dt><span class="section"><a href="#clusters-discovery.groups.clientside">38.2.4. &#23458;&#25143;&#31471;&#30340;&#21457;&#29616;&#32452;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e9251">38.2.4.1. &#20351;&#29992;JMS&#26102;&#23458;&#25143;&#31471;&#21457;&#29616;&#30340;&#37197;&#32622;&#26041;&#27861;</a></span></dt><dt><span class="section"><a href="#d0e9290">38.2.4.2. &#20351;&#29992;&#26680;&#24515;API&#30340;&#23458;&#25143;&#31471;&#30340;&#37197;&#32622;</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#d0e9317">38.3. &#26381;&#21153;&#22120;&#31471;&#28040;&#24687;&#30340;&#36127;&#36733;&#22343;&#34913;</a></span></dt><dd><dl><dt><span class="section"><a href="#clusters.cluster-connections">38.3.1. &#37197;&#32622;&#38598;&#32676;&#36830;&#25509;</a></span></dt><dt><span class="section"><a href="#clusters.clusteruser">38.3.2. &#38598;&#32676;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;</a></span></dt></dl></dd><dt><span class="section"><a href="#clusters.client.loadbalancing">38.4. &#23458;&#25143;&#31471;&#36127;&#36733;&#22343;&#34913;</a></span></dt><dt><span class="section"><a href="#d0e9521">38.5. &#26174;&#24335;&#25351;&#23450;&#38598;&#32676;&#26381;&#21153;&#22120;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e9528">38.5.1. &#22312;&#23458;&#25143;&#31471;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e9533">38.5.1.1. &#20351;&#29992;JMS&#26102;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</a></span></dt><dt><span class="section"><a href="#d0e9596">38.5.1.2. &#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</a></span></dt></dl></dd><dt><span class="section"><a href="#clusters.static.servers">38.5.2. &#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;</a></span></dt></dl></dd><dt><span class="section"><a href="#clusters.message-redistribution">38.6. &#28040;&#24687;&#20877;&#20998;&#37197;</a></span></dt><dt><span class="section"><a href="#d0e9721">38.7. &#38598;&#32676;&#25299;&#25169;&#32467;&#26500;</a></span></dt><dd><dl><dt><span class="section"><a href="#symmetric-cluster">38.7.1. &#23545;&#31216;&#24335;&#38598;&#32676;</a></span></dt><dt><span class="section"><a href="#d0e9743">38.7.2. &#38142;&#24335;&#38598;&#32676;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ha">39. &#39640;&#21487;&#33719;&#24471;&#24615;&#65288;High Availability&#65289;&#21644;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e9793">39.1. &#20027;&#35201;&#65293;&#22791;&#20221;&#23545;</a></span></dt><dd><dl><dt><span class="section"><a href="#ha.mode">39.1.1. &#39640;&#21487;&#33719;&#24471;&#24615;&#65288;HA&#65289;&#30340;&#27169;&#24335;</a></span></dt><dd><dl><dt><span class="section"><a href="#ha.mode.replicated">39.1.1.1. &#25968;&#25454;&#22797;&#21046;</a></span></dt><dt><span class="section"><a href="#ha.mode.shared">39.1.1.2. &#23384;&#36142;&#20849;&#20139;</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#failover">39.2. &#22833;&#25928;&#22791;&#25588;&#30340;&#27169;&#24335;</a></span></dt><dd><dl><dt><span class="section"><a href="#ha.automatic.failover">39.2.1. &#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;</a></span></dt><dd><dl><dt><span class="section"><a href="#ha.automatic.failover.noteonreplication">39.2.1.1. &#20851;&#20110;&#26381;&#21153;&#22120;&#30340;&#22797;&#21046;</a></span></dt><dt><span class="section"><a href="#ha.automatic.failover.blockingcalls">39.2.1.2. &#22833;&#25928;&#22791;&#25588;&#26102;&#38459;&#22622;&#35843;&#29992;&#30340;&#22788;&#29702;</a></span></dt><dt><span class="section"><a href="#ha.automatic.failover.transactions">39.2.1.3. &#20107;&#21153;&#30340;&#22833;&#25928;&#22791;&#25588;&#22788;&#29702;</a></span></dt><dt><span class="section"><a href="#ha.automatic.failover.nontransactional">39.2.1.4. &#38750;&#20107;&#21153;&#20250;&#35805;&#30340;&#22833;&#25928;&#22791;&#25588;&#22788;&#29702;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e10112">39.2.2. &#36830;&#25509;&#25925;&#38556;&#30340;&#36890;&#30693;</a></span></dt><dt><span class="section"><a href="#d0e10130">39.2.3. &#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#libaio">40. Libaio&#24179;&#21488;&#19987;&#26377;&#24211;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10202">40.1. &#24211;&#25991;&#20214;&#30340;&#32534;&#35793;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10207">40.1.1. &#23433;&#35013;&#35201;&#27714;</a></span></dt><dt><span class="section"><a href="#d0e10257">40.1.2. &#24320;&#22987;&#32534;&#35793;</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#thread-pooling">41. &#32447;&#31243;&#31649;&#29702;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10316">41.1. &#26381;&#21153;&#22120;&#31471;&#32447;&#31243;&#30340;&#31649;&#29702;</a></span></dt><dd><dl><dt><span class="section"><a href="#server.scheduled.thread.pool">41.1.1. &#26381;&#21153;&#22120;&#31471;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;</a></span></dt><dt><span class="section"><a href="#d0e10354">41.1.2. &#26381;&#21153;&#22120;&#36890;&#29992;&#32447;&#31243;&#27744;</a></span></dt><dt><span class="section"><a href="#d0e10392">41.1.3. &#36807;&#26399;&#22238;&#25910;&#32447;&#31243;</a></span></dt><dt><span class="section"><a href="#d0e10401">41.1.4. &#24322;&#27493;IO</a></span></dt></dl></dd><dt><span class="section"><a href="#thread-pooling.client.side">41.2. &#23458;&#25143;&#31471;&#32447;&#31243;&#31649;&#29702;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#logging">42. &#26085;&#24535;&#65288;Logging&#65289;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10513">42.1. &#19982;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#26085;&#24535;&#30340;&#20851;&#31995;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#embedding-hornetq">43. &#23884;&#20837;&#24335;HornetQ</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10550">43.1. POJO&#30340;&#21021;&#22987;&#21270;</a></span></dt><dt><span class="section"><a href="#d0e10590">43.2. &#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#26694;&#26550;</a></span></dt><dt><span class="section"><a href="#d0e10627">43.3. &#36830;&#25509;&#23884;&#20837;&#24335;HornetQ</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10632">43.3.1. &#26680;&#24515;&#25509;&#21475;</a></span></dt><dt><span class="section"><a href="#d0e10642">43.3.2. JMS&#25509;&#21475;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e10652">43.4. JMS&#23884;&#20837;&#24335;HornetQ&#30340;&#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#intercepting-operations">44. &#25318;&#25130;&#25805;&#20316;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10684">44.1. &#23454;&#29616;&#25318;&#25130;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e10709">44.2. &#37197;&#32622;&#25318;&#25130;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e10721">44.3. &#23458;&#25143;&#31471;&#25318;&#25130;&#22120;</a></span></dt><dt><span class="section"><a href="#d0e10737">44.4. &#20363;&#23376;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#interoperability">45. &#20114;&#25805;&#20316;&#24615;</a></span></dt><dd><dl><dt><span class="section"><a href="#stomp">45.1. Stomp</a></span></dt><dd><dl><dt><span class="section"><a href="#stomp.native">45.1.1. &#20869;&#24314;Stomp&#25903;&#25345;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10800">45.1.1.1. &#38480;&#21046;</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e10808">45.1.2. Stomp&#30446;&#26631;&#19982;HornetQ&#30340;&#22320;&#22336;&#21644;&#38431;&#21015;&#30340;&#26144;&#23556;</a></span></dt><dt><span class="section"><a href="#d0e10833">45.1.3. Stomp&#19982;JMS&#30340;&#20114;&#25805;&#20316;&#24615;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e10836">45.1.3.1. &#20351;&#29992;JMS&#30446;&#26631;</a></span></dt><dt><span class="section"><a href="#d0e10876">45.1.3.2. &#20351;&#29992;JMS&#25110;&#26680;&#24515;&#25509;&#21475;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;</a></span></dt></dl></dd><dt><span class="section"><a href="#stomp.websockets">45.1.4. &#36890;&#36807;Web Sockets&#20351;&#29992;Stomp</a></span></dt><dt><span class="section"><a href="#stompconnect">45.1.5. StompConnect</a></span></dt></dl></dd><dt><span class="section"><a href="#d0e10974">45.2. REST</a></span></dt><dt><span class="section"><a href="#d0e10979">45.3. AMQP</a></span></dt></dl></dd><dt><span class="chapter"><a href="#perf-tuning">46. &#24615;&#33021;&#35843;&#20248;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e11006">46.1. &#25345;&#20037;&#23618;&#30340;&#20248;&#21270;</a></span></dt><dt><span class="section"><a href="#d0e11037">46.2. &#20248;&#21270;JMS</a></span></dt><dt><span class="section"><a href="#d0e11094">46.3. &#20854;&#23427;&#20248;&#21270;</a></span></dt><dt><span class="section"><a href="#d0e11196">46.4. &#20256;&#36755;&#23618;&#30340;&#20248;&#21270;</a></span></dt><dt><span class="section"><a href="#d0e11245">46.5. &#20248;&#21270;&#34394;&#25311;&#26426;</a></span></dt><dt><span class="section"><a href="#d0e11280">46.6. &#36991;&#20813;&#36829;&#32972;&#35774;&#35745;&#27169;&#24335;</a></span></dt></dl></dd><dt><span class="chapter"><a href="#configuration-index">47. &#37197;&#32622;&#21442;&#25968;&#32034;&#24341;</a></span></dt><dd><dl><dt><span class="section"><a href="#server.configuration">47.1. &#26381;&#21153;&#22120;&#37197;&#32622;</a></span></dt><dd><dl><dt><span class="section"><a href="#d0e11324">47.1.1. hornetq-configuration.xml</a></span></dt><dt><span class="section"><a href="#d0e12548">47.1.2. hornetq-jms.xml</a></span></dt></dl></dd></dl></dd></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="notice"></a>Chapter&nbsp;1.&nbsp;&#27861;&#24459;&#22768;&#26126;</h2></div></div><div></div></div><p>Red Hat, Inc. &#20197;&#21450;&#20854;&#20182;&#20844;&#21496;2010&#24180;&#29256;&#26435;&#25152;&#26377;&#12290;</p><p>Red Hat&#20844;&#21496;&#20381;&#29031; CC-BY-SA 3.0 Unported(Creative Commons 
              Attribution-Share Alike)&#26465;&#27454;&#20043;&#35268;&#23450;&#25480;&#26435;&#29992;&#25142;&#26159;&#29992;&#26412;&#25163;&#20876;&#20013;&#30340;&#25991;&#23383;&#21644;&#25554;&#22270;&#12290;</p><p>&#26377;&#20851; CC-BY-SA &#30340;&#35299;&#37322;&#35831;&#35775;&#38382;<a href="http://creativecommons.org/licenses/by-sa/3.0/" target="_top">http://creativecommons.org/licenses/by-sa/3.0/</a>&#12290;&#26681;&#25454;CC&#65293;BY&#65293;SA&#30340;&#35268;&#23450;&#65292;&#22914;&#26524;&#35201;&#21457;&#24067;&#26412;&#25991;&#26723;&#25110;&#20219;&#20309;&#26412;&#25991;&#26723;&#30340;&#20462;&#25913;&#29256;&#26412;&#65292;&#37117;&#24517;&#39035;&#32473;&#20986;&#21407;&#22987;&#29256;&#26412;&#25991;&#26723;&#30340;URL&#12290;</p><p>Red Hat &#20316;&#20026;&#26412;&#25991;&#26723;&#30340;&#25480;&#26435;&#26041;&#22768;&#26126;&#22312;&#30456;&#20851;&#27861;&#24459;&#20801;&#35768;&#30340;&#26368;&#22823;&#33539;&#22260;&#20869;&#25918;&#24323;CC-BY-SA&#31532;4d&#33410;&#25152;&#35268;&#23450;&#30340;&#26435;&#21033;&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="preface"></a>Chapter&nbsp;2.&nbsp;&#21069;&#35328;</h2></div></div><div></div></div><p>&#20160;&#20040;&#26159;HornetQ&#65311;</p><div class="itemizedlist"><ul type="disc"><li><p>HornetQ &#26159;&#19968;&#20010;&#24320;&#28304;&#30340;&#36719;&#20214;&#39033;&#30446;&#12290;&#23427;&#30340;&#30446;&#26631;&#26159;&#19968;&#20010;&#22810;&#21327;&#35758;&#12289;&#21487;&#23884;&#20837;&#12289;&#39640;&#24615;&#33021;&#12289;&#21487;&#38598;&#32676;&#30340;&#24322;&#27493;&#28040;&#24687;&#31995;&#32479;&#12290;</p></li><li><p>HornetQ &#26159;&#19968;&#20010;&#28040;&#24687;&#20013;&#38388;&#20214;&#65288;MoM&#65289;&#12290;&#26377;&#20851;MoM&#21644;&#20854;&#23427;&#28040;&#24687;&#30456;&#20851;&#30340;&#27010;&#24565;&#35299;&#37322;&#35831;&#21442;&#35265; <a href="#messaging-concepts" title="Chapter&nbsp;4.&nbsp;&#28040;&#24687;&#30340;&#30456;&#20851;&#27010;&#24565;">Chapter&nbsp;4, <i>&#28040;&#24687;&#30340;&#30456;&#20851;&#27010;&#24565;</i></a>&#12290;</p></li><li><p>&#35201;&#20102;&#35299;&#26377;&#20851;HornetQ&#30340;&#26356;&#22810;&#20449;&#24687;&#35831;&#35775;&#38382; <a href="http://www.jboss.org/community/wiki/HornetQGeneralFAQs" target="_top">http://www.jboss.org/community/wiki/HornetQGeneralFAQs</a>&#12290;</p></li></ul></div><p>&#20026;&#20160;&#20040;&#35201;&#20351;&#29992;HornetQ&#65311; &#20197;&#19979;&#32473;&#20986;&#20102;&#20960;&#20010;&#29702;&#30001;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>HornetQ&#26159;100%&#30340;&#24320;&#28304;&#36719;&#20214;&#12290; HornetQ &#37319;&#29992; Apache v 2.0&#24320;&#28304;&#21327;&#35758;&#65292;&#23545;&#29992;&#25143;&#30340;&#38480;&#21046;&#26368;&#23567;&#12290;</p></li><li><p>HornetQ&#30340;&#35774;&#35745;&#24378;&#35843;&#21487;&#29992;&#24615;&#12290;</p></li><li><p>&#37319;&#29992;Java&#35821;&#35328;&#32534;&#20889;&#12290;&#21487;&#20197;&#22312;&#20219;&#20309;Java 6+ &#30340;&#24179;&#21488;&#19978;&#36816;&#34892;&#12290;&#36825;&#20960;&#20046;&#21253;&#25324;&#20102;&#20174;Windows&#21040;IBM mainframes&#30340;&#27599;&#20010;&#24179;&#21488;&#12290;</p></li><li><p>&#24615;&#33021;&#20986;&#20247;&#12290;&#19981;&#20294;&#23545;&#38750;&#25345;&#20037;&#21270;&#28040;&#24687;&#30340;&#22788;&#29702;&#24615;&#33021;&#36798;&#21040;&#20102;&#38750;&#24120;&#39640;&#30340;&#24615;&#33021;&#12290;&#29420;&#29305;&#39640;&#25928;&#30340;&#26085;&#24535;&#65288;journal&#65289;&#20351;&#25345;&#20037;&#28040;&#24687;&#22788;&#29702;&#25509;&#36817;&#38750;&#25345;&#20037;&#28040;&#24687;&#30340;&#24615;&#33021;&#12290;</p></li><li><p>&#21151;&#33021;&#20840;&#38754;&#12290;&#19981;&#20165;&#25317;&#26377;&#20854;&#23427;&#25104;&#29087;&#28040;&#24687;&#20135;&#21697;&#25152;&#20855;&#26377;&#30340;&#20840;&#37096;&#21151;&#33021;&#65292;&#32780;&#19988;&#36824;&#26377;&#24456;&#22810;&#29420;&#29305;&#30340;&#21151;&#33021;&#12290;</p></li><li><p>HornetQ&#30340;&#35774;&#35745;&#36981;&#20174;&#20102;&#31616;&#32422;&#30340;&#21407;&#21017;&#12290;&#23545;&#31532;&#19977;&#26041;&#36719;&#20214;&#30340;&#20381;&#36182;&#26497;&#23569;&#12290;&#26681;&#25454;&#19981;&#21516;&#30340;&#38656;&#35201;&#65292;
                  HornetQ&#21487;&#20197;&#21333;&#29420;&#36816;&#34892;&#65292;&#20063;&#21487;&#20197;&#36816;&#34892;&#20110;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#12290;&#23427;&#36824;&#21487;&#20197;&#23884;&#20837;&#21040;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#12290;</p></li><li><p>&#23436;&#32654;&#30340;&#21487;&#33719;&#24471;&#24615;&#12290;HornetQ&#25552;&#20379;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;&#65288;automatic client failover&#65289;&#21151;&#33021;&#65292;&#33021;&#20445;&#35777;&#22312;&#26381;&#21153;&#22120;&#25925;&#38556;&#26102;&#27809;&#26377;&#28040;&#24687;&#20002;&#22833;&#25110;&#28040;&#24687;&#37325;&#22797;&#12290;</p></li><li><p>&#36229;&#32423;&#28789;&#27963;&#30340;&#38598;&#32676;&#26041;&#26696;&#12290;&#21487;&#20197;&#25511;&#21046;&#38598;&#32676;&#36827;&#34892;&#28040;&#24687;&#36127;&#36733;&#22343;&#34913;&#30340;&#26041;&#24335;&#12290;&#20998;&#24067;&#22312;&#19981;&#21516;&#22320;&#29702;&#20301;&#32622;&#30340;&#21508;&#20010;&#38598;&#32676;&#38388;&#21487;&#20197;&#36890;&#36807;&#38750;&#21487;&#38752;&#30340;&#32593;&#32476;&#36830;&#25509;&#24418;&#25104;&#19968;&#20010;&#20840;&#29699;&#32593;&#32476;&#12290;
                  &#36824;&#21487;&#20197;&#38750;&#24120;&#28789;&#27963;&#22320;&#37197;&#32622;&#28040;&#24687;&#36335;&#30001;&#12290;</p></li><li><p>&#35831;&#35775;&#38382; <a href="http://www.jboss.org/community/wiki/HornetQFeatures" target="_top">wiki
                    </a>&#26469;&#20840;&#38754;&#20102;&#35299;HornetQ&#30340;&#25152;&#26377;&#21151;&#33021;&#20171;&#32461;&#12290;</p></li></ul></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="project-info"></a>Chapter&nbsp;3.&nbsp;&#39033;&#30446;&#20449;&#24687;</h2></div></div><div></div></div><p>HornetQ&#30340;&#23448;&#26041;&#32593;&#22336;&#26159; <a href="http://hornetq.org/" target="_top">http://hornetq.org/</a>.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="download.software"></a>3.1.&nbsp;&#36719;&#20214;&#19979;&#36733;</h2></div></div><div></div></div><p>HornetQ&#30340;&#19979;&#36733;&#22320;&#22336;&#20026;&#65306;<a href="http://hornetq.org/downloads.html" target="_top">http://hornetq.org/downloads.html</a></p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="download.svn"></a>3.2.&nbsp;&#20854;&#23427;&#30456;&#20851;&#20449;&#24687;</h2></div></div><div></div></div><p>
         </p><div class="itemizedlist"><ul type="disc"><li><p>HornetQ&#30340; <a href="http://www.jboss.org/community/wiki/HornetQ" target="_top">wiki</a></p></li><li><p>&#22914;&#26524;&#22312;&#20351;&#29992;HornetQ&#20013;&#21457;&#29983;&#20219;&#20309;&#38382;&#39064;&#65292;&#21487;&#20197;&#21435;&#25105;&#20204;&#30340; <a href="http://www.jboss.org/index.html?module=bb&amp;op=viewforum&amp;f=312" target="_top">&#29992;&#25143;&#35770;&#22363;
                     </a></p></li><li><p>&#22914;&#26524;&#20320;&#26377;&#24320;&#21457;&#26041;&#38754;&#30340;&#38382;&#39064;&#19982;&#24819;&#27861;&#65292;&#35831;&#35775;&#38382;&#25105;&#20204;&#30340; <a href="http://www.jboss.org/index.html?module=bb&amp;op=viewforum&amp;f=313" target="_top">&#24320;&#21457;&#35770;&#22363;</a></p></li><li><p>&#35831;&#21152;&#20837;&#25105;&#20204;&#30340;<a href="irc://irc.freenode.net:6667/hornetq" target="_top">IRC&#39057;&#36947;</a>&#19982;&#25105;&#20204;&#30340;&#26680;&#24515;&#24320;&#21457;&#24037;&#31243;&#24072;&#20132;&#27969;&#12290;</p></li><li><p>&#25105;&#20204;&#39033;&#30446;&#26377;&#33258;&#24049;&#30340; <a href="http://hornetq.blogspot.com/" target="_top">&#21338;&#23458;</a></p></li><li><p>&#36824;&#21487;&#20197;&#36319;&#36394;&#25105;&#20204;&#30340;<a href="http://twitter.com/hornetq" target="_top">twitter</a></p></li><li><p>HornetQ&#30340;Subversion&#20195;&#30721;&#24211;&#22320;&#22336; <a href="http://anonsvn.jboss.org/repos/hornetq/trunk" target="_top">http://anonsvn.jboss.org/repos/hornetq/trunk</a></p></li><li><p>&#27599;&#27425;&#21457;&#24067;&#30340;&#29256;&#26412;&#26631;&#31614;&#37117;&#22312;<a href="http://anonsvn.jboss.org/repos/hornetq/tags" target="_top">http://anonsvn.jboss.org/repos/hornetq/tags</a>&#19979;&#33021;&#25214;&#21040;&#12290;</p></li></ul></div><p>
      </p><p>Red Hat &#20844;&#21496;&#32856;&#35831;&#20840;&#32844;&#24037;&#31243;&#24072;&#36827;&#34892;HornetQ&#39033;&#30446;&#30340;&#24320;&#21457;&#24037;&#20316;&#65292;&#20182;&#20204;&#26159;&#65306; </p><div class="itemizedlist"><ul type="disc"><li><p>
                  <a href="http://jbossfox.blogspot.com" target="_top">Tim Fox</a> (&#39033;&#30446;&#20027;&#31649;)</p></li><li><p>Howard Gao</p></li><li><p><a href="http://jmesnil.net/weblog/" target="_top">Jeff Mesnil</a></p></li><li><p>Clebert Suconic</p></li><li><p>Andy Taylor</p></li></ul></div><p> &#21478;&#22806;&#25105;&#20204;&#36824;&#26377;&#38271;&#26399;&#30340;&#21644;&#21018;&#21152;&#20837;&#30340;&#19968;&#20123;&#36129;&#29486;&#32773;&#65292;&#38750;&#24120;&#24863;&#35613;&#20182;&#20204;&#30340;&#24110;&#21161;&#12290;&#21442;&#35265;<a href="http://jboss.org/hornetq/community/team.html" target="_top">&#23436;&#25972;&#30340;&#36129;&#29486;&#32773;&#21517;&#21333;</a>&#12290; </p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="messaging-concepts"></a>Chapter&nbsp;4.&nbsp;&#28040;&#24687;&#30340;&#30456;&#20851;&#27010;&#24565;</h2></div></div><div></div></div><p>HornetQ&#26159;&#19968;&#20010;&#24322;&#27493;&#30340; <a href="http://en.wikipedia.org/wiki/Message_oriented_middleware" target="_top">
            &#38754;&#21521;&#28040;&#24687;&#30340;&#20013;&#38388;&#20214;</a>&#12290;&#22312;&#26412;&#25991;&#26723;&#20013;&#25105;&#20204;&#31616;&#31216;&#20026;&#28040;&#24687;&#31995;&#32479;&#12290;</p><p>&#39318;&#20808;&#25105;&#20204;&#31616;&#35201;&#20171;&#32461;&#28040;&#24687;&#31995;&#32479;&#26159;&#20570;&#20160;&#20040;&#30340;&#65292;&#22312;&#21738;&#20123;&#39046;&#22495;&#24471;&#21040;&#24212;&#29992;&#65292;&#20197;&#21450;&#19982;&#28040;&#24687;&#30456;&#20851;&#30340;&#19968;&#20123;&#27010;&#24565;&#12290;</p><p>&#22914;&#26524;&#20320;&#24050;&#32463;&#23545;&#28040;&#24687;&#31995;&#32479;&#30340;&#36825;&#20123;&#26041;&#38754;&#30340;&#30693;&#35782;&#24456;&#29087;&#24713;&#65292;&#21487;&#20197;&#36339;&#36807;&#26412;&#31456;&#20869;&#23481;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e262"></a>4.1.&nbsp;&#28040;&#24687;&#30456;&#20851;&#30340;&#27010;&#24565;</h2></div></div><div></div></div><p>&#28040;&#24687;&#31995;&#32479;&#21487;&#20197;&#23558;&#19981;&#21516;&#24322;&#31181;&#30340;&#31995;&#32479;&#26494;&#25955;&#22320;&#32806;&#21512;&#22312;&#19968;&#36215;&#65292;&#25552;&#20379;&#22522;&#26412;&#30340;&#21487;&#38752;&#24615;&#65292;&#20107;&#21153;&#21450;&#20854;&#23427;&#21151;&#33021;&#30340;&#25903;&#25345;&#12290;</p><p>&#19982;&#22522;&#20110;<a href="http://en.wikipedia.org/wiki/Remote_procedure_call" target="_top">&#36828;&#31243;&#36807;&#31243;&#35843;&#29992;
                </a> (RPC) &#30340;&#31995;&#32479;&#19981;&#21516;&#65292;&#28040;&#24687;&#31995;&#32479;&#20027;&#35201;&#37319;&#29992;&#24322;&#27493;&#20256;&#36865;&#30340;&#26041;&#24335;&#65292;&#35831;&#27714;&#19982;&#21709;&#24212;&#20043;&#38388;&#30340;&#32806;&#21512;&#24456;&#26494;&#12290;
                &#22823;&#22810;&#25968;&#30340;&#28040;&#24687;&#31995;&#32479;&#20063;&#25903;&#25345;&#35831;&#27714;&#65293;&#21709;&#24212;&#30340;&#26041;&#24335;&#65292;&#20294;&#36825;&#19981;&#26159;&#28040;&#24687;&#30340;&#20027;&#35201;&#21151;&#33021;&#12290;</p><p>&#31471;&#19982;&#31471;&#20043;&#38388;&#37319;&#29992;&#24322;&#27493;&#36890;&#20449;&#30340;&#22909;&#22788;&#26159;&#21487;&#20197;&#20805;&#20998;&#21033;&#29992;&#30828;&#20214;&#36164;&#28304;&#65292;&#26368;&#22823;&#31243;&#24230;&#20943;&#23569;IO&#25805;&#20316;&#24341;&#36215;&#30340;&#32447;&#31243;&#38459;&#22622;&#65292;&#24182;&#20805;&#20998;&#21033;&#29992;&#32593;&#32476;&#24102;&#23485;&#12290;
              &#32780;&#37319;&#29992;RPC&#26041;&#24335;&#65292;&#27599;&#19968;&#20010;&#35831;&#27714;&#24517;&#39035;&#35201;&#31561;&#24453;&#21709;&#24212;&#36820;&#22238;&#25165;&#33021;&#32487;&#32493;&#65292;&#22240;&#32780;&#35201;&#20381;&#36182;&#20320;&#30340;&#32593;&#32476;&#30340;&#36895;&#24230;
             &#65288;<span class="italic">latency</span>&#65289;&#12290;&#24322;&#27493;&#31995;&#32479;&#21017;&#33021;&#23558;&#28040;&#24687;&#20197;&#31649;&#36947;&#30340;&#26041;&#24335;&#20256;&#36865;&#65292;
              &#23427;&#21482;&#21463;<span class="italic">&#24102;&#23485;</span>&#30340;&#38480;&#21046;&#65292;&#24182;&#19981;&#22240;&#32593;&#32476;&#36895;&#24230;&#32780;&#38477;&#20302;&#25928;&#29575;&#12290;&#21033;&#29992;&#24322;&#27493;&#30340;&#26041;&#24335;&#24448;&#24448;&#21487;&#20197;&#21019;&#24314;&#26356;&#39640;&#25928;&#29575;&#30340;&#24212;&#29992;&#12290;</p><p>&#28040;&#24687;&#31995;&#32479;&#23558;&#28040;&#24687;&#30340;&#21457;&#36865;&#26041;&#19982;&#25509;&#25910;&#26041;&#20998;&#24320;&#65292;&#20351;&#28040;&#24687;&#30340;&#21457;&#36865;&#25152;&#25509;&#25910;&#23436;&#20840;&#29420;&#31435;&#20110;&#23545;&#26041;&#65292;&#26377;&#21033;&#20110;&#21019;&#24314;&#28789;&#27963;&#30340;&#12289;&#26494;&#32806;&#30340;&#31995;&#32479;&#12290;</p><p>&#22823;&#22411;&#30340;&#20225;&#19994;&#24212;&#29992;&#36890;&#24120;&#37319;&#29992;&#28040;&#24687;&#31995;&#32479;&#26469;&#23454;&#29616;&#19968;&#31181;&#28040;&#24687;&#24635;&#32447;&#65292;&#24182;&#22522;&#20110;&#36825;&#20010;&#24635;&#32447;&#23558;&#20225;&#19994;&#30340;&#21508;&#31181;&#19981;&#21516;&#32467;&#26500;&#30340;&#31995;&#32479;&#26494;&#25955;&#22320;&#36830;&#22312;&#19968;&#36215;&#24037;&#20316;&#12290;
              &#28040;&#24687;&#24635;&#32447;&#20063;&#24120;&#24120;&#26159;<a href="http://en.wikipedia.org/wiki/Enterprise_service_bus" target="_top">&#20225;&#19994;&#26381;&#21153;&#24635;&#32447;</a>(ESB)&#30340;&#26680;&#24515;&#12290; 
              &#37319;&#29992;&#36825;&#31181;&#26041;&#24335;&#25645;&#24314;&#30340;&#26494;&#32806;&#21512;&#31995;&#32479;&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;&#25193;&#23637;&#21644;&#20462;&#25913;&#12290;&#30001;&#20110;&#31995;&#32479;&#21508;&#27169;&#22359;&#20043;&#38388;&#30340;&#20449;&#36182;&#20851;&#31995;&#24456;&#24369;&#65292;&#25152;&#20197;&#22312;&#38656;&#35201;&#26102;&#21487;&#20197;&#23545;&#31995;&#32479;&#28789;&#27963;&#22320;&#28155;&#21152;&#21644;&#20943;&#23569;&#27169;&#22359;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e287"></a>4.2.&nbsp;&#28040;&#24687;&#30340;&#31181;&#31867;</h2></div></div><div></div></div><p>&#28040;&#24687;&#31995;&#32479;&#36890;&#24120;&#25903;&#25345;&#20004;&#31181;&#24322;&#27493;&#30340;&#20256;&#36865;&#27169;&#24335;&#65306;<a href="http://en.wikipedia.org/wiki/Message_queue" target="_top">&#28040;&#24687;&#38431;&#21015;</a>
             &#65288;&#21448;&#31216;&#20026;&#28857;&#23545;&#28857;&#28040;&#24687;&#20256;&#36865;&#65289;&#27169;&#24335;&#21644;<a href="http://en.wikipedia.org/wiki/Publish_subscribe" target="_top">&#24191;&#25773;&#65295;&#35746;&#38405;&#27169;&#24335;</a>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e298"></a>4.2.1.&nbsp;&#28040;&#24687;&#38431;&#21015;&#27169;&#24335;</h3></div></div><div></div></div><p>&#22312;&#36825;&#31181;&#27169;&#24335;&#20013;&#28040;&#24687;&#34987;&#21457;&#36865;&#21040;&#38431;&#21015;&#20013;&#12290;&#36890;&#24120;&#28040;&#24687;&#20250;&#34987;&#25345;&#20037;&#21270;&#20197;&#20445;&#35777;&#21487;&#38752;&#30340;&#20256;&#36865;&#12290;&#28040;&#24687;&#31995;&#32479;&#20250;&#23558;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#20256;&#36865;&#32473;&#25509;&#25910;&#32773;
                 &#65288;receiver&#25110;consumer&#65289;&#12290;&#24403;&#25509;&#25910;&#32773;&#22788;&#29702;&#28040;&#24687;&#23436;&#25104;&#21518;&#65292;&#23427;&#20250;&#21457;&#20986;&#23436;&#25104;&#30340;&#36890;&#30693;&#32473;&#28040;&#24687;&#31995;&#32479;&#12290;&#24471;&#21040;&#36890;&#30693;&#30340;&#28040;&#24687;&#23601;&#20250;&#20174;&#38431;&#21015;
                  &#20013;&#21024;&#38500;&#65292;&#22240;&#27492;&#35813;&#28040;&#24687;&#19981;&#20250;&#34987;&#20877;&#27425;&#20256;&#36865;&#12290;&#22914;&#26524;&#22312;&#25910;&#21040;&#28040;&#24687;&#21069;&#28040;&#24687;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#23548;&#33268;&#31995;&#32479;&#23849;&#28291;&#65292;&#24403;&#31995;&#32479;&#24674;&#22797;&#26102;&#65292;
                  &#35813;&#28040;&#24687;&#20250;&#34987;&#20877;&#27425;&#20256;&#36865;&#32473;&#25509;&#25910;&#32773;&#12290;</p><p>&#36825;&#31181;&#27169;&#24335;&#20801;&#35768;&#19968;&#20010;&#38431;&#21015;&#26377;&#22810;&#20010;&#25509;&#25910;&#32773;&#12290;&#20294;&#26159;&#19968;&#20010;&#28040;&#24687;&#26368;&#22810;&#21482;&#20256;&#36865;&#32473;&#19968;&#20010;&#25509;&#25910;&#32773;&#12290;&#19968;&#20010;&#38431;&#21015;&#30340;&#28040;&#24687;&#21457;&#36865;&#32773;&#65288;sender&#25110;producer)
                  &#19982;&#25509;&#25910;&#32773;&#26159;&#23436;&#20840;&#29420;&#31435;&#30340;&#12290;&#23427;&#20204;&#19981;&#30693;&#36947;&#24444;&#27492;&#30340;&#23384;&#22312;&#12290;</p><p>&#22270;&#20070;&#35746;&#21333;&#31995;&#32479;&#26159;&#19968;&#20010;&#20856;&#22411;&#30340;&#28040;&#24687;&#38431;&#21015;&#30340;&#29992;&#20363;&#12290;&#27599;&#19968;&#20010;&#35746;&#21333;&#37117;&#34987;&#21253;&#35013;&#20026;&#19968;&#20010;&#28040;&#24687;&#20256;&#36865;&#21040;&#35746;&#21333;&#38431;&#21015;&#20013;&#12290;&#20551;&#23450;&#26377;&#22810;&#20010;&#22270;&#20070;&#35746;&#36141;&#30340;&#32456;
                  &#31471;&#21521;&#35746;&#21333;&#38431;&#21015;&#21457;&#20851;&#35746;&#21333;&#28040;&#24687;&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#21040;&#36798;&#38431;&#21015;&#26102;&#23427;&#34987;&#25345;&#20037;&#21270;&#20197;&#38450;&#27490;&#31995;&#32479;&#23849;&#28291;&#26102;&#35746;&#21333;&#30340;&#20002;&#22833;&#12290;&#20877;&#20551;&#23450;&#26377;&#22810;&#20010;&#35746;&#21333;&#22788;&#29702;&#20013;&#24515;
                  &#20998;&#24067;&#22312;&#19981;&#21516;&#30340;&#26426;&#22120;&#19978;&#25509;&#25910;&#36825;&#20010;&#35746;&#21333;&#38431;&#21015;&#30340;&#28040;&#24687;&#12290;&#28040;&#24687;&#31995;&#32479;&#23558;&#27599;&#19968;&#20010;&#28040;&#24687;&#21457;&#36865;&#32473;&#20854;&#20013;&#19968;&#20010;&#65288;&#24182;&#19988;&#21482;&#21457;&#36865;&#19968;&#20010;&#65289;&#25509;&#25910;&#32773;&#65288;&#21363;&#19968;&#20010;&#35746;&#21333;&#22788;&#29702;&#27169;&#22359;&#65289;&#12290;
                  &#36825;&#26679;&#19981;&#21516;&#30340;&#35746;&#21333;&#21487;&#33021;&#20250;&#34987;&#19981;&#21516;&#30340;&#22788;&#29702;&#27169;&#22359;&#22788;&#29702;&#65292;&#20294;&#19968;&#20010;&#35746;&#21333;&#21482;&#20250;&#34987;&#22788;&#29702;&#19968;&#27425;&#12290;</p><p>&#24403;&#35746;&#21333;&#22788;&#29702;&#27169;&#22359;&#25509;&#25910;&#21040;&#19968;&#20010;&#28040;&#24687;&#65292;&#23545;&#23427;&#36827;&#34892;&#22788;&#29702;&#21518;&#23558;&#35746;&#21333;&#20449;&#24687;&#21457;&#36865;&#32473;&#20179;&#24211;&#31995;&#32479;&#24182;&#26356;&#26032;&#35746;&#21333;&#25968;&#25454;&#24211;&#12290;&#22788;&#29702;&#23436;&#25104;&#21518;&#23427;&#20250;&#21457;&#20986;&#36890;&#30693;&#21578;&#35785;&#26381;&#21153;
                  &#22120;&#21487;&#20197;&#21024;&#38500;&#27492;&#28040;&#24687;&#12290;&#36890;&#24120;&#36825;&#19968;&#31995;&#21015;&#21644;&#22788;&#29702;&#65288;&#25509;&#25910;&#65292;&#21457;&#36865;&#32473;&#20179;&#24211;&#31995;&#32479;&#65292;&#26356;&#26032;&#25968;&#25454;&#24211;&#20197;&#21450;&#36890;&#30693;&#65289;&#20250;&#34987;&#20316;&#20026;&#19968;&#20010;&#20132;&#26131;&#26469;&#22788;&#29702;&#20197;&#20445;&#35777;&#23427;&#30340;&#23436;&#25972;&#24615;
                 &#65288;<a href="http://en.wikipedia.org/wiki/ACID" target="_top">ACID</a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e312"></a>4.2.2.&nbsp;&#28040;&#24687;&#30340;&#24191;&#25773;&#65295;&#35746;&#38405;&#27169;&#24335;</h3></div></div><div></div></div><p>&#36825;&#31181;&#27169;&#24335;&#20013;&#65292;&#22810;&#20010;&#21457;&#36865;&#32773;&#23558;&#28040;&#24687;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#20013;&#19968;&#20010;&#29305;&#23450;&#30340;&#23454;&#20307;&#65292;JMS&#20013;&#36890;&#24120;&#31216;&#20026;&#35805;&#39064;&#65288;topic)&#12290;
                  &#19968;&#20010;Topic&#24120;&#24120;&#26377;&#22810;&#20010;&#35746;&#38405;&#32773;&#65288;subscription&#65292;&#21363;&#28040;&#24687;&#30340;&#25509;&#25910;&#32773;&#65289;&#12290;</p><p>&#19982;&#28040;&#24687;&#38431;&#21015;&#30340;&#25509;&#25910;&#32773;&#19981;&#21516;&#65292;&#27599;&#20010;&#35746;&#38405;&#32773;&#37117;&#20250;&#25910;&#21040;&#21457;&#36865;&#30340;&#38431;&#21015;&#20013;&#30340;&#27599;&#20010;&#28040;&#24687;&#12290;</p><p>&#35746;&#38405;&#32773;&#21487;&#20197;&#36873;&#25321;&#20026;&#22266;&#23450;&#30340;&#26041;&#24335;&#65288;<span class="italic">durable</span>&#65289;&#12290;&#37319;&#29992;&#36825;&#31181;&#26041;&#24335;&#30340;&#35746;&#38405;&#32773;&#65292;
                  &#20854;&#28040;&#24687;&#20250;&#20445;&#30041;&#30452;&#21040;&#34987;&#25509;&#25910;&#20026;&#27490;&#12290;&#21363;&#20351;&#26159;&#20854;&#38388;&#26381;&#21153;&#22120;&#21457;&#29983;&#36807;&#25925;&#38556;&#25110;&#37325;&#21551;&#20063;&#19981;&#21463;&#24433;&#21709;&#12290;&#38750;&#22266;&#23450;&#30340;&#35746;&#38405;&#32773;&#21482;&#22312;&#20854;&#36830;&#25509;&#26399;&#38388;&#26377;&#25928;&#65292;
                  &#19968;&#20294;&#36830;&#25509;&#26029;&#24320;&#20854;&#28040;&#24687;&#23558;&#19981;&#20250;&#20445;&#30041;&#12290;</p><p>&#30005;&#23376;&#28040;&#24687;&#35746;&#38405;&#26159;&#28040;&#24687;&#24191;&#25773;&#27169;&#24335;&#30340;&#19968;&#20010;&#20363;&#23376;&#12290;&#24403;&#26032;&#38395;&#34987;&#19990;&#30028;&#21508;&#22320;&#30340;&#32534;&#36753;&#32232;&#22909;&#21518;&#65292;&#20182;&#20204;&#23558;&#20854;&#21457;&#20851;&#21040;&#26032;&#38395;topic&#12290;
                  &#21516;&#26679;&#23545;&#36825;&#20123;&#26032;&#38395;&#20852;&#36259;&#30340;&#35835;&#32773;&#20250;&#35746;&#38405;&#36825;&#20010;topic&#12290;&#28040;&#24687;&#31995;&#32479;&#23558;&#20445;&#35777;&#27599;&#20010;&#35746;&#38405;&#32773;&#37117;&#33021;&#22815;&#25910;&#21040;&#27599;&#19968;&#31687;&#26032;&#38395;&#31295;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e326"></a>4.3.&nbsp;&#20256;&#36865;&#30340;&#21487;&#38752;&#24615;</h2></div></div><div></div></div><p>&#22823;&#22810;&#25968;&#30340;&#28040;&#24687;&#31995;&#32479;&#26159;<span class="italic">&#21487;&#38752;&#30340;&#28040;&#24687;&#20256;&#36865;&#31995;&#32479;</span>&#12290;&#28040;&#24687;&#31995;&#32479;&#21487;&#20197;&#20445;&#35777;&#19968;&#20010;&#28040;&#24687;&#34987;&#20256;&#36865;
              &#32473;&#19968;&#20010;&#24182;&#19988;&#21482;&#20256;&#36865;&#32473;&#19968;&#20010;&#38431;&#21015;&#30340;&#25509;&#25910;&#32773;&#25110;&#27599;&#20010;&#35805;&#39064;&#30340;&#22266;&#23450;&#30340;&#35746;&#38405;&#32773;&#12290;&#19968;&#20010;&#28040;&#24687;&#19981;&#20250;&#34987;&#20256;&#36865;&#20004;&#27425;&#12290;&#21363;&#20351;&#22312;&#31995;&#32479;&#20986;&#29616;&#25925;&#38556;&#26102;&#20063;&#26159;&#22914;&#27492;&#12290;
              &#36825;&#19968;&#29305;&#24615;&#23545;&#20110;&#24456;&#22810;&#20225;&#19994;&#26469;&#35828;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;&#27604;&#22914;&#20320;&#24819;&#35201;&#20445;&#35777;&#35746;&#21333;&#19981;&#20002;&#22833;&#25110;&#34987;&#22788;&#29702;&#20004;&#27425;&#20197;&#19978;&#65292;&#23601;&#21487;&#20197;&#21033;&#29992;&#35813;&#29305;&#24615;&#12290;</p><p>&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#31181;&#8220;&#19968;&#27425;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;&#8221;&#30340;&#20256;&#36865;&#26041;&#24335;&#24182;&#19981;&#26159;&#24456;&#37325;&#35201;&#65292;&#37325;&#22797;&#28040;&#24687;&#21644;&#28040;&#24687;&#30340;&#20002;&#22833;&#24182;&#19981;&#24433;&#21709;&#31995;&#32479;&#30340;&#21151;&#33021;&#12290;&#27604;&#22914;&#32929;&#31080;&#20215;&#26684;
              &#30340;&#26356;&#26032;&#28040;&#24687;&#65292;&#23427;&#24182;&#19981;&#38656;&#35201;&#20445;&#35777;&#27599;&#27425;&#37117;&#33021;&#25910;&#21040;&#65292;&#22240;&#20026;&#21069;&#19968;&#27425;&#26356;&#26032;&#24456;&#24555;&#23601;&#20250;&#34987;&#19979;&#19968;&#27425;&#20195;&#26367;&#12290;&#36825;&#26679;&#30340;&#21151;&#33021;&#28040;&#24687;&#31995;&#32479;&#20063;&#21487;&#20197;&#25903;&#25345;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e336"></a>4.4.&nbsp;&#20132;&#26131;&#65288;Transactions)</h2></div></div><div></div></div><p>&#28040;&#24687;&#31995;&#32479;&#36890;&#24120;&#25903;&#25345;&#22312;&#19968;&#27425;&#26412;&#22320;&#20132;&#26131;&#20013;&#21457;&#36865;&#24182;&#36890;&#30693;&#22810;&#20010;&#28040;&#24687;&#12290;HornetQ&#36824;&#25903;&#25345;&#20998;&#24067;&#24335;&#20132;&#26131;&#12290;&#23427;&#21487;&#20197;&#36890;&#36807;Java&#30340;XA&#21644;JTA&#25509;&#21475;&#65292;
              &#23558;&#28040;&#24687;&#30340;&#21457;&#36865;&#19982;&#36890;&#30693;&#20570;&#20026;&#19968;&#20010;&#20998;&#24067;&#24335;&#20132;&#26131;&#30340;&#19968;&#37096;&#20998;&#26469;&#23436;&#25104;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e341"></a>4.5.&nbsp;&#25345;&#20037;&#24615;&#65288;Durability&#65289;</h2></div></div><div></div></div><p>&#28040;&#24687;&#21487;&#20197;&#20998;&#20026;&#25345;&#20037;&#28040;&#24687;&#21644;&#38750;&#25345;&#20037;&#28040;&#24687;&#12290;&#25345;&#20037;&#28040;&#24687;&#34987;&#20445;&#23384;&#21040;&#27704;&#20037;&#30340;&#23384;&#20648;&#20171;&#36136;&#20013;&#65292;&#19981;&#21463;&#26381;&#21153;&#22120;&#25925;&#38556;&#19982;&#37325;&#21551;&#30340;&#24433;&#21709;&#12290;&#38750;&#25345;&#20037;&#28040;&#24687;&#22312;&#26381;&#21153;
              &#22120;&#25925;&#38556;&#19982;&#37325;&#21551;&#26102;&#21017;&#20250;&#20002;&#22833;&#12290;&#20687;&#35746;&#21333;&#65292;&#20132;&#26131;&#20449;&#24687;&#23646;&#20110;&#25345;&#20037;&#28040;&#24687;&#65292;&#32780;&#32929;&#31080;&#20215;&#26684;&#26356;&#26032;&#30001;&#20110;&#23427;&#30340;&#21363;&#26102;&#24615;&#21017;&#21487;&#20197;&#20570;&#20026;&#38750;&#25345;&#20037;&#28040;&#24687;&#26469;&#22788;&#29702;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e346"></a>4.6.&nbsp;&#28040;&#24687;API&#21644;&#21327;&#35758;</h2></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#24590;&#26679;&#35775;&#38382;&#28040;&#24687;&#31995;&#32479;&#26469;&#36827;&#34892;&#28040;&#24687;&#30340;&#21457;&#36865;&#19982;&#25509;&#25910;&#21602;&#65311;</p><p>&#19968;&#20123;&#28040;&#24687;&#31995;&#32479;&#25552;&#20379;&#31169;&#26377;&#30340;API&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#36890;&#36807;&#36825;&#20123;&#31169;&#26377;&#30340;API&#19982;&#30456;&#24212;&#30340;&#28040;&#24687;&#31995;&#32479;&#20132;&#20114;&#65292;&#23454;&#29616;&#28040;&#24687;&#30340;&#25910;&#21457;&#12290;</p><p>&#38500;&#27492;&#20043;&#22806;&#65292;&#36824;&#23384;&#22312;&#30528;&#19968;&#20123;&#26631;&#20934;&#30340;&#20132;&#20114;&#26041;&#24335;&#21487;&#20379;&#20351;&#29992;&#12290;&#21478;&#22806;&#36824;&#26377;&#19968;&#20123;&#26631;&#20934;&#27491;&#22312;&#19981;&#26029;&#23436;&#21892;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#20171;&#32461;&#19968;&#19979;&#36825;&#20123;&#26631;&#20934;&#12290;</p><p>Let's take a brief look at these:</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e357"></a>4.6.1.&nbsp;Java&#28040;&#24687;&#26381;&#21153;&#65288;JMS&#65289;</h3></div></div><div></div></div><p><a href="http://en.wikipedia.org/wiki/Java_Message_Service" target="_top">JMS</a> &#23646;&#20110;Sun&#20844;&#21496;JEE&#35268;&#33539;&#30340;&#19968;&#37096;&#20998;&#12290;
            &#23427;&#23450;&#20041;&#20102;&#19968;&#22871;&#26631;&#20934;&#30340;API&#25903;&#25345;&#28040;&#24687;&#38431;&#21015;&#21644;&#24191;&#25773;&#65293;&#35746;&#38405;&#27169;&#24335;&#12290;JMS&#26159;&#19968;&#22871;&#38750;&#24120;&#31934;&#31616;&#30340;&#36890;&#29992;&#30340;&#26631;&#20934;&#65292;&#23427;&#23558;&#24403;&#26102;&#24050;&#32463;&#23384;&#22312;&#30340;&#28040;&#24687;&#31995;&#32479;&#30340;&#20849;&#21516;&#21151;&#33021;&#21253;&#25324;&#20102;&#36827;&#21435;&#12290;
            </p><p>JMS&#26159;&#19968;&#20010;&#24191;&#27867;&#20351;&#29992;&#30340;API&#65292;&#32477;&#22823;&#22810;&#25968;&#30340;&#28040;&#24687;&#31995;&#32479;&#37117;&#25903;&#25345;&#23427;&#12290;JMS&#21482;&#26377;Java&#30340;&#23458;&#25143;&#31471;&#25165;&#21487;&#20197;&#20351;&#29992;&#12290;</p><p>JMS&#24182;&#27809;&#26377;&#23450;&#20041;&#20256;&#36755;&#30340;&#26684;&#24335;&#65288;wire format&#65289;&#12290;&#22240;&#27492;&#19981;&#21516;&#30340;JMS&#28040;&#24687;&#26381;&#21153;&#22120;&#30340;&#21644;&#23458;&#25143;&#31471;&#30456;&#20114;&#20043;&#38388;&#36890;&#24120;&#19981;&#33021;&#20132;&#20114;&#65292;&#36825;&#26159;&#22240;&#20026;&#27599;&#20010;&#28040;&#24687;&#31995;&#32479;&#37117;&#33258;&#24049;&#30340;&#20256;&#36755;&#26684;&#24335;&#12290;</p><p>HornetQ&#20840;&#38754;&#25903;&#25345;JMS 1.1 API&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e370"></a>4.6.2.&nbsp;&#19987;&#26377;&#30340;API</h3></div></div><div></div></div><p>&#24456;&#22810;&#31995;&#32479;&#25552;&#20379;&#33258;&#24049;&#30340;&#19968;&#22871;API&#26469;&#19982;&#20854;&#28040;&#24687;&#31995;&#32479;&#36827;&#34892;&#36890;&#36805;&#65292;&#20854;&#20248;&#21183;&#26159;&#23427;&#21487;&#20197;&#20801;&#35768;&#23458;&#25143;&#31471;&#20351;&#29992;&#20854;&#20840;&#37096;&#30340;&#21151;&#33021;&#12290;
                  &#20687;JMS&#37027;&#26679;&#30340;&#26631;&#20934;API&#24448;&#24448;&#19981;&#33021;&#25552;&#20379;&#35768;&#22810;&#28040;&#24687;&#31995;&#32479;&#25152;&#25903;&#25345;&#30340;&#39069;&#22806;&#30340;&#21151;&#33021;&#12290;</p><p>HornetQ&#25552;&#20379;&#20102;&#19968;&#22871;&#33258;&#26377;&#30340;&#26680;&#24515;API&#65292;&#23458;&#25143;&#31471;&#31243;&#24207;&#21487;&#20197;&#36890;&#36807;&#23427;&#20805;&#20998;&#21033;&#29992;HornetQ&#30340;&#24378;&#22823;&#21151;&#33021;&#12290;
                  &#36825;&#23545;&#20110;&#19968;&#20123;JMS API&#28385;&#36275;&#19981;&#20102;&#30340;&#38656;&#27714;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e377"></a>4.6.3.&nbsp;RESTful API</h3></div></div><div></div></div><p>&#37319;&#29992;<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer" target="_top">REST</a> REST[http://en.wikipedia.org/wiki/Representational_State_Transfer]&#26041;&#24335;&#19982;&#28040;&#24687;&#31995;&#32479;&#20132;&#20114;&#36234;&#26469;&#36234;&#34987;&#20851;&#27880;&#12290;</p><p>&#30001;&#20110;&#20113;&#35745;&#31639;&#25216;&#26415;&#30340;API&#26631;&#20934;&#30446;&#21069;&#20542;&#21521;&#20110;&#37319;&#29992;REST&#30340;&#26041;&#24335;&#65292;&#25152;&#20197;&#37319;&#29992;REST&#26041;&#24335;&#30340;&#28040;&#24687;&#31995;&#32479;&#24456;&#26377;&#26395;&#25104;&#20026;&#20113;&#35745;&#31639;&#20013;&#28040;&#24687;&#20256;&#36865;&#30340;&#26631;&#20934;&#12290;</p><p>REST&#26041;&#24335;&#20013;&#30340;&#21508;&#31181;&#28040;&#24687;&#36164;&#28304;&#20197;URI&#30340;&#26041;&#24335;&#26469;&#23450;&#20041;&#12290;&#29992;&#25143;&#36890;&#36807;&#19968;&#22871;&#24456;&#31616;&#21333;&#30340;&#25805;&#20316;&#19982;&#36825;&#20123;&#36164;&#28304;&#30456;&#20132;&#20114;&#65292;&#22914;PUT&#12289;POST&#12289;GET&#31561;&#12290;HTTP&#36890;&#24120;&#29992;&#26469;&#20316;&#20026;REST&#26041;&#24335;&#30340;&#36890;&#20449;&#21327;&#35758;&#12290;</p><p>&#37319;&#29992;HTTP&#30340;&#22909;&#22788;&#26159;&#23427;&#24456;&#31616;&#21333;&#23454;&#29992;&#65292;&#24182;&#19988;internet&#32463;&#36807;&#22810;&#24180;&#30340;&#21457;&#23637;&#24050;&#32463;&#33021;&#24456;&#22909;&#30340;&#25903;&#25345;HTTP&#21327;&#35758;&#12290;</p><p>HornetQ&#23558;&#20250;&#24456;&#24555;&#22320;&#25903;&#25345;REST&#26041;&#24335;&#30340;API&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e393"></a>4.6.4.&nbsp;STOMP</h3></div></div><div></div></div><p><a href="http://stomp.codehaus.org/" target="_top">Stomp</a> &#26159;&#20026;&#28040;&#24687;&#31995;&#32479;&#23450;&#20041;&#30340;&#19968;&#22871;&#31616;&#21333;&#30340;&#25991;&#26412;&#20256;&#36755;&#21327;&#35758;&#12290;&#23427;&#23450;&#20041;&#20102;&#19968;&#31181;&#32447;&#19978;&#20256;&#36755;&#30340;&#26684;&#24335;&#65292;
                     &#22240;&#27492;&#37319;&#29992;Stomp&#32534;&#20889;&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#19982;&#25152;&#26377;&#25903;&#25345;Stomp&#30340;&#28040;&#24687;&#31995;&#32479;&#20132;&#20114;&#12290;Stomp&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#29992;&#22810;&#31181;&#32534;&#31243;&#35821;&#35328;&#26469;&#23454;&#29616;&#12290;</p><p>&#26377;&#20851;&#22312;HornetQ&#20013;&#22914;&#20309;&#20351;&#29992;Stomp&#30340;&#35814;&#32454;&#20869;&#23481;&#35831;&#21442;&#35265;<a href="#stomp" title="45.1.&nbsp;Stomp">Section&nbsp;45.1, &#8220;Stomp&#8221;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e404"></a>4.6.5.&nbsp;AMQP</h3></div></div><div></div></div><p><a href="http://en.wikipedia.org/wiki/AMQP" target="_top">AMQP</a> &#26159;&#19968;&#22871;&#21487;&#25903;&#25345;&#20114;&#25805;&#20316;&#30340;&#28040;&#24687;&#35268;&#33539;&#12290;
            &#23427;&#23450;&#20041;&#20102;&#33258;&#24049;&#30340;&#20256;&#36755;&#26684;&#24335;&#65292;&#22240;&#20123;&#20219;&#20309;AMQP&#30340;&#23458;&#25143;&#31471;&#37117;&#21487;&#20197;&#21644;&#25903;&#25345;AMQP&#30340;&#31995;&#32479;&#36827;&#34892;&#20132;&#20114;&#12290;AMQP&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#29992;&#22810;&#31181;&#32534;&#31243;&#35821;&#35328;&#26469;&#23454;&#29616;&#12290;</p><p>HornetQ&#23558;&#20250;&#24456;&#24555;&#22320;&#25903;&#25345;AMQP&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e413"></a>4.7.&nbsp;&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;Availability&#65289;</h2></div></div><div></div></div><p>&#39640;&#21487;&#33719;&#24471;&#24615;&#26159;&#25351;&#22312;&#31995;&#32479;&#20013;&#26377;&#19968;&#20010;&#25110;&#22810;&#20010;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#26102;&#20173;&#28982;&#33021;&#22815;&#32500;&#25345;&#36816;&#36716;&#30340;&#29305;&#24615;&#12290;&#19981;&#21516;&#30340;&#28040;&#24687;&#31995;&#32479;&#23545;&#39640;&#21487;&#33719;&#24471;&#24615;&#30340;&#25903;&#25345;&#31243;&#24230;&#26159;&#19981;&#21516;&#30340;&#12290;</p><p>HornetQ&#25903;&#25345;&#33258;&#21160;&#22833;&#25928;&#22791;&#25588;&#65288;failover&#65289;&#65292;&#20063;&#23601;&#26159;&#24403;&#20027;&#26381;&#21153;&#22120;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#24403;&#21069;&#30340;&#20250;&#35805;&#20250;&#33258;&#21160;&#36830;&#25509;&#21040;&#22791;&#29992;&#30340;&#26381;&#21153;&#22120;&#19978;&#12290;</p><p><a href="#ha" title="Chapter&nbsp;39.&nbsp;&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;High Availability&#65289;&#21644;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;">Chapter&nbsp;39, <i>&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;High Availability&#65289;&#21644;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;</i></a>&#32473;&#20986;&#20102;HornetQ&#30340;HA&#29305;&#24615;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e423"></a>4.8.&nbsp;&#38598;&#32676;</h2></div></div><div></div></div><p>&#35768;&#22810;&#28040;&#24687;&#31995;&#32479;&#25903;&#25345;&#30001;&#22810;&#20010;&#28040;&#24687;&#26381;&#21153;&#22120;&#32452;&#25104;&#30340;&#38598;&#32676;&#12290;&#38598;&#32676;&#21487;&#20197;&#20351;&#21457;&#36865;&#21644;&#25509;&#25910;&#30340;&#36127;&#33655;&#20998;&#25955;&#21040;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#20013;&#12290;
              &#36890;&#36807;&#22686;&#21152;&#38598;&#32676;&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#26377;&#25928;&#30340;&#22686;&#21152;&#25972;&#20010;&#38598;&#32676;&#22788;&#29702;&#28040;&#24687;&#30340;&#33021;&#21147;&#12290;</p><p>&#28982;&#32780;&#19981;&#21516;&#30340;&#28040;&#24687;&#31995;&#32479;&#26377;&#30528;&#19981;&#21516;&#30340;&#38598;&#32676;&#26550;&#26500;&#12290;&#26377;&#30340;&#38598;&#32676;&#26550;&#26500;&#21313;&#20998;&#31616;&#21333;&#65292;&#26377;&#30340;&#38598;&#32676;&#20013;&#25104;&#21592;&#38388;&#30340;&#32852;&#31995;&#24456;&#23569;&#12290;</p><p>HornetQ&#25552;&#20379;&#20102;&#38750;&#24120;&#20808;&#36827;&#30340;&#21487;&#37197;&#32622;&#30340;&#38598;&#32676;&#27169;&#22411;&#12290;&#26681;&#25454;&#27599;&#20010;&#33410;&#28857;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#30340;&#22810;&#23569;&#20197;&#21450;&#26159;&#21542;&#20855;&#26377;&#25509;&#25910;&#29366;&#24577;&#65292;&#28040;&#24687;&#22312;&#38598;&#32676;&#20013;&#21487;&#20197;&#36827;&#34892;&#26234;&#33021;&#21270;&#36127;&#36733;&#22343;&#34913;&#12290;</p><p>HornetQ&#36824;&#33021;&#22815;&#22312;&#38598;&#32676;&#20013;&#30340;&#33410;&#28857;&#38388;&#36827;&#34892;&#28040;&#24687;&#30340;&#20877;&#20998;&#21457;&#65292;&#20197;&#36991;&#20813;&#22312;&#26576;&#20010;&#33410;&#28857;&#20986;&#29616;&#28040;&#24687;&#21294;&#20047;&#65288;starvation&#65289;&#29616;&#35937;&#12290;</p><p>&#26377;&#20851;&#38598;&#32676;&#30340;&#35814;&#32454;&#20869;&#23481;&#21442;&#35265;<a href="#clusters" title="Chapter&nbsp;38.&nbsp;&#38598;&#32676;">Chapter&nbsp;38, <i>&#38598;&#32676;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e438"></a>4.9.&nbsp;&#26725;&#25509;&#65288;Bridge)&#21644;&#36335;&#30001;&#65288;Routing&#65289;</h2></div></div><div></div></div><p>&#26377;&#20123;&#28040;&#24687;&#31995;&#32479;&#21487;&#20197;&#23558;&#19968;&#20123;&#20998;&#25955;&#22312;&#19981;&#21487;&#38752;&#30340;&#32593;&#32476;&#65288;&#22914;&#24191;&#22495;&#32593;&#25110;internet&#65289;&#19978;&#23396;&#31435;&#30340;&#38598;&#32676;&#25110;&#33410;&#28857;&#26725;&#25509;&#22312;&#19968;&#36215;&#12290;</p><p>&#36890;&#24120;&#19968;&#20010;&#26725;&#30340;&#20316;&#29992;&#26159;&#20174;&#19968;&#21488;&#26381;&#21153;&#22120;&#30340;&#38431;&#21015;&#19978;&#25509;&#25910;&#28040;&#24687;&#28982;&#21518;&#23558;&#28040;&#24687;&#20877;&#36716;&#21457;&#21040;&#21478;&#19968;&#21488;&#26381;&#21153;&#22120;&#30340;&#38431;&#21015;&#20013;&#12290;&#26725;&#36830;&#25509;&#21487;&#20197;&#35299;&#20915;&#19981;&#21487;&#38752;&#32593;&#32476;&#36830;&#25509;&#30340;&#38382;&#39064;&#12290;
              &#26725;&#26377;&#33258;&#21160;&#37325;&#26032;&#36830;&#25509;&#30340;&#21151;&#33021;&#12290;&#19968;&#26086;&#32593;&#32476;&#36830;&#25509;&#20013;&#26029;&#65292;&#26725;&#21487;&#20197;&#33258;&#21160;&#36827;&#34892;&#37325;&#35797;&#30452;&#21040;&#37325;&#26032;&#36830;&#25509;&#19978;&#20026;&#27490;&#12290;</p><p>HornetQ&#30340;&#26725;&#25509;&#21151;&#33021;&#21487;&#20197;&#37197;&#32622;&#36807;&#28388;&#34920;&#36798;&#24335;&#65292;&#20197;&#23454;&#29616;&#26377;&#26465;&#20214;&#30340;&#36716;&#21457;&#12290;&#21478;&#22806;&#65292;&#23427;&#36824;&#21487;&#20197;&#23454;&#29616;&#28040;&#24687;&#36716;&#25442;&#30340;&#21151;&#33021;&#65288;transformation&#65289;&#12290;</p><p>HornetQ&#36824;&#20801;&#35768;&#37197;&#32622;&#28040;&#24687;&#22312;&#38431;&#21015;&#20043;&#38388;&#36827;&#34892;&#36335;&#30001;&#12290;&#21033;&#29992;&#23427;&#21487;&#20197;&#23436;&#25104;&#22797;&#26434;&#30340;&#36335;&#30001;&#32593;&#32476;&#20197;&#20415;&#22312;&#19981;&#21516;&#38431;&#21015;&#38388;&#36827;&#34892;&#28040;&#24687;&#36716;&#21457;&#19982;&#22797;&#21046;&#65292;&#24418;&#25104;&#19968;&#20010;&#20114;&#36830;&#30340;&#28040;&#24687;&#20195;&#29702;&#65288;broker&#65289;&#32593;&#32476;&#12290;</p><p>&#26377;&#20851;&#30340;&#35814;&#32454;&#20869;&#23481;&#23558;&#22312;<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#21644;<a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">Chapter&nbsp;35, <i>&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</i></a>&#32473;&#20986;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="architecture"></a>Chapter&nbsp;5.&nbsp;&#24635;&#20307;&#26550;&#26500;</h2></div></div><div></div></div><p>&#26412;&#31456;&#23545;HornetQ&#30340;&#24635;&#20307;&#25216;&#26415;&#26550;&#26500;&#36827;&#34892;&#20102;&#27010;&#25324;&#25551;&#36848;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e477"></a>5.1.&nbsp;&#26680;&#24515;&#26550;&#26500;</h2></div></div><div></div></div><p>HornetQ&#30340;&#26680;&#24515;&#26159;&#30001;&#19968;&#32452;&#31616;&#21333;Java&#23545;&#35937;&#65288;POJO&#65289;&#26500;&#25104;&#30340;&#12290;&#21516;&#26102;&#22312;&#35774;&#35745;HornetQ&#26102;&#23558;&#23545;&#22806;&#37096;jar&#21253;&#30340;&#20381;&#36182;&#38477;&#21040;&#26368;&#20302;&#38480;&#24230;&#12290;
              &#23454;&#38469;&#19978;HornetQ&#30340;&#26680;&#24515;&#37096;&#20998;&#21482;&#26377;&#19968;&#20010;&#22806;&#37096;&#20381;&#36182;&#65292;&#23601;&#26159;netty.jar&#12290;HornetQ&#20351;&#29992;&#20102;&#20854;&#20013;&#30340;&#29992;&#20110;&#32531;&#20914;&#30340;&#19968;&#20123;&#31867;&#12290;
              &#25105;&#20204;&#30456;&#20449;&#36825;&#26679;&#30340;&#29702;&#24565;&#24212;&#35813;&#21463;&#21040;&#29992;&#25143;&#30340;&#27426;&#36814;&#12290;</p><p>&#30001;&#20110;&#20381;&#36182;&#24615;&#24456;&#23567;&#65292;HornetQ&#21487;&#20197;&#38750;&#24120;&#23481;&#26131;&#22320;&#23884;&#20837;&#21040;&#20854;&#23427;&#24212;&#29992;&#20013;&#65292;&#25110;&#32773;&#21152;&#20837;&#21040;&#19968;&#20123;&#20381;&#36182;&#27880;&#20837;&#24335;&#30340;&#26694;&#26550;&#20013;&#65292;
              &#22914;JBoss Microcontainer&#65292;Spring&#25110;Google Guice&#12290;</p><p>&#27599;&#20010;HornetQ&#26381;&#21153;&#22120;&#37117;&#26377;&#33258;&#24049;&#30340;&#36229;&#39640;&#24615;&#33021;&#30340;&#25345;&#20037;&#26085;&#24535;&#65288;journal&#65289;&#29992;&#20110;&#28040;&#24687;&#21644;&#20854;&#23427;&#20449;&#24687;&#30340;&#25345;&#20037;&#21270;&#12290;</p><p>&#37319;&#29992;&#36825;&#31181;&#29420;&#29305;&#30340;&#39640;&#25928;&#26085;&#24535;&#35201;&#27604;&#37319;&#29992;&#26222;&#36890;&#25968;&#25454;&#24211;&#20316;&#20026;&#25345;&#20037;&#23618;&#30340;&#31995;&#32479;&#25317;&#26377;&#26356;&#39640;&#30340;&#24615;&#33021;&#12290;</p><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#20998;&#24067;&#22312;&#19981;&#21516;&#29289;&#29702;&#26426;&#22120;&#19978;&#30340;&#23458;&#25143;&#31471;&#21516;&#26102;&#35775;&#38382;HornetQ&#26381;&#21153;&#22120;&#12290;&#30446;&#21069;HornetQ&#25552;&#20379;&#20102;&#20004;&#22871;API&#20379;&#23458;&#25143;&#31471;&#20351;&#29992;&#65306;</p><p>
            </p><div class="orderedlist"><ol type="1"><li><p>&#26680;&#24515;API&#12290;&#36825;&#26159;&#19968;&#32452;&#26222;&#36890;&#30340;Java&#25509;&#21475;&#65292;&#29992;&#23427;&#21487;&#20197;&#35775;&#38382;HornetQ&#30340;&#20840;&#37096;&#21151;&#33021;&#12290;</p></li><li><p>JMS&#23458;&#25143;&#31471;API&#12290;&#36825;&#26159;&#26631;&#20934;&#30340;JMS API&#12290;</p></li></ol></div><p>
        </p><p>&#23454;&#38469;&#19978;JMS API&#26159;&#22312;&#26680;&#24515;API&#30340;&#22806;&#37096;&#21152;&#19978;&#19968;&#23618;&#31616;&#21333;&#30340;&#23553;&#35013;&#12290;</p><p>&#22312;HornetQ&#20869;&#26680;&#26159;&#27809;&#26377;JMS&#30340;&#65292;&#36825;&#26679;&#35774;&#35745;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#25903;&#25345;&#22810;&#20010;&#21327;&#35758;&#12290;</p><p>&#24403;&#23458;&#25143;&#31471;&#36890;&#36807;JMS&#25509;&#21475;&#35775;&#38382;HornetQ&#26102;&#65292;&#25152;&#26377;JMS&#30340;&#25805;&#20316;&#37117;&#34987;&#36716;&#25442;&#25104;&#30456;&#24212;&#30340;&#26680;&#24515;API&#65292;&#28982;&#21518;&#23558;&#35831;&#27714;&#20197;HornetQ&#26684;&#24335;&#21457;&#21521;&#26381;&#21153;&#22120;&#12290;</p><p>HornetQ&#26381;&#21153;&#22120;&#21482;&#25509;&#25910;&#26680;&#24515;API&#30340;&#35775;&#38382;&#12290;</p><p>&#22270;3.1&#25551;&#36848;&#20102;&#36825;&#20123;&#25805;&#20316;&#12290;</p><p>
            </p><div align="center"><img src="images/architecture1.jpg" align="middle"></div><p>
        </p><p>&#22312;&#22270;3.1&#20013;&#31034;&#20986;&#20102;&#20004;&#20010;&#29992;&#25143;&#35775;&#38382;HornetQ&#26381;&#21153;&#22120;&#12290;&#29992;&#25143;1&#20351;&#29992;JMS API&#65292;&#29992;&#25143;2&#20351;&#29992;&#30340;&#26159;&#26680;&#24515;API&#12290;</p><p>&#22270;&#20013;&#28165;&#26970;&#30340;&#23637;&#31034;&#20986;&#20102;JMS&#26159;&#22914;&#20309;&#36890;&#36807;&#23553;&#35013;&#65288;facade&#65289;&#36716;&#21270;&#20026;&#26680;&#24515;API&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e518"></a>5.2.&nbsp;&#23558;HornetQ&#23884;&#20837;&#21040;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20869;&#37096;&#38656;&#35201;&#28040;&#24687;&#26381;&#21153;&#65292;&#20294;&#21516;&#26102;&#20320;&#21448;&#19981;&#24819;&#23558;&#28040;&#24687;&#26381;&#21153;&#26292;&#38706;&#20026;&#21333;&#29420;&#30340;HornetQ&#26381;&#21153;&#22120;&#65292;&#20320;&#21487;&#20197;&#22312;&#24212;&#29992;&#20013;&#30452;&#25509;&#23558;HornetQ&#23454;&#20363;&#21270;&#12290;</p><p>&#26377;&#20851;&#23884;&#20837;&#24335;HornetQ&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#21442;&#38405; <a href="#embedding-hornetq" title="Chapter&nbsp;43.&nbsp;&#23884;&#20837;&#24335;HornetQ">Chapter&nbsp;43, <i>&#23884;&#20837;&#24335;HornetQ</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e527"></a>5.3.&nbsp;&#23558;HornetQ&#19982;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;</h2></div></div><div></div></div><p>HornetQ&#25552;&#20379;&#20102;&#26631;&#20934;&#30340;JCA&#36866;&#37197;&#22120;&#65292;&#21033;&#29992;&#23427;&#21487;&#20197;&#23558;HornetQ&#36731;&#26494;&#22320;&#38598;&#25104;&#21040;&#20219;&#20309;&#19968;&#20010;&#31526;&#21512;JEE&#35268;&#33539;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#25110;servlet&#23481;&#22120;&#20013;&#12290;</p><p>JEE&#24212;&#29992;&#26381;&#21153;&#21697;&#25552;&#20379;&#20102;&#28040;&#24687;Bean&#65288;MDB&#65289;&#29992;&#20110;&#22788;&#29702;&#26469;&#33258;&#22806;&#37096;&#30340;&#28040;&#24687;&#65292;&#27604;&#22914;&#26469;&#33258;JMS&#31995;&#32479;&#25110;&#37038;&#20214;&#31995;&#32479;&#30340;&#28040;&#24687;&#12290;</p><p>&#26368;&#24120;&#35265;&#30340;&#24212;&#29992;&#24212;&#35813;&#26159;&#29992;MDB&#26469;&#25509;&#25910;&#26469;&#33258;JMS&#31995;&#32479;&#20013;&#30340;&#28040;&#24687;&#20102;&#12290;&#22312;JEE&#35268;&#33539;&#20013;&#35268;&#23450;&#20102;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#20351;&#29992;JCA adaptor&#19982;JMS&#28040;&#24687;&#31995;&#32479;&#38598;&#25104;&#65292;
              MDB&#36890;&#36807;&#36825;&#20010;adaptor&#26469;&#25509;&#25910;&#28040;&#24687;&#12290;</p><p>JCA adaptor&#19981;&#20165;&#21487;&#20197;&#29992;&#26469;&#25509;&#25910;&#28040;&#24687;&#65292;&#36824;&#21487;&#20197;&#29992;&#26469;&#20174;EJB&#25110;servlet&#20013;&#21521;&#22806;&#37096;&#30340;JMS&#21457;&#36865;&#28040;&#24687;&#12290;&#22312;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#24212;&#35813;&#29992;JCA adaptor&#19982;JMS&#31995;&#32479;&#36827;&#34892;&#20132;&#20114;&#12290;
              &#23454;&#38469;&#19978;JEE&#35268;&#33539;&#20013;&#19981;&#20801;&#35768;&#22312;JEE&#26381;&#21153;&#22120;&#20013;&#19981;&#36890;&#36807;JCA&#32780;&#30452;&#25509;&#35775;&#38382;JMS&#31995;&#32479;&#12290;</p><p>&#22312;EJB&#20013;&#20351;&#29992;&#28040;&#24687;&#24448;&#24448;&#38656;&#35201;&#36830;&#25509;&#27744;&#25110;&#20132;&#26131;&#65292;&#32780;JCA&#21487;&#20197;&#25552;&#20379;&#36825;&#26041;&#38754;&#30340;&#26381;&#21153;&#65292;&#26080;&#38656;&#39069;&#22806;&#30340;&#24320;&#21457;&#20219;&#21153;&#12290;&#24403;&#28982;&#30452;&#25509;&#35775;&#38382;JMS&#31995;&#32479;&#26159;&#21487;&#33021;&#30340;&#65292;
              &#20294;&#26159;&#20320;&#23558;&#19981;&#33021;&#21033;&#29992;JCA&#25152;&#25552;&#20379;&#30340;&#36825;&#20123;&#26377;&#29992;&#30340;&#21151;&#33021;&#65292;&#22240;&#27492;&#25105;&#20204;&#19981;&#24314;&#35758;&#20351;&#29992;&#30452;&#25509;&#35775;&#38382;&#30340;&#26041;&#24335;&#12290;</p><p>&#22270;3.2&#32473;&#20986;&#20102;HornetQ&#36890;&#36807;JCA adaptor&#19982;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;&#30340;&#31034;&#24847;&#22270;&#12290;&#22270;&#20013;&#21487;&#20197;&#30475;&#20986;&#25152;&#26377;&#30340;&#20132;&#20114;&#37117;&#36890;&#36807;JCA adaptor&#12290;</p><p>&#22270;&#20013;&#24102;&#26377;&#31105;&#27490;&#31526;&#21495;&#30340;&#31661;&#22836;&#34920;&#26126;&#30340;&#26159;&#20174;EJB&#20250;&#35805;Bean&#30452;&#25509;&#35775;&#38382;HornetQ&#30340;&#24773;&#20917;&#12290;&#30001;&#20110;&#19981;&#36890;&#36807;JCA&#65292;&#36825;&#31181;&#26041;&#27861;&#24448;&#24448;&#36896;&#25104;&#27599;&#27425;EJB&#35775;&#38382;HornetQ&#37117;&#35201;&#26032;&#24314;&#19968;&#20010;&#36830;&#25509;&#21644;&#20250;&#35805;&#65292;
              &#20351;&#25928;&#29575;&#22823;&#38477;&#20302;&#12290;&#36825;&#34987;&#35270;&#20026;&#21453;&#35774;&#35745;&#27169;&#24335;&#65288;anti-pattern&#65289;&#12290;</p><p>
            </p><div><img src="images/architecture2.jpg"></div><p>
        </p><p><a href="#appserver-integration" title="Chapter&nbsp;32.&nbsp;Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;">Chapter&nbsp;32, <i>Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;</i></a>&#23545;&#22914;&#20309;&#20351;&#29992;JCA&#32473;&#20986;&#20102;&#26356;&#21152;&#35814;&#32454;&#30340;&#25551;&#36848;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e551"></a>5.4.&nbsp;HornetQ&#20316;&#20026;&#29420;&#31435;&#30340;&#26381;&#21153;&#65288;standalone&#65289;</h2></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#37096;&#32626;&#25104;&#20026;&#29420;&#31435;&#30340;&#26381;&#21153;&#22120;&#12290;&#23427;&#21487;&#36816;&#34892;&#20110;&#20219;&#20309;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#20043;&#22806;&#65292;&#20316;&#20026;&#19968;&#20010;&#29420;&#31435;&#30340;&#26381;&#21153;&#36816;&#34892;&#12290;
              &#20316;&#20026;&#29420;&#31435;&#26381;&#21153;&#22120;&#36816;&#34892;&#26102;&#65292;HornetQ&#28040;&#24687;&#26381;&#21153;&#22120;&#21253;&#25324;&#19968;&#20010;&#26680;&#24515;&#26381;&#21153;&#22120;&#65292;&#19968;&#20010;JMS&#26381;&#21153;&#20197;&#21450;&#19968;&#20010;JNDI&#26381;&#21153;&#12290;</p><p>JMS&#26381;&#21153;&#29992;&#26469;&#37096;&#32626;&#26381;&#21153;&#22120;&#31471;<tt class="literal">hornetq-jms.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;JMS Queue&#65292;Topic&#21644;ConnectionFactory&#23454;&#20363;&#12290;
              &#27492;&#22806;&#23427;&#36824;&#25552;&#20379;&#19968;&#32452;&#31616;&#21333;&#30340;&#31649;&#29702;&#25509;&#21475;&#65292;&#36890;&#36807;&#36825;&#20123;&#25509;&#21475;&#21487;&#20197;&#21019;&#24314;&#12289;&#28040;&#27585;&#65288;destroy&#65289;Queue&#65292;Topic&#21644;ConnectionFactory&#23454;&#20363;&#12290;
              &#29992;&#20110;&#21487;&#20197;&#36890;&#36807;JMX&#25110;&#36830;&#25509;&#20351;&#29992;&#36825;&#20123;&#25509;&#21475;&#12290;JMS&#26381;&#21153;&#26159;&#21333;&#29420;&#30340;&#26381;&#21153;&#65292;&#23427;&#19981;&#26159;HornetQ&#26680;&#24515;&#26381;&#21153;&#12290;HornetQ&#30340;&#26680;&#24515;&#19981;&#21253;&#21547;JMS&#30456;&#20851;&#30340;&#26381;&#21153;&#12290;
              &#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#36890;&#36807;&#26381;&#21153;&#22120;&#31471;&#30340;xml&#37197;&#32622;&#25991;&#20214;&#37096;&#32626;&#20219;&#20309;JMS&#23545;&#35937;&#65292;&#20063;&#19981;&#38656;&#35201;JMS&#30340;&#31649;&#29702;&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#36873;&#25321;&#19981;&#21551;&#21160;&#35813;&#26381;&#21153;&#12290;</p><p>&#21551;&#21160;JNDI&#26381;&#21153;&#30340;&#30446;&#30340;&#26159;&#22240;&#20026;JMS&#38656;&#35201;&#36890;&#36807;JNDI&#26469;&#33719;&#24471;Queue&#65292;Topic&#20197;&#21450;ConnectionFactory&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#65292;&#20063;&#21487;&#20197;&#36873;&#25321;&#19981;&#21551;&#21160;&#35813;&#26381;&#21153;&#12290;</p><p>HornetQ&#20801;&#35768;&#22312;&#23458;&#25143;&#31471;&#31243;&#24207;&#20013;&#36890;&#36807;&#32534;&#31243;&#26469;&#30452;&#25509;&#21019;&#24314;&#21508;&#31181;JMS&#23545;&#35937;&#21644;&#26680;&#24515;&#23545;&#35937;&#26469;&#20195;&#26367;JNDI&#26597;&#25214;&#65292;&#25152;&#20197;JNDI&#19981;&#26159;&#24517;&#38656;&#30340;&#12290;
              HornetQ&#37319;&#29992;JBoss Microcontainer&#26469;&#24341;&#23548;&#24182;&#23454;&#20363;&#21270;&#26381;&#21153;&#65292;&#24182;&#20445;&#35777;&#27169;&#22359;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;JBoss Microcontainer&#26159;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;POJO&#24341;&#23548;&#22120;&#65288;bootstrapper&#65289;&#12290;</p><p>&#22270;3.3&#32473;&#20986;&#20102;HornetQ&#29420;&#31435;&#26381;&#21153;&#22120;&#30340;&#26550;&#26500;&#12290;</p><p>
            </p><div><img src="images/architecture3.jpg"></div><p>
        </p><p>&#30456;&#20851;&#37197;&#32622;&#30340;&#30456;&#20851;&#20449;&#24687;&#21487;&#20197;&#22312;&#31532;<a href="#server.configuration" title="47.1.&nbsp;&#26381;&#21153;&#22120;&#37197;&#32622;">Section&nbsp;47.1, &#8220;&#26381;&#21153;&#22120;&#37197;&#32622;&#8221;</a>&#25214;&#21040;&#12290;$ </p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="using-server"></a>Chapter&nbsp;6.&nbsp;&#20351;&#29992;HornetQ&#26381;&#21153;</h2></div></div><div></div></div><p>&#26412;&#31456;&#23558;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;HornetQ&#26381;&#21153;&#12290;</p><p>&#20854;&#20013;&#30340;&#20869;&#23481;&#21253;&#25324;&#26381;&#21153;&#22120;&#30340;&#20301;&#32622;&#65292;&#22914;&#20309;&#21551;&#21160;&#21644;&#20572;&#27490;HornetQ&#26381;&#21153;&#22120;&#12290;&#26412;&#31456;&#36824;&#23558;&#35299;&#37322;HornetQ&#30340;&#30446;&#24405;&#32467;&#26500;&#65292;&#20854;&#20013;&#30340;&#25991;&#20214;&#21450;&#20854;&#29992;&#36884;&#12290;</p><p>&#26412;&#31456;&#20013;&#25152;&#25552;&#21040;&#30340;HornetQ&#26381;&#21153;&#22120;&#26159;&#25351;HornetQ&#40664;&#35748;&#37197;&#32622;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#65292;&#21253;&#21547;JMS&#26381;&#21153;&#21644;JNDI&#26381;&#21153;&#12290;</p><p>&#23545;&#20110;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#30340;HornetQ&#65292;&#20854;&#22522;&#26412;&#32467;&#26500;&#26159;&#19968;&#26679;&#30340;&#65292;&#21482;&#26159;&#26377;&#19968;&#20123;&#23567;&#30340;&#24046;&#21035;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e603"></a>6.1.&nbsp;&#26381;&#21153;&#30340;&#21551;&#21160;&#21644;&#20572;&#27490;</h2></div></div><div></div></div><p>&#22312;HornetQ&#30340;&#23433;&#35013;&#30446;&#24405;&#19979;<tt class="literal">bin</tt>&#23376;&#30446;&#24405;&#20013;&#21253;&#21547;&#26377;&#19968;&#20010;unit/linux&#33050;&#26412;run.sh&#21644;&#23545;&#24212;&#30340;Windows&#25209;&#22788;&#29702;&#25991;&#20214;run.bat&#12290;</p><p>&#22914;&#26524;&#20320;&#26159;&#22312;Unix/Linux&#29615;&#22659;&#65292;&#22312;bin&#30446;&#24405;&#19979;&#36816;&#34892;<tt class="literal">./run.sh</tt>&#12290;</p><p>&#22914;&#26524;&#26159;&#22312;Windows&#29615;&#22659;&#65292;&#21017;&#22312;bin&#30446;&#24405;&#19979;&#36816;&#34892; <tt class="literal">run.bat</tt>&#12290;</p><p>&#36825;&#20010;&#33050;&#26412;&#25991;&#20214;&#20250;&#35774;&#32622;classpath&#20197;&#21450;&#21508;&#31181;JVM&#21442;&#25968;&#65292;&#24182;&#21551;&#21160;JBoss Microcontainer&#12290;JBoss Microcontainer&#26159;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#23481;&#22120;&#12290;
              &#23427;&#34987;&#29992;&#26469;&#37096;&#32626;HornetQ&#30340;POJO&#23545;&#35937;&#12290;</p><p>&#35201;&#20572;&#27490;&#26381;&#21153;&#65292;&#36816;&#34892;&#20854;&#20013;&#30340;&#30456;&#24212;&#33050;&#26412;&#65306;&#22312;Unix/Linux&#29615;&#22659;&#19979;&#65292;&#36816;&#34892; <tt class="literal">stop.sh</tt>&#12290;
              &#22312;Windows&#29615;&#22659;&#65292;&#36816;&#34892; <tt class="literal">run.bat</tt>&#12290;</p><p>&#27880;&#24847;HornetQ&#38656;&#35201;&#22312;Java 6&#21450;&#20197;&#19978;&#29256;&#26412;&#25165;&#33021;&#27491;&#24120;&#36816;&#34892;&#12290;</p><p>&#21551;&#21160;&#21644;&#20572;&#27490;&#33050;&#26412;&#22312;&#40664;&#35748;&#26465;&#20214;&#19979;&#35835;&#21462;<tt class="literal">config/stand-alone/non-clustered</tt>&#30446;&#24405;&#19979;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
              &#22914;&#26524;&#35201;&#25351;&#21521;&#20854;&#20182;&#30446;&#24405;&#65292;&#21487;&#20197;&#22312;&#21629;&#20196;&#34892;&#23454;&#29616;&#65292;&#20363;&#22914;&#65306; <tt class="literal">./run.sh ../config/stand-alone/clustered</tt>&#12290;
              &#36825;&#19968;&#26041;&#27861;&#21516;&#26679;&#36866;&#29992;&#20110;Windows&#25209;&#22788;&#29702;&#25991;&#20214;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e641"></a>6.2.&nbsp;&#26381;&#21153;&#22120;&#31471;JVM&#21442;&#25968;&#30340;&#35774;&#32622;</h2></div></div><div></div></div><p>&#22312;&#21551;&#21160;&#33050;&#26412;<tt class="literal">run.sh</tt>&#21644;<tt class="literal">run.bat</tt>&#20013;&#35774;&#32622;&#20102;&#19968;&#20123;JVM&#21442;&#25968;&#65292;
              &#36825;&#20123;&#21442;&#25968;&#20027;&#35201;&#26159;&#35843;&#25972;Java 6&#30340;&#36816;&#34892;&#29615;&#22659;&#21450;&#25289;&#22334;&#22238;&#25910;&#30340;&#31574;&#30053;&#12290;&#25105;&#20204;&#24314;&#35758;&#37319;&#29992;&#24182;&#34892;&#25289;&#22334;&#22238;&#25910;&#30340;&#26041;&#27861;&#12290;
              &#36825;&#31181;&#26041;&#27861;&#21487;&#20197;&#23558;&#25289;&#22334;&#22238;&#25910;&#25152;&#36896;&#25104;&#30340;&#24310;&#26102;&#36827;&#34892;&#24179;&#22343;&#20998;&#37197;&#65292;&#26377;&#25928;&#20943;&#23569;&#30001;&#20110;&#25289;&#22334;&#22238;&#25910;&#24341;&#36215;&#30340;&#38271;&#26102;&#38388;&#26242;&#20572;&#30340;&#24773;&#20917;&#12290;</p><p>&#40664;&#35748;&#26465;&#20214;&#19979;HornetQ&#38656;&#35201;&#26368;&#22823;1GB&#30340;&#20869;&#23384;&#31354;&#38388;&#12290;&#36890;&#36807;<tt class="literal">-Xms</tt>&#21644;<tt class="literal">-Xmx</tt>&#21487;&#20197;&#35843;&#25972;Java&#31243;&#24207;&#20869;&#23384;&#30340;&#20351;&#29992;&#12290;</p><p>&#20320;&#21487;&#20197;&#21521;&#21551;&#21160;&#33050;&#26412;&#20013;&#28155;&#21152;&#20854;&#23427;&#30340;&#21442;&#25968;&#25110;&#20462;&#25913;&#24050;&#26377;&#30340;&#21442;&#25968;&#65292;&#24050;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e662"></a>6.3.&nbsp;&#26381;&#21153;&#22120;&#31471;&#30340;classpath</h2></div></div><div></div></div><p>HornetQ&#22312;&#20854;classpath&#20013;&#23547;&#25214;&#37197;&#32622;&#25991;&#20214;&#12290;</p><p>classpath&#34987;&#23450;&#20041;&#22312;<tt class="literal">run.sh</tt>&#21644;<tt class="literal">run.bat</tt>&#33050;&#26412;&#20013;&#12290;&#22312;HornetQ&#30340;&#21457;&#24067;&#20013;&#65292;&#21551;&#21160;&#33050;&#26412;&#23558;&#38750;&#38598;&#32676;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#21152;&#36827;&#20102;classpath&#20013;&#12290;&#35813;&#30446;&#24405;&#21253;&#25324;&#20102;&#19968;&#32452;&#37197;&#32622;&#25991;&#20214;&#65292;&#21487;&#20197;&#35753;HornetQ&#20197;&#22522;&#26412;&#30340;&#38750;&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#12290;&#23427;&#30340;&#20855;&#20307;&#20301;&#32622;&#26159;&#22312;HornetQ&#21457;&#24067;&#26681;&#30446;&#24405;&#19979; config/stand-along/non-clustered/ &#23376;&#30446;&#24405;&#12290;</p><p>&#22312;HornetQ&#30340;&#21457;&#24067;&#21253;&#20013;&#21253;&#25324;&#20102;&#19968;&#32452;&#26631;&#20934;&#30340;&#37197;&#32622;&#30446;&#24405;&#65292;&#23427;&#20204;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#38750;&#38598;&#32676;&#26041;&#24335;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#37197;&#32622;</p></li><li><p>&#38598;&#32676;&#26041;&#24335;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#37197;&#32622;</p></li><li><p>&#38750;&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;</p></li><li><p>&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;</p></li></ul></div><p>&#24403;&#28982;&#20320;&#21487;&#20197;&#21019;&#24314;&#33258;&#24049;&#23450;&#20041;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#12290;&#35201;&#27880;&#24847;&#30340;&#26159;&#23558;&#20320;&#30340;&#30446;&#24405;&#21152;&#21040;classpath&#20013;&#20197;&#20415;HornetQ&#33021;&#27491;&#30830;&#25214;&#21040;&#24182;&#21152;&#36733;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-server.library.path"></a>6.4.&nbsp;Library Path</h2></div></div><div></div></div><p>&#22914;&#26524;&#35201;&#22312;Linux&#19978;&#20351;&#29992;&#24322;&#27493;IO&#30340;&#26085;&#24535;&#65288;<a href="#aio-journal">Asynchronous IO Journal</a>&#65289;&#65292;
              &#20320;&#38656;&#35201;&#22312;java&#36873;&#39033;&#20013;&#25351;&#23450;<tt class="literal">java.library.path</tt>&#12290;<tt class="literal">run.sh</tt>&#33050;&#26412;&#21487;&#20197;&#33258;&#21160;&#23436;&#25104;&#36825;&#19968;&#27493;&#12290;</p><p>&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;<tt class="literal">java.library.path</tt>&#65292;JVM&#23558;&#20351;&#29992;<tt class="literal">LD_LIBRARY_PATH</tt>&#29615;&#22659;&#21464;&#37327;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e714"></a>6.5.&nbsp;&#31995;&#32479;&#21464;&#37327;</h2></div></div><div></div></div><p>HornetQ&#21629;&#20196;&#34892;&#21487;&#20197;&#25509;&#21463;&#31995;&#32479;&#21464;&#37327;&#26469;&#37197;&#32622;&#26085;&#24535;&#65288;logging&#65289;&#12290;&#26377;&#20851;logging&#37197;&#32622;&#30340;&#20855;&#20307;&#20449;&#24687;&#21442;&#35265;<a href="#logging" title="Chapter&nbsp;42.&nbsp;&#26085;&#24535;&#65288;Logging&#65289;">Chapter&nbsp;42, <i>&#26085;&#24535;&#65288;Logging&#65289;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-server.configuration"></a>6.6.&nbsp;&#37197;&#32622;&#25991;&#20214;</h2></div></div><div></div></div><p>&#37197;&#32622;&#25991;&#20214;&#30340;&#36335;&#24452;&#23450;&#20041;&#22312; <tt class="literal">run.sh</tt> &#21644; <tt class="literal">run.bat</tt> &#33050;&#26412;&#20013;&#30340;classpath&#37324;&#12290;&#35813;&#36335;&#24452;&#19979;&#21487;&#20197;&#21253;&#21547;&#20197;&#19979;&#25991;&#20214;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">hornetq-beans.xml</tt> &#65288;&#22914;&#26524;&#26159;&#36816;&#34892;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#65292;&#21017;&#20026; <tt class="literal">hornetq-jboss-beans.xml</tt>&#65289;&#12290;&#36825;&#26159;JBoss Microcontainer&#30340;bean&#37197;&#32622;&#25991;&#20214;&#12290;&#20854;&#20013;&#23450;&#20041;&#20102;HornetQ&#30340;
                    &#21508;&#31181;bean&#65292;&#20197;&#21450;&#23427;&#20204;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;HornetQ&#30340;bean&#37117;&#26159;&#19968;&#20123;POJO&#12290;&#26159;JBoss Microcontainer&#20445;&#35777;&#20102;&#36825;&#20123;bean&#30340;&#27491;&#30830;&#35013;&#36733;&#21644;&#36816;&#34892;&#12290;</p></li><li><p><tt class="literal">hornetq-configuration.xml</tt>&#12290;&#36825;&#20010;&#26159;HornetQ&#30340;&#20027;&#35201;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
                    &#20854;&#20013;&#30340;&#25152;&#26377;&#21442;&#25968;&#22312;<a href="#configuration-index" title="Chapter&nbsp;47.&nbsp;&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;">Chapter&nbsp;47, <i>&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;</i></a>&#20013;&#32473;&#20986;&#20102;&#35299;&#37322;. &#22312; <a href="#usingserver.mainconfig" title="6.9.&nbsp;&#20027;&#37197;&#32622;&#25991;&#20214;">Section&nbsp;6.9, &#8220;&#20027;&#37197;&#32622;&#25991;&#20214;&#8221;</a> &#20063;&#26377;&#26356;&#22810;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290;</p></li><li><p><tt class="literal">hornetq-queues.xml</tt>&#12290;&#36825;&#20010;&#25991;&#20214;&#37324;&#21253;&#21547;&#20102;&#39044;&#23450;&#20041;&#30340;queue&#20197;&#21450;&#23427;&#20204;&#30340;&#37197;&#32622;&#65292;&#21253;&#25324;&#23433;&#20840;&#35774;&#32622;&#12290;
                    &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#30340;&#25991;&#20214;&#65292;&#37324;&#38754;&#25152;&#26377;&#30340;&#20869;&#23481;&#37117;&#21487;&#20197;&#25918;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;
                    &#22312;&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#19979;&#24182;&#27809;&#26377;&#36825;&#20010;&#25991;&#20214;&#12290;HornetQ&#20043;&#25152;&#20197;&#25552;&#20379;&#36825;&#20010;&#25991;&#20214;&#26159;&#20026;&#20102;&#29992;&#25143;&#20415;&#20110;&#31649;&#29702;&#20182;&#20204;&#30340;queue&#12290;&#22312;classpath&#20013;
                    &#20801;&#35768;&#21253;&#21547;&#22810;&#20010; <tt class="literal">hornetq-queues.xml</tt> &#25991;&#20214;&#12290;&#25152;&#26377;&#30340;&#36825;&#20123;&#25991;&#20214;&#37117;&#20250;&#34987;&#21152;&#36733;&#12290;</p></li><li><p><tt class="literal">hornetq-users.xml</tt>&#12290;&#29992;&#25143;&#20449;&#24687;&#25991;&#20214;&#12290;HornetQ&#26412;&#36523;&#23454;&#29616;&#20102;&#19968;&#20010;&#22522;&#26412;&#30340;
                    &#23433;&#20840;&#31649;&#29702;&#22120;&#65288;security manager&#65289;&#65292;&#23427;&#20174;&#36825;&#20010;&#25991;&#20214;&#20869;&#35835;&#21462;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;&#65292;&#22914;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#21644;&#35282;&#33394;&#12290;
                    &#24819;&#20102;&#35299;&#26356;&#22810;&#20851;&#20110;&#23433;&#20840;&#30340;&#20449;&#24687;&#65292;&#21442;&#35265; <a href="#security" title="Chapter&nbsp;31.&nbsp;&#23433;&#20840;">Chapter&nbsp;31, <i>&#23433;&#20840;</i></a>&#12290;</p></li><li><p><tt class="literal">hornetq-jms.xml</tt>&#12290;&#36825;&#20010;&#25991;&#20214;&#21253;&#21547;&#26377;JMS&#23545;&#35937;&#12290;HornetQ&#30340;&#40664;&#35748;&#37197;&#32622;&#20013;&#21253;&#21547;&#26377;JMS&#26381;&#21153;&#65292;
                    &#23427;&#20174;&#36825;&#20010;&#25991;&#20214;&#20013;&#35835;&#21462;JMS Queue&#65292;Topic&#21644;ConnectionFactory&#24182;&#23558;&#23427;&#20204;&#37096;&#32626;&#21040;JNDI&#26381;&#21153;&#20013;&#12290;&#22914;&#26524;&#20320;&#19981;&#20351;&#29992;JMS&#65292;
                    &#25110;&#32773;&#20320;&#19981;&#38656;&#35201;&#37096;&#32626;&#36825;&#20123;JMS&#23545;&#35937;&#65292;&#37027;&#20040;&#20320;&#23601;&#19981;&#38656;&#35201;&#36825;&#20010;&#25991;&#20214;&#12290;&#26377;&#20851;JMS&#30340;&#20351;&#29992;&#35814;&#35265;<a href="#using-jms" title="Chapter&nbsp;7.&nbsp;&#20351;&#29992;JMS">Chapter&nbsp;7, <i>&#20351;&#29992;JMS</i></a>&#12290;</p></li><li><p><tt class="literal">logging.properties</tt> &#36825;&#20010;&#25991;&#20214;&#29992;&#20110;&#37197;&#32622;logging
                    handlers&#12290;&#35814;&#35265; <a href="#logging" title="Chapter&nbsp;42.&nbsp;&#26085;&#24535;&#65288;Logging&#65289;">Chapter&nbsp;42, <i>&#26085;&#24535;&#65288;Logging&#65289;</i></a>&#12290;</p></li><li><p><tt class="literal">log4j.xml</tt>&#12290; &#36825;&#26159; Log4j handler&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23558;<tt class="literal">file-deployment-enabled</tt> &#21442;&#25968;
                  &#23450;&#20041;&#20026;false&#65292;&#21017;HornetQ&#23558;&#19981;&#20250;&#21152;&#36733;&#20854;&#23427;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;true&#12290;</p></div><p>&#25152;&#26377;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#21442;&#25968;&#37117;&#21487;&#20197;&#29992;&#31995;&#32479;&#21464;&#37327;&#26469;&#23450;&#20041;&#20854;&#20540;&#12290;&#20197;&#19979;&#29992;&#19968;&#20010;connector&#30340;&#37197;&#32622;&#26469;&#35828;&#26126;&#65306;</p><pre class="programlisting">&lt;connector name="netty"&gt;
         &lt;factory-class&gt;org.hornetq.integration.transports.netty.NettyConnectorFactory
           &lt;/factory-class&gt;
         &lt;param key="host"  value="${hornetq.remoting.netty.host:localhost}" type="String"/&gt;
         &lt;param key="port"  value="${hornetq.remoting.netty.port:5445}" type="Integer"/&gt;
&lt;/connector&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#25105;&#20204;&#23450;&#20041;&#20102;&#20004;&#20010;&#31995;&#32479;&#21464;&#37327; <tt class="literal">hornetq.remoting.netty.host</tt> &#21644; <tt class="literal">hornetq.remoting.netty.port</tt>&#12290;&#23427;&#20204;&#30340;&#20540;&#20250;&#34987;&#30456;&#24212;&#30340;&#31995;&#32479;&#21464;&#37327;&#30340;&#20540;&#65288;&#22914;&#26524;&#23450;&#20041;&#20102;&#30340;&#35805;&#65289;&#25152;&#26367;&#20195;&#12290;
                &#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36825;&#20123;&#31995;&#32479;&#21464;&#37327;&#65292;&#23427;&#20204;&#30340;&#40664;&#35748;&#20540;&#23558;&#20998;&#21035;&#20026; localhost &#21450; 5445&#12290;&#20063;&#21487;&#20197;&#19981;&#32473;&#20986;&#40664;&#35748;&#20540;&#65292;&#20294;&#22914;&#26524;&#36825;&#26679;&#23601;
                <span class="emphasis"><em>&#24517;&#39035;</em></span>&#35201;&#23450;&#20041;&#30456;&#24212;&#30340;&#31995;&#32479;&#21464;&#37327;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="server.microcontainer.configuration"></a>6.7.&nbsp;JBoss Microcontainer Beans &#25991;&#20214;</h2></div></div><div></div></div><p>HornetQ&#30340;POJO&#23545;&#35937;&#26159;&#30001;<a href="http://www.jboss.org/jbossmc/" target="_top"> JBoss Microcontainer
            </a>&#36827;&#34892;&#21152;&#36733;&#21644;&#36816;&#34892;&#30340;&#12290;JBoss Microcontainer&#26159;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#21152;&#36733;&#24037;&#20855;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#26159;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#36816;&#34892;&#65292;HornetQ&#21516;&#26679;&#38656;&#35201;&#19968;&#20010;bean&#30340;&#37197;&#32622;&#25991;&#20214;&#26469;&#23558;&#20854;&#37096;&#32626;&#21040;JBoss&#20013;&#12290;&#20294;&#26159;&#36825;&#19982;&#21333;&#29420;&#36816;&#34892;&#26102;&#30340;&#37197;&#32622;&#25991;&#20214;&#30053;&#26377;&#19981;&#21516;&#12290;
                &#36825;&#26159;&#22240;&#20026;&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#24050;&#32463;&#37096;&#32626;&#20102;&#19968;&#20123;&#26381;&#21153;&#65292;&#22914;&#23433;&#20840;&#26381;&#21153;&#31561;&#12290;&#25152;&#20197;&#22312;HornetQ&#20013;&#36825;&#20123;&#26381;&#21153;&#23601;&#19981;&#38656;&#35201;&#20877;&#37096;&#32626;&#20102;&#12290;</p></div><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;HornetQ&#20316;&#20026;&#21333;&#29420;&#26381;&#21153;&#22120;&#26102;&#30340;&#19968;&#20010;&#37197;&#32622;&#25991;&#20214;&#20363;&#23376;&#65306;</p><p>
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;deployment xmlns="urn:jboss:bean-deployer:2.0"&gt;

&lt;bean name="Naming" class="org.jnp.server.NamingBeanImpl"/&gt;

&lt;!-- JNDI server. Disable this if you don't want JNDI --&gt;
&lt;bean name="JNDIServer" class="org.jnp.server.Main"&gt;
   &lt;property name="namingInfo"&gt;
      &lt;inject bean="Naming"/&gt;
   &lt;/property&gt;
   &lt;property name="port"&gt;1099&lt;/property&gt;
   &lt;property name="bindAddress"&gt;localhost&lt;/property&gt;
   &lt;property name="rmiPort"&gt;1098&lt;/property&gt;
   &lt;property name="rmiBindAddress"&gt;localhost&lt;/property&gt;
&lt;/bean&gt;

&lt;!-- MBean server --&gt;
&lt;bean name="MBeanServer" class="javax.management.MBeanServer"&gt;
   &lt;constructor factoryClass="java.lang.management.ManagementFactory"
      factoryMethod="getPlatformMBeanServer"/&gt;
&lt;/bean&gt; 

&lt;!-- The core configuration --&gt;
&lt;bean name="Configuration" class="org.hornetq.core.config.impl.FileConfiguration"&gt;
&lt;/bean&gt;

&lt;!-- The security manager --&gt;
&lt;bean name="HornetQSecurityManager" 
      class="org.hornetq.spi.core.security.HornetQSecurityManagerImpl"&gt;
   &lt;start ignored="true"/&gt;
   &lt;stop ignored="true"/&gt;
&lt;/bean&gt;

&lt;!-- The core server --&gt;
&lt;bean name="HornetQServer" class="org.hornetq.core.server.impl.HornetQServerImpl"&gt;
   &lt;start ignored="true"/&gt;
   &lt;stop ignored="true"/&gt;  
   &lt;constructor&gt;
      &lt;parameter&gt;
         &lt;inject bean="Configuration"/&gt;
      &lt;/parameter&gt;
      &lt;parameter&gt;
         &lt;inject bean="MBeanServer"/&gt;
      &lt;/parameter&gt;
      &lt;parameter&gt;
         &lt;inject bean="HornetQSecurityManager"/&gt;
      &lt;/parameter&gt;        
   &lt;/constructor&gt;         
&lt;/bean&gt;

&lt;!-- The JMS server --&gt;
&lt;bean name="JMSServerManager" 
      class="org.hornetq.jms.server.impl.JMSServerManagerImpl"&gt;
   &lt;constructor&gt;         
      &lt;parameter&gt;
         &lt;inject bean="HornetQServer"/&gt;
      &lt;/parameter&gt;         
   &lt;/constructor&gt;
&lt;/bean&gt;

&lt;/deployment&gt;</pre><p>
        </p><p>&#25105;&#20204;&#20174;&#19978;&#21487;&#20197;&#30475;&#20986;HornetQ&#30340;&#21333;&#29420;&#26381;&#21153;&#22120;&#65288;&#20197;&#21450;&#26680;&#24515;&#26381;&#21153;&#22120;&#65289;&#21253;&#25324;&#20102;&#19968;&#20123;POJO&#23545;&#35937;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JNDIServer</p><p>&#24456;&#22810;&#23458;&#25143;&#31471;&#38656;&#35201;JNDI&#26469;&#33719;&#21462;JMS&#30340;&#23545;&#35937;&#65292;&#22240;&#27492;&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;JNDI&#26381;&#21153;&#26469;&#28385;&#36275;&#23427;&#20204;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;JNDI&#65292;&#21487;&#20197;&#22312;&#37197;&#32622;
                      &#25991;&#20214;&#20013;&#23558;&#23427;&#20204;&#27880;&#37322;&#25481;&#12290;</p></li><li><p>MBeanServer</p><p>&#36825;&#20010;&#23545;&#35937;&#25552;&#20379;&#20102;JMX&#31649;&#29702;&#25509;&#21475;&#12290;&#23427;&#26159;&#19968;&#20010;MBean&#26381;&#21153;&#22120;&#65292;&#21487;&#31649;&#29702;&#30340;&#23545;&#35937;&#21487;&#20197;&#27880;&#20876;&#21040;&#36825;&#20010;&#26381;&#21153;&#22120;&#19978;&#12290;
                      &#36890;&#24120;&#36825;&#23601;&#26159;&#19968;&#20010;JVM&#20869;&#37096;&#30340;&#40664;&#35748;&#30340;&#24179;&#21488;MBean&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#20123;&#26381;&#21153;&#65292;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#23558;&#20854;&#27880;&#37322;&#25110;&#21024;&#38500;&#12290;</p></li><li><p>Configuration</p><p>&#36825;&#26159;HornetQ&#30340;Configuration&#23545;&#35937;&#12290;&#40664;&#35748;&#26102;&#23427;&#26159;&#19968;&#20010;FileConfiguration&#23545;&#35937;&#12290;&#23427;&#21487;&#20197;&#20174;&#25991;&#20214;&#31995;&#32479;&#20013;&#35835;&#21462;
                    &#37197;&#32622;&#20449;&#24687;&#12290;&#26377;&#20123;&#24773;&#20917;&#19979;&#65288;&#22914;&#23884;&#20837;&#24335;HornetQ&#65289;&#20320;&#21487;&#20197;&#23558;&#23427;&#23450;&#20041;&#20026;&#20854;&#23427;&#23545;&#35937;&#65292;&#20197;&#20415;&#29992;&#20854;&#23427;&#26041;&#27861;&#33719;&#24471;&#37197;&#32622;&#20449;&#24687;&#12290;</p></li><li><p>Security Manager. &#21487;&#37197;&#32622;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#20351;&#29992; <tt class="literal">hornetq-users.xml</tt> &#25991;&#20214;&#20013;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;
                    &#23427;&#20063;&#21487;&#20197;&#37197;&#32622;&#20026;&#19968;&#20010;JAAS&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#24403;HornetQ&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#26102;&#65292;&#23427;&#36824;&#21487;&#20197;&#37197;&#32622;&#20026;JBoss&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#20197;&#36798;&#21040;&#26356;&#32039;&#23494;&#30340;&#38598;&#25104;&#12290;
                    &#22914;&#26524;&#19981;&#38656;&#35201;&#23433;&#20840;&#31649;&#29702;&#65292;&#20320;&#20063;&#21487;&#20197;&#23558;&#23427;&#21024;&#38500;&#12290;</p></li><li><p>HornetQServer</p><p>&#36825;&#26159;HornetQ&#30340;&#26680;&#24515;&#26381;&#21153;&#23545;&#35937;&#65292;&#20960;&#20046;&#25152;&#26377;&#30340;&#26680;&#24515;&#21151;&#33021;&#37117;&#22312;&#36825;&#37324;&#12290;</p></li><li><p><a name="bean-jmsservermanager"></a>JMSServerManager</p><p>&#36825;&#20010;&#23545;&#35937;&#23558;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;JMS&#30340;&#23545;&#35937;&#36827;&#34892;&#37096;&#32626;&#65292;&#27604;&#22914;JMS Queues, Topics
                      &#20197;&#21450;ConnectionFactory&#12290;&#23427;&#36824;&#25552;&#20379;&#19968;&#22871;&#31616;&#21333;&#30340;&#31649;&#29702;&#25509;&#21475;&#20197;&#26041;&#20415;&#22320;&#23545;&#36825;&#20123;JMS&#23545;&#35937;&#36827;&#34892;&#31649;&#29702;&#12290;&#36890;&#24120;&#23427;&#21482;&#26159;&#23558;&#24037;&#20316;&#20195;&#29702;&#32473;
                      &#26680;&#24515;&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#36827;&#34892;JMS&#23545;&#35937;&#30340;&#37096;&#32626;&#19982;&#31649;&#29702;&#65292;&#21487;&#20197;&#23558;&#23427;&#20174;&#37197;&#32622;&#20013;&#21435;&#25481;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="server.microkernel.configuration"></a>6.8.&nbsp;JBoss AS4 MBean &#26381;&#21153;</h2></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#26412;&#33410;&#21482;&#35752;&#35770;&#22312;JBoss AS 4&#19978;&#37197;&#32622;HornetQ&#12290;&#20854;&#19982;JBoss Microcontainer&#30340;&#37197;&#32622;&#24456;&#30456;&#20284;&#12290;</p></div><p>
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;server&gt;

   &lt;mbean code="org.hornetq.service.HornetQFileConfigurationService"
      name="org.hornetq:service=HornetQFileConfigurationService"&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.JBossASSecurityManagerService"
      name="org.hornetq:service=JBossASSecurityManagerService"&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.HornetQStarterService" 
      name="org.hornetq:service=HornetQStarterService"&gt;
      &lt;!--lets let the JMS Server start us--&gt;
         &lt;attribute name="Start"&gt;false&lt;/attribute&gt;

      &lt;depends optional-attribute-name="SecurityManagerService"
         proxy-type="attribute"&gt;org.hornetq:service=JBossASSecurityManagerService&lt;/depends&gt;
      &lt;depends optional-attribute-name="ConfigurationService"
         proxy-type="attribute"&gt;org.hornetq:service=HornetQFileConfigurationService&lt;/depends&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.HornetQJMSStarterService"
      name="org.hornetq:service=HornetQJMSStarterService"&gt;
      &lt;depends optional-attribute-name="HornetQServer"
         proxy-type="attribute"&gt;org.hornetq:service=HornetQStarterService&lt;/depends&gt;
   &lt;/mbean&gt;
   
&lt;/server&gt;
            </pre><p>
        </p><p>&#36825;&#20010;jboss-service.xml&#21253;&#21547;&#22312;hornetq-service.sar&#25991;&#20214;&#20013;&#65292;&#23427;&#29992;&#26469;&#37197;&#32622;AS4&#20013;&#23884;&#20837;&#36816;&#34892;&#30340;HornetQ&#12290;
              &#22312;&#36825;&#20010;&#37197;&#32622;&#25991;&#20214;&#20013;&#25105;&#20204;&#21551;&#21160;&#20102;&#20197;&#19979;&#20960;&#20010;&#26381;&#21153;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>HornetQFileConfigurationService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#30340;&#20219;&#21153;&#26159;&#31649;&#29702; <tt class="literal">FileConfiguration POJO</tt>&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;</p></li><li><p>JBossASSecurityManagerService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528; <tt class="literal">JBossASSecurityManager</tt> POJO&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;</p></li><li><p>HornetQStarterService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528;<tt class="literal">HornetQServer</tt> POJO&#12290;&#23427;&#20381;&#36182;&#20110; JBossASSecurityManagerService &#21644;
                      HornetQFileConfigurationService &#36825;&#20004;&#20010;MBean&#12290;</p></li><li><p>HornetQJMSStarterService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528; <tt class="literal">JMSServerManagerImpl</tt> POJO&#23545;&#35937;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;JMS&#65292;&#21487;&#20197;&#21435;&#25481;&#36825;&#20010;&#26381;&#21153;&#12290;</p></li><li><p>JMSServerManager</p><p>&#29992;&#20110;&#21551;&#21160;JMSServerManager&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usingserver.mainconfig"></a>6.9.&nbsp;&#20027;&#37197;&#32622;&#25991;&#20214;</h2></div></div><div></div></div><p>HornetQ &#26680;&#24515;&#26381;&#21153;&#30340;&#37197;&#32622;&#20445;&#23384;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288; FileConfiguration bean &#35835;&#21462;&#36825;&#20010;&#25991;&#20214;&#26469;&#23545;&#28040;&#24687;&#26381;&#21153;&#22120;&#36827;&#34892;&#37197;&#32622;&#12290;</p><p>HornetQ&#26377;&#24456;&#22810;&#30340;&#37197;&#32622;&#21442;&#25968;&#12290;&#37319;&#29992;&#40664;&#35748;&#30340;&#37197;&#32622;&#22312;&#32477;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#21487;&#20197;&#24456;&#22909;&#30340;&#36816;&#34892;&#12290;&#20107;&#23454;&#19978;&#27599;&#19968;&#20010;&#21442;&#25968;&#37117;&#26377;&#40664;&#35748;&#30340;&#22788;&#29702;&#65292;&#22240;&#27492;&#19968;&#20010;&#21482;&#21253;&#21547;&#26377;&#19968;&#20010;&#31354;
              &#30340;<tt class="literal">configuration</tt>&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;&#19968;&#20010;&#26377;&#25928;&#30340;&#25991;&#20214;&#12290;&#23545;&#21508;&#20010;&#21442;&#25968;&#30340;&#35299;&#37322;&#36143;&#31359;&#20110;&#26412;&#25163;&#20876;&#12290;&#20320;&#36824;&#21487;&#21442;&#21442;&#29031;
               <a href="#configuration-index" title="Chapter&nbsp;47.&nbsp;&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;">&#36825;&#37324;</a>&#26469;&#26597;&#25214;&#20320;&#24819;&#30475;&#30340;&#21442;&#25968;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="using-jms"></a>Chapter&nbsp;7.&nbsp;&#20351;&#29992;JMS</h2></div></div><div></div></div><p>&#24456;&#22810;&#29992;&#25143;&#21916;&#27426;&#20351;JMS&#65292;&#22240;&#27492;HornetQ&#25552;&#20379;&#20102;JMS&#26381;&#21153;&#12290;</p><p>JMS&#26159;&#19968;&#20010;&#26222;&#36941;&#20351;&#29992;API&#26631;&#20934;&#65292;&#32477;&#22823;&#22810;&#25968;&#30340;&#28040;&#24687;&#31995;&#32479;&#37117;&#25552;&#20379;JMS&#25509;&#21475;&#12290;&#22914;&#26524;&#20320;&#23545;JMS&#36824;&#19981;&#29087;&#24713;&#65292;&#24314;&#35758;&#20320;&#20808;&#21442;&#32771;&#19968;&#19979;
          Sun&#30340;<a href="http://java.sun.com/products/jms/tutorial/1_3_1-fcs/doc/jms_tutorialTOC.html" target="_top">
            JMS &#25945;&#31243;</a>&#12290;</p><p>HornetQ&#36824;&#25552;&#20379;&#20102;&#35768;&#22810;&#30340;JMS&#30340;&#31034;&#20363;&#31243;&#24207;&#65288;examples&#65289;&#12290;&#27604;&#22914;&#31616;&#21333;&#30340;JMS Queue&#21644;Topic&#30340;&#31034;&#20363;&#65292;&#23601;&#24456;&#36866;&#21512;&#21021;&#23398;&#32773;&#20570;&#20026;&#20102;
          &#35299;HornetQ JMS&#30340;&#36215;&#28857;&#12290;<a href="#examples" title="Chapter&nbsp;11.&nbsp;&#20363;&#23376;">Chapter&nbsp;11, <i>&#20363;&#23376;</i></a>&#23545;&#36825;&#20123;&#31034;&#20363;&#20316;&#20102;&#35814;&#32454;&#30340;&#35828;&#26126;&#12290;</p><p>&#19979;&#38754;&#25105;&#20204;&#23558;&#24102;&#39046;&#35835;&#32773;&#19968;&#27493;&#27493;&#22320;&#37197;&#32622;HornetQ&#30340;JMS&#26381;&#21153;&#65292;&#24182;&#21019;&#24314;&#19968;&#20010;&#31616;&#21333;&#30340;JMS&#31243;&#24207;&#12290;&#25105;&#20204;&#36824;&#23558;&#23637;&#31034;&#22914;&#20309;&#22312;&#27809;&#26377;JNDI&#30340;&#24773;&#20917;&#19979;
          &#26469;&#20351;&#29992;HornetQ&#20013;&#30340;JMS&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e966"></a>7.1.&nbsp;&#19968;&#20010;&#31616;&#21333;&#30340;&#35746;&#36141;&#31995;&#32479;</h2></div></div><div></div></div><p>&#26412;&#31456;&#25105;&#20204;&#23558;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;&#35746;&#36141;&#31995;&#32479;&#20570;&#20026;&#19968;&#20010;&#20363;&#23376;&#12290;&#23613;&#31649;&#23427;&#21313;&#20998;&#31616;&#21333;&#65292;&#20294;&#26159;&#23427;&#33021;&#22815;&#24456;&#22909;&#22320;&#21521;&#22823;&#23478;&#23637;&#31034;JMS&#30340;&#35774;&#32622;&#21644;&#20351;&#29992;&#12290;</p><p>&#26412;&#20363;&#20013;&#26377;&#19968;&#20010;&#21517;&#20026; <tt class="literal">OrderQueue</tt>JMS&#38431;&#21015;&#65292;&#36824;&#23558;&#26377;&#19968;&#20010; <tt class="literal">MessageProducer</tt> 
              &#29992;&#26469;&#21521;&#38431;&#21015;&#21457;&#36865;&#35746;&#36141;&#28040;&#24687;&#12290;&#21457;&#36865;&#21040;&#38431;&#21015;&#30340;&#28040;&#24687;&#30001;&#19968;&#20010; <tt class="literal">MessageConsumer</tt> &#26469;&#25509;&#25910;&#12290;</p><p>&#25105;&#20204;&#25152;&#29992;&#30340;&#38431;&#21015;&#26159;<tt class="literal">&#25345;&#20037;&#65288;durable&#65289;</tt>&#30340;&#38431;&#21015;&#65292;&#20063;&#23601;&#26159;&#35828;&#36825;&#20010;&#38431;&#21015;&#19981;&#21463;&#26381;&#21153;&#22120;&#25925;&#38556;&#30340;&#24433;&#21709;&#12290;&#24403;&#26381;&#21153;&#22120;
              &#21457;&#29983;&#25925;&#38556;&#37325;&#26032;&#21551;&#21160;&#21518;&#65292;&#36825;&#20010;&#38431;&#21015;&#20173;&#28982;&#23384;&#22312;&#12290;&#25105;&#20204;&#38656;&#35201;&#25226;&#36825;&#20010;&#38431;&#21015;&#20107;&#20808;&#37096;&#32626;&#22909;&#12290;&#21150;&#27861;&#23601;&#26159;&#23558;&#38431;&#21015;&#20889;&#21040;JMS&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;&#24403;&#26381;&#21153;&#21551;&#21160;
              &#26102;&#23558;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#38431;&#21015;&#33258;&#21160;&#37096;&#32626;&#22909;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-jms.server.configuration"></a>7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p><tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#21253;&#21547;&#20102;&#38656;&#35201;&#21019;&#24314;&#19982;&#37096;&#32626;&#30340;JMS Queue&#65292;Topic&#21644;ConnectionFactory
            &#30340;&#23454;&#20363;&#12290;&#35813;&#25991;&#20214;&#24517;&#39035;&#35201;&#25351;&#23450;&#22312;classpath&#20013;&#12290;&#20174;&#36825;&#20010;&#25991;&#20214;&#20013;&#37096;&#32626;&#22909;&#30340;&#23545;&#35937;&#37117;&#21487;&#20197;&#29992;JNDI&#26469;&#25214;&#21040;&#12290;</p><p>JMS&#23458;&#25143;&#31471;&#21487;&#20197;&#21033;&#29992;JMS ConnectionFactory&#23545;&#35937;&#26469;&#21019;&#24314;&#19982;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#12290;ConnectionFactory&#20013;&#26377;&#20851;&#20110;&#26381;&#21153;&#22120;&#22320;&#22336;&#30340;
              &#20449;&#24687;&#20197;&#21450;&#21508;&#31181;&#21442;&#25968;&#12290;&#36890;&#24120;&#20351;&#29992;&#36825;&#20123;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#21363;&#21487;&#12290;</p><p>&#36825;&#37324;&#25105;&#20204;&#23558;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#37096;&#32626;&#19968;&#20010;JMS&#38431;&#21015;&#21644;&#19968;&#20010;JMS ConnectionFactory &#65288;&#36830;&#25509;&#24037;&#21378;&#65289;&#12290;&#24403;&#28982;&#23436;&#20840;&#21487;&#20197;&#37096;&#32626;&#22810;&#20010;JMS&#23545;&#35937;&#12290;
              &#19979;&#38754;&#32473;&#20986;&#20102;&#20855;&#20307;&#30340;&#37197;&#32622;&#20869;&#23481;&#65306;</p><pre class="programlisting">
&lt;configuration xmlns="urn:hornetq" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:hornetq ../schemas/hornetq-jms.xsd "&gt;
    
    &lt;connection-factory name="ConnectionFactory"&gt;
        &lt;connectors&gt;
           &lt;connector-ref connector-name="netty"/&gt;
        &lt;/connectors&gt;
        &lt;entries&gt;
            &lt;entry name="ConnectionFactory"/&gt;           
        &lt;/entries&gt;
    &lt;/connection-factory&gt;
    
    &lt;queue name="OrderQueue"&gt;
        &lt;entry name="queues/OrderQueue"/&gt;
    &lt;/queue&gt;
    
&lt;/configuration&gt; 
        </pre><p>&#22312;&#26412;&#25991;&#20214;&#20013;&#25105;&#20204;&#37096;&#32626;&#20102;&#19968;&#20010;&#21517;&#20026; <tt class="literal">ConnectionFactory</tt> &#30340;&#19968;&#20010;&#36830;&#25509;&#24037;&#21378;&#65292;&#24182;&#19988;&#23558;&#20854;&#32465;&#23450;&#21040;
              JNDI&#20013;&#12290;&#22914;&#26524;&#38656;&#35201;&#21487;&#20197;&#23558;&#19968;&#20010;&#36830;&#25509;&#24037;&#21378;&#32465;&#23450;&#20026;&#22810;&#20010;&#21517;&#31216;&#12290;&#21482;&#38656;&#35201;&#23558;&#32465;&#23450;&#30340;&#21517;&#23383;&#21152;&#20837;&#21040; <tt class="literal">entry</tt> 
              &#20013;&#21363;&#21487;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22312;JMS ConnectionFactory&#30340;&#37197;&#32622;&#20013;&#24341;&#29992;&#20102;&#19968;&#20010;&#21517;&#20026; <tt class="literal">netty</tt>&#30340;<tt class="literal">connector</tt>&#12290;
                &#23427;&#23454;&#38469;&#19978;&#25351;&#21521;&#30340;&#26159;HornetQ&#26680;&#24515;&#20013;&#37096;&#32626;&#30340;&#19968;&#20010;&#36830;&#25509;&#22120;&#65288;connector&#65289;&#12290;&#23427;&#30340;&#37197;&#32622;&#22312;HornetQ&#30340;&#26680;&#24515;&#37197;&#32622;&#25991;&#20214;
                 <tt class="literal">hornetq-configuration.xml</tt> &#20013;&#12290;&#23427;&#23450;&#20041;&#20102;&#37319;&#29992;&#20309;&#31181;&#20256;&#36755;&#19982;&#26381;&#21153;&#22120;&#36830;&#25509;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1020"></a>7.3.&nbsp;JNDI&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#24403;&#23458;&#25143;&#31471;&#20351;&#29992;JNDI&#26102;&#38656;&#35201;&#23450;&#20041;&#19968;&#20123;JNDI&#30340;&#21442;&#25968;&#12290;&#36825;&#20123;&#21442;&#25968;&#20027;&#35201;&#29992;&#26469;&#30830;&#23450;JNDI&#26381;&#21153;&#30340;&#22320;&#22336;&#12290;&#36825;&#20123;&#21442;&#25968;&#36890;&#24120;&#20445;&#23384;&#22312;
            &#19968;&#20010;&#21517;&#20026; <tt class="literal">jndi.properties</tt> &#30340;&#25991;&#20214;&#20013;&#12290;&#36825;&#20010;&#25991;&#20214;&#38656;&#35201;&#22312;&#23458;&#25143;&#31471;&#30340;classpath&#20013;&#12290;&#25110;&#32773;&#20320;
            &#21487;&#20197;&#22312;&#21019;&#24314;JNDI&#30340;InitialContext&#26102;&#23558;&#36825;&#20123;&#21442;&#25968;&#20256;&#36827;&#21435;&#12290;&#24819;&#20102;&#35299;&#20840;&#38754;&#30340;JNDI&#30693;&#35782;&#65292;&#21487;&#20197;&#21442;&#35265; <a href="http://java.sun.com/products/jndi/tutorial/TOC.html" target="_top">Sun JNDI &#25945;&#31243;</a>
            &#12290;</p><p>&#35201;&#19982;JBoss&#30340;JNDI Server&#36827;&#34892;&#36890;&#36805;&#65292;&#38656;&#35201;&#25351;&#23450;&#20197;&#19979;&#30340;JNDI&#21442;&#25968;&#65306;</p><pre class="programlisting">
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://myhost:1099
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces                        
        </pre><p>&#20854;&#20013;&#30340; <tt class="literal">myhost</tt> &#26159; JNDI server&#30340;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#12290; 1099&#26159;&#31471;&#21475;&#21495;&#65292;&#26681;&#25454;&#19981;&#21516;&#30340;&#37197;&#32622;&#65292;
            &#31471;&#21475;&#21495;&#20063;&#21487;&#33021;&#19981;&#21516;&#12290;</p><p>&#22312;&#40664;&#35748;&#30340;&#21333;&#29420;&#26041;&#24335;&#65288;standalone&#65289;&#37197;&#32622;&#20013;&#65292;JNDI&#26381;&#21153;&#31471;&#21475;&#31561;&#21442;&#25968;&#23450;&#20041;&#22312;<tt class="literal">hornetq-beans.xml</tt>
              &#25991;&#20214;&#20013;&#30340; <tt class="literal">JNDIServer</tt> bean&#19979;&#65292;&#22914;&#65306;</p><pre class="programlisting">
&lt;bean name="JNDIServer" class="org.jnp.server.Main"&gt;
    &lt;property name="namingInfo"&gt;
        &lt;inject bean="Naming"/&gt;
    &lt;/property&gt;
    &lt;property name="port"&gt;1099&lt;/property&gt;
    &lt;property name="bindAddress"&gt;localhost&lt;/property&gt;
    &lt;property name="rmiPort"&gt;1098&lt;/property&gt;
    &lt;property name="rmiBindAddress"&gt;localhost&lt;/property&gt;
&lt;/bean&gt;                        
        </pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#20320;&#30340;JNDI&#26381;&#21153;&#22120;&#19982;&#23458;&#25143;&#31471;&#19981;&#22312;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#65292;&#19968;&#23450;&#19981;&#35201;&#24536;&#35760;&#23558;bindAddress&#25913;&#25104;&#30456;&#24212;&#30340;&#22320;&#22336;&#65292;
                  &#21315;&#19975;&#19981;&#33021;&#29992;<tt class="literal">localhost</tt>&#65281;</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><span class="emphasis"><em>&#21482;&#26377;&#24403;HornetQ&#20316;&#20026;&#29420;&#31435;&#26381;&#21153;&#22120;&#36816;&#34892;&#26102;</em></span>
                  &#25165;&#21487;&#20197;&#37197;&#32622;JNDIServer bean&#12290;&#24403;HornetQ&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#26102;&#65292;&#30001;&#20110;JBOSS&#26381;&#21153;&#22120;&#24050;&#32463;&#25552;&#20379;&#20102;
                  JNDI&#26381;&#21153;&#65292;&#25152;&#20197;&#23601;&#19981;&#38656;&#35201;&#20877;&#36827;&#34892;&#37197;&#32622;&#20102;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1061"></a>7.4.&nbsp;&#31243;&#24207;&#20195;&#30721;</h2></div></div><div></div></div><p>&#19979;&#38754;&#32473;&#20986;&#30340;&#20363;&#23376;&#20013;&#30340;&#20195;&#30721;&#65306;</p><p>&#39318;&#20808;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;JNDI&#30340;Initial Context&#65306;</p><pre class="programlisting">InitialContect ic = new InitialContext();</pre><p>&#19979;&#38754;&#25105;&#20204;&#26597;&#25214; connection factory&#65306;</p><pre class="programlisting">ConnectionFactory cf = (ConnectionFactory)ic.lookup("/ConnectionFactory");</pre><p>&#28982;&#21518;&#26597;&#25214; Queue&#65306;</p><pre class="programlisting">Queue orderQueue = (Queue)ic.lookup("/queues/OrderQueue");</pre><p>&#25509;&#19979;&#26469;&#29992;&#25343;&#21040;&#30340;ConnectionFactory&#24314;&#31435;JMS&#36830;&#25509;&#65306;</p><pre class="programlisting">Connection connection = cf.createConnection();</pre><p>&#20877;&#21019;&#24314;&#19968;&#20010;&#38750;&#20107;&#21153;&#30340;&#12289;AUTO_ACKNOWLEDGE&#26041;&#24335;&#30340;JMS Session&#65306;</p><pre class="programlisting">Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</pre><p>&#21019;&#24314;&#19968;&#20010; MessageProducer &#20197;&#21521;&#38431;&#21015;&#21457;&#36865;&#35746;&#21333;&#28040;&#24687;&#65306;</p><pre class="programlisting">MessageProducer producer = session.createProducer(orderQueue);</pre><p>&#21019;&#24314;&#19968;&#20010; MessageConsumer &#20197;&#20174;&#38431;&#21015;&#20013;&#25509;&#25910;&#35746;&#21333;&#28040;&#24687;&#65306;</p><pre class="programlisting">MessageConsumer consumer = session.createConsumer(orderQueue);</pre><p>&#35201;&#21551;&#21160;&#36830;&#25509;&#65292;&#20197;&#20351;&#28040;&#24687;&#33021;&#20256;&#36882;&#32473;&#25509;&#25910;&#32773;&#65306;</p><pre class="programlisting">connection.start();</pre><p>&#21457;&#36865;&#19968;&#20010;&#31616;&#21333;&#30340;TextMessage&#65306;</p><pre class="programlisting">TextMessage message = session.createTextMessage("This is an order");
producer.send(message);</pre><p>&#20043;&#21518;&#25509;&#25910;&#36825;&#20010;&#28040;&#24687;&#65306;</p><pre class="programlisting">TextMessage receivedMessage = (TextMessage)consumer.receive();
System.out.println("Got order: " + receivedMessage.getText());
        </pre><p>&#30475;&#36215;&#26469;&#23601;&#26159;&#36825;&#20040;&#31616;&#21333;&#12290; &#22312;HornetQ&#26377;&#21457;&#24067;&#21253;&#20013;&#26377;&#24456;&#22810;&#21508;&#31181;&#21508;&#26679;&#30340;JMS&#20363;&#23376;&#20379;&#29992;&#25143;&#21442;&#32771;&#12290;</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>&#35831;&#27880;&#24847;&#65292;JMS&#30340;&#36830;&#25509;&#65288;connection&#65289;&#12289;&#20250;&#35805;&#65288;session&#65289;&#12289;&#29983;&#20135;&#32773;&#65288;producer&#65289;&#21644;&#28040;&#36153;&#32773;&#65288;consumer&#65289;
                  &#23545;&#35937;&#26159;&#21487;&#20197;<span class="emphasis"><em>&#37325;&#29992;</em></span>&#30340;&#12290;</p><p>&#22914;&#26524;&#27599;&#21457;&#36865;&#25110;&#25509;&#25910;&#19968;&#20010;&#28040;&#24687;&#37117;&#35201;&#37325;&#26032;&#21019;&#24314;&#36825;&#20123;JMS&#23545;&#35937;&#65292;&#26159;&#19981;&#31526;&#21512;&#35774;&#35745;&#27169;&#24335;&#30340;&#35201;&#27714;&#30340;&#12290;&#36825;&#26679;&#20570;&#20250;&#36896;&#25104;&#24212;&#29992;&#31243;&#24207;
                  &#30340;&#24615;&#33021;&#24456;&#24046;&#12290;&#36825;&#26041;&#38754;&#30340;&#20869;&#23481;&#22312;<a href="#perf-tuning" title="Chapter&nbsp;46.&nbsp;&#24615;&#33021;&#35843;&#20248;">Chapter&nbsp;46, <i>&#24615;&#33021;&#35843;&#20248;</i></a>&#20013;&#23558;&#20250;&#36827;&#19968;&#27493;&#30340;&#35752;&#35770;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1118"></a>7.5.&nbsp;&#19981;&#20351;&#29992;JNDI&#32780;&#30452;&#25509;&#21019;&#24314;JMS&#30340;&#23545;&#35937;</h2></div></div><div></div></div><p>&#23613;&#31649;&#37319;&#29992;JNDI&#23545; JMS &#30340;&#21508;&#31181;<span class="emphasis"><em>&#31649;&#29702;&#23545;&#35937;&#65288;Administered
                Objects&#65289;</em></span> (&#21363;JMS Queue, Topic and ConnectionFactory)&#26159;&#24456;&#24120;&#29992;&#30340;&#26041;&#27861;&#65292;&#20294;&#22312;&#26377;&#20123;
            &#24773;&#20917;&#26102;JNDI&#19981;&#21487;&#29992;&#65292;&#25110;&#32773;&#20320;&#19981;&#38656;&#35201;&#29992;JNDI&#26102;&#65292;&#22914;&#20309;&#36824;&#33021;&#27491;&#24120;&#20351;&#29992;JMS&#21602;&#65311;</p><p>HornetQ&#20801;&#35768;&#20320;&#19981;&#36890;&#36807;JNDI&#20063;&#33021;&#20351;&#29992;JMS&#12290;HornetQ&#25903;&#25345;&#30452;&#25509;&#21019;&#24314;JMS&#30340;&#21508;&#31181;&#23545;&#35937;&#32780;&#26080;&#38656;JNDI&#30340;&#23384;&#22312;&#12290;</p><p>&#22312;<a href="#examples" title="Chapter&nbsp;11.&nbsp;&#20363;&#23376;">Chapter&nbsp;11, <i>&#20363;&#23376;</i></a>&#20013;&#21253;&#25324;&#26377;&#36825;&#26679;&#30340;&#20363;&#23376;&#20379;&#35835;&#32773;&#21442;&#32771;&#12290;</p><p>&#19979;&#38754;&#25105;&#20204;&#23601;&#23558;&#19978;&#36848;&#37027;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#37325;&#20889;&#65292;&#20197;&#25243;&#24320;&#23545;JNDI&#30340;&#20381;&#36182;&#65306;</p><p>&#25105;&#20204;&#36890;&#36807;HornetQJMSClient&#31867;&#26469;&#26041;&#20415;&#22320;&#21019;&#24314;JMS&#30340;ConnectionFactory&#12290;&#27880;&#24847;&#36825;&#37324;&#35201;&#25552;&#20379;&#21508;&#31181;&#36830;&#25509;&#21442;&#25968;&#21644;&#23450;&#20041;
              &#25152;&#29992;&#30340;&#20256;&#36755;&#26041;&#24335;&#12290;&#26377;&#20851;&#36830;&#25509;&#22120;&#65288;connector&#65289;&#30340;&#20449;&#24687;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><pre class="programlisting">              
TransportConfiguration transportConfiguration = 
                     new TransportConfiguration(NettyConnectorFactory.class.getName());                
ConnectionFactory cf = HornetQJMSClient.createConnectionFactory(transportConfiguration);
        </pre><p>&#21516;&#26679;&#21033;&#29992;HornetQJMSClient&#31867;&#21019;&#24314;JMS Queue&#23545;&#35937;&#65306;</p><pre class="programlisting">Queue orderQueue = HornetQJMSClient.createQueue("OrderQueue");</pre><p>&#28982;&#21518;&#29992;&#36830;&#25509;&#24037;&#21378;&#21019;&#24314; JMS &#36830;&#25509;&#65306;</p><pre class="programlisting">Connection connection = cf.createConnection();</pre><p>&#36824;&#26377;&#38750;&#20107;&#21153;&#30340;\AUTO_ACKNOWLEDGE&#26041;&#24335;&#30340; JMS &#20250;&#35805;&#65288;session&#65289;&#65306;</p><pre class="programlisting">Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);</pre><p>&#20197;&#21450;&#29992;&#20110;&#21457;&#36865;&#28040;&#24687;&#30340;MessageProducer&#65306;</p><pre class="programlisting">MessageProducer producer = session.createProducer(orderQueue);</pre><p>&#21644;&#25509;&#25910;&#28040;&#24687;&#30340; MessageConsumer&#65306;</p><pre class="programlisting">MessageConsumer consumer = session.createConsumer(orderQueue);</pre><p>&#21551;&#21160;&#36830;&#25509;&#65306;</p><pre class="programlisting">connection.start();</pre><p>&#21019;&#24314;&#19968;&#20010;&#31616;&#21333;&#30340; TextMessage &#24182;&#23558;&#20854;&#21457;&#36865;&#21040;&#38431;&#21015;&#65306;</p><pre class="programlisting">TextMessage message = session.createTextMessage("This is an order");
producer.send(message);</pre><p>&#25509;&#25910;&#28040;&#24687;&#65306;</p><pre class="programlisting">TextMessage receivedMessage = (TextMessage)consumer.receive();
System.out.println("Got order: " + receivedMessage.getText());
        </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-jms.clientid"></a>7.6.&nbsp;Client ID&#30340;&#35774;&#32622;</h2></div></div><div></div></div><p>&#22312;&#24314;&#31435;&#25345;&#20037;&#30340;&#35746;&#38405;&#65288;subscription&#65289;&#26102;&#65292;JMS&#23458;&#25143;&#38656;&#35201;&#26377;&#19968;&#20010;&#23458;&#25143;ID &#65288;client id&#65289;&#12290;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;
            connection factory&#26469;&#23450;&#20041;&#23427;&#12290;&#65288;&#20854;&#20013;&#30340; <tt class="literal">client-id</tt>&#39033;&#65289;&#12290;&#36825;&#26679;&#25152;&#26377;&#36890;&#36807;&#36825;&#20010;
            connection factory&#26469;&#21019;&#24314;&#30340;&#36830;&#25509;&#37117;&#20855;&#26377;&#36825;&#20010;&#23458;&#25143;ID&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-jms.dupsokbatchsize"></a>7.7.&nbsp;&#35774;&#32622;DUPS_OK&#30340;Batch Size </h2></div></div><div></div></div><p>&#22914;&#26524;JMS&#30340;&#36890;&#30693;&#27169;&#24335;&#20026;<tt class="literal">DUPS_OK</tt>&#65292;&#25105;&#20204;&#21487;&#20197;&#37197;&#32622;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#20197;&#20351;&#24471;&#23427;&#20197;&#25209;&#20026;&#21333;&#20301;
            &#21457;&#36865;&#36890;&#30693;&#65292;&#32780;&#19981;&#26159;&#19968;&#20010;&#19968;&#20010;&#22320;&#21457;&#36890;&#30693;&#12290;&#36825;&#26679;&#20570;&#21487;&#20197;&#33410;&#30465;&#24456;&#22810;&#24102;&#23485;&#65292;&#25928;&#29575;&#39640;&#12290;&#37197;&#32622;&#30340;&#26041;&#27861;&#26159;&#35774;&#32622;connection factory&#19979;
            &#30340;<tt class="literal">dups-ok-batch-size</tt>&#39033;&#12290;&#21333;&#20301;&#26159;&#23383;&#33410;&#65288;byte&#65289;&#12290;&#40664;&#35748;&#20540;&#26159;1024 * 1024 bytes = 1 MiB&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-jms.txbatchsize"></a>7.8.&nbsp;&#35774;&#32622;&#20107;&#21153;&#65288;Transaction&#65289;&#30340;Batch Size</h2></div></div><div></div></div><p>&#24403;&#22312;&#19968;&#20010;&#20107;&#21153;&#20869;&#25509;&#25910;&#28040;&#24687;&#26102;&#65292;&#21487;&#33021;&#36890;&#36807;&#37197;&#32622;&#20351;&#25509;&#25910;&#32773;&#37319;&#29992;&#25209;&#37327;&#30340;&#26041;&#24335;&#21457;&#36865;&#36890;&#30693;&#65292;&#32780;&#19981;&#26159;&#19968;&#20010;&#19968;&#20010;&#30340;&#21457;&#36865;&#12290;&#36825;&#26679;&#20063;&#21487;&#20197;&#33410;&#30465;&#24102;&#23485;&#12290;
            &#37197;&#32622;&#26041;&#27861;&#26159;&#35774;&#32622;connection factory&#19979;&#30340;<tt class="literal">transaction-batch-size</tt>&#39033;&#12290; &#21333;&#20301;&#26159;&#23383;&#33410;&#65288;byte&#65289;&#12290;&#40664;&#35748;&#20540;&#26159;1024 *
            1024&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="using-core"></a>Chapter&nbsp;8.&nbsp;&#20351;&#29992;HornetQ&#20869;&#26680;</h2></div></div><div></div></div><p>HornetQ&#20869;&#26680;&#26159;&#19968;&#20010;&#19982;JMS&#26080;&#20851;&#30340;&#28040;&#24687;&#31995;&#32479;&#65292;&#23427;&#26377;&#19968;&#22871;&#33258;&#24049;&#30340;API&#12290;&#25105;&#20204;&#31216;&#23427;&#20026;<span class="emphasis"><em>&#20869;&#26680;API</em></span>.</p><p>&#20320;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#20869;&#26680;API&#12290;&#20351;&#29992;&#20869;&#26680;API&#21487;&#20197;&#23436;&#25104;JMS&#21516;&#26679;&#30340;&#21151;&#33021;&#65292;&#21482;&#26159;&#27604;&#36215;JMS API&#20351;&#29992;&#26356;&#21152;&#31616;&#21333;&#26041;&#20415;&#12290;&#21478;&#22806;&#65292;&#20869;&#26680;API
        &#36824;&#25552;&#20379;&#20102;JMS&#19981;&#20855;&#26377;&#30340;&#39069;&#22806;&#30340;&#21151;&#33021;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1226"></a>8.1.&nbsp;&#20869;&#26680;&#28040;&#24687;&#31995;&#32479;&#30340;&#30456;&#20851;&#27010;&#24565;</h2></div></div><div></div></div><p>&#20869;&#26680;&#28040;&#24687;&#31995;&#32479;&#20013;&#26377;&#35768;&#22810;&#27010;&#24565;&#26159;&#19982;JMS&#30456;&#20284;&#30340;&#65292;&#20294;&#26377;&#20123;&#26041;&#38754;&#26159;&#19981;&#21516;&#30340;&#12290;&#24635;&#30340;&#26469;&#35828;&#20869;&#26680;&#28040;&#24687;&#31995;&#32479;&#30340;&#25509;&#21475;&#30456;&#23545;&#31616;&#21333;&#12290;&#36825;&#26159;&#22240;&#20026;
            &#22312;&#20869;&#26680;&#20013;&#27809;&#26377;&#38431;&#21015;&#65288;queue&#65289;&#12289;&#35805;&#39064;&#65288;topic&#65289;&#21644;&#35746;&#38405;&#65288;subscription&#65289;&#30340;&#27010;&#24565;&#12290;&#19979;&#38754;&#25105;&#20204;&#23601;&#20869;&#26680;&#28040;&#24687;&#20013;&#30340;&#27010;&#24565;&#20316;&#36880;&#19968;&#20171;&#32461;&#12290;
            &#20294;&#26159;&#27599;&#20010;API&#30340;&#35814;&#32454;&#35828;&#26126;&#36824;&#26159;&#35201;&#21442;&#35265;&#30456;&#24212;&#30340;javadoc&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1231"></a>8.1.1.&nbsp;&#28040;&#24687;</h3></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#19968;&#20010;&#28040;&#24687;&#23601;&#26159;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#20256;&#36882;&#20449;&#24687;&#30340;&#21333;&#20301;&#25968;&#25454;&#12290;</p></li><li><p>&#19968;&#20010;&#28040;&#24687;&#26377;&#19968;&#20010;&#28040;&#24687;&#20307;&#65288;body&#65289;&#65292;&#21363;&#19968;&#20010;&#32531;&#23384;&#29992;&#20197;&#20889;&#20837;&#25968;&#25454;&#25110;&#20174;&#20013;&#35835;&#21462;&#25968;&#25454;&#12290;</p></li><li><p>&#19968;&#20010;&#28040;&#24687;&#26377;&#19968;&#20010;&#23646;&#24615;&#38598;&#65292;&#36825;&#20010;&#23646;&#24615;&#38598;&#23454;&#38469;&#19978;&#21253;&#21547;&#30340;&#26159;&#20027;&#38190;&#65293;&#20540;&#30340;&#38598;&#21512;&#12290;&#27599;&#20010;&#23646;&#24615;&#30340;&#20027;&#38190;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#20540;&#21487;
                         &#20197;&#26159;&#19968;&#20010;&#25972;&#25968;&#65288;integer&#65289;&#12289;&#38271;&#25972;&#25968;&#65288;long&#65289;&#12289;&#30701;&#25972;&#25968;&#65288;short&#65289;&#12289;&#23383;&#33410;&#65288;byte&#65289;&#12289;&#23383;&#33410;&#25968;&#32452;&#65288;byte[]&#65289;&#12289;
                         &#23383;&#31526;&#20018;&#65288;String&#65289;&#65292;&#21452;&#31934;&#24230;&#20540;&#65288;double&#65289;&#12289;&#28014;&#28857;&#25968;&#65288;float&#65289;&#25110;&#26159;&#24067;&#23572;&#20540;&#65288;boolean&#65289;&#12290;</p></li><li><p>&#27599;&#20010;&#28040;&#24687;&#37117;&#26377;&#19968;&#20010;<span class="emphasis"><em>&#22320;&#22336;&#65288;address&#65289;</em></span>&#20570;&#20026;&#23427;&#30340;&#30446;&#30340;&#22320;&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#21457;&#21040;
                        &#26381;&#21153;&#22120;&#19978;&#26102;&#65292;&#23427;&#20250;&#34987;&#36335;&#30001;&#21040;&#19982;&#35813;&#22320;&#22336;&#32465;&#23450;&#30340;&#25152;&#26377;&#38431;&#21015;&#20013;&#65288;queue&#65289;&#12290;&#22914;&#26524;queue&#37197;&#32622;&#20102;&#36807;&#28388;&#22120;&#65288;filter&#65289;&#65292;
                        &#37027;&#20040;&#21482;&#26377;&#19982;&#36807;&#28388;&#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#36335;&#30001;&#21040;&#35813;queue&#12290;&#19968;&#20010;&#22320;&#22336;&#21487;&#20197;&#32465;&#23450;&#22810;&#20010;queue&#65292;&#20063;&#21487;&#20197;&#19968;&#20010;&#20063;&#19981;
                        &#32465;&#23450;&#12290;&#27880;&#24847;&#36825;&#37324;&#25152;&#35828;&#30340;queue&#26159;&#20869;&#26680;&#30340;&#27010;&#24565;&#65292;&#19981;&#26159;JMS&#30340;queue&#12290;&#38500;&#20102;queue&#20043;&#22806;&#65292;&#36824;&#26377;&#20854;&#23427;&#19968;&#20123;&#23454;&#20307;&#21487;&#20197;
                        &#32465;&#23450;&#21040;&#26576;&#19968;&#22320;&#22336;&#19978;&#12290;&#27604;&#22914;<span class="italic">divert&#65288;&#36716;&#21457;&#22120;&#65289;</span>&#12290;</p></li><li><p>&#28040;&#24687;&#21487;&#20197;&#26159;&#25345;&#20037;&#30340;&#65288;durable&#65289;&#25110;&#38750;&#25345;&#20037;&#30340;&#65288;non-durable&#65289;&#12290;&#25345;&#20037;&#30340;&#28040;&#24687;&#19981;&#20250;&#22240;&#20026;&#26381;&#21153;&#22120;&#25925;&#38556;&#25110;&#37325;&#21551;&#32780;&#20002;&#22833;&#12290;
                        &#38750;&#25345;&#20037;&#28040;&#24687;&#21017;&#20250;&#22240;&#20026;&#26381;&#21153;&#22120;&#30340;&#25925;&#38556;&#25110;&#37325;&#21551;&#32780;&#20002;&#22833;&#12290;</p></li><li><p>&#28040;&#24687;&#20855;&#26377;&#20248;&#20808;&#32423;&#12290;&#20248;&#20808;&#32423;&#30340;&#20540;&#20026;&#20174;0&#21040;9&#30340;&#25972;&#25968;&#12290;0&#20195;&#34920;&#26368;&#20302;&#20248;&#20808;&#32423;&#65292;9&#20195;&#34920;&#26368;&#39640;&#20248;&#20808;&#32423;&#12290;HornetQ&#24635;
                        &#20250;&#23581;&#35797;&#20808;&#20256;&#36865;&#20248;&#20808;&#32423;&#39640;&#30340;&#28040;&#24687;&#12290;</p></li><li><p>&#28040;&#24687;&#36824;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#22833;&#25928;&#26102;&#38388;&#12290;&#22914;&#26524;&#19968;&#20010;&#28040;&#24687;&#36807;&#20102;&#22833;&#25928;&#26102;&#38388;&#65292;HornetQ&#23558;&#19981;&#20877;&#20256;&#36865;&#23427;&#12290;</p></li><li><p>&#28040;&#24687;&#36824;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;&#26102;&#38388;&#25139;&#65288;timestamp&#65289;&#12290;&#36825;&#20010;&#26102;&#38388;&#25139;&#34920;&#31034;&#30340;&#26159;&#28040;&#24687;&#34987;&#21457;&#36865;&#30340;&#26102;&#38388;&#12290;</p></li><li><p>HornetQ&#36824;&#25903;&#25345;&#22823;&#28040;&#24687;&#30340;&#21457;&#36865;&#12290;&#23427;&#21487;&#20197;&#22788;&#29702;&#22823;&#21040;&#20869;&#23384;&#35013;&#19981;&#19979;&#30340;&#36229;&#22823;&#28040;&#24687;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1268"></a>8.1.2.&nbsp;&#22320;&#22336;&#65288;Address&#65289;</h3></div></div><div></div></div><p>HornetQ&#26381;&#21153;&#22120;&#20445;&#23384;&#26377;&#22320;&#22336;&#21644;queue&#30340;&#26144;&#23556;&#38598;&#12290;&#19968;&#20010;&#22320;&#22336;&#23545;&#24212;&#38646;&#20010;&#25110;&#22810;&#20010;queue&#12290;&#27599;&#20010;queue&#36824;&#21487;&#20197;&#25317;&#26377;&#28040;&#24687;
                &#36807;&#28388;&#22120;&#65288;filter&#65289;&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#22312;&#26381;&#21153;&#22120;&#20869;&#36827;&#34892;&#36335;&#30001;&#26102;&#65292;&#23427;&#23558;&#20250;&#34987;&#36865;&#24448;&#19982;&#20854;&#22320;&#22336;&#30456;&#32465;&#23450;&#30340;&#25152;&#26377;&#30340;queue&#20013;&#12290;&#20294;&#26159;
                &#22914;&#26524;&#20854;&#20013;&#26576;&#20010;queue&#26377;&#36807;&#28388;&#22120;&#65292;&#37027;&#20040;&#21482;&#26377;&#19982;&#20854;&#36807;&#28388;&#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#21457;&#21040;&#36825;&#20010;queue&#20013;&#12290;</p><p>&#20854;&#23427;&#30340;&#23454;&#20307;&#22914;<span class="italic">diverts</span>&#20063;&#21487;&#20197;&#19982;&#19968;&#22320;&#22336;&#36827;&#34892;&#32465;&#23450;&#65292;&#28040;&#24687;&#20063;&#20250;&#34987;&#21516;&#26679;
                  &#36335;&#30001;&#21040;&#30456;&#24212;&#30340;&#23454;&#20307;&#20013;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22312;&#20869;&#26680;&#20013;&#65292;&#27809;&#26377;Topic&#30340;&#27010;&#24565;&#12290;&#21482;&#26377;<span class="emphasis"><em>&#22320;&#22336;&#65288;address&#65289;</em></span> &#21644;
                        <span class="emphasis"><em>queue</em></span>&#12290;</p><p>&#20551;&#22914;&#24819;&#22312;&#20869;&#26680;&#23454;&#29616;JMS topic&#30340;&#21151;&#33021;&#65292;&#21482;&#35201;&#23558;&#19968;&#22320;&#22336;&#32465;&#23450;&#21040;&#22810;&#20010;queue&#21363;&#21487;&#12290;&#20854;&#20013;&#30340;&#27599;&#19968;&#20010;queue&#23601;&#30456;&#24403;
                    &#20110;&#19968;&#20010;&#35746;&#38405;&#65288;subscription&#65289;&#12290;&#31867;&#20284;&#22320;&#65292;&#19968;&#20010;JMS queue&#21017;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#22320;&#22336;&#19982;&#19968;&#20010;queue&#30340;&#32465;&#23450;&#26469;&#23454;&#29616;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1289"></a>8.1.3.&nbsp;Queue</h3></div></div><div></div></div><p>Queue&#21487;&#20197;&#30340;&#25345;&#20037;&#30340;&#12290;&#24847;&#24605;&#26159;&#22914;&#26524;queue&#20013;&#30340;&#28040;&#24687;&#26159;&#25345;&#20037;&#30340;&#65292;&#37027;&#20040;&#24403;&#21457;&#29983;&#26381;&#21153;&#22120;&#25925;&#38556;&#25110;&#37325;&#21551;&#26102;&#65292;&#36825;&#20123;&#28040;&#24687;&#19981;&#20250;&#20002;&#22833;&#12290;
                Queue&#20063;&#21487;&#26159;&#38750;&#25345;&#20037;&#30340;&#65292;&#36825;&#24847;&#35859;&#30528;&#22914;&#26524;&#26381;&#21153;&#22120;&#21457;&#30340;&#25925;&#38556;&#25110;&#37325;&#21551;&#65292;queue&#20013;&#30340;&#28040;&#24687;&#23558;&#20250;&#20002;&#22833;&#65292;&#19981;&#31649;&#28040;&#24687;&#26159;&#19981;&#26159;&#25345;&#20037;&#30340;&#12290;</p><p>Queue&#20063;&#21487;&#20197;&#26159;&#20020;&#26102;&#30340;&#65292;&#24847;&#24605;&#26159;&#20020;&#26102;&#30340;queue&#22312;&#23458;&#25143;&#31471;&#26029;&#24320;&#36830;&#25509;&#26102;&#65292;&#23427;&#23558;&#20250;&#34987;&#21024;&#38500;&#12290;</p><p>Queue&#21487;&#20197;&#26377;&#19968;&#20010;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#12290;&#26381;&#21153;&#22120;&#22312;&#21521;&#36825;&#26679;&#30340;queue&#36335;&#30001;&#28040;&#24687;&#26102;&#65292;&#20808;&#21028;&#23450;&#28040;&#24687;&#26159;&#21542;&#19982;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#30456;&#21305;&#37197;&#65292;
                &#21482;&#26377;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#21457;&#21040;&#35813;queue&#12290;</p><p>&#19968;&#20010;&#22320;&#22336;&#21487;&#20197;&#32465;&#23450;&#22810;&#20010;queue&#12289;&#12290;&#20294;&#26159;&#19968;&#20010;queue&#21482;&#33021;&#34987;&#32465;&#23450;&#21040;&#19968;&#20010;&#22320;&#22336;&#19978;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1300"></a>8.1.4.&nbsp;ClientSessionFactory</h3></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#20351;&#29992; <tt class="literal">ClientSessionFactory</tt> &#31867;&#30340;&#23454;&#20363;&#21019;&#24314; <tt class="literal">ClientSession</tt> &#23454;&#20363;&#12290; <tt class="literal">ClientSessionFactory</tt>
                &#30693;&#36947;&#22914;&#20309;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#24182;&#21019;&#24314;&#20250;&#35805;&#65288;session&#65289;&#12290;&#23427;&#26159;&#21487;&#20197;&#26681;&#25454;&#19981;&#21516;&#38656;&#35201;&#28789;&#27963;&#37197;&#32622;&#30340;&#12290;</p><p><tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#26159;&#36890;&#36807; <tt class="literal">HornetQClient</tt> &#24037;&#21378;&#31867;&#21019;&#24314;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1321"></a>8.1.5.&nbsp;ClientSession</h3></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#20351;&#29992;ClientSession&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;&#28040;&#24687;&#65292;&#24182;&#25511;&#21046;&#20107;&#21153;&#30340;&#20351;&#29992;&#12290;ClientSession&#21487;&#20197;&#25903;&#25345;&#20107;&#21153;&#24615;
                &#21644;&#38750;&#20107;&#21153;&#24615;&#30340;&#24212;&#29992;&#12290;&#23427;&#36824;&#25552;&#20379;&#20102;&#19968;&#20010; <tt class="literal">XAResource</tt> &#25509;&#21475;&#65292;&#22240;&#20123;&#23427;&#21487;&#20197;&#21152;&#20837;&#21040;&#19968;&#20010;<a href="http://java.sun.com/javaee/technologies/jta/index.jsp" target="_top">JTA</a>
                &#20132;&#26131;&#20013;&#12290;</p><p>ClientSession &#31649;&#29702;&#30528;ClientConsumers&#21644;ClientProducers&#12290;</p><p>ClientSession &#23454;&#20363;&#21487;&#20197;&#27880;&#20876;&#19968;&#20010;&#21487;&#36873;&#30340; <tt class="literal">SendAcknowledgementHandler</tt>&#12290;&#27599;&#24403;&#28040;&#24687;&#34987;&#36865;&#36798;HornetQ&#26381;&#21153;&#22120;&#20013;&#26102;&#65292;
                   HornetQ&#23601;&#29992;&#23427;&#26469;&#24322;&#27493;&#22320;&#21457;&#20986;&#36890;&#30693;&#12290;&#26377;&#20102;&#36825;&#20010;&#29420;&#29305;&#30340;&#21151;&#33021;&#65292;&#23458;&#25143;&#21487;&#20197;&#19981;&#24517;&#38459;&#22622;&#22312;&#27599;&#27425;&#28040;&#24687;&#30340;&#21457;&#36865;&#25805;&#20316;&#19978;&#26469;&#20445;&#35777;
                   &#28040;&#24687;&#23433;&#20840;&#21040;&#36798;&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#37319;&#29992;&#38459;&#22622;&#30340;&#26041;&#27861;&#65292;&#37027;&#20040;&#27599;&#19968;&#20010;&#28040;&#24687;&#30340;&#21457;&#36865;&#37117;&#35201;&#21253;&#25324;&#24448;&#36820;&#20004;&#27425;&#30340;&#32593;&#32476;&#20256;&#36882;&#25805;&#20316;&#65292;&#24320;&#38144;
                   &#26159;&#24456;&#22823;&#30340;&#12290;&#26377;&#20102;&#36825;&#20010;&#24322;&#27493;&#26041;&#24335;&#23601;&#21487;&#20197;&#36991;&#20813;&#36825;&#31181;&#24320;&#38144;&#65292;&#24314;&#31435;&#30495;&#27491;&#30340;&#24322;&#27493;&#30340;&#31471;&#21040;&#31471;&#38388;&#30340;&#31995;&#32479;&#12290;&#36825;&#26159;&#26631;&#20934;&#30340;JMS&#25509;&#21475;
                   &#26080;&#27861;&#20570;&#21040;&#30340;&#12290;&#21442;&#35265; <a href="#send-guarantees" title="Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;">Chapter&nbsp;20, <i>&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</i></a>&#20102;&#35299;&#30456;&#20851;&#30340;&#26356;&#35814;&#32454;&#30340;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1341"></a>8.1.6.&nbsp;ClientConsumer</h3></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#20351;&#29992; <tt class="literal">ClientConsumer</tt> &#23454;&#20363;&#26469;&#25509;&#25910;&#26469;&#33258;queue&#30340;&#28040;&#24687;&#12290;HornetQ&#30340;&#20869;&#26680;&#21516;&#26102;&#25903;&#25345;
                &#21516;&#27493;&#19982;&#24322;&#27493;&#30340;&#28040;&#24687;&#25509;&#25910;&#12290;<tt class="literal">ClientConsumer</tt> &#23454;&#20363;&#21487;&#20197;&#37197;&#32622;&#26377;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#12290;&#23427;&#21482;&#25509;&#25910;&#19982;&#36807;&#28388;
                &#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1352"></a>8.1.7.&nbsp;ClientProducer</h3></div></div><div></div></div><p>&#23458;&#25143;&#31471;&#20351;&#29992;<tt class="literal">ClientSession</tt>&#21019;&#24314; <tt class="literal">ClientProducer</tt> &#23454;&#20363;
                &#26469;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;&#28040;&#24687;&#12290;ClientProducer&#21487;&#20197;&#25351;&#23450;&#19968;&#20010;&#22320;&#22336;&#65292;&#29992;&#26469;&#21521;&#20854;&#21457;&#36865;&#28040;&#24687;&#12290;&#25110;&#32773;&#19981;&#25351;&#23450;&#22320;&#22336;&#65292;&#28040;&#24687;&#22312;&#21457;&#36865;&#26102;
                &#20877;&#25351;&#23450;&#22320;&#22336;&#12290;</p></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>&#35831;&#27880;&#24847; ClientSession&#12289; ClientProducer&#21644;ClientConsumer &#23454;&#20363;&#26159;&#21487;&#20197;&#34987;
                <span class="emphasis"><em>&#37325;&#29992;</em></span>&#30340;&#12290;</p><p>&#22312;&#27599;&#27425;&#21457;&#36865;&#25110;&#25509;&#25910;&#19968;&#20010;&#28040;&#24687;&#26102;&#37117;&#21019;&#24314;&#26032;&#30340; ClientSession, ClientProducer &#21644; ClientConsumer&#26159;&#19981;&#31526;&#21512;
                &#35774;&#35745;&#27169;&#24335;&#30340;&#35201;&#27714;&#30340;&#12290;&#36825;&#26679;&#20570;&#20250;&#23548;&#33268;&#24615;&#33021;&#20302;&#19979;&#12290;&#22312;<a href="#perf-tuning" title="Chapter&nbsp;46.&nbsp;&#24615;&#33021;&#35843;&#20248;">Chapter&nbsp;46, <i>&#24615;&#33021;&#35843;&#20248;</i></a>&#20013;&#25105;&#20204;&#20250;&#20570;&#36827;&#19968;&#27493;&#30340;&#35752;&#35770;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1373"></a>8.2.&nbsp;&#19968;&#20010;&#20869;&#26680;&#30340;&#24212;&#29992;&#23454;&#20363;</h2></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#38750;&#24120;&#31616;&#21333;&#30340;&#20351;&#29992;&#20869;&#26680;API&#26469;&#21457;&#36865;&#30340;&#25509;&#25910;&#28040;&#24687;&#30340;&#23454;&#20363;&#65306;</p><pre class="programlisting">
ClientSessionFactory factory =  HornetQClient.createClientSessionFactory(
                                        new TransportConfiguration(
                                           InVMConnectorFactory.class.getName()));

ClientSession session = factory.createSession();

session.createQueue("example", "example", true);

ClientProducer producer = session.createProducer("example");

ClientMessage message = session.createMessage(true);

message.getBodyBuffer().writeString("Hello");

producer.send(message);

session.start();

ClientConsumer consumer = session.createConsumer("example");

ClientMessage msgReceived = consumer.receive();

System.out.println("message = " + msgReceived.getBodyBuffer().readString());

session.close();</pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jms-core-mapping"></a>Chapter&nbsp;9.&nbsp;JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;</h2></div></div><div></div></div><p>&#26412;&#24847;&#35762;&#36848;JMS&#30340;&#30446;&#26631;&#23454;&#20307;&#65288;destination&#65289;&#22914;&#20309;&#26144;&#23556;&#21040;HornetQ&#30340;&#22320;&#22336;&#65288;addresses&#65289;&#12290;</p><p>HornetQ&#30340;&#20869;&#26680;&#27809;&#26377;JMS&#30340;&#20219;&#20309;&#23454;&#29616;&#12290;&#22312;&#20869;&#26680;&#20013;&#27809;&#26377;topic&#30340;&#27010;&#24565;&#65292;&#23427;&#26159;&#36890;&#36807;&#22312;&#19968;&#20010;&#22320;&#22336;&#19978;&#65288;&#30456;&#24403;&#20110;topic&#30340;&#21517;&#23383;&#65289;&#32465;&#23450;
        &#38646;&#25110;&#22810;&#20010;queue&#26469;&#23454;&#29616;JMS topic&#30340;&#21151;&#33021;&#30340;&#12290;&#27599;&#20010;&#32465;&#23450;&#30340;queue&#30456;&#24403;&#20110;&#35813;topic&#30340;&#19968;&#20010;&#35746;&#38405;&#65288;subscription&#65289;&#12290;
        &#31867;&#20284;&#22320;&#36890;&#36807;&#22312;&#19968;&#20010;&#22320;&#22336;&#19978;&#65288;&#30456;&#24403;&#20110;queue&#30340;&#21517;&#23383;&#65289;&#32465;&#23450;&#21333;&#19968;&#30340;queue&#23601;&#21487;&#20197;&#23454;&#29616;JMS queue&#30340;&#21151;&#33021;&#12290;</p><p>&#25353;&#29031;&#24815;&#20363;&#65292;&#25152;&#26377;&#30340;JMS queue&#25152;&#23545;&#24212;&#30340;&#20869;&#26680;queue&#30340;&#21517;&#23383;&#37117;&#20197;<tt class="literal">jms.queue.</tt>&#20570;&#20026;&#24320;&#22836;&#12290;&#27604;&#22914;
        &#24403;JMS queue&#30340;&#21517;&#23383;&#26159;"orders.europe"&#26102;&#65292;&#20854;&#23545;&#24212;&#30340;&#20869;&#26680;queue&#30340;&#21517;&#23383;&#24212;&#35813;&#26159;"jms.queue.orders.europe"&#12290;
        &#37027;&#20040;&#20869;&#26680;queue&#25152;&#32465;&#23450;&#30340;&#22320;&#22336;&#30340;&#21517;&#23383;&#21644;&#35813;&#20869;&#26680;queue&#30340;&#21517;&#23383;&#26159;&#30456;&#21516;&#30340;&#12290;</p><p>&#21516;&#26679;&#65292;&#25152;&#26377;JMS topic&#25152;&#23545;&#24212;&#30340;&#20869;&#26680;&#22320;&#22336;&#30340;&#21517;&#23383;&#37117;&#20197; "jms.topic."&#20026;&#21069;&#32512;&#12290;&#27604;&#22914;&#24403;&#19968;&#20010;JMS topic&#30340;&#21517;&#23383;&#26159;"news.europe"
        &#26102;&#65292;&#23427;&#23545;&#24212;&#30340;&#20869;&#26680;&#30340;&#22320;&#22336;&#24212;&#35813;&#26159;"jms.topic.news.europe"&#12290;</p><p>&#25442;&#21477;&#35805;&#35828;&#23601;&#26159;&#22914;&#26524;&#20320;&#21521;JMS queue &#8220;orders.europe"&#21457;&#36865;&#19968;&#20010;&#28040;&#24687;&#65292;&#36825;&#20010;&#28040;&#24687;&#23601;&#20250;&#34987;&#36335;&#30001;&#21040;&#32465;&#23450;&#22312;&#20869;&#26680;&#22320;&#22336;&#20026;&#8220;jms.queue.orders.europe&#8221;
        &#30340;&#21516;&#21517;&#20869;&#26680;queue&#20013;&#12290; &#22914;&#26524;&#26159;&#21521;JMS topic &#8220;news.europe&#8220;&#21457;&#36865;&#19968;&#20010;&#28040;&#24687;&#65292;&#23427;&#20250;&#34987;&#36335;&#30001;&#21040;&#32465;&#23450;&#21040;&#20869;&#26680;&#22320;&#22336;&#20026;
        &#8221;jms.topic.news.europe&#8220;&#30340;&#25152;&#26377;&#30340;&#20869;&#26680;queue&#20013;&#12290;</p><p>&#20855;&#20307;&#35201;&#37197;&#32622;&#19968;&#20010;&#21517;&#20026;&#8220;orders.europe"&#30340;JMS&#38431;&#21015;&#26102;&#65292;&#20320;&#38656;&#35201;&#37197;&#32622;&#30456;&#24212;&#30340;&#20869;&#26680;queue&#8220;jms.queue.orders.europe&#8220;&#65306;</p><pre class="programlisting">
&lt;!-- expired messages in JMS Queue "orders.europe"
    will be sent to the JMS Queue "expiry.europe" --&gt;
&lt;address-setting match="jms.queue.orders.europe"&gt;
   &lt;expiry-address&gt;jms.queue.expiry.europe&lt;/expiry-address&gt;
   ...
&lt;/address-setting&gt;
   </pre></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="client-classpath"></a>Chapter&nbsp;10.&nbsp;&#23458;&#25143;&#31471;&#30340;Classpath</h2></div></div><div></div></div><p>HornetQ&#30340;<span class="emphasis"><em>&#23458;&#25143;&#31471;Classpath</em></span>&#38656;&#35201;&#26377;&#20960;&#20010;jar&#25991;&#20214;&#12290;&#20855;&#20307;&#26159;&#21738;&#20960;&#20010;&#35201;&#26681;&#25454;&#23458;&#25143;&#31471;
          &#26159;&#38656;&#35201;&#20869;&#26680;API&#12289;JMS&#21644;JNDI&#20013;&#30340;&#21738;&#20123;&#26381;&#21153;&#26469;&#30830;&#23450;&#12290;</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>&#26412;&#31456;&#25152;&#25552;&#21450;&#30340;&#25152;&#26377;jar&#25991;&#20214;&#20840;&#37096;&#22312;HorneQ&#21457;&#24067;&#21253;&#30340; <tt class="literal">lib</tt>&#30446;&#24405;&#19979;&#12290;&#22312;&#20351;&#29992;&#20013;&#19968;&#23450;
            &#35201;&#30830;&#20445;&#25152;&#26377;&#30340;jar&#25991;&#20214;&#23646;&#20110;&#21516;&#19968;&#20010;&#21457;&#24067;&#29256;&#26412;&#12290;&#23558;&#19981;&#21516;&#29256;&#26412;&#30340;jar&#28151;&#22312;&#19968;&#36215;&#20351;&#29992;&#21487;&#33021;&#36896;&#25104;&#19968;&#20123;&#38590;&#20197;&#21457;&#29616;&#30340;&#38169;&#35823;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1448"></a>10.1.&nbsp;&#20351;&#29992;HornetQ&#20869;&#26680;&#30340;&#23458;&#25143;&#31471;</h2></div></div><div></div></div><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#21482;&#20351;&#29992;HornetQ&#20869;&#26680;&#65288;&#38750;JMS&#23458;&#25143;&#31471;&#65289;&#65292;&#38656;&#35201;&#23558; <tt class="literal">hornetq-core-client.jar</tt>&#21644;
                <tt class="literal">netty.jar</tt> &#25918;&#21040;classpath&#20013;&#12290;</p><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#36816;&#34892;&#20110;<span class="emphasis"><em>Java 5 &#34394;&#25311;&#26426;</em></span>&#19978;&#65292;
              &#35831;&#20351;&#29992;<tt class="literal">hornetq-core-client-java5.jar</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1467"></a>10.2.&nbsp;JMS&#23458;&#25143;&#31471;</h2></div></div><div></div></div><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#20351;&#29992;JMS&#65292;&#38656;&#35201;&#22312;classpath&#19978;&#22686;&#21152;&#20004;&#20010;jar&#25991;&#20214;&#65306; <tt class="literal">hornetq-jms-client.jar</tt> &#21644; <tt class="literal">jboss-jms-api.jar</tt>&#12290;</p><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#36816;&#34892;&#20110;<span class="emphasis"><em>Java 5 &#34394;&#25311;&#26426;</em></span>&#19978;&#65292;&#35831;&#20351;&#29992;
              <tt class="literal">hornetq-jms-client-java5.jar</tt>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p><tt class="literal">jboss-jms-api.jar</tt>&#20013;&#21253;&#21547;&#30340;&#21482;&#26159; <tt class="literal">javax.jms.*</tt> &#21253;&#20013;&#30340;&#25509;&#21475;&#31867;&#12290;
                &#22914;&#26524;&#36825;&#20123;&#31867;&#24050;&#32463;&#22312;&#20320;&#30340;classpath&#20013;&#65292;&#21017;&#20320;&#23601;&#19981;&#38656;&#35201;&#36825;&#20010;jar&#25991;&#20214;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1494"></a>10.3.&nbsp;&#38656;&#35201;JNDI&#30340;JMS&#23458;&#25143;&#31471;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#30340;JMS&#23458;&#25143;&#31471;&#20351;&#29992;JNDI&#26469;&#26597;&#25214;HornetQ&#21333;&#29420;&#26381;&#21153;&#22120;&#19978;&#30340;&#23545;&#35937;&#65292;&#20320;&#38656;&#35201;&#23558; <tt class="literal">jnp-client.jar</tt> &#22686;&#21152;
              &#21040;&#20320;&#30340;classpath&#20013;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="examples"></a>Chapter&nbsp;11.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#22312;HornetQ&#30340;&#21457;&#24067;&#21253;&#20013;&#26377;&#36229;&#36807;70&#20010;&#19981;&#21516;&#30340;&#20363;&#23376;&#12290;&#36825;&#20123;&#20363;&#23376;&#30452;&#25509;&#21487;&#20197;&#36816;&#34892;&#12290;&#23427;&#20204;&#20998;&#21035;&#23637;&#31034;&#20102;HornetQ&#25152;&#20855;&#26377;&#30340;&#21508;&#31181;&#21151;&#33021;&#12290;</p><p>&#25152;&#26377;&#30340;&#20363;&#23376;&#37117;&#22312;HornetQ&#21457;&#24067;&#21253;&#30340; <tt class="literal">examples</tt>&#30446;&#24405;&#19979;&#12290;&#25152;&#26377;&#30340;&#20363;&#23376;&#34987;&#20998;&#25104;&#20102;&#20004;&#22823;&#31867;&#65306;
        JMS&#20363;&#23376;&#21644;&#20869;&#26680;&#20363;&#23376;&#12290;JMS&#20363;&#23376;&#23637;&#29616;&#30340;&#26159;JMS&#30340;&#21508;&#31181;&#21151;&#33021;&#65292;&#20869;&#26680;&#30340;&#20363;&#23376;&#21017;&#23637;&#31034;&#30340;&#26159;&#20869;&#26680;API&#30340;&#21151;&#33021;&#12290;
</p><p>&#27492;&#22806;HornetQ&#36824;&#25552;&#20379;&#20102;&#19968;&#20123;Java EE&#30340;&#20363;&#23376;&#65292;&#36825;&#20123;&#20363;&#23376;&#38656;&#35201;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#25165;&#33021;&#36816;&#34892;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e1531"></a>11.1.&nbsp;JMS &#20363;&#23376;</h2></div></div><div></div></div><p>&#35201;&#36816;&#34892;&#19968;&#20010;JMS&#20363;&#23376;&#65292;&#21482;&#35201;&#36827;&#20837;&#21040;&#30456;&#24212;&#20363;&#23376;&#30340;&#23376;&#30446;&#24405;&#65292;&#36816;&#34892; <tt class="literal">./build.sh</tt> &#65288;&#25110;&#32773;
            &#22312;Windows&#24179;&#21488;&#19978;&#36816;&#34892;<tt class="literal">build.bat</tt>&#65289;&#21363;&#21487;&#12290;</p><p>&#19979;&#38754;&#21015;&#20986;&#30340;&#36825;&#20123;JMS&#20363;&#23376;&#24182;&#37197;&#26377;&#31616;&#35201;&#30340;&#35828;&#26126;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="application-level-failover"></a>11.1.1.&nbsp;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;</h3></div></div><div></div></div><p>HornetQ&#25903;&#25345;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#12290;&#36825;&#22312;&#26381;&#21153;&#22120;&#31471;&#27809;&#26377;&#22797;&#21046;&#65288;replication&#65289;&#37197;&#32622;&#30340;&#24773;&#20917;&#19979;&#26159;&#24456;&#26377;&#29992;&#30340;&#12290;</p><p>&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#27880;&#20876;&#19968;&#20010;JMS <tt class="literal">ExceptionListener</tt>&#12290;&#24403;HornetQ&#26816;&#27979;&#21040;&#36830;&#25509;&#25925;&#38556;&#26102;&#65292;&#23427;&#20250;
                &#36890;&#30693;&#36825;&#20010;&#27880;&#20876;&#30340;Listener&#12290;</p><p>&#36825;&#20010;<tt class="literal">ExceptionListener</tt>&#22312;&#25509;&#21040;HornetQ&#30340;&#36890;&#30693;&#21518;&#21487;&#20197;&#19982;&#20854;&#23427;&#30340;&#33410;&#28857;&#21019;&#24314;
                &#26032;&#30340;&#36830;&#25509;&#12289;&#20250;&#35805;&#31561;&#23545;&#35937;&#65292;&#20197;&#20351;&#24212;&#29992;&#31243;&#24207;&#33021;&#32487;&#32493;&#36816;&#34892;&#12290;</p><p>&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#26159;&#23454;&#29616;&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;HA&#65289;&#30340;&#19968;&#31181;&#26041;&#27861;&#12290;&#23427;&#19982;&#33258;&#21160;&#22833;&#25928;&#22791;&#25588;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#23427;&#38656;&#35201;&#32534;&#20889;&#39069;&#22806;&#30340;&#20195;&#30721;&#12290;
                &#21516;&#26102;&#30001;&#20110;&#21457;&#29983;&#25925;&#38556;&#26102;&#26087;&#30340;&#20250;&#35805;&#32467;&#26463;&#65292;&#36825;&#20250;&#36896;&#25104;&#37027;&#20123;&#36824;&#27809;&#26469;&#24471;&#21450;&#25552;&#20132;&#30340;&#24037;&#20316;&#20002;&#22833;&#65292;&#36824;&#20250;&#36896;&#25104;&#20219;&#20309;&#27809;&#26377;&#36890;&#30693;&#30340;&#28040;&#24687;&#34987;&#37325;&#21457;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.bridge"></a>11.1.2.&nbsp;&#20869;&#26680;&#26725;&#65288;Bridge&#65289;&#20363;&#23376;</h3></div></div><div></div></div><p><tt class="literal">bridge</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#23558;&#19968;&#20010;&#20869;&#26680;&#26725;&#37096;&#32626;&#21040;&#19968;&#20010;&#26381;&#21153;&#22120;&#19978;&#65292;&#20174;&#26412;&#22320;&#30340;queue&#25509;&#25910;&#28040;&#24687;&#24182;&#23558;&#20854;&#36716;&#21457;&#21040;
                &#21478;&#19968;&#26381;&#21153;&#22120;&#30340;&#22320;&#22336;&#19978;&#12290;</p><p>&#20869;&#26680;&#30340;bridge&#21487;&#29992;&#26469;&#22312;&#20004;&#20010;&#20114;&#30456;&#20998;&#24320;&#30340;HornetQ&#30340;&#26381;&#21153;&#22120;&#38388;&#24314;&#31435;&#19968;&#20010;&#28040;&#24687;&#27969;&#12290;&#23427;&#21487;&#20197;&#22788;&#29702;&#20020;&#26102;&#24615;&#30340;&#36830;&#25509;&#25925;&#38556;&#65292;&#29305;&#21035;&#36866;&#29992;&#20110;
                &#19981;&#21487;&#38752;&#30340;&#32593;&#32476;&#30340;&#24773;&#20917;&#12290;&#24191;&#22495;&#32593;&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.browsers"></a>11.1.3.&nbsp;&#27983;&#35272;&#22120;&#65288;Browser&#65289;</h3></div></div><div></div></div><p><tt class="literal">browser</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22312;HornetQ&#20013;&#22914;&#20309;&#20351;&#29992;JMS <tt class="literal">QueueBrowser</tt>&#12290;</p><p>&#26377;&#20851;JMS queue&#30340;&#27010;&#24565;&#22312;JMS 1.1 specification&#26377;&#26126;&#30830;&#30340;&#23450;&#20041;&#65292;&#36825;&#37324;&#23601;&#19981;&#20877;&#21465;&#36848;&#12290;</p><p> &#19968;&#20010;<tt class="literal">QueueBrowser</tt>&#21487;&#20197;&#29992;&#26469;&#35266;&#23519;queue&#20013;&#30340;&#28040;&#24687;&#32780;&#24433;&#21709;&#23427;&#20204;&#12290;&#23427;&#21487;&#20197;&#35266;&#23519;queue&#20013;&#30340;&#20840;&#37096;
                  &#28040;&#24687;&#65292;&#20063;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#36873;&#25321;&#22120;&#65288;selector&#65289;&#26469;&#36873;&#25321;&#24615;&#22320;&#23519;&#30475;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1587"></a>11.1.4.&nbsp;Client Kickoff</h3></div></div><div></div></div><p><tt class="literal">client-kickoff</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#21033;&#29992;JMX&#31649;&#29702;&#25509;&#21475;&#36890;&#36807;&#24050;&#30693;&#30340;IP&#22320;&#22336;&#26469;&#26029;&#24320;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1594"></a>11.1.5.&nbsp;&#23458;&#25143;&#31471;&#30340;&#36127;&#36733;&#22343;&#34913;</h3></div></div><div></div></div><p><tt class="literal">client-side-load-balancing</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#36890;&#36807;&#19968;&#20010;JMS&#36830;&#25509;&#21487;&#20197;&#22312;&#38598;&#32676;&#30340;&#19981;&#21516;&#33410;&#28857;&#19978;&#21019;&#24314;
                &#20250;&#35805;&#12290;&#20063;&#23601;&#26159;&#35828;HornetQ&#21487;&#20197;&#23545;&#23458;&#25143;&#31471;&#30340;&#20250;&#35805;&#21019;&#24314;&#36827;&#34892;&#38598;&#32676;&#20869;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.clustered.grouping"></a>11.1.6.&nbsp;&#38598;&#32676;&#20998;&#32452;</h3></div></div><div></div></div><p>&#19982;&#20998;&#32452;&#65288;grouping&#65289;&#20363;&#23376;&#30456;&#20284;&#65292;&#21482;&#26159;&#26412;&#20363;&#25152;&#23637;&#31034;&#30340;&#26159;&#38598;&#32676;&#30340;&#24773;&#20917;&#12290;&#21457;&#21521;&#19981;&#21516;&#33410;&#28857;&#30340;&#20855;&#26377;&#30456;&#21516;&#32452;id&#30340;&#28040;&#24687;
                &#37117;&#20250;&#20256;&#36865;&#21040;&#21516;&#19968;&#20010;&#33410;&#28857;&#19978;&#30340;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1606"></a>11.1.7.&nbsp;&#38598;&#32676;&#38431;&#21015;</h3></div></div><div></div></div><p><tt class="literal">clustered-queue</tt> &#20363;&#23376;&#23558;&#19968;&#20010;JMS queue&#37096;&#32626;&#21040;&#20004;&#20010;&#33410;&#28857;&#19978;&#12290;&#36825;&#20004;&#20010;&#33410;&#28857;&#32452;&#25104;&#19968;&#20010;&#38598;&#32676;&#12290;
                &#25105;&#20204;&#22312;&#27599;&#20010;&#33410;&#28857;&#19978;&#21508;&#21019;&#24314;&#19968;&#20010;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#65292;&#20294;&#21482;&#22312;&#20854;&#20013;&#19968;&#20010;&#33410;&#28857;&#19978;&#21019;&#24314;&#19968;&#20010;&#21457;&#36865;&#32773;&#65288;producer&#65289;&#12290;&#21033;&#29992;&#21457;&#36865;&#32773;
                &#21457;&#36865;&#19968;&#20123;&#28040;&#24687;&#65292;&#28982;&#21518;&#30830;&#35748;&#20004;&#20010;&#25509;&#25910;&#32773;&#20197;&#36718;&#25442;&#26041;&#24335;&#65288;round-robin&#65289;&#25509;&#25910;&#36825;&#20123;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1613"></a>11.1.8.&nbsp;&#21333;&#26426;&#38598;&#32676;</h3></div></div><div></div></div><p><tt class="literal">clustered-standalone</tt>&#20363;&#23376;&#25152;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#22312;&#21516;&#19968;&#21488;&#26426;&#22120;&#19978;&#37197;&#32622;&#24182;&#36816;&#34892;
                3&#20010;&#33410;&#28857;&#30340;&#38598;&#32676;&#12290;&#22312;&#27599;&#20010;&#33410;&#28857;&#19978;&#37117;&#21019;&#24314;&#20102;&#19968;&#20010;JMS topic&#30340;&#35746;&#38405;&#32773;&#65288;subscriber&#65289;&#12290;&#21482;&#22312;&#20854;&#20013;&#19968;&#20010;&#33410;&#28857;&#19978;
                &#21019;&#24314;&#20102;&#19968;&#30456;&#21457;&#36865;&#32773;&#26469;&#21521;&#36825;&#20010;topic&#21457;&#36865;&#19968;&#20123;&#28040;&#24687;&#12290;&#28982;&#21518;&#25105;&#20204;&#30830;&#35748;&#25152;&#26377;&#30340;subscriber&#37117;&#25509;&#25910;&#21040;&#20102;&#36825;&#20123;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1620"></a>11.1.9.&nbsp;&#38598;&#32676;&#30340;Topic</h3></div></div><div></div></div><p><tt class="literal">clustered-topic</tt>&#20363;&#23376;&#23558;&#19968;&#20010;JMS topic&#37096;&#32626;&#21040;&#20004;&#20010;&#33410;&#28857;&#19978;&#12290;&#36825;&#20004;&#20010;&#33410;&#28857;&#32452;&#25104;&#19968;&#20010;&#38598;&#32676;&#12290;
                &#28982;&#21518;&#22312;&#27599;&#20010;&#33410;&#28857;&#19978;&#21019;&#24314;&#20102;&#19968;&#20010;&#35746;&#38405;&#32773;&#65288;subscriber&#65289;&#65292;&#21482;&#22312;&#19968;&#20010;&#33410;&#28857;&#19978;&#21019;&#24314;&#19968;&#20010;&#21457;&#36865;&#32773;&#65288;producer&#65289;&#12290;&#36890;&#36807;&#36825;&#20010;&#21457;
                &#36865;&#32773;&#21457;&#36865;&#19968;&#20123;&#28040;&#24687;&#65292;&#30830;&#35748;&#20004;&#20010;&#35746;&#38405;&#32773;&#37117;&#25910;&#21040;&#20102;&#36825;&#20123;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.consumer-rate-limit"></a>11.1.10.&nbsp;&#38480;&#21046;&#25509;&#25910;&#36895;&#29575;</h3></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#25511;&#21046;&#19968;&#20010;JMS&#28040;&#24687;&#25509;&#25910;&#32773;&#25509;&#25910;&#28040;&#24687;&#30340;&#36895;&#24230;&#12290;&#36825;&#26159;&#22312;&#21019;&#24314;&#25110;&#37096;&#32626;&#36830;&#25509;&#24037;&#21378;&#26102;&#36890;&#36807;&#20854;&#37197;&#32622;&#21442;&#25968;&#26469;&#23436;&#25104;&#30340;&#12290;</p><p>&#22914;&#26524;&#35774;&#32622;&#20102;&#36825;&#20010;&#36895;&#24230;&#30340;&#38480;&#21046;&#65292;HornetQ&#20250;&#20445;&#35777;&#20854;&#21521;&#25509;&#25910;&#32773;&#20256;&#36882;&#28040;&#24687;&#30340;&#36895;&#24230;&#27704;&#36828;&#19981;&#20250;&#36229;&#36807;&#36825;&#20010;&#38480;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.dead-letter"></a>11.1.11.&nbsp;&#27515;&#28040;&#24687;&#65288;Dead Letter&#65289;</h3></div></div><div></div></div><p><tt class="literal">dead-letter</tt>&#20363;&#23376;&#35753;&#20320;&#20102;&#35299;&#22914;&#20309;&#23450;&#20041;&#21644;&#22788;&#29702;&#27515;&#28040;&#24687;&#12290;&#26377;&#26102;&#20505;&#28040;&#24687;&#30001;&#20110;&#26576;&#31181;&#21407;&#22240;&#19981;&#33021;&#25104;&#21151;
                &#22320;&#20256;&#36882;&#20986;&#21435;&#65292;&#27604;&#22914;&#25509;&#25910;&#32773;&#22312;&#25509;&#25910;&#28040;&#24687;&#30340;&#20132;&#26131;&#20013;&#21457;&#29983;&#22238;&#28378;&#12290;</p><p>&#21457;&#29983;&#22238;&#28378;&#21518;&#65292;&#28040;&#24687;&#34987;&#8221;&#36864;&#22238;&#8220;&#21040;JMS&#30446;&#26631;&#65288;destination&#65289;&#20934;&#22791;&#36827;&#34892;&#37325;&#21457;&#12290;&#36825;&#19968;&#36807;&#31243;&#21487;&#33021;&#20250;&#34987;&#19981;&#20572;&#22320;&#37325;&#22797;&#19979;&#21435;&#36896;&#25104;
                &#28040;&#24687;&#27704;&#36828;&#21457;&#19981;&#20986;&#21435;&#65292;&#32780;&#19988;&#28010;&#36153;&#31995;&#32479;&#30340;&#26102;&#38388;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#19978;&#36848;&#24773;&#20917;&#30340;&#21457;&#29983;&#65292;&#28040;&#24687;&#31995;&#32479;&#24341;&#20837;&#20102;&#27515;&#28040;&#24687;&#30340;&#27010;&#24565;&#65306;&#21363;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#21453;&#22797;&#37325;&#21457;&#19981;&#25104;&#21151;&#36798;&#21040;&#19968;&#23450;&#30340;&#27425;&#25968;&#26102;&#65292;&#35813;&#28040;&#24687;
                &#20415;&#25104;&#20026;&#20102;&#27515;&#28040;&#24687;&#65292;&#23427;&#23558;&#20174;&#25152;&#23646;&#30446;&#26631;&#65288;destination&#65289;&#20013;&#21024;&#38500;&#24182;&#21457;&#36865;&#21040;&#19968;&#20010;&#31216;&#20026;&#27515;&#28040;&#24687;&#30446;&#26631;&#30340;&#30446;&#26631;&#12290;&#29992;&#25143;&#21487;&#20197;&#20174;&#27515;&#28040;&#24687;&#30446;&#26631;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#19978;&#25509;&#25910;&#36825;&#20123;&#27515;&#28040;&#24687;&#20197;&#20415;&#36827;&#34892;&#20998;&#26512;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.delayed-redelivery"></a>11.1.12.&nbsp;&#24310;&#36831;&#20877;&#21457;&#36865;</h3></div></div><div></div></div><p><tt class="literal">delayed-redelivery</tt>&#26159;&#19968;&#20010;&#23637;&#31034;&#22914;&#20309;&#37197;&#32622;HornetQ&#24310;&#36831;&#20877;&#21457;&#36865;&#28040;&#24687;&#30340;&#20363;&#23376;&#12290;</p><p>&#24403;&#23458;&#25143;&#31471;&#32463;&#24120;&#21457;&#29983;&#25925;&#38556;&#25110;&#21457;&#29983;&#20107;&#21153;&#22238;&#28378;&#26102;&#65292;&#28040;&#24687;&#20250;&#19981;&#20572;&#22320;&#37325;&#22797;&#21457;&#36865;&#65292;&#36825;&#26679;&#20250;&#36896;&#25104;CPU&#21644;&#32593;&#32476;&#36164;&#28304;&#34987;&#19981;&#38388;&#26029;&#30340;
                &#37325;&#22797;&#21457;&#36865;&#25152;&#21344;&#29992;&#65292;&#24433;&#21709;&#20854;&#23427;&#24037;&#20316;&#30340;&#36827;&#34892;&#12290;&#24310;&#36831;&#20877;&#21457;&#36865;&#21487;&#20197;&#26377;&#25928;&#22320;&#20943;&#36731;&#36825;&#31181;&#24773;&#20917;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="divert-example"></a>11.1.13.&nbsp;&#36716;&#31227;&#65288;Divert&#65289;</h3></div></div><div></div></div><p>HornetQ&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#23558;&#28040;&#24687;&#20174;&#19968;&#20010;&#22320;&#22336;&#33258;&#21160;&#22320;&#36716;&#31227;&#21040;&#21478;&#19968;&#22320;&#22336;&#12290;&#36825;&#20010;&#20363;&#23376;&#23601;&#26159;&#21521;&#29992;&#25143;&#23637;&#31034;&#36716;&#31227;&#30340;&#37197;&#32622;&#21644;&#20351;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1659"></a>11.1.14.&nbsp;&#25345;&#20037;&#35746;&#38405;&#65288;Durable Subscription&#65289;</h3></div></div><div></div></div><p><tt class="literal">durable-subscription</tt>&#26159;&#19968;&#20010;&#22312;HornetQ&#20013;&#22914;&#20309;&#20351;&#29992;&#25345;&#20037;&#35746;&#38405;&#65288;durable
                subscription&#65289;&#30340;&#20363;&#23376;&#12290;&#25345;&#20037;&#35746;&#38405;&#26159;&#26631;&#20934;JMS&#30340;&#19968;&#37096;&#20998;&#65292;&#22312;JMS 1.1&#35268;&#33539;&#20013;&#26377;&#23427;&#30340;&#35814;&#32454;&#23450;&#20041;&#12290;</p><p>&#23545;&#20110;&#19968;&#20010;&#25345;&#20037;&#35746;&#38405;&#26469;&#35828;&#65292;&#23427;&#30340;&#28040;&#24687;&#21487;&#20197;&#22312;&#35746;&#38405;&#27809;&#26377;&#22788;&#20110;&#25509;&#25910;&#29366;&#24577;&#26102;&#34987;&#20445;&#30041;&#12290;&#21478;&#22806;&#65292;&#22914;&#26524;&#21457;&#21040;&#23427;&#30340;&#28040;&#24687;&#26159;&#25345;&#20037;
                &#28040;&#24687;&#30340;&#35805;&#65292;&#36825;&#20123;&#28040;&#24687;&#21487;&#20197;&#22312;&#26381;&#21153;&#22120;&#25925;&#38556;&#25110;&#37325;&#21551;&#26102;&#19981;&#20002;&#22833;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1668"></a>11.1.15.&nbsp;&#23884;&#20837;&#26041;&#24335;&#65288;Embedded&#65289;</h3></div></div><div></div></div><p><tt class="literal">embedded</tt>&#26159;&#19968;&#20010;&#22914;&#20309;&#23558;HornetQ&#26381;&#21153;&#23884;&#20837;&#21040;&#20320;&#30340;&#24212;&#29992;&#20013;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1675"></a>11.1.16.&nbsp;HTTP &#20256;&#36755;&#21327;&#35758;&#30340;&#25903;&#25345;</h3></div></div><div></div></div><p><tt class="literal">http-transport</tt>&#23637;&#31034;&#20102;HornetQ&#22914;&#20309;&#25903;&#25345;&#22312;&#20256;&#36755;&#23618;&#20351;&#29992;HTTP&#21327;&#35758;&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1682"></a>11.1.17.&nbsp;&#30452;&#25509;&#23454;&#20363;&#21270;JMS&#23545;&#35937;</h3></div></div><div></div></div><p>JMS &#23545;&#35937;&#26159;&#25351; <tt class="literal">&#36830;&#25509;&#24037;&#21378;&#65288;ConnectionFactory&#65289;</tt>&#12289;<tt class="literal">&#38431;&#21015;&#65288;Queue&#65289;</tt>&#21644;<tt class="literal">&#35805;&#39064;&#65288;Topic&#65289;</tt> &#30340;&#23454;&#20363;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#23427;&#20204;&#36890;&#36807;JNDI&#26381;&#21153;
                &#26469;&#33719;&#21462;&#12290;&#23427;&#20204;&#22312;JMS&#26415;&#35821;&#20013;&#34987;&#31216;&#20026;&#8220;&#34987;&#31649;&#29702;&#30340;&#23545;&#35937;&#65288;administered objects&#65289;&#8221;&#12290;</p><p>&#26377;&#30340;&#26102;&#20505;&#23458;&#25143;&#31471;&#27809;&#26377;JNDI&#26381;&#21153;&#21487;&#29992;&#65292;&#25110;&#32773;&#19981;&#36866;&#21512;&#20351;&#29992;JNDI&#12290;&#37027;&#20040;&#22312;&#27809;&#26377;JNDI&#30340;&#24773;&#20917;&#19979;HornetQ&#20801;&#35768;&#30452;&#25509;&#22312;&#23458;&#25143;&#31471;
                &#23558;&#36825;&#20123;JMS&#23545;&#35937;&#23454;&#20363;&#21270;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.interceptor"></a>11.1.18.&nbsp;&#25318;&#25130;&#22120;&#65288;Interceptor&#65289;</h3></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#37197;&#32622;&#25318;&#25130;&#22120;&#20197;&#20415;&#29992;&#25143;&#21487;&#20197;&#33258;&#24049;&#22788;&#29702;&#21508;&#31181;&#21508;&#26679;&#30340;&#28040;&#24687;&#20107;&#20214;&#12290;&#36825;&#20010;&#20363;&#23376;&#23601;&#26159;&#32473;&#29992;&#25143;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;
                  &#25318;&#25130;&#22120;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.jaas"></a>11.1.19.&nbsp;JAAS</h3></div></div><div></div></div><p><tt class="literal">jaas</tt>&#26159;&#19968;&#20010;&#22914;&#20309;&#37197;&#32622;JAAS&#23433;&#20840;&#27169;&#24335;&#30340;&#20363;&#23376;&#12290;HornetQ&#21487;&#20197;&#20351;&#29992;JAAS&#26469;&#36827;&#34892;&#29992;&#25143;&#30340;&#39564;&#35777;&#19982;&#26435;&#38480;&#25511;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.jms.jms-bridge"></a>11.1.20.&nbsp;JMS&#26725;&#65288;Bridge&#65289;</h3></div></div><div></div></div><p><tt class="literal">jms-brige</tt>&#26159;&#19968;&#20010;&#22312;&#20004;&#20010;&#21333;&#29420;HornetQ&#26381;&#21153;&#22120;&#20043;&#38388;&#35774;&#32622;&#26725;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.jmx"></a>11.1.21.&nbsp;JMX&#31649;&#29702;</h3></div></div><div></div></div><p><tt class="literal">jmx</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;JMX&#26469;&#31649;&#29702;HornetQ&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.large-message"></a>11.1.22.&nbsp;&#22823;&#28040;&#24687;</h3></div></div><div></div></div><p><tt class="literal">large-message</tt>&#20363;&#23376;&#32473;&#29992;&#25143;&#23637;&#31034;&#20102;&#20351;&#29992;HornetQ&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;&#22823;&#28040;&#24687;&#30340;&#21151;&#33021;&#12290;HornetQ
                &#25903;&#25345;&#36229;&#22823;&#28040;&#24687;&#30340;&#21457;&#36865;&#19982;&#25509;&#25910;&#12290;&#36825;&#20123;&#28040;&#24687;&#21487;&#20197;&#22823;&#21040;&#20869;&#23384;&#26080;&#27861;&#35013;&#19979;&#12290;&#23427;&#30340;&#22823;&#23567;&#21482;&#21463;&#26381;&#21153;&#22120;&#30340;&#30828;&#30424;&#31354;&#38388;&#30340;&#38480;&#21046;&#12290;</p><p>&#22312;&#26381;&#21153;&#22120;&#31471;&#22823;&#28040;&#24687;&#26159;&#34987;&#25345;&#20037;&#21270;&#30340;&#65292;&#25152;&#20197;&#23427;&#21487;&#20197;&#25215;&#21463;&#26381;&#21153;&#22120;&#30340;&#23849;&#28291;&#25110;&#37325;&#21551;&#32780;&#19981;&#20002;&#22833;&#25110;&#25439;&#22351;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.last-value-queue"></a>11.1.23.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;</h3></div></div><div></div></div><p><tt class="literal">last-value-queue</tt>&#21521;&#29992;&#25143;&#23637;&#31034;&#20102;&#22914;&#20309;&#23450;&#20041;&#19982;&#20351;&#29992;&#26368;&#26032;&#20540;&#38431;&#21015;&#12290;&#24403;&#22312;&#37197;&#32622;&#25991;&#20214;&#23450;&#20041;&#22909;
                &#26368;&#26032;&#20540;&#30340;&#21442;&#25968;&#21518;&#65292;&#36825;&#20123;&#26368;&#26032;&#20540;&#38431;&#21015;&#23601;&#20250;&#33258;&#21160;&#22320;&#29992;&#26032;&#30340;&#28040;&#24687;&#21462;&#20195;&#26087;&#30340;&#28040;&#24687;&#65292;&#20063;&#23601;&#26159;&#35828;&#26087;&#30340;&#28040;&#24687;&#34987;&#25243;&#24323;&#25481;&#12290;&#36825;&#26679;&#19968;&#20010;&#26368;&#26032;
                &#20540;&#30340;&#38431;&#21015;&#24635;&#26159;&#20445;&#30041;&#26368;&#26032;&#30340;&#28040;&#24687;&#22312;&#38431;&#21015;&#20013;&#12290;</p><p>&#32929;&#31080;&#20215;&#26684;&#28040;&#24687;&#23601;&#26159;&#19968;&#20010;&#20856;&#22411;&#30340;&#26368;&#26032;&#20540;&#38431;&#21015;&#30340;&#29992;&#20363;&#12290;&#23545;&#29992;&#25143;&#26469;&#35828;&#20182;&#25152;&#20851;&#24515;&#30340;&#26159;&#19968;&#25903;&#32929;&#31080;&#30340;&#26368;&#26032;&#20215;&#26684;&#65292;&#23545;&#20110;&#36807;&#21435;&#30340;&#20215;&#26684;
                &#26159;&#27809;&#26377;&#22810;&#22823;&#20852;&#36259;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1742"></a>11.1.24.&nbsp;&#20998;&#24067;&#24335;&#38431;&#21015;&#30340;&#36127;&#36733;&#22343;&#34913;</h3></div></div><div></div></div><p>&#22312;<tt class="literal">clustered-queue</tt>&#20363;&#23376;&#20013;&#37197;&#32622;&#20102;&#19968;&#20010;2&#33410;&#28857;&#30340;HornetQ&#26381;&#21153;&#38598;&#32676;&#12290;&#22312;&#38598;&#32676;&#19978;&#37096;&#32626;&#20102;
                &#19968;&#20010;&#20998;&#24067;&#24335;JMS&#38431;&#21015;&#12290;</p><p>&#28982;&#21518;&#22312;&#19968;&#20010;&#33410;&#28857;&#19978;&#21019;&#24314;&#20102;&#19968;&#20010;&#21457;&#36865;&#32773;&#65288;producer&#65289;&#65292;&#22312;&#20004;&#20010;&#33410;&#28857;&#19978;&#20998;&#21035;&#21019;&#24314;&#19968;&#20010;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#12290;&#36890;&#36807;
                &#21457;&#36865;&#32773;&#21521;&#38431;&#21015;&#21457;&#36865;&#19968;&#20123;&#28040;&#24687;&#28982;&#21518;&#34987;&#20004;&#30340;&#25509;&#25910;&#32773;&#20197;&#36718;&#27969;&#65288;round-robin&#65289;&#30340;&#26041;&#24335;&#25509;&#25910;&#12290;</p><p>&#26412;&#20363;&#35828;&#26126;&#20102;HornetQ&#21487;&#20197;&#23558;&#28040;&#24687;&#21521;&#38598;&#32676;&#20013;&#30340;&#27599;&#20010;&#25509;&#25910;&#32773;&#20998;&#24067;&#24335;&#22320;&#20256;&#36882;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.management"></a>11.1.25.&nbsp;&#31649;&#29702;</h3></div></div><div></div></div><p><tt class="literal">management</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#20351;&#29992;JMS&#28040;&#24687;&#26469;&#23454;&#29616;&#23545;HornetQ&#30340;&#31649;&#29702;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.management-notifications"></a>11.1.26.&nbsp;&#31649;&#29702;&#36890;&#30693;</h3></div></div><div></div></div><p><tt class="literal">management-notification</tt>&#23637;&#31034;&#20102;HornetQ&#22914;&#20309;&#20197;JMS&#28040;&#24687;&#30340;&#24418;&#24335;&#21521;&#29992;&#25143;&#21457;&#36865;
                &#31649;&#29702;&#36890;&#30693;&#12290;&#24403;&#26576;&#20123;&#20107;&#20214;&#21457;&#29983;&#26102;&#65288;&#22914;&#25509;&#25910;&#37117;&#21019;&#24314;&#65292;&#20851;&#38381;&#65307;&#22320;&#22336;&#21019;&#24314;&#19982;&#21024;&#38500;&#65307;&#23433;&#20840;&#39564;&#35777;&#22833;&#36133;&#31561;&#31561;&#65289;&#65292;HornetQ&#20250;&#21521;&#23458;&#25143;
                &#21457;&#20986;JMS&#28040;&#24687;&#20197;&#36890;&#30693;&#23458;&#25143;&#36825;&#20123;&#20107;&#20214;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290;&#23458;&#25143;&#25509;&#25910;&#21040;&#36825;&#20123;&#20449;&#24687;&#21518;&#21487;&#20197;&#20316;&#20986;&#30456;&#24212;&#30340;&#22788;&#29702;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.message-counters"></a>11.1.27.&nbsp;&#28040;&#24687;&#35745;&#25968;&#22120;</h3></div></div><div></div></div><p><tt class="literal">message-counters</tt>&#26159;&#19968;&#20010;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;&#28040;&#24687;&#35745;&#25968;&#22120;&#33719;&#21462;JMS&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#20449;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.expiry"></a>11.1.28.&nbsp;&#28040;&#24687;&#22833;&#25928;</h3></div></div><div></div></div><p><tt class="literal">expiry</tt>&#20363;&#23376;&#20013;&#21253;&#25324;&#20102;&#22914;&#20309;&#23450;&#20041;&#21644;&#20351;&#29992;&#28040;&#24687;&#22833;&#25928;&#26399;&#12290;&#28040;&#24687;&#22914;&#26524;&#22312;&#28040;&#24687;&#26381;&#21153;&#22120;&#20013;&#23384;&#30041;&#36229;&#36807;&#19968;&#23450;
                &#30340;&#26102;&#38388;&#65292;&#23601;&#21487;&#20197;&#34987;&#21024;&#38500;&#12290;&#26681;&#25454;JMS&#35268;&#33539;&#65292;&#25509;&#25910;&#32773;&#23601;&#19981;&#24212;&#35813;&#25509;&#25910;&#21040;&#24050;&#32463;&#36807;&#20102;&#22833;&#25928;&#26399;&#30340;&#28040;&#24687;&#12290;&#65288;&#20294;&#26159;&#24182;&#19981;&#20445;&#35777;&#19968;&#23450;&#25509;&#25910;&#19981;&#21040;&#65289;&#12290;</p><p>HornetQ&#21487;&#20197;&#32473;&#19968;&#20010;&#38431;&#21015;&#37197;&#19978;&#19968;&#20010;&#22833;&#25928;&#22320;&#22336;&#65292;&#24403;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#22833;&#25928;&#26102;&#65292;&#23427;&#20204;&#23601;&#20250;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#24182;&#36716;&#31227;&#21040;&#35813;&#22833;&#25928;&#22320;&#22336;&#12290;
                &#36825;&#20123;&#8220;&#22833;&#25928;"&#30340;&#28040;&#24687;&#21487;&#20197;&#20174;&#22833;&#25928;&#22320;&#22336;&#20013;&#25509;&#25910;&#24182;&#36827;&#34892;&#20998;&#26512;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.message-group"></a>11.1.29.&nbsp;&#28040;&#24687;&#32452;</h3></div></div><div></div></div><p><tt class="literal">message-group</tt>&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#22312;HornetQ&#20013;&#37197;&#32622;&#28040;&#24687;&#32452;&#12290;&#28040;&#24687;&#32452;&#21487;&#20197;&#35753;&#20320;&#30340;&#28040;&#24687;
                &#21482;&#34987;&#19968;&#20010;&#25509;&#25910;&#32773;&#25509;&#25910;&#12290;&#23646;&#20110;&#19968;&#20010;&#28040;&#24687;&#32452;&#20013;&#30340;&#28040;&#24687;&#26377;&#22914;&#19979;&#29305;&#24615;&#65306;</p><p>
                </p><div class="itemizedlist"><ul type="disc"><li><p>&#21516;&#19968;&#20010;&#28040;&#24687;&#32452;&#20013;&#30340;&#28040;&#24687;&#37117;&#26377;&#30456;&#21516;&#30340;&#32452;ID&#12290;&#21363;&#23427;&#20204;&#30340;JMSXGroupID&#23646;&#24615;&#20540;&#30456;&#21516;&#12290;</p></li><li><p>&#31532;&#19968;&#20010;&#25509;&#25910;&#21040;&#28040;&#24687;&#32452;&#20013;&#30340;&#28040;&#24687;&#30340;&#25509;&#25910;&#32773;&#23558;&#20250;&#25509;&#25910;&#21040;&#25152;&#26377;&#35813;&#32452;&#20013;&#30340;&#28040;&#24687;&#12290;</p></li></ul></div><p>
            </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.message-group2"></a>11.1.30.&nbsp;&#28040;&#24687;&#32452;&#65288;&#20363;2&#65289;</h3></div></div><div></div></div><p><tt class="literal">message-group2</tt>&#26159;&#21478;&#22806;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#20363;&#23376;&#12290;&#23427;&#23637;&#31034;&#30340;&#26159;&#36890;&#36807;&#37197;&#32622;&#36830;&#25509;&#24037;&#21378;&#26469;&#23454;&#29616;
                &#28040;&#24687;&#32452;&#30340;&#21151;&#33021;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.message-priority"></a>11.1.31.&nbsp;&#28040;&#24687;&#20248;&#20808;&#32423;</h3></div></div><div></div></div><p>&#28040;&#24687;&#20248;&#20808;&#32423;&#20250;&#24433;&#21709;&#28040;&#24687;&#30340;&#20256;&#36882;&#39034;&#24207;&#12290;</p><p>&#28040;&#24687;&#20248;&#20808;&#32423;&#30001;&#26631;&#20934;&#30340;JMS&#28040;&#24687;&#22836;&#23646;&#24615;JMSPriority&#30340;&#20540;&#30830;&#23450;&#12290;&#21442;&#35265;JMS 1.1&#35268;&#33539;&#12290;</p><p>&#20248;&#20808;&#32423;&#26159;&#19968;&#20010;0&#21040;9&#20043;&#38388;&#30340;&#25972;&#25968;&#20540;&#12290;&#24403;&#28040;&#24687;&#34987;&#20256;&#36882;&#26102;&#65292;&#26681;&#25454;&#20248;&#20808;&#32423;&#30340;&#19981;&#21516;&#28040;&#24687;&#30340;&#20256;&#36882;&#39034;&#24207;&#20250;&#25910;&#21040;&#24433;&#21709;&#12290;&#20248;&#20808;&#32423;
                &#39640;&#30340;&#28040;&#24687;&#24448;&#24448;&#20250;&#27604;&#20248;&#20808;&#32423;&#20302;&#30340;&#20808;&#20256;&#36882;&#32473;&#25509;&#25910;&#32773;&#12290; </p><p>&#20248;&#20808;&#32423;&#30456;&#21516;&#30340;&#28040;&#24687;&#20250;&#25353;&#29031;&#23427;&#20204;&#21040;&#36798;&#30446;&#26631;&#30340;&#39034;&#24207;&#26469;&#20256;&#36882;&#12290;&#22312;JMS 1.1&#35268;&#33539;&#20013;&#26377;&#35814;&#32454;&#30340;&#35268;&#23450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.no-consumer-buffering"></a>11.1.32.&nbsp;&#38646;&#25509;&#25910;&#32531;&#20914;</h3></div></div><div></div></div><p>&#40664;&#35748;&#26102;HornetQ&#30340;&#25509;&#25910;&#32773;&#23458;&#25143;&#31471;&#26377;&#19968;&#20010;&#28040;&#24687;&#32531;&#20914;&#65292;&#23427;&#29992;&#26469;&#20445;&#23384;&#20174;&#26381;&#21153;&#22120;&#19978;&#39044;&#20808;&#25509;&#25910;&#30340;&#28040;&#24687;&#12290;&#36825;&#26679;&#20570;&#26159;&#20026;&#20102;&#25552;&#39640;
                &#24615;&#33021;&#12290;&#22240;&#20026;&#22914;&#26524;&#27809;&#26377;&#36825;&#20010;&#32531;&#20914;&#65292;&#27599;&#27425;&#35843;&#29992;receive()&#25110;onMessage()&#21518;&#65292;HornetQ&#23601;&#20250;&#35775;&#38382;&#19968;&#27425;&#26381;&#21153;&#22120;&#35831;&#27714;&#19979;
                &#19968;&#20010;&#28040;&#24687;&#12290;</p><p>&#36825;&#26679;&#27599;&#25509;&#25910;&#19968;&#20010;&#28040;&#24687;&#23601;&#20250;&#22686;&#21152;&#19968;&#27425;&#32593;&#32476;&#24448;&#36820;&#30340;&#20256;&#36755;&#12290;&#22240;&#27492;&#65292;HornetQ&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#20351;&#29992;&#23458;&#25143;&#31471;&#30340;&#25509;&#25910;&#32531;&#20914;&#26469;
                &#39044;&#20808;&#25509;&#25910;&#28040;&#24687;&#65292;&#20197;&#25552;&#39640;&#25928;&#29575;&#12290;</p><p>&#28982;&#32780;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#26679;&#30340;&#32531;&#20914;&#19981;&#31526;&#21512;&#24212;&#29992;&#38656;&#35201;&#12290;&#37027;&#20040;&#21487;&#20197;&#23558;&#32531;&#20914;&#20851;&#38381;&#12290;&#26412;&#20363;&#23601;&#26159;&#23637;&#31034;&#22914;&#20309;&#20851;&#38381;&#25509;&#25910;&#32531;&#20914;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.non-transaction-failover"></a>11.1.33.&nbsp;&#24102;&#26377;&#26381;&#21153;&#22120;&#25968;&#25454;&#22797;&#21046;&#30340;&#38750;&#20107;&#21153;&#22833;&#25928;&#22791;&#25588;</h3></div></div><div></div></div><p><tt class="literal">non-transaction-failover</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#30001;&#20004;&#20010;&#26381;&#21153;&#22120;&#32452;&#25104;&#30340;&#39640;&#21487;&#33719;&#24471;&#24615;&#20027;&#65295;&#20174;&#20851;&#31995;&#12290;
                &#23458;&#25143;&#31471;&#20351;&#29992;&#19968;&#20010;&#38750;&#20132;&#26131;&#30340;JMS&#20250;&#35805;&#65288;session&#65289;&#21487;&#20197;&#22312;&#20027;&#33410;&#28857;&#23849;&#28291;&#30340;&#24773;&#20917;&#19979;&#20174;&#20027;&#33410;&#28857;&#22833;&#25928;&#22791;&#25588;&#21040;&#22791;&#20221;&#33410;&#28857;&#12290;</p><p>HornetQ&#30340;&#36825;&#19968;&#21151;&#33021;&#26159;&#36890;&#36807;&#20027;&#12289;&#22791;&#33410;&#28857;&#38388;&#30340;&#29366;&#24577;&#22797;&#21046;&#26469;&#23454;&#29616;&#30340;&#12290;&#24403;&#20027;&#33410;&#28857;&#21457;&#29983;&#25925;&#38556;&#23849;&#28291;&#26102;&#65292;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#21487;&#20197;&#33258;&#21160;
                &#36716;&#21521;&#22791;&#20221;&#33410;&#28857;&#20197;&#32487;&#32493;&#30340;&#21457;&#36865;&#25110;&#25509;&#25910;&#28040;&#24687;&#12290;&#24403;&#20351;&#29992;&#38750;&#20107;&#21153;&#24615;&#30340;&#20250;&#35805;&#26102;&#65292;&#26377;&#21487;&#33021;&#21457;&#29983;&#28040;&#24687;&#20002;&#22833;&#25110;&#37325;&#22797;&#20256;&#36882;&#30340;&#24773;&#20917;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.paging"></a>11.1.34.&nbsp;&#20998;&#39029;&#65288;paging&#65289;</h3></div></div><div></div></div><p><tt class="literal">paging</tt>&#20363;&#23376;&#23637;&#31034;&#20102;HornetQ&#22312;&#20869;&#23384;&#26377;&#38480;&#26102;&#22914;&#20309;&#25903;&#25345;&#36229;&#22823;&#23481;&#37327;&#30340;&#38431;&#21015;&#12290;&#24403;&#20869;&#23384;&#19981;&#22815;&#26102;&#65292;
                HornetQ&#20250;&#23558;&#28040;&#24687;&#20445;&#23384;&#21040;&#30913;&#30424;&#19978;&#65307;&#38656;&#35201;&#26102;&#20877;&#23558;&#23427;&#20204;&#20174;&#30913;&#30424;&#35835;&#20837;&#20869;&#23384;&#12290;&#36825;&#19968;&#36807;&#31243;&#23545;&#29992;&#25143;&#26159;&#36879;&#26126;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.pre-acknowledge"></a>11.1.35.&nbsp;&#39044;&#20808;&#36890;&#30693;</h3></div></div><div></div></div><p>&#26631;&#20934;&#30340;JMS&#25903;&#25345;3&#31181;&#36890;&#30693;&#27169;&#24335;&#65306;<tt class="literal">
                    AUTO_ACKNOWLEDGE</tt>&#65288;&#33258;&#21160;&#36890;&#30693;&#65289;&#12289;<tt class="literal">CLIENT_ACKNOWLEDGE</tt>&#23458;&#25143;&#36890;&#30693;&#20197;&#21450; <tt class="literal">DUPS_OK_ACKNOWLEDGE</tt>&#21487;&#37325;&#22797;&#36890;&#30693;&#12290;&#35831;&#21442;&#38405;JMS&#35268;&#33539;&#21644;&#25945;&#31243;&#26469;&#36827;&#19968;&#27493;&#20102;&#35299;&#36825;&#20960;&#31181;&#36890;&#30693;&#26041;&#24335;&#12290;</p><p>&#25152;&#26377;&#26041;&#24335;&#37117;&#38656;&#35201;&#20174;&#23458;&#25143;&#31471;&#21457;&#36890;&#30693;&#21040;&#26381;&#21153;&#22120;&#31471;&#12290;&#26377;&#26102;&#24403;&#21457;&#29983;&#25925;&#38556;&#26102;&#20320;&#24182;&#19981;&#22312;&#20046;&#20002;&#22833;&#19968;&#20123;&#28040;&#24687;&#65292;&#36825;&#26679;&#21487;&#20197;&#37319;&#29992;&#22312;&#26381;&#21153;&#22120;&#31471;&#22312;&#28040;&#24687;
                &#20256;&#36882;&#21069;&#36827;&#34892;&#36890;&#30693;&#23601;&#26174;&#24471;&#27604;&#36739;&#21512;&#29702;&#12290;&#26412;&#20363;&#23601;&#26159;&#23637;&#31034;&#22914;&#20309;&#20351;&#29992;&#36825;&#19968;HornetQ&#29420;&#26377;&#30340;&#36890;&#30693;&#26041;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="producer-rate-limiting-example"></a>11.1.36.&nbsp;&#28040;&#24687;&#21457;&#36865;&#36895;&#24230;&#38480;&#21046;</h3></div></div><div></div></div><p><tt class="literal">producer-rte-limit</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#35774;&#32622;HornetQ&#30340;&#26368;&#22823;&#28040;&#24687;&#21457;&#36865;&#36895;&#29575;&#12290;&#23427;&#25511;&#21046;&#28040;&#24687;&#30340;
                &#21457;&#36865;&#32773;&#65288;JMS producer&#65289;&#21457;&#36865;&#28040;&#24687;&#30340;&#26368;&#22823;&#36895;&#24230;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1867"></a>11.1.37.&nbsp;&#38431;&#21015;</h3></div></div><div></div></div><p>&#36825;&#19968;&#20010;&#31616;&#21333;&#30340;JMS&#38431;&#21015;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1872"></a>11.1.38.&nbsp;Message&#20877;&#20998;&#37197;</h3></div></div><div></div></div><p><tt class="literal">queue-message-redistribution</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#23558;&#28040;&#24687;&#22312;&#38598;&#32676;&#30340;&#21508;&#33410;&#28857;&#21516;&#21517;&#30340;&#38431;&#21015;
                &#38388;&#36827;&#34892;&#20877;&#20998;&#37197;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1879"></a>11.1.39.&nbsp;&#38431;&#21015;&#35831;&#27714;</h3></div></div><div></div></div><p>&#36825;&#26159;&#19968;&#20010;&#31616;&#21333;&#30340;&#23454;&#29616;&#38431;&#21015;&#35831;&#27714;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1884"></a>11.1.40.&nbsp;&#24102;&#28040;&#24687;&#36873;&#25321;&#22120;&#65288;selector&#65289;&#30340;&#38431;&#21015;</h3></div></div><div></div></div><p><tt class="literal">queue-selector</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#36873;&#25321;&#22120;&#26469;&#26377;&#26465;&#20214;&#22320;&#36873;&#25321;&#28040;&#24687;&#36827;&#34892;&#25509;&#25910;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1891"></a>11.1.41.&nbsp;&#33410;&#28857;&#36830;&#25509;&#37325;&#35797;</h3></div></div><div></div></div><p><tt class="literal">reattach-node</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#23458;&#25143;&#31471;&#22312;&#21457;&#29983;&#25925;&#38556;&#26102;&#37325;&#35797;&#36830;&#25509;&#21040;&#21407;&#26377;&#26381;&#21153;&#22120;&#65292;&#32780;&#19981;&#26159;
               &#30452;&#25509;&#25918;&#24323;&#24182;&#36890;&#30693;&#29992;&#25143;&#30340;ExceptionListener&#12290;&#36890;&#36807;&#37197;&#32622;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#33258;&#21160;&#30340;&#19981;&#26029;&#37325;&#35797;&#36830;&#25509;&#30452;&#21040;&#26381;&#21153;&#22120;&#36830;&#25509;&#19978;&#20026;&#27490;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1898"></a>11.1.42.&nbsp;&#35831;&#27714;&#65295;&#24212;&#31572;</h3></div></div><div></div></div><p>&#19968;&#20010;&#31616;&#21333;&#30340;&#23637;&#31034;JMS &#35831;&#27714;&#65295;&#24212;&#31572;&#28040;&#24687;&#26041;&#24335;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.scheduled-message"></a>11.1.43.&nbsp;&#23450;&#26102;&#28040;&#24687;</h3></div></div><div></div></div><p><tt class="literal">scheduled-message</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#21521;HornetQ&#21457;&#36865;&#23450;&#26102;&#28040;&#24687;&#65288;scheduled message&#65289;&#12290;
                &#25152;&#35859;&#23450;&#26102;&#28040;&#24687;&#23601;&#26159;&#22312;&#35268;&#23450;&#30340;&#23558;&#26469;&#30340;&#26576;&#19968;&#26102;&#38388;&#20256;&#36882;&#30340;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1910"></a>11.1.44.&nbsp;&#23433;&#20840;</h3></div></div><div></div></div><p><tt class="literal">security</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;HornetQ&#30340;&#23433;&#20840;&#21442;&#25968;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="asynchronous-send-acknowledgements-example"></a>11.1.45.&nbsp;&#21457;&#36865;&#36890;&#30693;</h3></div></div><div></div></div><p><tt class="literal">send-acknowledgements</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;HornetQ&#25552;&#20379;&#30340;&#39640;&#32423;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#21151;&#33021;
                &#65288;<span class="emphasis"><em>asynchronous send acknowledgements</em></span>&#65289;&#12290;&#36825;&#26159;&#26381;&#21153;&#22120;&#21521;&#23458;&#25143;&#31471;&#36890;&#30693;&#28040;&#24687;&#24050;&#32463;
                &#34987;&#25509;&#25910;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1927"></a>11.1.46.&nbsp;SSL&#20256;&#36755;&#25903;&#25345;</h3></div></div><div></div></div><p><tt class="literal">ssl-enabled</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;&#20351;&#29992;SSL&#26469;&#21457;&#36865;&#19982;&#25509;&#25910;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1934"></a>11.1.47.&nbsp;&#38745;&#24577;&#28040;&#24687;&#36873;&#25321;&#22120;</h3></div></div><div></div></div><p><tt class="literal">static-selector</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;HornetQ&#26680;&#24515;&#38431;&#21015;&#30340;&#38745;&#24577;&#28040;&#24687;&#36873;&#25321;&#22120;&#65288;&#21448;&#31216;&#36807;&#28388;&#22120;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1941"></a>11.1.48.&nbsp;&#20351;&#29992;JMS&#26041;&#27861;&#26469;&#37197;&#32622;&#38745;&#24577;&#28040;&#24687;&#36873;&#25321;&#22120;</h3></div></div><div></div></div><p><tt class="literal">static-selector-jms</tt>&#20363;&#23376;&#37319;&#29992;JMS&#26041;&#27861;&#26469;&#37197;&#32622;HornetQ&#30340;&#38431;&#21015;&#30340;&#38745;&#24577;&#36873;&#25321;&#22120;&#65288;&#36807;&#28388;&#22120;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1948"></a>11.1.49.&nbsp;Stomp</h3></div></div><div></div></div><p><tt class="literal">stomp</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;HornetQ&#26469;&#21457;&#36865;&#19982;&#25509;&#25910;Stomp&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1955"></a>11.1.50.&nbsp;Stomp&#19982;Web Sockets</h3></div></div><div></div></div><p><tt class="literal">stomp-websockets</tt>&#20363;&#23376;&#32473;&#20986;&#20102;&#22914;&#20309;&#37197;&#32622;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#30452;&#25509;&#20174;Web&#27983;&#35272;&#22120;
                &#20013;&#65288;&#38656;&#35201;&#25903;&#25345;Web Socket&#65289;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1962"></a>11.1.51.&nbsp;&#23545;&#31216;&#22411;&#38598;&#32676;</h3></div></div><div></div></div><p><tt class="literal">symmetric-cluster</tt>&#20363;&#23376;&#23637;&#31034;&#22914;&#20309;&#35774;&#32622;&#19968;&#20010;HornetQ&#30340;&#23545;&#31216;&#22411;&#38598;&#32676;&#12290;</p><p>HornetQ&#30340;&#38598;&#32676;&#37197;&#32622;&#26159;&#38750;&#24120;&#28789;&#27963;&#30340;&#12290;&#20320;&#21487;&#20197;&#26681;&#25454;&#38656;&#35201;&#35774;&#32622;&#19981;&#21516;&#30340;&#38598;&#32676;&#32467;&#26500;&#12290;&#26368;&#24120;&#29992;&#30340;&#23601;&#26159;&#23545;&#31216;&#22411;&#30340;&#38598;&#32676;&#20102;&#12290;&#36825;&#26159;&#22312;&#24212;&#29992;
                  &#26381;&#21153;&#22120;&#20013;&#24120;&#35265;&#30340;&#38598;&#32676;&#31867;&#22411;&#12290;</p><p>&#23545;&#31216;&#22411;&#30340;&#38598;&#32676;&#20855;&#26377;&#21516;&#19968;&#24615;&#65292;&#21363;&#27599;&#20010;&#33410;&#28857;&#19982;&#20854;&#20182;&#33410;&#28857;&#22788;&#20110;&#21516;&#31561;&#22320;&#20301;&#65292;&#24182;&#19988;&#27599;&#19968;&#20010;&#33410;&#28857;&#37117;&#19982;&#20854;&#20182;&#20219;&#19968;&#33410;&#28857;&#30456;&#36830;&#25509;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1973"></a>11.1.52.&nbsp;&#20020;&#26102;&#38431;&#21015;</h3></div></div><div></div></div><p>&#26412;&#20363;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#20351;&#29992;&#19968;&#20010;JMS&#20020;&#26102;&#38431;&#21015;&#65288;temporary queue&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1978"></a>11.1.53.&nbsp;&#35805;&#39064;&#65288;Topic&#65289;</h3></div></div><div></div></div><p>&#19968;&#20010;&#31616;&#21333;&#30340;JMS topic&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="topic-hierarchy-example"></a>11.1.54.&nbsp;&#35805;&#39064;&#20307;&#31995;&#65288;Topic Hierarchy&#65289;</h3></div></div><div></div></div><p>HornetQ&#25903;&#25345;&#35805;&#39064;&#20307;&#31995;&#12290;&#25152;&#35859;&#35805;&#39064;&#20307;&#31995;&#23601;&#26159;&#20801;&#35768;&#20320;&#20351;&#29992;&#36890;&#37197;&#31526;&#26469;&#27880;&#20876;&#19968;&#20010;&#35746;&#38405;&#65288;subscriber)&#65292;&#36825;&#26679;&#25152;&#26377;&#21457;&#36865;&#21040;
                &#19982;&#35813;&#36890;&#37197;&#31526;&#30456;&#21305;&#37197;&#30340;&#22320;&#22336;&#30340;&#28040;&#24687;&#37117;&#21487;&#20197;&#34987;&#35813;&#35746;&#38405;&#25910;&#21040;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1988"></a>11.1.55.&nbsp;&#35805;&#39064;&#36873;&#25321;&#22120;&#20363;1</h3></div></div><div></div></div><p><tt class="literal">topic-selector-example1</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#21019;&#24314;&#24102;&#26377;&#36873;&#25321;&#22120;&#30340;JMS&#35805;&#39064;&#65288;Topic&#65289;&#35746;&#38405;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1995"></a>11.1.56.&nbsp;&#35805;&#39064;&#36873;&#25321;&#22120;&#20363;2</h3></div></div><div></div></div><p><tt class="literal">topic-selector-example2</tt> &#26159;&#21478;&#19968;&#20010;&#20351;&#29992;&#24102;&#26377;&#36873;&#25321;&#22120;&#30340;JMS&#35805;&#39064;&#65288;Topic&#65289;&#35746;&#38405;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.transaction-failover"></a>11.1.57.&nbsp;&#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;</h3></div></div><div></div></div><p><tt class="literal">transaction-failover</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#30001;&#20004;&#20010;&#26381;&#21153;&#22120;&#32452;&#25104;&#30340;&#39640;&#21487;&#33719;&#24471;&#24615;&#20027;&#65295;&#22791;&#20851;&#31995;&#12290;
                &#23458;&#25143;&#31471;&#20351;&#29992;&#19968;&#20010;&#20132;&#26131;&#30340;JMS&#20250;&#35805;&#65288;session&#65289;&#21487;&#20197;&#22312;&#20027;&#33410;&#28857;&#23849;&#28291;&#30340;&#24773;&#20917;&#19979;&#20174;&#20027;&#33410;&#28857;&#22833;&#25928;&#22791;&#25588;&#21040;&#22791;&#20221;&#33410;&#28857;&#12290;</p><p>HornetQ&#30340;&#36825;&#19968;&#21151;&#33021;&#26159;&#36890;&#36807;&#20027;&#12289;&#22791;&#33410;&#28857;&#38388;&#30340;&#29366;&#24577;&#22797;&#21046;&#26469;&#23454;&#29616;&#30340;&#12290;&#24403;&#20027;&#33410;&#28857;&#21457;&#29983;&#25925;&#38556;&#23849;&#28291;&#26102;&#65292;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#21487;&#20197;&#33258;&#21160;
                &#36716;&#21521;&#22791;&#20221;&#33410;&#28857;&#20197;&#32487;&#32493;&#30340;&#21457;&#36865;&#25110;&#25509;&#25910;&#28040;&#24687;&#12290;&#24403;&#20351;&#29992;&#20107;&#21153;&#24615;&#30340;&#20250;&#35805;&#26102;&#65292;&#33021;&#22815;&#20445;&#35777;&#28040;&#24687;&#34987;&#20256;&#36882;&#24182;&#19988;&#21482;&#34987;&#20256;&#36882;&#19968;&#27425;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2011"></a>11.1.58.&nbsp;&#20107;&#21153;&#24615;&#20250;&#35805;</h3></div></div><div></div></div><p><tt class="literal">transactional</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312;HornetQ&#20013;&#20351;&#29992;&#20107;&#21153;&#24615;&#20250;&#35805;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2018"></a>11.1.59.&nbsp;XA Heuristic</h3></div></div><div></div></div><p><tt class="literal">xa-heuristic</tt>&#20363;&#23376;&#32473;&#20986;&#20102;&#22914;&#20309;&#36890;&#36807;HornetQ&#30340;&#31649;&#29702;&#25509;&#21475;&#26469;&#20570;&#20986;&#19968;&#20010;XA&#30340;heuristic&#20915;&#23450;&#12290;
                &#19968;&#20010;XA&#30340;heuristic&#20915;&#23450;&#26159;&#19968;&#20010;&#21333;&#26041;&#38754;&#30340;&#23545;&#19968;&#20010;&#24050;&#32463;&#20934;&#22791;&#30340;&#65288;prepared&#65289;XA&#20107;&#21153;&#20998;&#25903;&#25552;&#20132;&#25110;&#22238;&#28378;&#30340;&#20915;&#23450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2025"></a>11.1.60.&nbsp;XA &#25509;&#25910;</h3></div></div><div></div></div><p><tt class="literal">xa-receive</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#20351;&#29992;HornetQ&#22312;&#19968;&#20010;XA&#20107;&#21153;&#20869;&#25509;&#25910;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2032"></a>11.1.61.&nbsp;XA &#21457;&#36865;</h3></div></div><div></div></div><p><tt class="literal">xa-send</tt>&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22914;&#20309;&#20351;&#29992;HornetQ&#22312;&#19968;&#20010;XA&#20107;&#21153;&#20869;&#21457;&#36865;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2039"></a>11.1.62.&nbsp;XA&#19982;&#20107;&#21153;&#31649;&#29702;&#22120;&#65288;transaction manager&#65289;</h3></div></div><div></div></div><p><tt class="literal">xa-with-jta</tt>&#23637;&#31034;&#20102;&#22914;&#20309;&#22312;HornetQ&#20013;&#20351;&#29992;JTA&#25509;&#21475;&#26469;&#25511;&#21046;&#20107;&#21153;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2046"></a>11.2.&nbsp;&#26680;&#24515;API&#30340;&#20363;&#23376;</h2></div></div><div></div></div><p>&#36816;&#34892;&#26680;&#24515;API&#30340;&#20363;&#23376;&#24456;&#31616;&#21333;&#65292;&#21482;&#35201;&#36827;&#21040;&#30456;&#24212;&#30340;&#20363;&#23376;&#30446;&#24405;&#19979;&#36816;&#34892;&#8220;<tt class="literal">ant</tt>"&#21363;&#21487;&#12290; </p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.embedded"></a>11.2.1.&nbsp;&#23884;&#20837;&#24335;</h3></div></div><div></div></div><p>&#26412;&#20363;&#23637;&#31034;&#20102;&#22914;&#20309;&#23558;HornetQ&#26381;&#21153;&#22120;&#23884;&#20837;&#21040;&#20320;&#30340;&#20195;&#30721;&#20013;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2059"></a>11.3.&nbsp;Java EE &#20363;&#23376;</h2></div></div><div></div></div><p>&#32477;&#22823;&#22810;&#25968;&#30340;Java EE&#20363;&#23376;&#37117;&#21487;&#20197;&#25353;&#22914;&#19979;&#27493;&#39588;&#36816;&#34892;&#65306;&#36827;&#20837;&#21040;&#30456;&#24212;&#30340;&#30446;&#24405;&#20013;&#65292;&#20808;&#36816;&#34892;<tt class="literal">ant deploy</tt>&#12290;
            &#36825;&#19968;&#27493;&#21019;&#24314;&#20102;&#19968;&#20010;&#26032;&#30340;JBoss&#30340;&#26381;&#21153;&#22120;&#37197;&#32622;&#26041;&#26696;&#24182;&#21551;&#21160;&#23427;&#12290;&#24403;JBoss&#26381;&#21153;&#22120;&#21551;&#21160;&#21518;&#65292;&#20877;&#36816;&#34892;<tt class="literal">ant run</tt>
            &#21551;&#21160;&#20363;&#23376;&#31243;&#24207;&#12290;&#26377;&#20123;&#20363;&#23376;&#38656;&#35201;&#39069;&#22806;&#30340;&#27493;&#39588;&#65292;&#35831;&#21442;&#35265;&#30456;&#20851;&#30340;&#20363;&#23376;&#30340;&#25991;&#26723;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2070"></a>11.3.1.&nbsp;EJB/JMS &#20107;&#21153;</h3></div></div><div></div></div><p>&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22312;&#19968;&#20010;&#20107;&#21153;&#20869;&#20351;&#29992;EJB&#21644;JMS&#30340;&#26041;&#27861;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2075"></a>11.3.2.&nbsp;HAJNDI (High Availability)</h3></div></div><div></div></div><p>&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#38598;&#32676;&#20013;&#30340;JNDI&#26381;&#21153;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2080"></a>11.3.3.&nbsp;&#36164;&#28304;&#36866;&#37197;&#22120;&#30340;&#37197;&#32622;&#65288;JCA&#65289;</h3></div></div><div></div></div><p>&#26412;&#20363;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;HornetQ&#30340;JCA&#36866;&#37197;&#22120;&#30340;&#21508;&#31181;&#21442;&#25968;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2085"></a>11.3.4.&nbsp;&#36164;&#28304;&#36866;&#37197;&#22120;&#36816;&#31243;&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;</h3></div></div><div></div></div><p>&#26412;&#20363;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;HornetQ&#30340;JCA&#36866;&#37197;&#22120;&#26469;&#19982;&#36828;&#31243;&#30340;HornetQ&#26381;&#21153;&#22120;&#36890;&#36805;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="examples.javaee.jms-bridge"></a>11.3.5.&nbsp;JMS &#26725;&#65288;Bridge&#65289;</h3></div></div><div></div></div><p>&#26412;&#20363;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;HornetQ&#30340;JMS bridge&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2095"></a>11.3.6.&nbsp;MDB (&#28040;&#24687;&#39537;&#21160;Bean)</h3></div></div><div></div></div><p>&#19968;&#20010;&#28040;&#24687;&#39537;&#21160;bean&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2100"></a>11.3.7.&nbsp;Servlet&#20256;&#36755;</h3></div></div><div></div></div><p>&#19968;&#20010;&#23637;&#31034;&#22312;HornetQ&#20013;&#20351;&#29992;servlet&#20316;&#20026;&#20256;&#36755;&#23618;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2105"></a>11.3.8.&nbsp;Servlet SSL &#20256;&#36755;</h3></div></div><div></div></div><p>&#19968;&#20010;&#23637;&#31034;&#22312;HornetQ&#20013;&#20351;&#29992;&#22522;&#20110;SSL&#20043;&#19978;&#30340;servlet&#20256;&#36755;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xa-recovery-example"></a>11.3.9.&nbsp;XA &#24674;&#22797;&#65288;recovery&#65289;</h3></div></div><div></div></div><p>&#36825;&#26159;&#19968;&#20010;&#23637;&#31034;HornetQ&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#30340;XA recovery&#26159;&#22914;&#20309;&#24037;&#20316;&#30340;&#20363;&#23376;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="wildcard-routing"></a>Chapter&nbsp;12.&nbsp;&#20351;&#29992;&#36890;&#37197;&#31526;&#23454;&#29616;&#28040;&#24687;&#36335;&#30001;</h2></div></div><div></div></div><p>HornetQ&#25903;&#25345;&#20351;&#29992;&#24102;&#36890;&#37197;&#31526;&#30340;&#22320;&#22336;&#23545;&#28040;&#24687;&#36335;&#30001;&#12290;</p><p>&#20363;&#22914;&#65292;&#24403;&#21019;&#24314;&#19968;&#20010;&#38431;&#21015;&#26102;&#20351;&#29992;&#20102;&#22320;&#22336;<tt class="literal">queue.news.#</tt>&#65292;&#37027;&#20040;&#23427;&#23601;&#33021;&#25509;&#25910;
          &#25152;&#26377;&#21644;&#36825;&#20010;&#22320;&#22336;&#36890;&#37197;&#31526;&#30456;&#37197;&#30340;&#27599;&#19968;&#20010;&#22320;&#22336;&#30340;&#28040;&#24687;&#12290;&#36825;&#26679;&#30340;&#22320;&#22336;&#22914; <tt class="literal">queue.news.europe</tt> &#25110; <tt class="literal">queue.news.usa</tt> &#25110; <tt class="literal">queue.news.usa.sport</tt>&#31561;&#12290;&#36825;&#26679;&#19968;&#20010;&#28040;&#24687;&#25509;&#25910;&#32773;&#21487;&#20197;&#25509;&#25910;<tt class="literal">&#19968;&#32452;</tt>&#30456;&#20851;
          &#30340;&#22320;&#22336;&#30340;&#28040;&#24687;&#65292;&#32780;&#19981;&#26159;&#21482;&#33021;&#25351;&#23450;&#19968;&#20010;&#20855;&#20307;&#30340;&#22320;&#22336;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#29992;JMS&#30340;&#26415;&#35821;&#26469;&#35828;&#65292;&#36825;&#20010;&#21151;&#33021;&#23601;&#26159;&#20801;&#35768;&#21019;&#24314;&#8220;&#35805;&#39064;&#32452;&#8221;&#65288;topic hierarchy&#65289;&#12290;</p></div><p>&#35201;&#20351;&#29992;&#26412;&#21151;&#33021;&#38656;&#35201;&#23558;<tt class="literal">wild-card-routing-enabled</tt>&#23646;&#24615;&#35774;&#32622;&#20026;<tt class="literal">true</tt>&#12290;
        &#36825;&#20010;&#23646;&#24615;&#22312; <tt class="literal">hornetq-configuration.xml</tt> &#25991;&#20214;&#20013;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p><p>&#20851;&#20110;&#36890;&#37197;&#31526;&#30340;&#35821;&#27861;&#21442;&#35265;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a> &#31456;&#21450; <a href="#topic-hierarchy-example" title="11.1.54.&nbsp;&#35805;&#39064;&#20307;&#31995;&#65288;Topic Hierarchy&#65289;">Section&nbsp;11.1.54, &#8220;&#35805;&#39064;&#20307;&#31995;&#65288;Topic Hierarchy&#65289;&#8221;</a>&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="wildcard-syntax"></a>Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</h2></div></div><div></div></div><p>HornetQ&#20351;&#29992;&#20102;&#19968;&#31181;&#19987;&#38376;&#30340;&#36890;&#37197;&#31526;&#35821;&#27861;&#26469;&#37197;&#32622;&#23433;&#20840;&#12289;&#22320;&#22336;&#21450;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#30340;&#21019;&#24314;&#12290;</p><p>&#36825;&#31181;&#35821;&#27861;&#19982; <a href="http://www.amqp.org" target="_top">AMQP</a>&#25152;&#29992;&#30340;&#35821;&#27861;&#30456;&#20284;&#12290;</p><p>&#19968;&#20010;HornetQ&#30340;&#36890;&#37197;&#31526;&#34920;&#36798;&#24335;&#26159;&#30001;&#19968;&#20123;&#30001;&#8220;<tt class="literal">.</tt>&#8221;&#20998;&#38548;&#30340;&#21333;&#35789;&#32452;&#25104;&#12290;</p><p>&#29305;&#27530;&#23383;&#31526;&#8220;<tt class="literal">#</tt>&#8221;&#21644;&#8220;<tt class="literal">*</tt>&#8221;&#22312;&#34920;&#36798;&#24335;&#20013;&#21487;&#20316;&#20026;&#19968;&#20010;&#21333;&#35789;&#65292;&#23427;&#20204;&#20195;&#34920;
        &#29305;&#27530;&#30340;&#24847;&#20041;&#12290;</p><p>&#23383;&#31526;&#8220;<tt class="literal">#</tt>&#8221;&#34920;&#31034;&#8220;&#38646;&#25110;&#22810;&#20010;&#21333;&#35789;&#30340;&#20219;&#24847;&#25490;&#21015;&#8221;&#12290;</p><p>&#23383;&#31526;&#8220;<tt class="literal">*</tt>&#8221;&#34920;&#31034;&#8220;&#19968;&#20010;&#21333;&#35789;&#8221;&#12290;</p><p>&#22240;&#27492;&#65292;&#36890;&#37197;&#31526;&#34920;&#36798;&#24335;&#8220;news.europe.#&#8221;&#21487;&#20197;&#21305;&#37197;&#8220;news.europe&#8221;&#12289;&#8220;news.europe.sport&#8221;&#12289;
        &#8220;news.europe.politics&#8221;&#20197;&#21450;&#8220;news.europe.politics.regional&#8221;&#65292;&#20294;&#26159;&#19982;&#8220;news.usa&#8221;&#12289;
        &#8220;news.usa.sport&#8221; &#21450; &#8220;entertainment&#8221;&#19981;&#30456;&#21305;&#37197;&#12290;</p><p>&#36890;&#37197;&#31526;&#8220;news.*&#8221;&#19982;&#8220;news.europe&#8221;&#21305;&#37197;&#65292;&#20294;&#19981;&#19982;&#8220;news.europe.sport&#8221;&#21305;&#37197;&#12290;</p><p>&#36890;&#37197;&#31526;&#8220;news.*.sport&#8221;&#19982;&#8220;news.europe.sport&#8221;&#21450;&#8220;news.usa.sport&#8221;&#21305;&#37197;&#65292;&#20294;&#19982;
        &#8220;news.europe.politics&#8221;&#19981;&#21305;&#37197;&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="filter-expressions"></a>Chapter&nbsp;14.&nbsp;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</h2></div></div><div></div></div><p>HornetQ&#25552;&#20379;&#20102;&#19968;&#22871;&#24378;&#22823;&#30340;&#36807;&#28388;&#22120;&#65288;filter&#65289;&#35821;&#35328;&#12290;&#23427;&#30340;&#35821;&#27861;&#26159;&#22522;&#20110;SQL 92&#34920;&#36798;&#24335;&#30340;&#37096;&#20998;&#35821;&#27861;&#12290;</p><p>&#23454;&#38469;&#19978;&#23427;&#19982;JMS&#36873;&#25321;&#22120;&#65288;selector&#65289;&#30340;&#35821;&#27861;&#26159;&#30456;&#21516;&#30340;&#12290;&#21482;&#26159;&#20854;&#20013;&#26377;&#19968;&#20123;&#39044;&#23450;&#20041;&#30340;&#26631;&#35782;&#31526;&#26377;&#25152;&#19981;&#21516;&#12290;&#26377;&#20851;
            JMS&#36873;&#25321;&#22120;&#30340;&#30456;&#20851;&#30693;&#35782;&#21442;&#35265; <a href="http://java.sun.com/javaee/5/docs/api/javax/jms/Message.html" target="_top">javax.jms.Message</a>&#12290;</p><p>HornetQ&#22312;&#20197;&#19979;&#20197;&#20010;&#22320;&#26041;&#20351;&#29992;&#20102;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;&#12290;&#24403;&#22312;<tt class="literal">hornetq-configuration.xml</tt> &#25110; <tt class="literal">hornetq-jms.xml</tt>&#23450;&#20041;
                &#38431;&#21015;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;&#36807;&#28388;&#22120;&#12290;&#21482;&#26377;&#19982;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#33021;&#36798;&#21040;&#35813;&#38431;&#21015;&#20013;&#12290;</p></li><li><p>&#26680;&#24515;&#26725;&#21487;&#20197;&#20351;&#29992;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#12290;&#21482;&#26377;&#19982;&#34920;&#36798;&#24335;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#34987;&#26725;&#22788;&#29702;&#12290;
                &#21442;&#35265;(<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>)&#12290;</p></li><li><p>&#36716;&#31227;&#65288;Divert&#65289;&#20063;&#21487;&#20197;&#20351;&#29992;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#12290;&#21482;&#26377;&#19982;&#34920;&#36798;&#24335;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#34987;&#36716;&#31227;&#12290;
                &#21442;&#35265;(<a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">Chapter&nbsp;35, <i>&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</i></a>)&#12290;</p></li><li><p>&#21478;&#22806;&#36807;&#28388;&#22120;&#36824;&#21487;&#20197;&#22312;&#32534;&#31243;&#26041;&#24335;&#21019;&#24314;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#21644;&#38431;&#21015;&#26102;&#20351;&#29992;&#12290;&#36824;&#26377;&#19968;&#20123;&#24212;&#29992;&#36807;&#28388;&#22120;&#30340;&#22320;&#26041;&#22312;
               <a href="#management" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;">Chapter&nbsp;30, <i>&#31649;&#29702;</i></a>&#20013;&#26377;&#25152;&#25551;&#36848;&#12290;</p></li></ul></div><p>HornetQ&#30340;&#20869;&#26680;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#19982;JMS&#36873;&#25321;&#22120;&#34920;&#36798;&#24335;&#26159;&#26377;&#25152;&#19981;&#21516;&#30340;&#12290;JMS&#36873;&#25321;&#22120;&#24212;&#29992;&#20110;JMS&#28040;&#24687;&#65292;&#32780;HornetQ&#30340;&#20869;&#26680;&#36807;&#28388;
        &#22120;&#34920;&#36798;&#24335;&#21017;&#29992;&#20110;&#20869;&#26680;&#28040;&#24687;&#12290;</p><p>&#20197;&#19979;&#26631;&#35782;&#31526;&#21487;&#20197;&#29992;&#22312;&#20869;&#26680;&#28040;&#24687;&#30340;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#20013;&#65292;&#29992;&#26469;&#24341;&#29992;&#20869;&#26680;&#28040;&#24687;&#30340;&#23646;&#24615;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">HQPriority</tt>&#12290;&#20195;&#34920;&#28040;&#24687;&#30340;&#20248;&#20808;&#32423;&#12290;&#28040;&#24687;&#20248;&#20808;&#32423;&#23646;&#24615;&#30340;&#26377;&#25928;&#20540;&#20026;0&#21040;9&#38388;&#30340;&#25972;&#25968;&#12290;
                 0&#20026;&#26368;&#20302;&#20248;&#20808;&#32423;&#65292;9&#20026;&#26368;&#39640;&#20248;&#20808;&#32423;&#12290;&#20363;&#65306;<tt class="literal">HQPriority = 3 AND animal = 'aardvark'</tt>&#12290;</p></li><li><p><tt class="literal">HQExpiration</tt>&#12290;&#20195;&#34920;&#28040;&#24687;&#30340;&#22833;&#25928;&#26102;&#38388;&#12290;&#20854;&#20540;&#20026;&#19968;&#38271;&#25972;&#24418;&#25968;&#12290;</p></li><li><p><tt class="literal">HQDurable</tt>&#12290;&#20195;&#34920;&#28040;&#24687;&#26159;&#21542;&#26159;&#25345;&#20037;&#28040;&#24687;&#12290;&#23427;&#26159;&#19968;&#20010;&#23383;&#31526;&#22411;&#30340;&#23646;&#24615;&#65292;&#26377;&#25928;&#20540;&#20026; <tt class="literal">DURABLE</tt> 
                   &#25110; <tt class="literal">NON_DURABLE</tt>&#12290;</p></li><li><p><tt class="literal">HQTimestamp</tt>&#12290;&#20195;&#34920;&#28040;&#24687;&#30340;&#21019;&#24314;&#26102;&#38388;&#65292;&#20854;&#20540;&#20026;&#19968;&#38271;&#25972;&#24418;&#25968;&#12290;</p></li><li><p><tt class="literal">HQSize</tt>&#12290;&#28040;&#24687;&#30340;&#22823;&#23567;&#12290;&#21333;&#20301;&#20026;&#23383;&#33410;&#12290;&#20854;&#20540;&#26159;&#19968;&#20010;&#25972;&#24418;&#25968;&#12290;</p></li></ul></div><p>&#20219;&#20309;&#20854;&#23427;&#30340;&#26631;&#35782;&#31526;&#22312;&#20869;&#26680;&#36807;&#28388;&#22120;&#30340;&#34920;&#36798;&#24335;&#20013;&#37117;&#35748;&#20026;&#26159;&#20195;&#34920;&#30528;&#35813;&#28040;&#24687;&#30340;&#19968;&#20010;&#23646;&#24615;&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="persistence"></a>Chapter&nbsp;15.&nbsp;&#25345;&#20037;&#21270;</h2></div></div><div></div></div><p>&#26412;&#31456;&#25105;&#20204;&#23558;&#25551;&#36848;HornetQ&#30340;&#25345;&#20037;&#21270;&#25216;&#26415;&#65292;&#21253;&#25324;&#25345;&#20037;&#21270;&#30340;&#24037;&#20316;&#21407;&#29702;&#21644;&#37197;&#32622;&#26041;&#27861;&#12290;</p><p>HornetQ&#25317;&#26377;&#19968;&#20010;&#39640;&#24615;&#33021;&#30340;&#26085;&#24535;&#65288;journal&#65289;&#27169;&#22359;&#26469;&#22788;&#29702;&#25345;&#20037;&#21270;&#12290;&#22240;&#27492;&#23427;&#24182;&#19981;&#20381;&#36182;&#19968;&#20010;&#22806;&#37096;&#30340;&#25968;&#25454;&#24211;&#25110;&#31532;&#19977;&#26041;&#25345;&#20037;&#21270;&#20135;&#21697;&#12290;&#36825;&#20010;
        &#26085;&#24535;&#27169;&#22359;&#38024;&#23545;&#28040;&#24687;&#30340;&#22788;&#29702;&#36827;&#34892;&#20102;&#39640;&#24230;&#30340;&#20248;&#21270;&#12290;</p><p>&#25152;&#35859;HornetQ&#26085;&#24535;&#26159;&#19968;&#20010;<span class="emphasis"><em>&#21482;&#28155;&#21152;</em></span>&#31995;&#32479;&#12290;&#23427;&#30001;&#19968;&#32452;&#30913;&#30424;&#25991;&#20214;&#26500;&#25104;&#12290;&#27599;&#20010;&#25991;&#20214;&#37117;&#26159;&#39044;&#20808;&#21019;&#24314;&#22909;&#30340;&#24182;&#19988;
        &#22823;&#23567;&#26159;&#22266;&#23450;&#30340;&#12290;&#25991;&#20214;&#22312;&#21019;&#24314;&#26102;&#37117;&#36827;&#34892;&#20102;&#26684;&#24335;&#21270;&#12290;&#38543;&#30528;HornetQ&#19981;&#26029;&#22320;&#22788;&#29702;&#28040;&#24687;&#65292;&#22914;&#28040;&#24687;&#30340;&#22686;&#21152;&#12289;&#26356;&#26032;&#12289;&#21024;&#38500;&#31561;&#65292;&#19968;&#20010;&#20010;&#35760;&#24405;&#34987;&#28155;&#21152;
        &#21040;&#26085;&#24535;&#20013;&#12290;&#24403;&#19968;&#20010;&#26085;&#24535;&#25991;&#20214;&#20889;&#28385;&#26102;&#65292;&#26032;&#35760;&#24405;&#23601;&#20250;&#20889;&#21040;&#19979;&#19968;&#20010;&#25991;&#20214;&#12290;</p><p>&#30001;&#20110;&#23545;&#26085;&#24535;&#30340;&#20889;&#20837;&#21482;&#26159;&#23545;&#25991;&#20214;&#30340;&#28155;&#21152;&#65292;&#36825;&#26679;&#26377;&#25928;&#20943;&#23569;&#20102;&#38543;&#26426;&#23547;&#36947;&#30340;&#25805;&#20316;&#12290;&#32780;&#38543;&#26426;&#23547;&#36947;&#30340;&#25805;&#20316;&#26159;&#30913;&#30424;&#25805;&#20316;&#20013;&#26368;&#32791;&#26102;&#30340;&#25805;&#20316;&#12290;
        &#25152;&#20197;&#36825;&#31181;&#35774;&#35745;&#21487;&#20197;&#20351;&#30913;&#22836;&#30340;&#36816;&#21160;&#38477;&#21040;&#26368;&#20302;&#65292;&#25928;&#29575;&#26368;&#39640;&#12290;</p><p>&#32780;&#25991;&#20214;&#30340;&#22823;&#23567;&#26159;&#21487;&#20197;&#37197;&#32622;&#30340;&#12290;&#36825;&#20351;&#25105;&#20204;&#21487;&#20197;&#23558;&#25991;&#20214;&#22823;&#23567;&#37197;&#32622;&#20026;&#21018;&#22909;&#21344;&#28385;&#19968;&#20010;&#30913;&#30424;&#26609;&#38754;&#12290;&#19981;&#36807;&#29616;&#20195;&#30340;&#30913;&#30424;&#25216;&#26415;&#26159;&#22797;&#26434;&#22810;&#26679;&#30340;&#65292;
        &#25105;&#20204;&#24182;&#19981;&#33021;&#25511;&#21046;&#25991;&#20214;&#19982;&#30913;&#30424;&#26609;&#38754;&#30340;&#23545;&#24212;&#20851;&#31995;&#12290;&#23613;&#31649;&#22914;&#27492;&#65292;&#25105;&#20204;&#36890;&#36807;&#26368;&#22823;&#38480;&#24230;&#22320;&#38477;&#20302;&#25991;&#20214;&#23545;&#30913;&#30424;&#26609;&#38754;&#30340;&#21344;&#29992;&#65292;&#26469;&#38477;&#20302;&#30913;&#22836;&#30340;&#36816;&#21160;&#12290;
        &#36825;&#26159;&#22240;&#20026;&#22312;&#21516;&#19968;&#20010;&#26609;&#38754;&#30340;&#23384;&#21462;&#21482;&#38656;&#35201;&#30424;&#38754;&#30340;&#36716;&#21160;&#32780;&#19981;&#38656;&#35201;&#30913;&#22836;&#30340;&#36816;&#21160;&#12290;</p><p>&#24403;&#34987;&#21024;&#38500;&#30340;&#35760;&#24405;&#36234;&#26469;&#36234;&#22810;&#26102;&#65292;&#26377;&#30340;&#25991;&#20214;&#26368;&#32066;&#20250;&#21464;&#25104;&#19968;&#20010;&#27809;&#26377;&#26377;&#25928;&#35760;&#24405;&#30340;&#25991;&#20214;&#12290;&#36825;&#26679;&#30340;&#25991;&#20214;&#23601;&#21487;&#20197;&#22238;&#25910;&#20877;&#21033;&#29992;&#12290;HornetQ&#26377;
        &#19968;&#22871;&#22797;&#26434;&#30340;&#25991;&#20214;&#22238;&#25910;&#31639;&#27861;&#26469;&#21028;&#26029;&#19968;&#20010;&#26085;&#24535;&#25991;&#20214;&#26159;&#21542;&#21487;&#20197;&#34987;&#22238;&#25910;&#12290;</p><p>HornetQ&#36824;&#26377;&#19968;&#22871;&#25991;&#20214;&#25972;&#29702;&#30340;&#31639;&#27861;&#65292;&#23427;&#29992;&#26469;&#23558;&#26085;&#24535;&#25991;&#20214;&#20013;&#19981;&#29992;&#30340;&#31354;&#38553;&#31227;&#38500;&#20197;&#36798;&#21040;&#26356;&#39640;&#30340;&#23384;&#36142;&#25928;&#29575;&#12290;</p><p>&#36825;&#20010;&#26085;&#24535;&#31995;&#32479;&#20840;&#38754;&#25903;&#25345;&#20107;&#21153;&#21151;&#33021;&#12290;&#26681;&#25454;&#38656;&#35201;&#23427;&#21487;&#20197;&#25903;&#25345;&#26412;&#22320;&#20107;&#21153;&#25110;XA&#22411;&#20107;&#21153;&#12290;</p><p>&#26085;&#24535;&#31995;&#32479;&#30340;&#22823;&#37096;&#20998;&#26159;&#29992;Java&#23454;&#29616;&#30340;&#65292;&#20294;&#26159;HornetQ&#22312;&#20854;&#20013;&#23454;&#29616;&#20102;&#19968;&#23618;&#25277;&#35937;&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#36825;&#26679;&#23601;&#20351;&#24471;&#20854;&#23427;&#30340;&#35821;&#35328;&#23454;&#29616;&#33021;
        &#26041;&#20415;&#22320;&#8220;&#25554;&#20837;&#8221;&#21040;&#26085;&#24535;&#27169;&#22359;&#20013;&#12290;&#23454;&#38469;&#19978;HornetQ&#33258;&#24102;&#26377;&#20004;&#31181;&#23454;&#29616;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>Java <a href="http://en.wikipedia.org/wiki/New_I/O" target="_top">NIO</a>&#12290;</p><p>&#31532;&#19968;&#31181;&#37319;&#29992;&#30340;&#26159;&#26631;&#20934;&#30340;Java NIO&#25509;&#21475;&#26469;&#36827;&#34892;&#25991;&#20214;&#30340;&#25805;&#20316;&#12290;&#23427;&#21487;&#20197;&#22312;&#20219;&#20309;&#23433;&#35013;&#26377;Java 1.6&#25110;&#20197;&#19978;&#30340;&#31995;&#32479;&#20013;&#36816;&#34892;&#12290;
                NIO&#30340;&#24615;&#33021;&#26159;&#24456;&#39640;&#30340;&#12290;</p></li><li><p><a name="aio-journal"></a>Linux &#24322;&#27493;IO &#65288;Asynchronous IO&#65289;</p><p>&#31532;&#20108;&#31181;&#26159;&#37319;&#29992;&#30340;Linux&#31995;&#32479;&#20013;&#30340;&#24322;&#27493;IO&#25216;&#26415;&#65288;AIO&#65289;&#12290;&#23427;&#21253;&#25324;&#20102;&#23569;&#37327;&#30340;&#24179;&#21488;&#30456;&#20851;&#30340;&#20195;&#30721;&#65288;native code)&#26469;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#35843;&#29992;AIO&#30340;&#25509;&#21475;&#12290;&#24403;&#25968;&#25454;&#34987;&#20445;&#23384;&#21040;&#30913;&#30424;&#19978;&#21518;&#65292;AIO&#20250;&#22238;&#35843;HornetQ&#36827;&#34892;&#36890;&#30693;&#12290;&#36825;&#26679;&#65292;HornetQ&#23601;&#36991;&#20813;&#20102;&#30913;&#30424;&#20889;
                &#30340;&#21516;&#27493;&#25805;&#20316;&#12290;</p><p>&#20351;&#29992;AIO&#36890;&#24120;&#21487;&#20197;&#26377;&#27604;NIO&#26356;&#39640;&#30340;&#24615;&#33021;&#12290;</p><p>&#37319;&#29992;AIO&#30340;&#26085;&#24535;&#21482;&#33021;&#22312;&#36816;&#34892; Linux kernel 2.6 &#25110;&#20197;&#19978;&#29256;&#26412;&#30340;&#20869;&#26680;&#30340;&#31995;&#32479;&#20013;&#25165;&#26377;&#12290;&#21478;&#22806;&#20320;&#38656;&#35201;&#23433;&#35013;libaio&#12290;
                &#26377;&#20851;&#22914;&#20309;&#23433;&#35013;libaio&#35831;&#21442;&#35265; <a href="#installing-aio" title="15.5.&nbsp;&#23433;&#35013;AIO">Section&nbsp;15.5, &#8220;&#23433;&#35013;AIO&#8221;</a>&#12290;</p><p>&#21478;&#22806;&#35831;&#27880;&#24847;AIO&#21482;&#22312;&#20197;&#19979;&#25991;&#20214;&#31995;&#32479;&#19978;&#33021;&#27491;&#30830;&#24037;&#20316;&#65306;ext2, ext3, ext4, jfs, xfs&#12290;&#20854;&#20182;&#25991;&#20214;&#31995;&#32479;&#22914;NFS&#65292;&#34429;&#28982;
            AIO&#30475;&#19978;&#21435;&#21487;&#20197;&#24037;&#20316;&#65292;&#23454;&#38469;&#19978;&#26159;&#20197;&#36739;&#24930;&#30340;&#21516;&#27493;&#30340;&#26041;&#24335;&#22312;&#36816;&#34892;&#12290;&#25152;&#20197;&#19981;&#35201;&#22312;NFS&#19978;&#20351;&#29992;&#26085;&#24535;&#12290;</p><p>&#26377;&#20851;libaio&#30340;&#26356;&#22810;&#20171;&#32461;&#21442;&#35265; <a href="#libaio" title="Chapter&nbsp;40.&nbsp;Libaio&#24179;&#21488;&#19987;&#26377;&#24211;">Chapter&nbsp;40, <i>Libaio&#24179;&#21488;&#19987;&#26377;&#24211;</i></a>&#12290;</p><p>libaio&#26159;Linux&#20869;&#26680;&#39033;&#30446;&#30340;&#19968;&#37096;&#20998;&#12290;</p></li></ul></div><p>&#26631;&#20934;&#30340;HornetQ&#26680;&#24515;&#26381;&#21153;&#22120;&#20351;&#29992;&#20102;&#20004;&#31181;&#26085;&#24535;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#32465;&#23450;&#26085;&#24535;</p><p>&#36825;&#20010;&#26085;&#24535;&#29992;&#26469;&#20445;&#23384;&#19982;&#32465;&#23450;&#26377;&#20851;&#30340;&#25968;&#25454;&#12290;&#20854;&#20013;&#21253;&#25324;&#22312;HornetQ&#19978;&#37096;&#32626;&#30340;&#38431;&#21015;&#21450;&#20854;&#23646;&#24615;&#65292;&#36824;&#26377;ID&#24207;&#21015;&#35745;&#25968;&#22120;&#12290; </p><p>&#32465;&#23450;&#26085;&#24535;&#26159;&#19968;&#20010;NIO&#22411;&#26085;&#24535;&#12290;&#19982;&#28040;&#24687;&#26085;&#24535;&#30456;&#27604;&#23427;&#30340;&#21585;&#21520;&#37327;&#26159;&#27604;&#36739;&#20302;&#30340;&#12290;</p></li><li><p>JMS&#26085;&#24535;</p><p>&#36825;&#20010;&#26085;&#24535;&#20445;&#23384;&#25152;&#26377;JMS&#30456;&#20851;&#30340;&#25968;&#25454;&#65292;&#21253;&#25324;JMS&#38431;&#21015;&#65292;&#35805;&#39064;&#21450;&#36830;&#25509;&#24037;&#21378;&#65292;&#20197;&#21450;&#23427;&#20204;&#30340;JNDI&#32465;&#23450;&#20449;&#24687;&#12290;</p><p>&#36890;&#36807;&#31649;&#29702;&#25509;&#21475;&#21019;&#24314;&#30340;JMS&#36164;&#28304;&#23558;&#34987;&#20445;&#23384;&#22312;&#36825;&#20010;&#26085;&#24535;&#20013;&#12290;&#20294;&#26159;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#37197;&#32622;&#30340;&#36164;&#28304;&#21017;&#19981;&#20445;&#23384;&#12290;&#21482;&#26377;&#20351;&#29992;JMS&#26102;JMS&#30340;&#26085;&#24535;
               &#25165;&#34987;&#21019;&#24314;&#12290;</p></li><li><p>&#28040;&#24687;&#26085;&#24535;</p><p>&#36825;&#20010;&#26085;&#24535;&#29992;&#26469;&#23384;&#36142;&#25152;&#26377;&#28040;&#24687;&#30456;&#20851;&#30340;&#25968;&#25454;&#65292;&#21253;&#25324;&#28040;&#24687;&#26412;&#36523;&#21644;&#37325;&#22797;ID&#32531;&#23384;&#12290;</p><p>&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#24635;&#26159;&#20248;&#20808;&#20351;&#29992;AIO&#22411;&#26085;&#24535;&#12290;&#22914;&#26524;AIO&#22411;&#26085;&#24535;&#19981;&#21487;&#29992;&#65288;&#27604;&#22914;&#22312;&#38750;Linux&#24179;&#21488;&#19978;&#36816;&#34892;&#65292;&#25110;&#31995;&#32479;&#20869;&#26680;&#29256;&#26412;&#19981;&#21516;&#65289;
                &#23427;&#23558;&#33258;&#21160;&#20351;&#29992;NIO&#22411;&#26085;&#24535;&#12290;</p></li></ul></div><p>&#23545;&#20110;&#36229;&#22823;&#28040;&#24687;&#65292;Hornet&#23558;&#23427;&#20204;&#20445;&#23384;&#22312;&#28040;&#24687;&#26085;&#24535;&#20043;&#22806;&#30340;&#22320;&#26041;&#12290;&#35814;&#35265;<a href="#large-messages" title="Chapter&nbsp;23.&nbsp;&#22823;&#28040;&#24687;">Chapter&nbsp;23, <i>&#22823;&#28040;&#24687;</i></a>.</p><p>HornetQ&#36824;&#21487;&#20197;&#22312;&#20869;&#23384;&#19981;&#22815;&#29992;&#26102;&#23558;&#28040;&#24687;&#26242;&#23384;&#21040;&#30913;&#30424;&#19978;&#12290;&#30456;&#20851;&#30340;&#37197;&#32622;&#21644;&#35828;&#26126;&#21442;&#35265;<a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">Chapter&nbsp;24, <i>&#20998;&#39029;&#36716;&#23384;</i></a>&#12290;</p><p>&#22914;&#26524;&#19981;&#38656;&#35201;&#25345;&#20037;&#21151;&#33021;&#65292;HornetQ&#36824;&#21487;&#20197;&#37197;&#32622;&#25104;&#38750;&#25345;&#20037;&#30340;&#28040;&#24687;&#31995;&#32479;&#12290;&#21442;&#35265;<a href="#persistence.enabled" title="15.6.&nbsp;&#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#21270;">Section&nbsp;15.6, &#8220;&#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#21270;&#8221;</a>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring.bindings.journal"></a>15.1.&nbsp;&#37197;&#32622;&#32465;&#23450;&#26085;&#24535;</h2></div></div><div></div></div><p>&#32465;&#23450;&#26085;&#24535;&#30340;&#37197;&#32622;&#21442;&#25968;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">bindings-directory</tt></p><p>&#36825;&#26159;&#32465;&#23450;&#26085;&#24535;&#30340;&#20301;&#32622;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">data/bindings</tt>&#12290;</p></li><li><p><tt class="literal">create-bindings-dir</tt></p><p>&#22914;&#26524;&#35774;&#32622;&#20026;<tt class="literal">true</tt>&#65292;&#37027;&#20040;&#22312; <tt class="literal">bindings-directory</tt> &#25152;&#35774;&#23450;&#30340;&#20301;&#32622;&#19981;&#23384;&#22312;&#30340;&#24773;&#20917;&#19979;&#20250;&#33258;&#21160;&#21019;&#24314;&#23427;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring.bindings.jms"></a>15.2.&nbsp;&#37197;&#32622;JMS&#26085;&#24535;</h2></div></div><div></div></div><p>JMS&#26085;&#24535;&#30340;&#37197;&#32622;&#19982;&#32465;&#23450;&#26085;&#24535;&#20849;&#29992;&#37197;&#32622;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring.message.journal"></a>15.3.&nbsp;&#37197;&#32622;&#28040;&#24687;&#26085;&#24535;</h2></div></div><div></div></div><p>&#28040;&#24687;&#26085;&#24535;&#30340;&#37197;&#32622;&#22312;<tt class="literal">hornetq-configuration.xml&#25991;&#20214;&#20013;&#12290;</tt></p><div class="itemizedlist"><ul type="disc"><li><p><a name="configuring.message.journal.journal-directory"></a><tt class="literal">journal-directory</tt></p><p>&#36825;&#26159;&#28040;&#24687;&#26085;&#24535;&#25991;&#20214;&#25152;&#22312;&#30340;&#30446;&#24405;&#12290;&#40664;&#35748;&#20540;&#26159;
                        <tt class="literal">data/journal</tt>&#12290;</p><p>&#20026;&#20197;&#36798;&#21040;&#26368;&#20339;&#24615;&#33021;&#65292;&#25105;&#20204;&#24314;&#35758;&#23558;&#26085;&#24535;&#35774;&#23450;&#21040;&#23646;&#20110;&#23427;&#33258;&#24049;&#30340;&#29289;&#29702;&#21367;&#20013;&#20197;&#20943;&#23569;&#30913;&#22836;&#36816;&#21160;&#12290;&#22914;&#26524;&#26085;&#24535;&#30340;&#20301;&#32622;&#19982;
                    &#20854;&#23427;&#36827;&#31243;&#20849;&#29992;&#65288;&#22914;&#25968;&#25454;&#24211;&#65292;&#32465;&#23450;&#26085;&#24535;&#25110;&#20107;&#21153;&#30340;&#26085;&#24535;&#31561;&#65289;&#21017;&#30913;&#22836;&#30340;&#36816;&#21160;&#26174;&#28982;&#35201;&#22686;&#21152;&#24456;&#22810;&#12290;&#24615;&#33021;&#20063;&#23601;&#27809;&#26377;&#20445;&#35777;&#20102;&#12290;</p><p>&#22914;&#26524;&#28040;&#24687;&#26085;&#24535;&#26159;&#36142;&#23384;&#22312;SAN&#20013;&#65292;&#25105;&#20204;&#24314;&#35758;&#27599;&#20010;&#26085;&#24535;&#37117;&#25317;&#26377;&#33258;&#24049;&#30340;LUN&#65288;&#36923;&#36753;&#21333;&#20803;&#65289;&#12290;</p></li><li><p><a name="configuring.message.journal.create-journal-dir"></a><tt class="literal">create-journal-dir</tt></p><p>&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#65292;&#21017;&#24403;<tt class="literal">journal-directory</tt>&#25152;&#25351;&#23450;&#30340;&#26085;&#24535;&#30446;&#24405;&#19981;&#23384;&#22312;&#26102;&#65292;&#20250;&#33258;&#21160;&#21019;&#24314;&#23427;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-type"></a><tt class="literal">journal-type</tt></p><p>&#26377;&#25928;&#20540;&#26159;<tt class="literal">NIO</tt> &#25110;&#32773; <tt class="literal">ASYNCIO</tt>&#12290;</p><p>Choosing <tt class="literal">NIO</tt> chooses the Java NIO journal. Choosing
                        <tt class="literal">AIO</tt> &#36873;&#25321;&#20316;&#29992;&#24322;&#27493;IO&#22411;&#26085;&#24535;&#12290;&#22914;&#26524;&#20320;&#30340;&#24179;&#21488;&#19981;&#26159;Linux&#25110;&#32773;&#20320;&#27809;&#26377;&#23433;&#35013;
                    libaio&#65292;HornetQ&#20250;&#33258;&#21160;&#26816;&#27979;&#21040;&#24182;&#20351;&#29992;<tt class="literal">NIO</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-sync-transactional"></a><tt class="literal">journal-sync-transactional</tt></p><p>&#22914;&#26524;&#35774;&#20026;true&#65292;HornetQ&#20250;&#20445;&#35777;&#22312;&#20107;&#21153;&#30340;&#36793;&#30028;&#25805;&#20316;&#26102;&#65288;commit, prepare&#21644;rollback&#65289;&#23558;&#20107;&#21153;&#25968;&#25454;
                    &#20889;&#21040;&#30913;&#30424;&#19978;&#12290;&#40664;&#35748;&#30340;&#20540;&#26159; <tt class="literal">true</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-sync-non-transactional"></a><tt class="literal">journal-sync-non-transactional</tt></p><p>&#22914;&#26524;&#35774;&#20026;true HornetQ&#23558;&#20445;&#35777;&#27599;&#27425;&#37117;&#23558;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#25968;&#25454;&#65288;&#21457;&#36865;&#21644;&#36890;&#30693;&#65289;&#20445;&#23384;&#21040;&#30913;&#30424;&#19978;&#12290;&#40664;&#35748;&#20540;&#26159; <tt class="literal">true</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-file-size"></a><tt class="literal">journal-file-size</tt></p><p>&#27599;&#20010;&#26085;&#24535;&#25991;&#20214;&#30340;&#22823;&#20110;&#12290;&#21333;&#20301;&#20026;&#23383;&#33410;&#12290;&#40664;&#35748;&#20540;&#26159; <tt class="literal">10485760</tt> bytes (10MiB)&#12290;</p></li><li><p><a name="configuring.message.journal.journal-min-files"></a><tt class="literal">journal-min-files</tt></p><p>&#26368;&#23569;&#26085;&#24535;&#25991;&#20214;&#25968;&#12290;&#24403;HornetQ&#21551;&#21160;&#26102;&#20250;&#21019;&#24314;&#36825;&#19968;&#25968;&#37327;&#30340;&#25991;&#20214;&#12290;</p><p>&#21019;&#24314;&#24182;&#21021;&#22987;&#21270;&#26085;&#24535;&#25991;&#20214;&#26159;&#19968;&#39033;&#36153;&#26102;&#30340;&#25805;&#20316;&#65292;&#36890;&#24120;&#19981;&#24076;&#26395;&#36825;&#20123;&#25805;&#20316;&#22312;&#26381;&#21153;&#36816;&#34892;&#26102;&#25191;&#34892;&#12290;&#39044;&#20808;&#21019;&#24314;&#24182;&#21021;&#22987;&#21270;&#36825;&#20123;
                    &#26085;&#24535;&#25991;&#20214;&#23558;&#20250;&#20351;HornetQ&#22312;&#24037;&#20316;&#26102;&#36991;&#20813;&#28010;&#36153;&#19981;&#24517;&#35201;&#30340;&#26102;&#38388;&#12290;</p><p>&#26681;&#25454;&#20320;&#30340;&#24212;&#29992;&#20013;&#38431;&#21015;&#20013;&#28040;&#24687;&#37327;&#30340;&#23454;&#38469;&#35201;&#27714;&#21487;&#20197;&#36866;&#24403;&#35843;&#33410;&#36825;&#19968;&#21442;&#25968;&#12290;</p></li><li><p><a name="configuring.message.journal.journal-max-io"></a><tt class="literal">journal-max-io</tt></p><p>&#20889;&#35831;&#27714;&#34987;&#25918;&#21040;&#19968;&#20010;&#38431;&#21015;&#20013;&#65292;&#28982;&#21518;&#20877;&#34987;&#21457;&#36865;&#21040;&#31995;&#32479;&#20013;&#25191;&#34892;&#12290;&#36825;&#20010;&#21442;&#25968;&#38480;&#21046;&#20102;&#22312;&#20219;&#19968;&#26102;&#38388;&#38431;&#21015;&#20013;&#21487;&#20197;&#23384;&#25918;&#30340;&#26368;&#22823;&#25968;&#37327;
                    &#30340;&#20889;&#35831;&#27714;&#12290;&#22914;&#26524;&#38431;&#21015;&#36798;&#21040;&#36825;&#20010;&#38480;&#21046;&#65292;&#20219;&#20309;&#26032;&#30340;&#20889;&#35831;&#27714;&#37117;&#23558;&#34987;&#38459;&#22622;&#65292;&#30452;&#21040;&#38431;&#21015;&#20013;&#26377;&#31354;&#20301;&#20026;&#27490;&#12290;</p><p>&#24403;&#20351;&#29992;NIO&#26102;&#65292;&#36825;&#20010;&#21442;&#25968;&#24517;&#39035;&#20026; <tt class="literal">1</tt>&#12290;</p><p>&#24403;&#20351;&#29992;AIO&#26102;&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">500</tt>&#12290;</p><p>&#31995;&#32479;&#26681;&#25454;&#19981;&#21516;&#31867;&#22411;&#30340;&#26085;&#24535;&#25552;&#20379;&#19981;&#21516;&#30340;&#40664;&#35748;&#20540;&#12290;(NIO &#20026; 1,  AIO &#20026; 500)&#12290;</p><p>&#22914;&#26524;&#26159;AIO&#65292;&#36825;&#20010;&#21442;&#25968;&#30340;&#19978;&#38480;&#19981;&#33021;&#36229;&#36807;&#25805;&#20316;&#31995;&#32479;&#30340;&#38480;&#21046;(/proc/sys/fs/aio-max-nr)&#65292;&#36825;&#20010;&#20540;&#36890;&#24120;&#20026;65536.</p></li><li><p><a name="configuring.message.journal.journal-buffer-timeout"></a><tt class="literal">journal-buffer-timeout</tt></p><p>&#26085;&#24535;&#27169;&#22359;&#20013;&#26377;&#19968;&#20010;&#20869;&#37096;&#32531;&#20914;&#12290;&#27599;&#27425;&#20889;&#30340;&#20869;&#23481;&#24182;&#19981;&#26159;&#37117;&#31435;&#21363;&#20889;&#21040;&#30913;&#30424;&#19978;&#65292;&#32780;&#26159;&#20808;&#25918;&#21040;&#36825;&#20010;&#20869;&#37096;&#32531;&#23384;&#20013;&#12290;&#24403;&#36825;&#20010;&#32531;&#23384;&#24050;&#28385;&#26102;&#65292;&#25110;
                    &#32773;&#36229;&#36807;&#20102;&#19968;&#23450;&#30340;&#26102;&#38388;&#65288;timeout&#65289;&#65292;&#25165;&#23558;&#32531;&#23384;&#30340;&#25968;&#25454;&#23384;&#21040;&#30828;&#30424;&#19978;&#12290;NIO&#21644;AIO&#37117;&#26377;&#36825;&#19968;&#29305;&#28857;&#12290;&#37319;&#29992;&#32531;&#23384;&#30340;&#26041;&#24335;&#21487;&#20197;&#24456;&#22909;&#22320;&#28385;&#36275;
                    &#22823;&#37327;&#24182;&#21457;&#20889;&#25968;&#25454;&#30340;&#38656;&#35201;&#12290;</p><p>&#36825;&#19968;&#21442;&#25968;&#35268;&#23450;&#20102;&#32531;&#23384;&#30340;&#22833;&#25928;&#26102;&#38388;&#65292;&#22914;&#26524;&#36807;&#20102;&#36825;&#20010;&#26102;&#38388;&#65292;&#21363;&#20351;&#32531;&#23384;&#36824;&#27809;&#26377;&#28385;&#65292;&#20063;&#23558;&#25968;&#25454;&#20889;&#20837;&#30913;&#30424;&#20013;&#12290;AIO&#30340;&#20889;&#20837;
                    &#33021;&#21147;&#36890;&#24120;&#35201;&#27604;NIO&#24378;&#12290;&#22240;&#27492;&#31995;&#32479;&#23545;&#20110;&#19981;&#21516;&#31867;&#22411;&#30340;&#26085;&#24535;&#26377;&#30528;&#19981;&#21516;&#30340;&#40664;&#35748;&#20540;&#12290;&#65288; NIO&#30340;&#40664;&#35748;&#20540;&#26159; 3333333 &#32435;&#31186;&#65292;&#21363;&#27599;&#31186;300&#27425;&#12290;
                    &#32780;AIO&#21017;&#26159;500000&#32435;&#31186;&#65292;&#21363;&#27599;&#31186;2000&#27425;&#12290;&#65289;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#21152;&#22312;&#36825;&#20010;&#21442;&#25968;&#26377;&#21487;&#33021;&#20250;&#22686;&#21152;&#31995;&#32479;&#30340;&#21585;&#21520;&#37327;&#65292;&#20294;&#21487;&#33021;&#20250;&#38477;&#20302;&#31995;&#32479;&#30340;&#21709;&#24212;&#33021;&#21147;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#40664;&#35748;&#20540;&#24212;&#35813;&#26159;&#27604;&#36739;&#29702;&#24819;&#30340;&#25240;&#20013;&#36873;&#25321;&#12290;</p></div></li><li><p><a name="configuring.message.journal.journal-buffer-size"></a><tt class="literal">journal-buffer-size</tt></p><p>AIO&#30340;&#23450;&#26102;&#32531;&#20914;&#30340;&#22823;&#23567;&#65292;&#40664;&#35748;&#20540;&#20026;<tt class="literal">490KiB</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-compact-min-files"></a><tt class="literal">journal-compact-min-files</tt></p><p>&#36827;&#34892;&#25972;&#29702;&#21387;&#32553;&#26085;&#24535;&#25805;&#20316;&#30340;&#26368;&#23569;&#25991;&#20214;&#25968;&#12290;&#24403;&#26085;&#24535;&#25991;&#20214;&#23569;&#20110;&#36825;&#20010;&#25968;&#26102;&#65292;&#31995;&#32479;&#19981;&#20250;&#36827;&#34892;&#25991;&#20214;&#30340;&#25972;&#29702;&#21387;&#32553;&#12290;</p><p>&#40664;&#35748;&#20540;&#26159; <tt class="literal">10</tt>&#12290;</p></li><li><p><a name="configuring.message.journal.journal-compact-percentage"></a><tt class="literal">journal-compact-percentage</tt></p><p>&#24320;&#22987;&#25972;&#29702;&#21387;&#32553;&#30340;&#30028;&#38480;&#20540;&#12290;&#24403;&#26377;&#25928;&#25968;&#25454;&#30340;&#27604;&#20363;&#23569;&#20110;&#36825;&#20010;&#20540;&#26102;&#31995;&#32479;&#24320;&#22987;&#25972;&#29702;&#21387;&#32553;&#26085;&#24535;&#12290;&#27880;&#24847;&#26159;&#21542;&#36827;&#34892;&#21387;&#32553;&#36824;&#35201;
                    &#21463;&#21040;&#12289;<tt class="literal">journal-compact-min-files</tt>&#21442;&#25968;&#30340;&#25511;&#21046;&#12290;</p><p>&#36825;&#19968;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159; <tt class="literal">30</tt>&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="disk-write-cache"></a>15.4.&nbsp;&#20851;&#20110;&#20851;&#38381;&#30913;&#30424;&#20889;&#32531;&#20914;&#30340;&#37325;&#35201;&#35828;&#26126;</h2></div></div><div></div></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>&#22823;&#22810;&#25968;&#30913;&#30424;&#20135;&#21697;&#37117;&#26377;&#30828;&#20214;&#30340;&#20889;&#32531;&#20914;&#12290;&#20889;&#32531;&#20914;&#21487;&#20197;&#26126;&#26174;&#25552;&#39640;&#20889;&#30340;&#25928;&#29575;&#12290;</p><p>&#36825;&#26679;&#30340;&#20889;&#32531;&#20914;&#19982;&#35843;&#29992;fsync()&#36825;&#26679;&#30340;&#31995;&#32479;&#20989;&#25968;&#26080;&#20851;&#65292;&#20063;&#19982;&#22312;Java&#31243;&#24207;&#20013;&#36827;&#34892;&#30340;&#21516;&#27493;&#35843;&#29992;&#26080;&#20851;&#65281;</p><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#35768;&#22810;&#30913;&#30424;&#30340;&#20889;&#32531;&#20914;&#26159;&#25171;&#24320;&#30340;&#12290;&#36825;&#26679;&#30340;&#24773;&#20917;&#19979;&#65292;&#21363;&#20351;&#20320;&#22312;&#31243;&#24207;&#20013;&#35843;&#29992;&#20102;&#21516;&#27493;&#25805;&#20316;&#20063;&#19981;&#33021;&#20445;&#35777;&#20320;&#30340;&#25968;&#25454;
                &#23601;&#30495;&#27491;&#20889;&#21040;&#30913;&#30424;&#20171;&#36136;&#20013;&#20102;&#12290;&#22240;&#27492;&#22914;&#26524;&#25925;&#38556;&#21457;&#29983;&#26102;&#65292;&#20851;&#38190;&#30340;&#25968;&#25454;&#26159;&#26377;&#21487;&#33021;&#20002;&#22833;&#30340;&#12290;</p><p>&#26377;&#20123;&#26114;&#36149;&#30340;&#30913;&#30424;&#37319;&#29992;&#38750;&#25381;&#21457;&#24615;&#30340;&#20171;&#36136;&#25110;&#26377;&#30005;&#28304;&#30340;&#32531;&#20914;&#26469;&#20445;&#35777;&#25925;&#38556;&#24773;&#20917;&#19979;&#19981;&#20002;&#22833;&#25968;&#25454;&#12290;&#20294;&#26159;&#20320;&#20173;&#38656;&#35201;&#23545;&#36825;&#20123;&#30828;&#30424;&#36827;&#34892;&#27979;&#35797;&#65281;</p><p>&#22914;&#26524;&#20320;&#30340;&#30913;&#30424;&#27809;&#26377;&#38750;&#25381;&#21457;&#24615;&#25110;&#26377;&#30005;&#28304;&#30340;&#32531;&#23384;&#65292;&#20063;&#19981;&#26159;&#26576;&#31181;&#20887;&#20313;&#30424;&#38453;&#65288;&#22914;RAID&#65289;&#12290;&#35201;&#24819;&#20445;&#35777;&#20851;&#38190;&#25968;&#25454;&#19981;&#20002;&#22833;&#65292;&#20320;&#38656;&#35201;
                &#20851;&#38381;&#30913;&#30424;&#30340;&#20889;&#32531;&#20914;&#12290;</p><p>&#38656;&#35201;&#30693;&#36947;&#30340;&#26159;&#20851;&#38381;&#30913;&#30424;&#30340;&#20889;&#32531;&#20914;&#20250;&#26174;&#33879;&#38477;&#20302;&#30913;&#30424;&#30340;&#24615;&#33021;&#12290;&#22914;&#26524;&#24179;&#26102;&#20320;&#22312;&#20351;&#29992;&#30913;&#30424;&#26102;&#37117;&#25171;&#24320;&#20889;&#32531;&#20914;&#65292;&#37027;&#20040;&#24403;&#20320;&#20026;&#20102;
                &#20445;&#25252;&#20320;&#30340;&#25968;&#25454;&#32780;&#20851;&#38381;&#23427;&#26102;&#65292;&#20320;&#21487;&#33021;&#24863;&#21040;&#20004;&#31181;&#24773;&#20917;&#19979;&#30340;&#26126;&#26174;&#24046;&#24322;&#12290;</p><p>Linux&#21487;&#20197;&#29992;<tt class="literal">hdparm</tt> (IDE&#30828;&#30424;) &#25110; <tt class="literal">sdparm</tt> &#25110;
                    <tt class="literal">sginfo</tt> (SDSI/SATA &#30828;&#30424;)&#24037;&#20855;&#26469;&#26597;&#30475;&#24182;&#20462;&#25913;&#30913;&#30424;&#30340;&#20889;&#32531;&#20914;&#12290;</p><p>&#22312;Windows&#24179;&#21488;&#19978;&#20320;&#21487;&#20197;&#21491;&#38190;&#28857;&#20987;&#30828;&#30424;&#22270;&#26631;&#65292;&#24182;&#36873;&#25321;&#8220;&#23646;&#24615;&#8221;&#33756;&#21333;&#39033;&#26469;&#25805;&#20316;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing-aio"></a>15.5.&nbsp;&#23433;&#35013;AIO</h2></div></div><div></div></div><p>Java NIO&#26085;&#24535;&#30340;&#24615;&#33021;&#26159;&#24456;&#22909;&#30340;&#12290;&#20294;&#26159;&#22914;&#26524;&#20320;&#26159;&#22312;Linux &#20869;&#26680;2.6&#29256;&#26412;&#20197;&#19978;&#30340;&#31995;&#32479;&#20013;&#36816;&#34892;HornetQ&#65292;&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;
            &#20320;&#20351;&#29992; <tt class="literal">AIO</tt>&#26085;&#24535;&#65292;&#20197;&#33719;&#24471;&#26356;&#20339;&#30340;&#24615;&#33021;&#12290;</p><p>&#22312;&#26089;&#26399;&#30340;Linux&#29256;&#26412;&#20013;&#25110;&#20854;&#23427;&#25805;&#20316;&#31995;&#32479;&#20013;&#19981;&#21487;&#20197;&#20351;&#29992; AIO&#26085;&#24535;&#12290;</p><p>&#22914;&#26524;&#20320;&#30340;Linux&#20869;&#26680;&#26159;2.6&#29256;&#26412;&#25110;&#20197;&#19978;&#20294;&#27809;&#26377;&#23433;&#35013; <tt class="literal">libaio</tt>&#65292;&#25353;&#29031;&#19979;&#21015;&#27493;&#39588;&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#23433;&#35013;&#23427;&#65306;</p><p>&#20351;&#29992; yum&#65292;(&#22914; Fedora &#25110; Red Hat Enterprise Linux):
            </p><pre class="programlisting">yum install libaio</pre><p>&#20351;&#29992; aptitude, (&#22914; Ubuntu &#25110; Debian):
            </p><pre class="programlisting">apt-get install libaio</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="persistence.enabled"></a>15.6.&nbsp;&#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#21270;</h2></div></div><div></div></div><p>&#22312;&#19968;&#20123;&#24773;&#20917;&#19979;&#28040;&#24687;&#31995;&#32479;&#24182;&#19981;&#38656;&#35201;&#25345;&#20037;&#21270;&#12290;&#36825;&#26102;&#21487;&#20197;&#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#23618;&#12290;&#21482;&#35201;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">persistence-enabled</tt>
              &#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#21363;&#21487;&#12290; </p><p>&#27880;&#24847;&#22914;&#26524;&#20320;&#23558;&#35813;&#21442;&#25968;&#35774;&#20026; false&#26469;&#20851;&#38381;&#25345;&#20037;&#21270;&#65292;&#23601;&#24847;&#21619;&#30528;&#25152;&#26377;&#30340;&#32465;&#23450;&#25968;&#25454;&#12289;&#28040;&#24687;&#25968;&#25454;&#12289;&#36229;&#22823;&#28040;&#24687;&#25968;&#25454;&#12289;&#37325;&#22797;ID&#32531;&#20914;&#20197;&#21450;&#36716;&#31227;&#65288;paging&#65289;&#25968;&#25454;&#37117;&#23558;&#19981;&#20250;&#34987;&#25345;&#20037;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="configuring-transports"></a>Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>HornetQ&#30340;&#20256;&#36755;&#23618;&#26159;&#8220;&#21487;&#25554;&#25300;&#30340;&#8221;&#12290;&#36890;&#36807;&#28789;&#27963;&#30340;&#37197;&#32622;&#21644;&#19968;&#22871;&#26381;&#21153;&#25552;&#20379;&#25509;&#21475;&#65288;SPI&#65289;&#65292;HornetQ&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#26356;&#25442;&#20854;&#20256;&#36755;&#23618;&#12290;</p><p>&#22312;&#26412;&#31456;&#20013;&#25105;&#20204;&#23558;&#23545;HornetQ&#30340;&#20256;&#36755;&#30456;&#20851;&#30340;&#27010;&#24565;&#20316;&#20986;&#35299;&#37322;&#65292;&#24182;&#35828;&#26126;&#23427;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.acceptors"></a>16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;</h2></div></div><div></div></div><p>&#25509;&#25910;&#22120;&#65288;<span class="emphasis"><em>acceptor</em></span>&#65289;&#26159; HornetQ &#30340;&#20256;&#36755;&#23618;&#20013;&#26368;&#20026;&#37325;&#35201;&#30340;&#27010;&#24565;&#20043;&#19968;&#12290;&#39318;&#20808;
            &#20171;&#32461;&#19968;&#19979;&#22312;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#26159;&#24590;&#26679;&#23450;&#20041;&#19968;&#20010;&#25509;&#25910;&#22120;&#30340;&#65306;</p><pre class="programlisting">
&lt;acceptors&gt;                
    &lt;acceptor name="netty"&gt;
        &lt;factory-class&gt;
org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
        &lt;/factory-class&gt;
        &lt;param key="port" value="5446"/&gt;
    &lt;/acceptor&gt;
&lt;/acceptors&gt;            
        </pre><p>&#25152;&#26377;&#25509;&#25910;&#22120;&#37117;&#22312; <tt class="literal">acceptors</tt>&#21333;&#20803;&#65288;element&#65289;&#20869;&#23450;&#20041;&#12290;&#22312;<tt class="literal">acceptors</tt>
            &#20869;&#21487;&#20197;&#26377;&#38646;&#20010;&#25110;&#22810;&#20010;&#25509;&#25910;&#22120;&#30340;&#23450;&#20041;&#12290;&#27599;&#20010;&#26381;&#21153;&#22120;&#25152;&#25317;&#26377;&#30340;&#25509;&#25910;&#22120;&#30340;&#25968;&#37327;&#26159;&#27809;&#26377;&#38480;&#21046;&#30340;&#12290;</p><p>&#27599;&#20010;&#25509;&#25910;&#22120;&#37117;&#35201;&#23450;&#20041;&#20854;&#19982;HornetQ&#26381;&#21153;&#22120;&#36830;&#25509;&#30340;&#26041;&#24335;&#12290;</p><p>&#20197;&#19978;&#30340;&#20363;&#23376;&#20013;&#25105;&#20204;&#23450;&#20041;&#20102;&#19968;&#20010;<a href="http://jboss.org/netty" target="_top">Netty</a>&#25509;&#25910;&#22120;&#12290;&#23427;&#22312;&#31471;&#21475;<tt class="literal">5446</tt>&#30417;&#21548;&#36830;&#25509;&#35831;&#27714;&#12290;</p><p>&#22312;<tt class="literal">acceptor</tt>&#21333;&#20803;&#20869;&#26377;&#19968;&#20010;&#23376;&#21333;&#20803;<tt class="literal">factory-class</tt>&#12290;&#36825;&#20010;&#21333;&#20803;&#26159;&#29992;&#26469;
            &#23450;&#20041;&#21019;&#24314;&#36830;&#25509;&#22120;&#30340;&#24037;&#21378;&#31867;&#12290;&#19968;&#20010;&#36830;&#25509;&#22120;&#24037;&#21378;&#31867;&#24517;&#39035;&#35201;&#23454;&#29616;<tt class="literal">AcceptorFactory</tt>&#25509;&#21475;&#12290;&#19978;&#20363;&#20013;&#25105;&#20204;&#23450;&#20041;
            &#30340;&#36830;&#25509;&#22120;&#24037;&#21378;&#26159;&#31867;NettyAcceptorFactory&#20351;&#29992;Netty&#26469;&#24314;&#31435;&#36830;&#25509;&#12290;&#26377;&#20010;&#36825;&#20010;&#31867;&#23450;&#20041;&#65292;HornetQ&#23601;&#30693;&#36947;&#20102;&#29992;&#20160;&#20040;&#20256;&#36755;&#26469;&#24314;&#31435;&#36830;&#25509;&#20102;&#12290;</p><p>&#22312;<tt class="literal">acceptor</tt>&#20013;&#36824;&#21487;&#20197;&#37197;&#32622;&#38646;&#25110;&#22810;&#20010;&#21442;&#25968;<tt class="literal">param</tt>&#12290;&#22312;&#27599;&#20010;<tt class="literal">param</tt>
            &#20013;&#23450;&#20041;&#30340;&#26159;&#38190;-&#20540;&#23545;&#65288;key-value&#65289;&#12290;&#36825;&#20123;&#21442;&#25968;&#29992;&#26469;&#37197;&#32622;&#26576;&#20010;&#20256;&#36755;&#23454;&#29616;&#12290;&#19981;&#21516;&#20256;&#36755;&#26377;&#19981;&#21516;&#30340;&#37197;&#32622;&#21442;&#25968;&#12290;</p><p>&#20687;IP&#22320;&#22336;&#12289;&#31471;&#21475;&#21495;&#31561;&#37117;&#26159;&#20256;&#36755;&#37197;&#32622;&#21442;&#25968;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.connectors"></a>16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;</h2></div></div><div></div></div><p>&#25509;&#25910;&#22120;&#23450;&#20041;&#30340;&#26159;&#22914;&#20309;&#22312;&#26381;&#21153;&#22120;&#31471;&#25509;&#25910;&#36830;&#25509;&#65292;&#32780;&#36830;&#25509;&#22120;&#21017;&#26159;&#23450;&#20041;&#23458;&#25143;&#31471;&#22914;&#20309;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#12290;</p><p>&#20197;&#19979;&#26159;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#19968;&#20010;&#36830;&#25509;&#22120;&#37197;&#32622;&#30340;&#20363;&#23376;&#12290;</p><pre class="programlisting">
&lt;connectors&gt;
    &lt;connector name="netty"&gt;
        &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
        &lt;/factory-class&gt;
        &lt;param key="port" value="5446"/&gt;
    &lt;/connector&gt;
&lt;/connectors&gt;            
        </pre><p>&#36830;&#25509;&#22120;&#30340;&#37197;&#32622;&#22312;<tt class="literal">connectors</tt>&#21333;&#20803;&#20013;&#12290;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#25110;&#22810;&#20010;&#36830;&#25509;&#22120;&#12290;&#27599;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;&#30340;&#36830;&#25509;&#22120;
            &#25968;&#37327;&#26159;&#27809;&#26377;&#38480;&#21046;&#30340;&#12290;</p><p>&#20320;&#21487;&#33021;&#27880;&#24847;&#21040;&#20102;&#65292;&#26082;&#28982;&#36830;&#25509;&#22120;&#26159;&#23450;&#20041;<span class="emphasis"><em>&#23458;&#25143;&#31471;</em></span>&#22914;&#20309;&#36830;&#25509;&#26381;&#21153;&#22120;&#30340;&#65292;&#37027;&#20040;&#20026;&#20160;&#20040;&#35201;&#23450;&#20041;&#22312;
              <span class="emphasis"><em>&#26381;&#21153;&#22120;</em></span>&#31471;&#21602;&#65311;&#21407;&#22240;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#26381;&#21153;&#22120;&#26377;&#26102;&#20063;&#38656;&#35201;&#20570;&#20026;&#23458;&#25143;&#31471;&#21435;&#36830;&#25509;&#20854;&#23427;&#30340;&#26381;&#21153;&#22120;&#65292;&#27604;&#22914;&#24403;&#19968;&#20010;&#26381;&#21153;&#22120;&#36890;&#36807;&#26725;&#36830;&#25509;&#21040;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#65292;&#25110;&#32773;&#26159;&#38598;&#32676;
                    &#20013;&#26381;&#21153;&#22120;&#20043;&#38388;&#30340;&#20114;&#30456;&#36890;&#36805;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#26381;&#21153;&#22120;&#23601;&#35201;&#30693;&#36947;&#22914;&#20309;&#19982;&#21478;&#19968;&#21488;&#26381;&#21153;&#22120;&#24314;&#31435;&#36830;&#25509;&#12290;&#22240;&#27492;&#38656;&#35201;&#22312;
                    <span class="emphasis"><em>connectors</em></span>&#19979;&#23450;&#20041;&#36830;&#25509;&#22120;&#12290;</p></li><li><p>&#22914;&#26524;&#20320;&#20351;&#29992;JMS&#26381;&#21153;&#65292;&#38656;&#35201;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#30340;&#23454;&#20363;&#24182;&#32465;&#23450;&#21040;JNDI&#12290;&#22312;HornetQ&#21019;&#24314;
                    <tt class="literal">HornetQConnectionFactory</tt>&#26102;&#38656;&#35201;&#36830;&#25509;&#22120;&#30340;&#24517;&#35201;&#20449;&#24687;&#65292;&#20197;&#20415;&#36825;&#20010;&#36830;&#25509;&#24037;&#21378;
                    &#33021;&#30693;&#36947;&#23427;&#22914;&#20309;&#19982;HornetQ&#26381;&#21153;&#22120;&#30456;&#36830;&#25509;&#12290;</p><p>&#36825;&#19968;&#20449;&#24687;&#34987;&#23450;&#20041;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#30340;<tt class="literal">connector-ref</tt>&#21333;&#20803;&#19979;&#12290;&#19979;&#38754;&#36825;&#27573;&#37197;&#32622;
                        &#23601;&#26159;&#20174;&#35813;&#37197;&#32622;&#25991;&#20214;&#20013;&#25552;&#21462;&#30340;&#30456;&#20851;&#37096;&#20998;&#65292;&#23427;&#23637;&#31034;&#20102;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#26159;&#22914;&#20309;&#24341;&#29992;&#23450;&#20041;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#30340;&#36830;&#25509;&#22120;&#30340;&#65306;</p><pre class="programlisting">
&lt;connection-factory name="ConnectionFactory"&gt;
    &lt;connectors&gt;
       &lt;connector-ref connector-name="netty"/&gt;
    &lt;/connectors&gt;
    &lt;entries&gt;
        &lt;entry name="ConnectionFactory"/&gt;
        &lt;entry name="XAConnectionFactory"/&gt;
    &lt;/entries&gt;
&lt;/connection-factory&gt;                
            </pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.client.side"></a>16.3.&nbsp;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#37197;&#32622;&#20256;&#36755;&#23618;</h2></div></div><div></div></div><p>&#24590;&#26679;&#37197;&#32622;&#19968;&#20010;&#20869;&#26680;<tt class="literal">ClientSessionFactory</tt>&#20197;&#35753;&#23427;&#30693;&#36947;&#22914;&#20309;&#36830;&#25509;&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#21602;&#65311;</p><p>&#22312;&#30452;&#25509;&#37197;&#32622;&#20869;&#26680;<tt class="literal">ClientSessionFactory</tt>&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#38388;&#25509;&#22320;&#20351;&#29992;&#36830;&#25509;&#22120;&#12290;&#24403;&#28982;&#22312;&#36825;&#31181;&#24773;&#20917;
            &#19979;&#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#36830;&#25509;&#22120;&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#12290;&#25105;&#20204;&#36890;&#36807;&#23558;&#24517;&#35201;&#21442;&#25968;&#20256;&#32473;<tt class="literal">ClientSessionFactory</tt>&#30340;
            &#26041;&#27861;&#26469;&#21578;&#35785;&#20351;&#29992;&#20160;&#20040;&#26679;&#30340;&#36830;&#25509;&#22120;&#24037;&#21378;&#12290;</p><p>&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;<tt class="literal">ClientSessionFactory</tt>&#65292;&#23427;&#21487;&#20197;&#30452;&#25509;&#36830;&#25509;&#21040;&#25105;&#20204;&#20808;&#21069;&#23450;
            &#20041;&#30340;&#25509;&#25910;&#22120;&#19978;&#12290;&#23427;&#20351;&#29992;&#30340;&#26159;&#26631;&#20934;&#30340;Netty TCP&#20256;&#36755;&#23618;&#65292;&#36830;&#25509;&#20027;&#26426;&#26159;localhost&#65288;&#40664;&#35748;&#65289;&#65292;&#31471;&#21475;5446&#65306;</p><pre class="programlisting">
Map&lt;String, Object&gt; connectionParams = new HashMap&lt;String, Object&gt;();
    
connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME, 
                    5446);

TransportConfiguration transportConfiguration = 
    new TransportConfiguration(
    "org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", 
    connectionParams);

ClientSessionFactory sessionFactory = HornetQClient.createClientSessionFactory(transportConfiguration);

ClientSession session = sessionFactory.createSession(...);

etc                       
        </pre><p>&#22914;&#26524;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#20351;&#29992;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#30340;&#35805;&#65292;&#20063;&#21487;&#20197;&#29992;&#31867;&#20284;&#30340;&#26041;&#27861;&#32780;&#19981;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#36830;&#25509;&#22120;&#25110;&#22312;
            <tt class="literal">hornetq-jms.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#65306;</p><pre class="programlisting">
Map&lt;String, Object&gt; connectionParams = new HashMap&lt;String, Object&gt;();

connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME, 5446);

TransportConfiguration transportConfiguration = 
    new TransportConfiguration(
    "org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", 
    connectionParams);

ConnectionFactory connectionFactory = HornetQJMSClient.createConnectionFactory(transportConfiguration);

Connection jmsConnection = connectionFactory.createConnection();

etc                       
        </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2860"></a>16.4.&nbsp;&#37197;&#32622; Netty &#20256;&#36755;&#23618;</h2></div></div><div></div></div><p>HornetQ&#24403;&#21069;&#20351;&#29992;<a href="http://www.jboss.org/netty/" target="_top">Netty</a>&#20316;&#20026;&#20854;&#40664;&#35748;&#30340;&#36830;&#25509;&#23618;&#12290;Netty&#26159;&#19968;&#20010;&#39640;&#24615;&#33021;&#30340;&#24213;&#23618;&#32593;&#32476;&#24211;.</p><p>Netty&#20256;&#36755;&#30340;&#37197;&#32622;&#26377;&#20960;&#31181;&#19981;&#21516;&#30340;&#26041;&#27861;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#20256;&#32479;&#30340;Java IO&#65288;&#38459;&#22622;&#26041;&#24335;&#65289;&#12289;NIO&#65288;&#38750;&#38459;&#22622;&#65289;&#25110;&#30452;&#25509;&#20351;&#29992;
            TCP socket&#21450;SSL&#12290;&#25110;&#32773;&#20351;&#29992;HTTP&#25110;HTTPS&#21327;&#35758;&#12290;&#21516;&#26102;&#36824;&#21487;&#33021;&#20351;&#29992;servlet&#36827;&#34892;&#20256;&#36755;&#12290;</p><p>&#37319;&#29992;Netty&#24212;&#35813;&#33021;&#28385;&#36275;&#32477;&#22823;&#37096;&#20998;&#30340;&#20256;&#36755;&#35201;&#27714;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2872"></a>16.4.1.&nbsp;&#37197;&#32622; Netty TCP</h3></div></div><div></div></div><p>Netty TCP &#26159;&#31616;&#21333;&#30340;&#38750;&#21152;&#23494;&#30340;&#22522;&#20110;TCP socket&#30340;&#20256;&#36755;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#38459;&#22622;&#24335;&#30340;Java IO&#25110;&#38750;&#38459;&#22622;&#24335;&#30340;Java NIO&#12290;
                &#25105;&#20204;&#24314;&#35758;&#22312;&#26381;&#21153;&#22120;&#31471;&#37319;&#29992;&#38750;&#38459;&#22622;&#24335;&#30340;NIO&#20197;&#33719;&#24471;&#33391;&#22909;&#30340;&#24182;&#21457;&#22788;&#29702;&#33021;&#21147;&#12290;&#24403;&#24182;&#21457;&#33021;&#21147;&#24182;&#19981;&#26159;&#24456;&#37325;&#35201;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;&#38459;&#22622;&#24335;
                &#30340;&#26041;&#24335;&#20197;&#22686;&#21152;&#21709;&#24212;&#30340;&#36895;&#24230;&#12290;</p><p>&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#26159;&#36816;&#34892;&#22312;&#19981;&#20449;&#20219;&#30340;&#32593;&#32476;&#19978;&#65292;&#20320;&#24212;&#35813;&#36873;&#25321;&#20351;&#29992;SSL&#25110;HTTPS&#12290;</p><p>Netty TCP&#30340;&#25152;&#26377;&#36830;&#25509;&#37117;&#26159;&#20174;&#23458;&#25143;&#31471;&#21457;&#36215;&#30340;&#12290;&#26381;&#21153;&#22120;&#31471;&#19981;&#21521;&#23458;&#25143;&#31471;&#21457;&#36215;&#20219;&#20309;&#36830;&#25509;&#12290;&#22312;&#26377;&#38450;&#28779;&#22681;&#30340;&#29615;&#22659;&#20013;&#65292;&#36825;&#31181;&#26041;&#24335;
                &#26159;&#27604;&#36739;&#36866;&#21512;&#30340;&#12290;&#22240;&#20026;&#38450;&#28779;&#22681;&#21482;&#20801;&#35768;&#21333;&#26041;&#21521;&#30340;&#36830;&#25509;&#12290;</p><p>&#22312;<tt class="literal">org.hornetq.core.remoting.impl.netty.TransportConstants</tt>&#31867;&#20013;&#23450;&#20041;&#20102;&#25152;
                &#26377;&#30340;&#37197;&#32622;&#21442;&#25968;&#30340;&#21517;&#31216;&#65288;key&#65289;&#12290;&#23427;&#20204;&#24403;&#20013;&#32477;&#22823;&#22810;&#23044;&#26082;&#29992;&#20110;&#37197;&#32622;&#25509;&#25910;&#22120;&#20063;&#29992;&#20110;&#37197;&#32622;&#36830;&#25509;&#22120;&#65292;&#26377;&#19968;&#20123;&#21482;&#36866;&#29992;&#20110;&#25509;&#25910;&#22120;&#12290;
                &#19979;&#38754;&#21015;&#20986;&#30340;&#21442;&#25968;&#29992;&#20197;&#37197;&#32622;&#19968;&#20010;&#31616;&#21333;&#30340;Netty TCP&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">use-nio</tt>&#12290;&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#21017;&#20351;&#29992;&#38750;&#38459;&#22622;&#30340;Java
                        NIO&#12290;&#22914;&#26524;<tt class="literal">false</tt>&#21017;&#20351;&#29992;&#20256;&#32479;&#30340;&#38459;&#22622;&#26041;&#24335;&#30340;Java IO&#12290;</p><p>&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;Java NIO&#22788;&#29702;&#24182;&#34892;&#36830;&#25509;&#12290;&#22240;&#20026;Java NIO&#19981;&#26159;&#20026;&#27599;&#19968;&#20010;&#36830;&#25509;&#20998;&#37197;&#19968;&#20010;&#32447;&#31243;&#65292;&#25152;&#20197;&#23427;&#35201;&#27604;&#20256;&#32479;&#30340;&#38459;&#22622;&#24335;
                        Java IO&#20855;&#26377;&#26356;&#24378;&#30340;&#24182;&#21457;&#36830;&#25509;&#30340;&#22788;&#29702;&#33021;&#21147;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#22788;&#29702;&#24182;&#21457;&#36830;&#25509;&#65292;&#37027;&#20040;&#20351;&#29992;&#26087;&#30340;&#38459;&#22622;&#24335;&#30340;IO&#24615;&#33021;&#20250;&#22909;&#19968;&#20123;&#12290;&#36825;&#20010;&#21442;
                        &#25968;&#30340;&#40664;&#35748;&#20540;&#22312;&#26381;&#21153;&#22120;&#31471;&#26159;<tt class="literal">false</tt>&#65292;&#22312;&#23458;&#25143;&#31471;&#26159;<tt class="literal">false</tt>&#12290;
                        </p></li><li><p><tt class="literal">host</tt>&#12290;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#12290;&#23545;&#20110;&#25509;&#25910;&#22120;&#26469;&#35828;&#65292;&#23427;&#26159;&#26381;&#21153;&#22120;&#25509;&#25910;&#36830;&#25509;&#30340;&#22320;&#22336;&#12290;
                        &#23545;&#20110;&#36830;&#25509;&#22120;&#31471;&#65292;&#23427;&#26159;&#23458;&#25143;&#31471;&#36830;&#25509;&#30340;&#30446;&#26631;&#22320;&#22336;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">localhost</tt>&#12290;
                        &#22312;&#37197;&#32622;&#25509;&#25910;&#22120;&#26102;&#21487;&#20197;&#25351;&#23450;&#22810;&#20010;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#65292;&#20013;&#38388;&#29992;&#36887;&#21495;&#38548;&#24320;&#12290;&#22914;&#26524;&#25351;&#23450;&#30340;&#20027;&#26426;&#26159;<tt class="code">0.0.0.0</tt>&#65292;
                        &#21017;&#25509;&#25910;&#22120;&#23558;&#20174;&#20027;&#26426;&#19978;&#25152;&#26377;&#30340;&#32593;&#32476;&#25509;&#21475;&#20013;&#25509;&#21463;&#36830;&#25509;&#35831;&#27714;&#12290;&#36830;&#25509;&#22120;&#19981;&#20801;&#35768;&#25351;&#23450;&#22810;&#20010;&#20027;&#26426;&#22320;&#22336;&#65292;&#23427;&#21482;&#33021;&#19982;&#19968;&#20010;
                        &#22320;&#22336;&#24314;&#31435;&#36830;&#25509;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#19968;&#23450;&#19981;&#35201;&#24536;&#35760;&#25351;&#23450;&#19968;&#20010;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#65281;&#19968;&#20010;&#26381;&#21153;&#22120;&#35201;&#24819;&#25509;&#21463;&#26469;&#33258;&#20854;&#23427;&#33410;&#28857;&#30340;&#36830;&#25509;&#23601;&#24517;&#38656;&#26377;&#19968;&#20010;
                            &#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#26469;&#32465;&#23450;&#21450;&#30417;&#21548;&#22806;&#37096;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;&#40664;&#35748;&#30340;&#20027;&#26426;&#21517;localhost&#26159;&#19981;&#33021;&#25509;&#21463;&#22806;&#37096;&#30340;
                            &#36830;&#25509;&#35831;&#27714;&#30340;&#65281;</p></div></li><li><p><tt class="literal">port</tt>&#12290;&#36830;&#25509;&#30340;&#31471;&#21475;&#12290;&#29992;&#20110;&#37197;&#32622;&#36830;&#25509;&#22120;&#25110;&#25509;&#25910;&#22120;&#12290;&#36830;&#25509;&#22120;&#29992;&#27492;&#31471;&#21475;&#26469;&#24314;&#31435;
                        &#36830;&#25509;&#12290;&#25509;&#25910;&#22120;&#22312;&#20123;&#31471;&#21475;&#19978;&#30417;&#21548;&#36830;&#25509;&#35831;&#27714;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">5445</tt>&#12290;</p></li><li><p><tt class="literal">tcp-no-delay</tt>&#12290;&#23558;&#23427;&#35774;&#20026;<tt class="literal">true</tt>&#23601;&#20250;&#20351;&#29992;
                            <a href="http://en.wikipedia.org/wiki/Nagle's_algorithm" target="_top">Nagle
                            &#31639;&#27861;</a>.&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></li><li><p><tt class="literal">tcp-send-buffer-size</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;TCP&#30340;&#21457;&#36865;&#32531;&#20914;&#22823;&#23567;&#65292;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;
                        &#40664;&#35748;&#20540;&#26159;<tt class="literal">32768</tt>&#23383;&#33410;(32KiB)&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#35201;&#26681;&#25454;&#20320;&#30340;&#32593;&#32476;&#30340;&#24102;&#23485;&#19982;&#26102;&#24310;&#30340;&#24773;&#20917;&#32780;&#35843;&#25972;&#12290;<a href="http://www-didc.lbl.gov/TCP-tuning/" target="_top">
                        &#36825;&#20010;&#38142;&#25509;</a>&#23545;&#27492;&#26377;&#24456;&#22909;&#30340;&#35770;&#36848;&#12290;</p><p>&#31616;&#35328;&#20043;&#65292;TCP&#30340;&#21457;&#36865;&#65295;&#25509;&#25910;&#32531;&#20914;&#30340;&#22823;&#23567;&#21487;&#20197;&#29992;&#19979;&#38754;&#20844;&#24335;&#26469;&#35745;&#31639;&#65306;</p><pre class="programlisting">
                        &#32531;&#20914;&#22823;&#23567; = &#24102;&#23485; * RTT
                    </pre><p>&#20854;&#20013;&#24102;&#23485;&#30340;&#21333;&#20301;&#26159; <span class="emphasis"><em>&#27599;&#31186;&#23383;&#33410;&#25968;</em></span>&#65292;RTT&#65288;&#32593;&#32476;&#24448;&#36820;&#31243;&#26102;&#38388;&#65289;&#30340;&#21333;&#20301;&#26159;&#31186;&#12290;
                          &#20351;&#29992;<tt class="literal">ping</tt>&#24037;&#20855;&#21487;&#20197;&#26041;&#20415;&#22320;&#27979;&#37327;&#20986;RTT&#12290;</p><p>&#23545;&#20110;&#24555;&#36895;&#32593;&#32476;&#21487;&#20197;&#36866;&#24403;&#21152;&#22823;&#32531;&#20914;&#30340;&#22823;&#23567;&#12290;</p></li><li><p><tt class="literal">tcp-receive-buffer-size</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;TCP&#25509;&#25910;&#32531;&#20914;&#30340;&#22823;&#23567;&#65292;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;
                        &#40664;&#35748;&#20540;&#26159;<tt class="literal">32768</tt>&#23383;&#33410;(32KiB)&#12290;</p></li><li><p><tt class="literal">batch-delay</tt>&#12290;HornetQ&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#35813;&#21442;&#25968;&#65292;&#22312;&#25968;&#25454;&#21253;&#20889;&#20837;&#20256;&#36755;&#23618;&#20043;&#21069;&#26377;&#19968;&#20010;
                        &#26368;&#22823;&#24310;&#26102;&#65288;&#27627;&#31186;&#65289;&#65292;&#36798;&#21040;&#25209;&#37327;&#20889;&#20837;&#30340;&#30446;&#30340;&#12290;&#36825;&#26679;&#21487;&#20197;&#25552;&#39640;&#23567;&#28040;&#24687;&#30340;&#21457;&#36865;&#25928;&#29575;&#12290;&#20294;&#36825;&#26679;&#20570;&#20250;&#22686;&#21152;&#21333;&#20010;&#28040;&#24687;&#30340;&#24179;&#22343;&#21457;&#36865;
                        &#24310;&#36831;&#12290;&#40664;&#35748;&#20540;&#20026;<tt class="literal">0</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">direct-deliver</tt>&#12290;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#21518;&#65292;&#40664;&#35748;&#26159;&#30001;&#19968;&#20010;&#19981;&#21516;&#30340;&#32447;&#31243;&#26469;&#23558;&#28040;&#24687;&#20256;&#36882;
                        &#21040;&#25509;&#25910;&#32773;&#12290;&#36825;&#26679;&#21487;&#20197;&#20351;&#26381;&#21153;&#30340;&#21585;&#21520;&#37327;&#21644;&#21487;&#25193;&#23637;&#24615;&#36798;&#21040;&#26368;&#20339;&#65292;&#29305;&#21035;&#26159;&#22312;&#22810;&#26680;&#30340;&#31995;&#32479;&#19978;&#25928;&#26524;&#26356;&#20026;&#26126;&#26174;&#12290;&#20294;&#26159;&#32447;&#31243;&#20999;&#25442;
                        &#20250;&#24102;&#26469;&#19968;&#20123;&#20256;&#36882;&#30340;&#24310;&#36831;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#24310;&#36831;&#26368;&#23567;&#65292;&#24182;&#19981;&#22312;&#24847;&#21585;&#21520;&#37327;&#30340;&#35805;&#65292;&#21487;&#20197;&#23558;&#21442;&#25968;<tt class="literal">direct-deliver</tt>&#35774;&#20026;true&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;&#22914;&#26524;&#20320;&#26356;&#24076;&#26395;&#26377;
                        &#36739;&#22823;&#30340;&#21585;&#21520;&#37327;&#30340;&#35805;&#65292;&#23558;&#23427;&#35774;&#20026;<tt class="literal">false</tt>&#12290;</p></li><li><p><tt class="literal">nio-remoting-threads</tt>&#12290;&#22914;&#26524;&#20351;&#29992;NIO&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#20250;&#20351;&#29992;&#31995;&#32479;&#20013;&#22788;&#29702;
                        &#22120;&#20869;&#26680;&#65288;&#25110;&#36229;&#32447;&#31243;&#65289;&#25968;&#37327;&#19977;&#20493;&#30340;&#32447;&#31243;&#26469;&#22788;&#29702;&#25509;&#25910;&#30340;&#25968;&#25454;&#21253;&#12290;&#20869;&#26680;&#30340;&#25968;&#37327;&#26159;&#36890;&#36807;&#35843;&#29992;<tt class="literal">Runtime.getRuntime().availableProcessors()</tt>&#26469;&#24471;&#21040;&#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#36825;&#20010;&#25968;&#37327;&#65292;
                        &#20320;&#21487;&#20197;&#35774;&#23450;&#26412;&#21442;&#25968;&#12290;&#40664;&#35748;&#30340;&#20540;&#26159;<tt class="literal">-1</tt>&#65292;&#34920;&#31034;&#32447;&#31243;&#25968;&#20026;<tt class="literal">Runtime.getRuntime().availableProcessors()</tt> * 3&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3013"></a>16.4.2.&nbsp;&#37197;&#32622;Netty SSL</h3></div></div><div></div></div><p>Netty SSL&#30340;&#37197;&#32622;&#19982;Netty TCP&#30456;&#20284;&#12290;&#23427;&#37319;&#29992;&#20102;&#23433;&#20840;&#22871;&#25509;&#23383;&#23618;&#65288;SSL&#65289;&#26469;&#25552;&#20379;&#21152;&#23494;&#30340;TCP&#36830;&#25509;&#12290;</p><p>&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;Netty SSL&#30340;&#20363;&#23376;&#26469;&#28436;&#31034;&#20854;&#37197;&#32622;&#21644;&#24212;&#29992;&#12290;</p><p>Netty SSL&#25317;&#26377;Netty TCP&#19968;&#26679;&#30340;&#21442;&#25968;&#65292;&#21478;&#22806;&#36824;&#26377;&#19979;&#21015;&#30340;&#38468;&#21152;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">ssl-enabled</tt>&#12290;&#24517;&#39035;&#35774;&#20026;<tt class="literal">true</tt>&#20197;&#20351;&#29992;SSL&#12290;</p></li><li><p><tt class="literal">key-store-path</tt>&#12290;&#23384;&#25918;SSL&#23494;&#38053;&#30340;&#36335;&#24452;&#65288;key store)&#12290;&#36825;&#26159;&#23384;&#25918;&#23458;&#25143;&#31471;&#35777;&#20070;&#30340;&#22320;&#26041;&#12290;</p></li><li><p><tt class="literal">key-store-password</tt>&#12290;&#29992;&#20110;&#35775;&#38382;key store&#30340;&#23494;&#30721;&#12290;</p></li><li><p><tt class="literal">trust-store-path</tt>&#12290;&#26381;&#21153;&#22120;&#31471;&#23384;&#25918;&#21487;&#20449;&#20219;&#23458;&#25143;&#35777;&#20070;&#30340;&#36335;&#24452;&#12290;</p></li><li><p><tt class="literal">trust-store-password</tt>&#12290;&#29992;&#20110;&#35775;&#38382;&#21487;&#20449;&#20219;&#23458;&#25143;&#35777;&#20070;&#65288;trust store)&#30340;&#23494;&#30721;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3051"></a>16.4.3.&nbsp;&#37197;&#32622;Netty HTTP</h3></div></div><div></div></div><p>Netty HTTP &#36890;&#36807;HTTP&#36890;&#36947;&#20256;&#36865;&#25968;&#25454;&#21253;&#12290;&#22312;&#26377;&#20123;&#29992;&#25143;&#29615;&#22659;&#20013;&#38450;&#28779;&#22681;&#21482;&#20801;&#35768;&#26377;HTTP&#36890;&#20449;&#65292;&#36825;&#26102;&#37319;&#29992;Netty HTTP&#20316;&#20026;HornetQ
                &#30340;&#20256;&#36755;&#23618;&#23601;&#33021;&#35299;&#20915;&#38382;&#39064;&#12290;</p><p>&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;Netty HTTP&#30340;&#20363;&#23376;&#26469;&#28436;&#31034;&#20854;&#37197;&#32622;&#21644;&#24212;&#29992;&#12290;</p><p>Netty HTTP&#20855;&#26377;&#21644;Netty TCP&#21516;&#26679;&#30340;&#37197;&#32622;&#21442;&#25968;&#65292;&#21478;&#22806;&#23427;&#36824;&#26377;&#20197;&#19979;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">http-enabled</tt>&#12290;&#22914;&#26524;&#35201;&#20351;&#29992;HTTP&#65292;&#36825;&#20010;&#21442;&#25968;&#24517;&#39035;&#35774;&#20026;<tt class="literal">true</tt>&#12290;</p></li><li><p><tt class="literal">http-client-idle-time</tt>&#12290;&#23458;&#25143;&#31471;&#31354;&#38386;&#26102;&#38388;&#12290;&#22914;&#26524;&#23458;&#25143;&#31471;&#30340;&#31354;&#38386;&#26102;&#38388;&#36229;&#36807;
                        &#36825;&#20010;&#20540;&#65292;Netty&#23601;&#20250;&#21457;&#36865;&#19968;&#20010;&#31354;&#30340;HTTP&#35831;&#27714;&#20197;&#20445;&#25345;&#36830;&#25509;&#19981;&#34987;&#20851;&#38381;&#12290;</p></li><li><p><tt class="literal">http-client-idle-scan-period</tt>&#12290;&#25195;&#25551;&#31354;&#38386;&#23458;&#25143;&#31471;&#30340;&#38388;&#38548;&#26102;&#38388;&#12290;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">http-response-time</tt>&#12290;&#26381;&#21153;&#22120;&#31471;&#21521;&#23458;&#25143;&#31471;&#21457;&#36865;&#31354;&#30340;http&#21709;&#24212;&#21069;&#30340;&#26368;&#22823;&#31561;&#24453;&#26102;&#38388;&#12290;</p></li><li><p><tt class="literal">http-server-scan-period</tt>&#12290;&#26381;&#21153;&#22120;&#25195;&#25551;&#38656;&#35201;&#21709;&#24212;&#30340;&#23458;&#25143;&#31471;&#30340;&#26102;&#38388;&#38388;&#38548;&#12290;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">http-requires-session-id</tt>&#12290;&#22914;&#26524;&#35774;&#20026;true&#65292;&#23458;&#25143;&#31471;&#22312;&#31532;&#19968;&#27425;&#35831;&#27714;&#21518;&#23558;&#31561;&#24453;
                        &#25509;&#25910;&#19968;&#20010;&#20250;&#35805;ID&#12290;http &#36830;&#25509;&#22120;&#29992;&#23427;&#26469;&#36830;&#25509;servlet&#25509;&#25910;&#22120;&#65288;&#19981;&#24314;&#35758;&#36825;&#26679;&#20351;&#29992;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3094"></a>16.4.4.&nbsp;&#37197;&#32622;Netty Servlet</h3></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#20351;&#29992;Netty servlet&#26469;&#20256;&#36755;&#28040;&#24687;&#12290;&#20351;&#29992;servlet&#21487;&#20197;&#23558;HornetQ&#30340;&#25968;&#25454;&#36890;&#36807;HTTP&#20256;&#36865;&#21040;&#19968;&#20010;
                &#36816;&#34892;&#30340;servlet&#65292;&#20877;&#30001;servlet&#36716;&#21457;&#32473;HornetQ&#26381;&#21153;&#22120;&#12290;</p><p>servlet&#19982;HTTP&#30340;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#65292;&#24403;&#29992;HTTP&#20256;&#36755;&#26102;&#65292;HornetQ&#22914;&#21516;&#19968;&#20010;web&#26381;&#21153;&#22120;&#65292;&#23427;&#30417;&#21548;&#22312;&#26576;&#20010;&#31471;&#21475;&#19978;&#30340;HTTP
                &#35831;&#27714;&#24182;&#36820;&#22238;&#21709;&#24212;&#12290;&#27604;&#22914;80&#31471;&#21475;&#25110;8080&#31471;&#21475;&#12290;&#32780;&#24403;&#20351;&#29992;servlet&#26102;&#65292;HornetQ&#30340;&#20256;&#36755;&#25968;&#25454;&#26159;&#36890;&#36807;&#36816;&#34892;&#22312;&#26576;&#19968;servlet&#23481;&#22120;
                &#20013;&#30340;&#19968;&#20010;&#29305;&#23450;&#30340;servlet&#26469;&#36716;&#21457;&#30340;&#12290;&#32780;&#36825;&#20010;sevlet&#23481;&#22120;&#20013;&#21516;&#26102;&#36824;&#21487;&#33021;&#36816;&#34892;&#20854;&#20182;&#30340;&#24212;&#29992;&#65292;&#22914;web&#26381;&#21153;&#12290;&#24403;&#19968;&#20010;&#20844;&#21496;&#26377;&#22810;&#20010;&#24212;&#29992;
                &#20294;&#21482;&#20801;&#35768;&#19968;&#20010;http&#31471;&#21475;&#21487;&#20197;&#35775;&#38382;&#26102;&#65292;servlet&#20256;&#36755;&#21487;&#20197;&#24456;&#22909;&#30340;&#35299;&#20915;HornetQ&#30340;&#20256;&#36755;&#38382;&#39064;&#12290;</p><p>&#35831;&#21442;&#35265;HornetQ&#25152;&#25552;&#20379;&#30340;servlet&#20363;&#23376;&#26469;&#20102;&#35299;&#35814;&#32454;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;</p><p>&#35201;&#22312;HornetQ&#20013;&#20351;&#29992;Netty servlet&#20256;&#36755;&#26041;&#24335;&#65292;&#38656;&#35201;&#20197;&#19979;&#27493;&#39588;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#37096;&#32626;servlet&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;web.xml&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4"&gt;
   &lt;servlet&gt;
      &lt;servlet-name&gt;HornetQServlet&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.jboss.netty.channel.socket.http.HttpTunnelingServlet&lt;/servlet-class&gt;
      &lt;init-param&gt;
             &lt;param-name&gt;endpoint&lt;/param-name&gt;
             &lt;param-value&gt;local:org.hornetq&lt;/param-value&gt;
           &lt;/init-param&gt;
           &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
   &lt;/servlet&gt;

   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;HornetQServlet&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/HornetQServlet&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt;

</pre></li><li><p>&#25105;&#20204;&#36824;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#21152;&#19978;&#19968;&#20010;&#29305;&#27530;&#30340;Netty invm &#25509;&#25910;&#22120;&#12290;</p><p>&#19979;&#38754;&#26159;&#20174;<tt class="literal">hornetq-configuration.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#25688;&#21462;&#30340;&#23450;&#20041;&#25509;&#25910;&#22120;&#30340;&#37197;&#32622;&#37096;&#20998;&#65306;</p><pre class="programlisting">                    
&lt;acceptors&gt;

      &lt;acceptor name="netty-invm"&gt;
         &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
         &lt;/factory-class&gt;
         &lt;param key="use-invm" value="true"/&gt;
         &lt;param key="host" value="org.hornetq"/&gt;
      &lt;/acceptor&gt;

&lt;/acceptors&gt;                                         
                </pre></li><li><p>&#26368;&#21518;&#25105;&#20204;&#38656;&#35201;&#22312;&#23458;&#25143;&#31471;&#37197;&#32622;&#36830;&#25509;&#22120;&#65292;&#20063;&#26159;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#26469;&#20570;&#12290;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;connectors&gt;

      &lt;connector name="netty-servlet"&gt;
         &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
         &lt;/factory-class&gt;
         &lt;param key="host" value="localhost"/&gt;
         &lt;param key="port" value="8080"/&gt;
         &lt;param key="use-servlet" value="true"/&gt;
         &lt;param key="servlet-path" value="/messaging/HornetQServlet"/&gt;
      &lt;/connector&gt;

 &lt;/connectors&gt;</pre></li></ul></div><p>&#19979;&#38754;&#21015;&#20986;&#20102;&#21021;&#22987;&#21270;&#21442;&#25968;&#20197;&#21450;&#23427;&#20204;&#30340;&#29992;&#36884;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>endpoint - Netty&#25509;&#25910;&#22120;&#30340;&#21517;&#23383;&#12290;servlet&#23558;&#21521;&#23427;&#36716;&#21457;&#25968;&#25454;&#21253;&#12290;&#23427;&#19982;<tt class="literal">host</tt>&#21442;&#25968;&#30340;&#20540;&#26159;&#23545;&#24212;&#30340;&#12290;</p></li></ul></div><p>&#22312;<tt class="literal">web.xml</tt>&#20013;&#23450;&#20041;&#30340;servlet&#30340;URL&#24418;&#24335;&#19982;&#22312;&#36830;&#25509;&#22120;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;
                <tt class="literal">servlet-path</tt>&#20540;&#24212;&#35813;&#30456;&#21305;&#37197;&#12290;</p><p>servlet&#21487;&#20197;&#19982;SSL&#19968;&#36215;&#20351;&#29992;&#12290;&#21482;&#38656;&#35201;&#22312;&#36830;&#25509;&#22120;&#37197;&#32622;&#20013;&#21152;&#19978;&#19979;&#38754;&#30340;&#37197;&#32622;&#21363;&#21487;&#65306;</p><pre class="programlisting">    &lt;connector name="netty-servlet"&gt;
         &lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;
         &lt;param key="host" value="localhost"/&gt;
         &lt;param key="port" value="8443"/&gt;
         &lt;param key="use-servlet" value="true"/&gt;
         &lt;param key="servlet-path" value="/messaging/HornetQServlet"/&gt;
         &lt;param key="ssl-enabled" value="true"/&gt;
         &lt;param key="key-store-path" value="path to a keystoree"/&gt;
         &lt;param key="key-store-password" value="keystore password"/&gt;
      &lt;/connector&gt;
</pre><p>&#21478;&#22806;&#20320;&#36824;&#38656;&#35201;&#20026;&#26381;&#21153;&#22120;&#25351;&#23450;&#19968;&#20010;KeyStore&#12290;&#25171;&#24320;<tt class="literal">server/default/deploy/jbossweb.sar</tt>
                   &#19979;&#30340;<tt class="literal">server.xml</tt>&#25991;&#20214;&#65292;&#25353;&#29031;&#19979;&#38754;&#30340;&#20869;&#23481;&#32534;&#36753;&#20854;&#20013;&#30340;SSL&#65295;TLS&#36830;&#25509;&#22120;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;Connector protocol="HTTP/1.1" SSLEnabled="true"
           port="8443" address="${jboss.bind.address}"
           scheme="https" secure="true" clientAuth="false"
           keystoreFile="path to a keystore"
           keystorePass="keystore password" sslProtocol = "TLS" /&gt;

</pre><p>SSL&#38656;&#35201;keystore&#21644;&#35775;&#38382;&#23494;&#30721;&#12290;&#21442;&#35265;servlet ssl&#20363;&#23376;&#20197;&#20102;&#35299;&#26356;&#22810;&#30340;&#26377;&#20851;&#20449;&#24687;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="connection-ttl"></a>Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;</h2></div></div><div></div></div><p>&#26412;&#31456;&#23558;&#35752;&#35770;&#36830;&#25509;&#30340;&#29983;&#23384;&#26102;&#38388;&#65288;TTL&#65289;&#20197;&#21450;HornetQ&#22914;&#20309;&#22788;&#29702;&#20986;&#29616;&#25925;&#38556;&#30340;&#23458;&#25143;&#31471;&#25110;&#32773;&#24322;&#24120;&#36864;&#20986;&#30340;&#23458;&#25143;&#31471;&#65288;&#21363;&#23458;&#25143;&#31471;&#22312;
        &#36864;&#20986;&#26102;&#27809;&#26377;&#21512;&#29702;&#30340;&#20851;&#38381;&#30456;&#20851;&#36164;&#28304;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="dead.connections"></a>17.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#23545;&#22833;&#25928;&#36830;&#25509;&#30340;&#28165;&#38500;</h2></div></div><div></div></div><p>&#24403;&#23458;&#25143;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#36864;&#20986;&#26102;&#65292;&#24212;&#35813;&#20851;&#38381;&#25152;&#20351;&#29992;&#30340;&#36164;&#28304;&#12290;&#22312;<tt class="literal">finally</tt>&#36827;&#34892;&#36164;&#28304;&#30340;&#20851;&#38381;
            &#26159;&#19968;&#20010;&#24456;&#22909;&#30340;&#26041;&#27861;&#12290;</p><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#19968;&#20010;Hornet&#23458;&#25143;&#31471;&#22312;finally&#20013;&#20851;&#38381;&#20102;&#23427;&#30340;&#20250;&#35805;&#65288;session&#65289;&#21644;&#20250;&#35805;&#24037;&#21378;&#65288;session factory&#65289;&#65306;</p><pre class="programlisting">
ClientSessionFactory sf = null;
ClientSession session = null;

try
{
   sf = HornetQClient.createClientSessionFactory(...);

   session = sf.createSession(...);
   
   ... do some stuff with the session...
}
finally
{
   if (session != null)
   {
      session.close();
   }
   
   if (sf != null)
   {
      sf.close();
   }
}
        </pre><p>&#19979;&#38754;&#30340;&#20363;&#23376;&#32473;&#20986;&#20102;&#19968;&#20010;JMS&#23458;&#25143;&#31471;&#26159;&#22914;&#20309;&#36866;&#24403;&#20851;&#38381;&#30456;&#20851;&#36164;&#28304;&#30340;&#65306;</p><pre class="programlisting">
Connection jmsConnection = null;

try
{
   ConnectionFactory jmsConnectionFactory = HornetQJMSClient.createConnectionFactory(...);

   jmsConnection = jmsConnectionFactory.createConnection();

   ... do some stuff with the connection...
}
finally
{
   if (connection != null)
   {
      connection.close();
   }
}
        </pre><p>&#28982;&#32780;&#26377;&#26102;&#20505;&#36164;&#28304;&#22312;&#23458;&#25143;&#31471;&#24471;&#19981;&#21040;&#21512;&#29702;&#30340;&#20851;&#38381;&#12290;&#26377;&#30340;&#23458;&#25143;&#31471;&#24212;&#29992;&#22312;&#32467;&#26463;&#26102;&#24536;&#35760;&#20102;&#20851;&#38381;&#36164;&#28304;&#65292;&#26377;&#30340;&#23458;&#25143;&#31471;&#26377;&#26102;&#21457;&#29983;&#25925;&#38556;&#23548;&#33268;
            &#31243;&#24207;&#31361;&#28982;&#20013;&#26029;&#65292;&#30456;&#20851;&#36164;&#28304;&#20063;&#27809;&#26377;&#26469;&#24471;&#21450;&#20851;&#38381;&#65281;</p><p>&#22914;&#26524;&#19978;&#36848;&#24773;&#20917;&#21457;&#29983;&#20102;&#65292;&#37027;&#20040;&#36825;&#20123;&#36164;&#28304;&#23601;&#20250;&#30041;&#22312;&#26381;&#21153;&#22120;&#31471;&#32780;&#19981;&#20250;&#34987;&#28165;&#29702;&#12290;&#36825;&#23601;&#20250;&#36896;&#25104;&#36164;&#28304;&#27844;&#28431;&#29616;&#35937;&#24182;&#26368;&#32066;&#23548;&#33268;&#26381;&#21153;&#22120;&#20869;&#23384;
            &#28322;&#20986;&#25110;&#20854;&#23427;&#36164;&#28304;&#30340;&#28322;&#20986;&#38169;&#35823;&#12290;</p><p>&#22240;&#27492;&#22312;&#26381;&#21153;&#22120;&#31471;&#35201;&#26377;&#26576;&#31181;&#26426;&#21046;&#26469;&#36991;&#20813;&#36164;&#28304;&#30340;&#27844;&#28431;&#12290;&#20063;&#23601;&#26159;&#23545;&#26080;&#25928;&#36164;&#28304;&#36827;&#34892;&#22238;&#25910;&#12290;&#22312;&#21028;&#26029;&#20160;&#20040;&#26159;&#26080;&#25928;&#36164;&#28304;&#26102;&#65292;HornetQ
            &#32771;&#34385;&#21040;&#20102;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#30340;&#24773;&#20917;&#12290;&#23601;&#26159;&#24403;&#19968;&#20010;&#36830;&#25509;&#30001;&#20110;&#32593;&#32476;&#20020;&#26102;&#20013;&#26029;&#21518;&#21448;&#24674;&#22797;&#27491;&#24120;&#26102;&#65292;&#23458;&#25143;&#31471;&#26377;&#21487;&#33021;&#36890;&#36807;&#19981;&#26029;&#37325;&#35797;
            &#25104;&#21151;&#22320;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#31471;&#12290;&#22914;&#26524;&#26381;&#21153;&#22120;&#31471;&#36807;&#26089;&#28165;&#38500;&#20102;&#30456;&#20851;&#30340;&#36830;&#25509;&#36164;&#28304;&#65292;&#21017;&#23458;&#25143;&#31471;&#23601;&#21487;&#33021;&#37325;&#35797;&#22833;&#36133;&#12290;</p><p>HornetQ&#30340;&#36164;&#28304;&#22238;&#25910;&#26159;&#23436;&#20840;&#21487;&#37197;&#32622;&#30340;&#12290;&#27599;&#20010; <tt class="literal">ClientSessionFactory</tt> &#26377;&#19968;&#20010;<span class="emphasis"><em>&#36830;&#25509; TTL</em></span>&#30340;&#21442;&#25968;&#12290;
            &#36825;&#20010;&#21442;&#25968;&#30340;&#24847;&#20041;&#26159;&#24403;&#23458;&#25143;&#31471;&#30340;&#19968;&#20010;&#36830;&#25509;&#27809;&#26377;&#20219;&#20309;&#25968;&#21040;&#36798;&#26381;&#21153;&#22120;&#26102;&#65292;&#26381;&#21153;&#22120;&#20805;&#35768;&#36825;&#20010;&#36830;&#25509;&#26377;&#25928;&#30340;&#26368;&#38271;&#26102;&#38388;&#12290;&#23458;&#25143;&#31471;&#36890;&#36807;&#23450;
            &#26102;&#21521;&#26381;&#21153;&#22120;&#31471;&#21457;&#36865;&#8220;ping&#8220;&#25968;&#25454;&#21253;&#26469;&#32500;&#25345;&#36830;&#25509;&#30340;&#26377;&#25928;&#65292;&#20197;&#20813;&#34987;&#26381;&#21153;&#22120;&#20851;&#25481;&#12290;&#22914;&#26524;&#26381;&#21153;&#22120;&#22312;TTL&#25351;&#23450;&#30340;&#26102;&#38388;&#20869;&#27809;&#26377;&#25910;&#21040;&#20219;&#20309;
            &#25968;&#25454;&#21253;&#65292;&#21017;&#35748;&#20026;&#35813;&#36830;&#25509;&#26080;&#25928;&#65292;&#32487;&#32780;&#20851;&#38381;&#19982;&#35813;&#36830;&#25509;&#30456;&#20851;&#30340;&#25152;&#26377;&#30340;&#20250;&#35805;&#65288;session&#65289;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;<tt class="literal">HornetQConnectionFactory</tt>&#30340;<tt class="literal">ConnectionTTL</tt>
            &#23646;&#24615;&#26159;&#29992;&#26469;&#23450;&#20041;&#36830;&#25509;&#30340;&#23384;&#27963;&#26102;&#38388;&#30340;&#12290;&#22914;&#26524;&#20320;&#23558;JMS&#36830;&#25509;&#24037;&#21378;&#37096;&#32626;&#21040;JNDI&#20013;&#65292;&#21017;&#24212;&#20351;&#29992;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;<tt class="literal">connection-ttl</tt>&#21442;&#25968;&#26469;&#23450;&#20041;&#36830;&#25509;&#30340;TTL&#12290;</p><p>&#40664;&#35748;&#30340;&#36830;&#25509;TTL&#20540;&#26159;<tt class="literal">60000</tt>&#27627;&#31186;&#65292;&#21363;&#19968;&#20998;&#38047;&#12290; <tt class="literal">ConnectionTTL</tt>
            &#35774;&#20026;<tt class="literal">-1</tt>&#34920;&#31034;&#26381;&#21153;&#22120;&#27704;&#36828;&#19981;&#26816;&#27979;&#36229;&#26102;&#30340;&#36830;&#25509;&#12290;</p><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#35753;&#23458;&#25143;&#31471;&#26469;&#35268;&#23450;&#36830;&#25509;&#23384;&#27963;&#26102;&#38388;&#65288;TTL&#65289;&#65292;&#20320;&#21487;&#20197;&#22312;&#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;
            <tt class="literal">connection-ttl-override</tt>&#23646;&#24615;&#12290;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">-1</tt>&#65292;&#34920;&#31034;
            &#26381;&#21153;&#22120;&#31471;&#35813;&#23646;&#24615;&#26080;&#25928;&#65288;&#21363;&#23458;&#25143;&#31471;&#21487;&#20197;&#23450;&#20041;&#33258;&#24049;&#30340;&#36830;&#25509;TTL&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3243"></a>17.1.1.&nbsp;&#20851;&#38381;&#27809;&#26377;&#34987;&#25104;&#21151;&#20851;&#38381;&#30340;&#26680;&#24515;&#20250;&#35805;&#25110;JMS&#36830;&#25509;</h3></div></div><div></div></div><p>&#22914;&#21069;&#25152;&#36848;&#65292;&#22312;&#20351;&#29992;&#23436;&#27605;&#21518;&#22312;<tt class="literal">finally</tt>&#20013;&#23558;&#25152;&#26377;&#30340;&#26680;&#24515;&#20250;&#35805;&#25110;JMS&#36830;&#25509;&#20851;&#38381;&#26159;&#21313;&#20998;&#37325;&#35201;&#30340;&#12290;</p><p>&#22914;&#26524;&#20320;&#27809;&#26377;&#36825;&#26679;&#20570;&#65292;HornetQ&#20250;&#22312;&#25289;&#22334;&#22238;&#25910;&#26102;&#36827;&#34892;&#26816;&#27979;&#24182;&#20250;&#22312;&#26085;&#24535;&#20013;&#25171;&#21360;&#31867;&#20284;&#20197;&#19979;&#30340;&#35686;&#21578;&#65288;&#22914;&#26524;&#26159;JMS&#21017;&#22312;&#35686;&#21578;&#20013;
                  &#26159;&#30456;&#24212;&#30340;JMS&#36830;&#25509;&#65289;&#65306;</p><pre class="programlisting">
                
[Finalizer] 20:14:43,244 WARNING [org.hornetq.core.client.impl.DelegatingSession]  I'm closin
g a ClientSession you left open. Please make sure you close all ClientSessions explicitly before let
ting them go out of scope!
[Finalizer] 20:14:43,244 WARNING [org.hornetq.core.client.impl.DelegatingSession]  The sessi
on you didn't close was created here:
java.lang.Exception
at org.hornetq.core.client.impl.DelegatingSession.&lt;init&gt;(DelegatingSession.java:83)
at org.acme.yourproject.YourClass (YourClass.java:666)    
                
            </pre><p>HornetQ&#28982;&#21518;&#23558;&#26410;&#20851;&#38381;&#30340;&#36830;&#25509;&#65295;&#20250;&#35805;&#20851;&#38381;&#12290;</p><p>&#27880;&#24847;&#22312;&#26085;&#24535;&#30340;&#35686;&#21578;&#20013;&#36824;&#32473;&#20986;&#20102;&#21019;&#24314;JMS&#36830;&#25509;&#65295;&#23458;&#25143;&#31471;&#20250;&#35805;&#30340;&#20855;&#20307;&#34892;&#21495;&#65292;&#20197;&#20415;&#20934;&#30830;&#22320;&#30830;&#23450;&#20986;&#38169;&#30340;&#22320;&#26041;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3259"></a>17.2.&nbsp;&#23458;&#25143;&#31471;&#30340;&#25925;&#38556;&#26816;&#27979;</h2></div></div><div></div></div><p>&#21069;&#38754;&#35762;&#36848;&#20102;&#23458;&#25143;&#31471;&#22914;&#20309;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;ping&#20197;&#21450;&#26381;&#21153;&#22120;&#31471;&#22914;&#20309;&#28165;&#29702;&#22833;&#25928;&#30340;&#36830;&#25509;&#12290;&#21457;&#36865;ping&#36824;&#26377;&#21478;&#22806;&#19968;&#20010;&#30446;&#30340;&#65292;&#23601;&#26159;&#33021;
            &#35753;&#23458;&#25143;&#31471;&#26816;&#27979;&#32593;&#32476;&#25110;&#26381;&#21153;&#22120;&#26159;&#21542;&#20986;&#29616;&#25925;&#38556;&#12290;</p><p>&#20174;&#23458;&#25143;&#31471;&#30340;&#35282;&#24230;&#26469;&#30475;&#65292;&#21482;&#35201;&#23458;&#25143;&#31471;&#33021;&#20174;&#19968;&#20010;&#36830;&#25509;&#19981;&#26029;&#25509;&#25910;&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#65292;&#37027;&#20040;&#36825;&#20010;&#36830;&#25509;&#23601;&#34987;&#35748;&#20026;&#26159;&#19968;&#20010;&#26377;&#25928;&#30340;&#36830;&#25509;&#12290;</p><p>&#22914;&#26524;&#22312;&#23646;&#24615;<tt class="literal">client-failure-check-period</tt>&#25152;&#23450;&#20041;&#30340;&#26102;&#38388;&#20869;&#65288;&#21333;&#20301;&#27627;&#31186;&#65289;&#23458;&#25143;&#31471;&#27809;&#26377;
            &#25910;&#21040;&#20219;&#20309;&#25968;&#25454;&#65292;&#23458;&#25143;&#31471;&#23601;&#35748;&#20026;&#36825;&#20204;&#36830;&#25509;&#21457;&#29983;&#20102;&#25925;&#38556;&#12290;&#26681;&#25454;&#19981;&#21516;&#30340;&#37197;&#32622;&#65292;&#23458;&#25143;&#31471;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#35201;&#20040;&#36827;&#34892;failover&#65292;&#35201;&#20040;
            &#35843;&#29992;<tt class="literal">FailureListener</tt>&#30340;&#25509;&#21475;&#65288;&#25110;&#32773;&#26159;JMS&#30340;<tt class="literal">ExceptionListener</tt>&#65289;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#36825;&#20010;&#21442;&#25968;&#26159;<tt class="literal">HornetQConnectionFactory</tt>&#30340;<tt class="literal">ClientFailureCheckPeriod</tt>&#12290;
            &#22914;&#26524;&#20320;&#21521;JNDI&#37096;&#32626;JMS&#36830;&#25509;&#24037;&#21378;&#65292;&#37027;&#20040;&#30456;&#24212;&#30340;&#21442;&#25968;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#21442;&#25968;&#21517;
            &#20026;<tt class="literal">client-failure-check-period</tt>&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">30000</tt>&#27627;&#31186;&#65292;&#21363;&#21322;&#20998;&#38047;&#12290;<tt class="literal">-1</tt>&#34920;&#31034;&#23458;&#25143;&#31471;&#19981;&#26816;&#26597;
            &#36830;&#25509;&#30340;&#26377;&#25928;&#24615;&#12290;&#21363;&#19981;&#35770;&#26159;&#21542;&#26377;&#25968;&#25454;&#26469;&#33258;&#26381;&#21153;&#22120;&#65292;&#36830;&#25509;&#37117;&#19968;&#30452;&#26377;&#25928;&#12290;&#36825;&#19968;&#21442;&#25968;&#36890;&#24120;&#35201;&#27604;&#26381;&#21153;&#22120;&#31471;&#30340;&#36830;&#25509;TTL&#23567;&#35768;&#22810;&#65292;&#20197;&#20351;
            &#23458;&#25143;&#31471;&#22312;&#20986;&#29616;&#30701;&#26242;&#36830;&#25509;&#25925;&#38556;&#30340;&#24773;&#20917;&#19979;&#21487;&#20197;&#19982;&#26381;&#21153;&#22120;&#25104;&#21151;&#22320;&#37325;&#26032;&#36830;&#25509;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="connection-ttl.async-connection-execution"></a>17.3.&nbsp;&#37197;&#32622;&#24322;&#27493;&#36830;&#25509;&#20219;&#21153;&#25191;&#34892;</h2></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#26381;&#21153;&#22120;&#25509;&#25910;&#21040;&#30340;&#25968;&#25454;&#21253;&#34987;&#36828;&#31243;&#27169;&#22359;&#30340;&#32447;&#31243;&#22788;&#29702;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#36828;&#31243;&#27169;&#22359;&#30340;&#32447;&#31243;&#34987;&#38271;&#26102;&#38388;&#21344;&#29992;&#65292;&#25968;&#25454;&#21253;&#21487;&#20197;&#36716;&#32473;&#21478;&#22806;&#30340;&#19968;&#20010;&#32447;&#31243;&#27744;&#26469;&#22788;&#29702;&#12290;&#35201;&#27880;&#24847;&#36825;&#26679;&#20570;&#30340;&#22686;&#21152;&#20102;&#19968;&#20123;&#26102;&#38388;&#24310;&#36831;&#12290;
            &#22240;&#27492;&#22914;&#26524;&#25968;&#25454;&#21253;&#22788;&#29702;&#32791;&#26102;&#24456;&#23569;&#65292;&#36824;&#26159;&#30001;&#36828;&#31243;&#27169;&#22359;&#32447;&#31243;&#26469;&#22788;&#29702;&#36739;&#22909;&#12290;

            &#35201;&#37197;&#32622;&#36825;&#26679;&#30340;&#24322;&#27493;&#36830;&#25509;&#24456;&#34892;&#20219;&#21153;&#65292;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;
                <tt class="literal">async-connection-execution-enabled</tt> &#21442;&#25968;&#35774;&#20026;<tt class="literal">true</tt>
               &#65288;&#40664;&#35748;&#20540;&#26159; <tt class="literal">true</tt>&#65289;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="transaction-config"></a>Chapter&nbsp;18.&nbsp;&#37197;&#32622;&#36164;&#28304;&#31649;&#29702;&#22120;&#65288;Resource Manager&#65289;</h2></div></div><div></div></div><p>HornetQ&#26377;&#33258;&#24049;&#30340;&#36164;&#28304;&#31649;&#29702;&#22120;&#26469;&#31649;&#29702;JTA&#20107;&#21153;&#12290;&#24403;&#19968;&#20010;&#20107;&#21153;&#24320;&#22987;&#26102;&#65292;&#36164;&#28304;&#31649;&#29702;&#22120;&#23601;&#24471;&#21040;&#36890;&#30693;&#24182;&#35760;&#24405;&#19979;&#35813;&#20107;&#21153;&#21644;&#23427;&#30340;&#29366;&#24577;&#12290;
        &#26377;&#30340;&#26102;&#20505;&#19968;&#20010;&#20107;&#21153;&#24320;&#22987;&#21518;&#65292;&#26368;&#32066;&#34987;&#24536;&#35760;&#12290;&#26377;&#26102;&#23458;&#25143;&#31471;&#23849;&#28291;&#24182;&#19988;&#20877;&#20063;&#19981;&#33021;&#24674;&#22797;&#65292;&#36825;&#26679;&#30340;&#35805;&#35813;&#20107;&#21153;&#23601;&#19968;&#30452;&#23384;&#22312;&#19979;&#21435;&#12290;</p><p>&#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#21487;&#20197;&#37197;&#32622;HornetQ&#26469;&#25195;&#25551;&#36807;&#26399;&#30340;&#20107;&#21153;&#65292;&#24182;&#19988;&#23558;&#23427;&#20204;&#22238;&#28378;&#12290;&#40664;&#35748;&#20540;&#26159;3000000&#27627;&#31186;&#65288;5&#20998;&#38047;&#65289;&#12290;
        &#23427;&#34920;&#31034;&#20219;&#20309;&#36229;&#36807;5&#20998;&#38047;&#30340;&#20107;&#21153;&#37117;&#23558;&#34987;&#21024;&#38500;&#12290;&#36825;&#20010;&#36229;&#26102;&#23545;&#24212;&#30340;&#21442;&#25968;&#26159;<tt class="literal">transaction-timeout</tt>&#65292;&#23427;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#65288;&#21333;&#20301;&#27627;&#31186;&#65289;&#12290;
        &#21442;&#25968;<tt class="literal">transaction-timeout-scan-period</tt>&#23450;&#20041;&#20102;HornetQ&#25195;&#25551;&#36807;&#26399;&#20107;&#21153;&#30340;&#38388;&#38548;&#12290;</p><p>&#27880;&#24847;HornetQ&#19981;&#20250;&#21333;&#26041;&#38754;&#22238;&#28378;&#19968;&#20010;&#24050;&#32463;&#22788;&#20110;&#20934;&#22791;&#29366;&#24577;&#30340;XA&#20107;&#21153;&#12290;&#22914;&#26524;&#20320;&#35748;&#20026;&#36825;&#20123;&#20107;&#21153;&#27704;&#36828;&#19981;&#20250;&#34987;&#20107;&#21153;&#31649;&#29702;&#22120;&#65288;transaction manager&#65289;
        &#26469;&#22788;&#29702;&#30340;&#35805;&#65292;&#20320;&#24517;&#39035;&#36890;&#36807;&#31649;&#29702;&#25509;&#21475;&#26469;&#36827;&#34892;&#22238;&#28378;&#12290;</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="flow-control"></a>Chapter&nbsp;19.&nbsp;&#27969;&#25511;&#21046;</h2></div></div><div></div></div><p>&#27969;&#25511;&#21046;&#26159;&#25351;&#23545;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#20043;&#38388;&#65292;&#25110;&#32773;&#26381;&#21153;&#22120;&#20043;&#38388;&#30340;&#25968;&#25454;&#27969;&#37327;&#36827;&#34892;&#38480;&#21046;&#65292;&#30446;&#30340;&#26159;&#38450;&#27490;&#36890;&#36805;&#21452;&#26041;&#30001;&#20110;&#22823;&#37327;&#25968;&#25454;&#32780;&#36807;&#36733;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3375"></a>19.1.&nbsp;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#27969;&#25511;&#21046;</h2></div></div><div></div></div><p>&#36825;&#26159;&#25351;&#23545;&#23458;&#25143;&#31471;&#30340;&#25509;&#25910;&#32773;&#25509;&#25910;&#28040;&#24687;&#27969;&#30340;&#25511;&#21046;&#12290;&#36890;&#24120;&#20026;&#20102;&#25552;&#39640;&#25928;&#29575;&#65292;&#22312;&#23458;&#25143;&#31471;&#36890;&#24120;&#23558;&#28040;&#24687;&#25918;&#20837;&#32531;&#23384;&#65292;&#28982;&#21518;&#20877;&#23558;&#32531;&#23384;&#20013;
         &#30340;&#28040;&#24687;&#20256;&#36882;&#32473;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#12290;&#24403;&#25509;&#25910;&#32773;&#22788;&#29702;&#28040;&#24687;&#30340;&#36895;&#24230;&#23567;&#20110;&#26381;&#21153;&#22120;&#21521;&#20854;&#21457;&#36865;&#28040;&#24687;&#30340;&#36895;&#24230;&#26102;&#65292;&#23601;&#21487;&#33021;&#36896;&#25104;&#28040;&#24687;&#22312;
         &#23458;&#25143;&#31471;&#19981;&#26029;&#31215;&#32047;&#65292;&#26368;&#32066;&#24341;&#36215;&#20869;&#23384;&#28322;&#20986;&#30340;&#38169;&#35823;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="flow-control.consumer.window"></a>19.1.1.&nbsp;&#22522;&#20110;&#31383;&#21475;&#30340;&#27969;&#25511;&#21046;</h3></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#30340;&#25509;&#25910;&#32773;&#19968;&#31471;&#20250;&#23558;&#28040;&#24687;&#36827;&#34892;&#32531;&#23384;&#20197;&#25552;&#39640;&#24615;&#33021;&#12290;&#22914;&#26524;&#19981;&#36825;&#26679;&#20570;&#65292;&#37027;&#27599;&#27425;&#25509;&#25910;&#32773;&#25910;&#21040;&#19968;&#20010;&#28040;&#24687;&#65292;
            &#37117;&#24471;&#36890;&#30693;&#26381;&#21153;&#22120;&#20256;&#36882;&#19979;&#19968;&#20010;&#28040;&#24687;&#65292;&#28982;&#21518;&#26381;&#21153;&#22120;&#20877;&#23558;&#19979;&#19968;&#20010;&#28040;&#24687;&#20256;&#36882;&#36807;&#26469;&#12290;&#36825;&#23601;&#22686;&#21152;&#20102;&#36890;&#20449;&#30340;&#27425;&#25968;&#12290;</p><p>&#23545;&#20110;&#27599;&#19968;&#27425;&#28040;&#24687;&#20256;&#36882;&#37117;&#26377;&#19968;&#20010;&#32593;&#32476;&#30340;&#24448;&#36820;&#36890;&#20449;&#65292;&#36825;&#26679;&#38477;&#20302;&#20102;&#24615;&#33021;&#12290;</p><p>&#20026;&#20102;&#36991;&#20813;&#36825;&#26679;&#65292;HornetQ&#23558;&#27599;&#20010;&#25509;&#25910;&#32773;&#30340;&#28040;&#24687;&#25552;&#21069;&#25509;&#25910;&#21040;&#19968;&#22788;&#32531;&#23384;&#20013;&#12290;&#27599;&#20010;&#32531;&#23384;&#30340;&#26368;&#22823;&#20540;&#30001;
            <tt class="literal">consumer-window-size</tt>&#21442;&#25968;&#20915;&#23450;&#65288;&#21333;&#20301;&#23383;&#33410;&#65289;&#12290;</p><p><tt class="literal">consumer-window-size</tt>&#30340;&#40664;&#35748;&#20540;&#26159; 1 MiB &#65288;1024 * 1024
            &#23383;&#33410;&#65289;&#12290;</p><p>&#23427;&#30340;&#20540;&#21487;&#20197;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">-1</tt> &#20195;&#34920;<span class="emphasis"><em>&#22823;&#23567;&#26080;&#38480;&#21046;</em></span>&#30340;&#32531;&#23384;&#12290;</p></li><li><p><tt class="literal">0</tt> &#20195;&#34920;&#19981;&#32531;&#23384;&#28040;&#24687;&#12290;&#21442;&#35265;&#30456;&#20851;&#30340;&#20363;&#23376; <a href="#examples.no-consumer-buffering" title="11.1.32.&nbsp;&#38646;&#25509;&#25910;&#32531;&#20914;">Section&nbsp;11.1.32, &#8220;&#38646;&#25509;&#25910;&#32531;&#20914;&#8221;</a>&#12290;</p></li><li><p><tt class="literal">&gt;0</tt> &#20195;&#34920;&#32531;&#23384;&#30340;&#26368;&#22823;&#23383;&#33410;&#25968;&#12290;</p></li></ul></div><p>&#21512;&#29702;&#35774;&#32622;&#25509;&#25910;&#32773;&#30340;&#31383;&#21475;&#22823;&#23567;&#21487;&#20197;&#26174;&#33879;&#25552;&#39640;&#24615;&#33021;&#12290;&#19979;&#38754;&#26159;&#20004;&#20010;&#26497;&#31471;&#30340;&#20363;&#23376;&#65306;</p><div class="variablelist"><dl><dt><span class="term">&#24555;&#36895;&#25509;&#25910;&#32773;</span></dt><dd><p>&#25152;&#35859;&#24555;&#36895;&#25509;&#25910;&#32773;&#26159;&#25351;&#28040;&#24687;&#30340;&#25509;&#25910;&#32773;&#22788;&#29702;&#28040;&#24687;&#30340;&#36895;&#24230;&#22823;&#20110;&#31561;&#20110;&#23427;&#30340;&#25509;&#25910;&#36895;&#24230;&#12290;</p><p>&#23545;&#20110;&#24555;&#36895;&#25509;&#25910;&#32773;&#25110;&#20197;&#23558;<tt class="literal">consumer-window-size</tt>&#35774;&#20026;
                     -1&#65292;&#20351;&#24471;&#23458;&#25143;&#31471;&#30340;&#28040;&#24687;&#32531;&#23384;&#30340;&#22823;&#23567; <span class="emphasis"><em>&#26080;&#38480;&#21046;</em></span>&#12290;</p><p>&#35831;&#35880;&#24910;&#20351;&#29992;&#36825;&#19968;&#35774;&#32622;&#20540;&#65306; &#22914;&#26524;&#25509;&#25910;&#32773;&#30340;&#28040;&#24687;&#22788;&#29702;&#36895;&#24230;&#27604;&#25509;&#25910;&#36895;&#24230;&#23567;&#65292;&#21487;&#36896;&#25104;&#23458;&#25143;&#31471;&#20869;&#23384;&#28322;&#20986;&#12290;</p></dd><dt><span class="term">&#24930;&#25509;&#25910;&#32773;</span></dt><dd><p>&#25152;&#35859;&#24930;&#25509;&#25910;&#32773;&#26159;&#25351;&#25509;&#25910;&#32773;&#27599;&#22788;&#29702;&#19968;&#20010;&#28040;&#24687;&#23601;&#35201;&#33457;&#24456;&#22810;&#26102;&#38388;&#12290;&#36825;&#26679;&#23558;&#32531;&#23384;&#20851;&#38381;&#23601;&#27604;&#36739;&#21512;&#29702;&#12290;&#26381;&#21153;&#22120;&#21487;&#20197;&#23558;&#22810;&#20313;&#30340;
                     &#28040;&#24687;&#20256;&#36882;&#32473;&#20854;&#23427;&#30340;&#25509;&#25910;&#32773;&#12290;</p><p>&#20551;&#35774;&#19968;&#20010;&#38431;&#21015;&#26377;2&#20010;&#25509;&#25910;&#32773;&#12290;&#20854;&#20013;&#19968;&#20010;&#25509;&#25910;&#32773;&#38750;&#24120;&#24930;&#12290;&#28040;&#24687;&#34987;&#36718;&#27969;&#20256;&#36882;&#21040;&#20004;&#20010;&#25509;&#25910;&#32773;&#12290;&#20854;&#20013;&#30340;&#24555;&#36895;&#25509;&#25910;&#32773;
                     &#24456;&#24555;&#23558;&#20854;&#32531;&#23384;&#20013;&#30340;&#28040;&#24687;&#22788;&#29702;&#23436;&#27605;&#12290;&#21516;&#26102;&#24930;&#25509;&#25910;&#32773;&#30340;&#32531;&#23384;&#20013;&#36824;&#26377;&#19968;&#20123;&#28040;&#24687;&#31561;&#24453;&#22788;&#29702;&#12290;&#36825;&#26679;&#24555;&#36895;&#25509;&#25910;&#32773;&#22312;&#19968;&#27573;&#26102;&#38388;
                     &#20869;&#23601;&#22788;&#20110;&#31354;&#38386;&#29366;&#24577;&#12290;</p><p>&#36825;&#26102;&#65292;&#23558;<tt class="literal">consumer-window-size</tt> &#35774;&#20026;0 &#65288;&#27809;&#26377;&#32531;&#23384;&#65289;&#65292;&#23601;&#21487;&#20197;&#23558;&#23427;&#21464;&#25104;
                     &#24930;&#25509;&#25910;&#32773;&#12290;&#36825;&#26679;&#22312;&#24930;&#25509;&#25910;&#32773;&#19968;&#26041;&#19981;&#20250;&#32531;&#23384;&#28040;&#24687;&#65292;&#36825;&#20351;&#24471;&#24555;&#30340;&#25509;&#25910;&#32773;&#21487;&#20197;&#22788;&#29702;&#26356;&#22810;&#30340;&#28040;&#24687;&#65292;&#32780;&#19981;&#33267;&#20110;&#22788;&#20110;&#31354;&#38386;
                     &#29366;&#24577;&#12290;</p><p>&#36825;&#35828;&#26126;&#23558;&#23427;&#35774;&#32622;&#20026;0&#21487;&#20197;&#25511;&#21046;&#19968;&#20010;&#38431;&#21015;&#30340;&#28040;&#24687;&#22312;&#22810;&#20010;&#25509;&#25910;&#32773;&#20043;&#38388;&#30340;&#28040;&#24687;&#20998;&#37197;&#12290;</p></dd></dl></div><p>&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#24456;&#38590;&#21028;&#26029;&#21738;&#20123;&#25509;&#25910;&#32773;&#26159;&#24555;&#36895;&#30340;&#65292;&#21738;&#20123;&#26159;&#24930;&#36895;&#30340;&#12290;&#24448;&#24448;&#24456;&#22810;&#25509;&#25910;&#32773;&#26159;&#22788;&#20110;&#20004;&#32773;&#20043;&#38388;&#12290;&#36825;&#26679;&#23545;&#20110;
            <tt class="literal">consumer-window-size</tt>&#30340;&#20540;&#23601;&#35201;&#35270;&#20855;&#20307;&#24773;&#20917;&#32780;&#23450;&#12290;&#26377;&#26102;&#38656;&#35201;&#36827;&#34892;&#19968;&#23450;&#30340;&#27979;&#35797;
            &#26469;&#20915;&#23450;&#23427;&#30340;&#26368;&#20339;&#20540;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;&#23558;&#20854;&#35774;&#20026;1MiB&#21487;&#20197;&#28385;&#36275;&#22823;&#22810;&#25968;&#30340;&#24212;&#29992;&#24773;&#20917;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="flow-control.core.api"></a>19.1.1.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;&#36827;&#34892;&#27969;&#25511;&#21046;</h4></div></div><div></div></div><p>Hornet&#30340;&#26680;&#24515;&#25509;&#21475;&#20013;&#65292;<tt class="literal">ClientSessionFactory.setConsumerWindowSize()</tt>&#26041;&#27861;&#21644;&#19968;&#20123;
                  <tt class="literal">ClientSession.createConsumer()</tt>&#26041;&#27861;&#21487;&#20197;&#25511;&#21046;&#27969;&#30340;&#31383;&#21475;&#22823;&#23567;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3469"></a>19.1.1.2.&nbsp;&#20351;&#29992;JMS&#30340;&#27969;&#25511;&#21046;</h4></div></div><div></div></div><p>&#33509;&#20351;&#29992;JNDI&#26469;&#33719;&#24471;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#38656;&#35201;&#36890;&#36807;&#37197;&#32622;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#26469;&#35774;&#23450;&#31383;&#21475;&#22823;&#23567;&#65306;</p><pre class="programlisting">
&lt;connection-factory name="ConnectionFactory"&gt;
   &lt;connectors&gt;
      &lt;connector-ref connector-name="netty-connector"/&gt;
   &lt;/connectors&gt;
   &lt;entries&gt;
      &lt;entry name="ConnectionFactory"/&gt;       
   &lt;/entries&gt;
      
   &lt;!-- Set the consumer window size to 0 to have *no* buffer on the client side --&gt;
   &lt;consumer-window-size&gt;0&lt;/consumer-window-size&gt;
&lt;/connection-factory&gt;
            </pre><p>&#22914;&#26524;&#30452;&#25509;&#23454;&#20363;&#21270;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#20351;&#29992;<tt class="literal">HornetQConnectionFactory.setConsumerWindowSize()</tt>
               &#26041;&#27861;&#26469;&#35774;&#23450;&#31383;&#21475;&#22823;&#23567;&#12290;</p><p>&#21442;&#35265;&#20363;&#23376;<a href="#examples.no-consumer-buffering" title="11.1.32.&nbsp;&#38646;&#25509;&#25910;&#32531;&#20914;">Section&nbsp;11.1.32, &#8220;&#38646;&#25509;&#25910;&#32531;&#20914;&#8221;</a>&#26469;&#20102;&#35299;&#22914;&#20309;&#37197;&#32622;HornetQ&#26469;
               &#20851;&#38381;&#25509;&#25910;&#32773;&#30340;&#32531;&#23384;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3488"></a>19.1.2.&nbsp;&#36895;&#29575;&#27969;&#25511;&#21046;</h3></div></div><div></div></div><p>&#25105;&#20204;&#36824;&#21487;&#20197;&#36890;&#36807;&#25511;&#21046; <span class="emphasis"><em>&#36895;&#29575;</em></span>&#30340;&#26041;&#27861;&#26469;&#25511;&#21046;&#27969;&#12290;&#36825;&#26159;&#19968;&#31181;&#20687;&#35843;&#33410;&#33410;&#27969;&#38400;&#30340;&#24418;&#24335;&#12290;
            &#36825;&#31181;&#26041;&#27861;&#20445;&#35777;&#19968;&#20010;&#25509;&#25910;&#32773;&#25509;&#25910;&#28040;&#24687;&#30340;&#36895;&#29575;&#19981;&#20250;&#36229;&#36807;&#35774;&#23450;&#30340;&#20540;&#12290; </p><p>&#36895;&#29575;&#24517;&#39035;&#26159;&#19968;&#20010;&#27491;&#25972;&#25968;&#12290;&#23427;&#20195;&#34920;&#26368;&#22823;&#25509;&#25910;&#36895;&#24230;&#65292;&#21333;&#20301;&#26159;&#28040;&#24687;&#27599;&#31186;&#12290;&#23558;&#23427;&#35774;&#20026;<tt class="literal">-1</tt>&#23601;&#20250;&#20851;&#38381;&#36895;&#29575;&#27969;&#25511;&#21046;&#12290;
               &#40664;&#35748;&#20540;&#26159;<tt class="literal">-1</tt>&#12290;</p><p>&#21442;&#35265;&#26377;&#20851;&#36895;&#29575;&#27969;&#25511;&#21046;&#30340;&#20363;&#23376;<a href="#examples.consumer-rate-limit" title="11.1.10.&nbsp;&#38480;&#21046;&#25509;&#25910;&#36895;&#29575;">Section&nbsp;11.1.10, &#8220;&#38480;&#21046;&#25509;&#25910;&#36895;&#29575;&#8221;</a>&#20197;&#36827;&#19968;&#27493;&#20102;&#35299;&#23427;&#30340;&#24037;&#20316;&#21407;&#29702;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="flow-control.rate.core.api"></a>19.1.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</h4></div></div><div></div></div><p>HornetQ&#30340;&#26680;&#24515;&#25509;&#21475;&#30340;<tt class="literal">ClientSessionFactory.setConsumerMaxRate(int consumerMaxRate)</tt>&#26041;&#27861;&#25110;
               &#26576;&#20123;<tt class="literal">ClientSession.createConsumer()</tt>&#26041;&#27861;&#21487;&#20197;&#23454;&#29616;&#23545;&#27969;&#30340;&#36895;&#29575;&#25511;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3519"></a>19.1.2.2.&nbsp;&#20351;&#29992;JMS</h4></div></div><div></div></div><p>&#22914;&#26524;&#20174;JNDI&#20013;&#33719;&#21462;&#36830;&#25509;&#24037;&#21378;&#65292;&#38656;&#35201;&#36890;&#36807;&#37197;&#32622;<tt class="literal">hornetq-jms.xml</tt>&#26469;&#36827;&#34892;&#36895;&#29575;&#27969;&#25511;&#21046;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;       
      &lt;/entries&gt;
      &lt;!-- We limit consumers created on this connection factory to consume messages
             at a maximum rate
      of 10 messages per sec --&gt;
      &lt;consumer-max-rate&gt;10&lt;/consumer-max-rate&gt;
 &lt;/connection-factory&gt;</pre><p>&#22914;&#26524;&#26159;&#30452;&#25509;&#23454;&#20363;&#21270;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#36890;&#36807;<tt class="literal">HornetQConnectionFactory.setConsumerMaxRate(int
                  consumerMaxRate)</tt>&#26041;&#27861;&#26469;&#35774;&#23450;&#26368;&#22823;&#27969;&#36895;&#29575;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#36895;&#29575;&#27969;&#25511;&#21046;&#21487;&#20197;&#19982;&#31383;&#21475;&#27969;&#25511;&#21046;&#32467;&#21512;&#20351;&#29992;&#12290;&#36895;&#29575;&#25511;&#21046;&#21482;&#35268;&#23450;&#20102;&#23458;&#25143;&#31471;&#27599;&#31186;&#25509;&#25910;&#22810;&#23569;&#28040;&#24687;&#12290;&#22240;&#27492;&#22914;&#26524;&#20320;&#35774;&#23450;
                  &#20102;&#19968;&#20010;&#36739;&#20302;&#30340;&#36895;&#29575;&#65292;&#21516;&#26102;&#21448;&#35774;&#23450;&#20102;&#19968;&#20010;&#22823;&#30340;&#32531;&#23384;&#31383;&#21475;&#65292;&#37027;&#20040;&#23458;&#25143;&#31471;&#30340;&#32531;&#23384;&#23558;&#20250;&#24456;&#24555;&#39281;&#21644;&#12290;</p></div><p>&#21442;&#35265;&#25509;&#25910;&#36895;&#29575;&#27969;&#25511;&#21046;&#30340;&#20363;&#23376;<a href="#examples.consumer-rate-limit" title="11.1.10.&nbsp;&#38480;&#21046;&#25509;&#25910;&#36895;&#29575;">Section&nbsp;11.1.10, &#8220;&#38480;&#21046;&#25509;&#25910;&#36895;&#29575;&#8221;</a>&#36827;&#19968;&#27493;&#20102;&#35299;&#36895;&#29575;&#27969;&#25511;&#21046;&#30340;&#37197;&#32622;&#21644;&#20351;&#29992;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3541"></a>19.2.&nbsp;&#21457;&#36865;&#32773;&#65288;producer&#65289;&#30340;&#27969;&#25511;&#21046;</h2></div></div><div></div></div><p>HornetQ&#36824;&#21487;&#20197;&#25511;&#21046;&#23458;&#25143;&#31471;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;&#28040;&#24687;&#30340;&#36895;&#24230;&#65292;&#20197;&#36991;&#20813;&#26381;&#21153;&#22120;&#22240;&#22823;&#37327;&#25968;&#25454;&#36807;&#36733;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3546"></a>19.2.1.&nbsp;&#22522;&#20110;&#31383;&#21475;&#30340;&#27969;&#25511;&#21046;</h3></div></div><div></div></div><p>&#19982;&#25509;&#25910;&#32773;&#30340;&#30456;&#24212;&#30340;&#25511;&#21046;&#30456;&#20284;&#12290;&#22312;&#40664;&#35748;&#26465;&#20214;&#19979;&#65292;&#21457;&#36865;&#32773;&#35201;&#26377;&#36275;&#22815;&#30340;&#20221;&#39069;&#65288;credits&#65289;&#25165;&#21487;&#20197;&#21521;&#26381;&#21153;&#22120;&#30340;&#22320;&#22336;&#21457;&#36865;&#28040;&#24687;&#12290;
               &#36825;&#20010;&#20221;&#39069;&#23601;&#26159;&#28040;&#24687;&#30340;&#22823;&#23567;&#12290;</p><p>&#24403;&#21457;&#36865;&#32773;&#30340;&#20221;&#39069;&#19981;&#36275;&#26102;&#65292;&#23427;&#35201;&#21521;&#26381;&#21153;&#22120;&#35831;&#27714;&#26356;&#22810;&#30340;&#20221;&#39069;&#20197;&#20415;&#21457;&#36865;&#26356;&#22810;&#30340;&#28040;&#24687;&#12290;</p><p>&#21457;&#36865;&#32773;&#19968;&#27425;&#21521;&#26381;&#21153;&#22120;&#35831;&#27714;&#30340;&#20221;&#39069;&#20540;&#34987;&#31216;&#20026;<span class="italic">&#31383;&#21475;&#22823;&#23567;</span>&#12290;</p><p>&#20110;&#26159;&#31383;&#21475;&#22823;&#23567;&#23601;&#26159;&#25351;&#21457;&#36865;&#32773;&#21521;&#26381;&#21153;&#22120;&#19981;&#38388;&#26029;&#21457;&#36865;&#28040;&#24687;&#30340;&#24635;&#26368;&#22823;&#23383;&#33410;&#25968;&#12290;&#24403;&#21457;&#36865;&#23436;&#27605;&#26102;&#38656;&#20877;&#21521;&#26381;&#21153;&#22120;&#35831;&#27714;&#20221;&#39069;&#12290;&#36825;&#26679;&#23601;&#36991;&#20813;&#20102;
            &#26381;&#21153;&#22120;&#28040;&#24687;&#36807;&#36733;&#30340;&#24773;&#20917;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3560"></a>19.2.1.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</h4></div></div><div></div></div><p>&#33509;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;<tt class="literal">ClientSessionFactory.setProducerWindowSize(int producerWindowSize)</tt>
               &#26041;&#27861;&#21487;&#20197;&#23545;&#31383;&#21475;&#22823;&#23567;&#36827;&#34892;&#35774;&#23450;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3568"></a>19.2.1.2.&nbsp;&#20351;&#29992;JMS</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;JNDI&#26469;&#33719;&#24471;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#38656;&#35201;&#37197;&#32622;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20197;&#35774;&#23450;&#31383;&#21475;&#22823;&#23567;&#65306;</p><pre class="programlisting">
               &lt;connection-factory name="ConnectionFactory"&gt;
                  &lt;connectors&gt;
                     &lt;connector-ref connector-name="netty-connector"/&gt;
                  &lt;/connectors&gt;
                  &lt;entries&gt;
                     &lt;entry name="ConnectionFactory"/&gt;       
                  &lt;/entries&gt;
                  &lt;producer-window-size&gt;10&lt;/producer-window-size&gt;
               &lt;/connection-factory&gt;</pre><p>&#22914;&#26524;&#26159;&#30452;&#25509;&#23454;&#20363;&#21270;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#20351;&#29992;<tt class="literal">HornetQConnectionFactory.setProducerWindowSize(int
                  producerWindowSize)</tt>&#26041;&#27861;&#26469;&#35774;&#23450;&#31383;&#21475;&#22823;&#23567;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3583"></a>19.2.1.3.&nbsp;&#38480;&#23450;&#21457;&#36865;&#32773;&#31383;&#21475;&#27969;&#25511;&#21046;</h4></div></div><div></div></div><p>&#36890;&#24120;&#24773;&#20917;&#19979;&#23458;&#25143;&#31471;&#35831;&#27714;&#22810;&#23569;&#20221;&#39069;&#65292;HornetQ&#26381;&#21153;&#22120;&#23601;&#32473;&#20104;&#22810;&#23569;&#20221;&#39069;&#12290;&#28982;&#32780;&#25105;&#20204;&#36824;&#21487;&#20197;&#38024;&#23545;&#27599;&#20010;&#22320;&#22336;&#26469;&#35774;&#23450;&#19968;&#20010;&#26368;&#22823;
               &#30340;&#20221;&#39069;&#20540;&#65292;&#20197;&#20351;&#26381;&#21153;&#22120;&#32473;&#20986;&#30340;&#20221;&#39069;&#37117;&#19981;&#22823;&#20110;&#35813;&#20540;&#12290;&#36825;&#26679;&#21487;&#20197;&#38450;&#27490;&#19968;&#20010;&#22320;&#22336;&#30340;&#20869;&#23384;&#28322;&#20986;&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#26377;&#19968;&#20010;&#38431;&#21015;&#31216;&#20026;&#8220;myqueue&#8221;&#12290;&#23558;&#23427;&#30340;&#26368;&#22823;&#20869;&#23384;&#20540;&#35774;&#20026;10MiB&#65292;&#21017;&#26381;&#21153;&#22120;&#23601;&#20250;&#25511;&#21046;&#32473;&#20986;&#30340;&#20221;&#39069;&#20197;&#20445;&#35777;&#21521;&#35813;&#38431;&#21015;&#30340;&#22320;
               &#22336;&#21457;&#36865;&#28040;&#24687;&#26102;&#19981;&#20250;&#21344;&#22823;&#20110;10MiB&#30340;&#20869;&#23384;&#31354;&#38388;&#12290;</p><p>&#24403;&#19968;&#30456;&#22320;&#22336;&#24050;&#32463;&#28385;&#20102;&#30340;&#26102;&#20505;&#65292;&#21457;&#36865;&#32773;&#23558;&#20250;&#38459;&#22622;&#30452;&#21040;&#35813;&#22320;&#22336;&#26377;&#20102;&#22810;&#20313;&#30340;&#31354;&#38388;&#20026;&#27490;&#65292;&#21363;&#22320;&#22336;&#20013;&#30340;&#28040;&#24687;&#34987;&#25509;&#25910;&#20102;&#19968;&#37096;&#20998;&#21518;&#20351;&#24471;
               &#22320;&#22336;&#33150;&#20986;&#20102;&#19968;&#20123;&#31354;&#38388;&#12290;</p><p>&#25105;&#20204;&#23558;&#36825;&#31181;&#25511;&#21046;&#26041;&#27861;&#31216;&#20026;&#38480;&#23450;&#21457;&#36865;&#32773;&#31383;&#21475;&#27969;&#25511;&#21046;&#12290;&#36825;&#26159;&#19968;&#31181;&#26377;&#25928;&#30340;&#38450;&#27490;&#26381;&#21153;&#22120;&#20869;&#23384;&#28322;&#20986;&#30340;&#25163;&#27573;&#12290;</p><p>&#23427;&#21487;&#20197;&#30475;&#25104;&#26159;&#20998;&#39029;&#36716;&#23384;&#65288;paging&#65289;&#30340;&#21478;&#19968;&#31181;&#26041;&#27861;&#12290;&#20998;&#39029;&#36716;&#23384;&#19981;&#38459;&#22622;&#21457;&#36865;&#32773;&#65292;&#23427;&#23558;&#28040;&#24687;&#36716;&#23384;&#21040;&#23384;&#36142;&#20171;&#36136;&#19978;&#20197;&#33410;&#30465;&#20869;&#23384;&#30340;&#31354;&#38388;&#12290;</p><p>&#35201;&#37197;&#32622;&#19968;&#20010;&#22320;&#22336;&#30340;&#26368;&#22823;&#23481;&#37327;&#24182;&#21578;&#35785;&#26381;&#21153;&#22120;&#22312;&#22320;&#22336;&#28385;&#20102;&#30340;&#24773;&#20917;&#19979;&#38459;&#22622;&#21457;&#36865;&#32773;&#65292;&#20320;&#38656;&#35201;&#20026;&#35813;&#22320;&#22336;&#23450;&#20041;&#19968;&#20010;
               AddressSettings (<a href="#queue-attributes.address-settings" title="25.3.&nbsp;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;">Section&nbsp;25.3, &#8220;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;&#8221;</a>) &#24182;&#35774;&#23450;
               <tt class="literal">max-size-bytes</tt> &#21644; <tt class="literal">address-full-policy</tt>&#12290;</p><p>&#36825;&#20010;&#37197;&#32622;&#23545;&#25152;&#26377;&#27880;&#20876;&#21040;&#35813;&#22320;&#22336;&#30340;&#38431;&#21015;&#26377;&#25928;&#12290;&#21363;&#25152;&#26377;&#27880;&#20876;&#38431;&#21015;&#30340;&#24635;&#20869;&#23384;&#23558;&#19981;&#36229;&#36807; <tt class="literal">max-size-bytes</tt>&#12290;&#23545;&#20110;JMS topic&#24773;&#20917;&#21017;&#24847;&#35859;&#30528;&#35813;topic&#30340;&#25152;&#26377;&#35746;&#38405;&#30340;&#20869;&#23384;&#19981;&#33021;&#36229;&#36807;
                  max-size-bytes&#30340;&#35774;&#23450;&#20540;&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
               &lt;address-settings&gt;
                  &lt;address-setting match="jms.queue.exampleQueue"&gt;            
                     &lt;max-size-bytes&gt;100000&lt;/max-size-bytes&gt;
                     &lt;address-full-policy&gt;BLOCK&lt;/address-full-policy&gt;   
                  &lt;/address-setting&gt;
               &lt;/address-settings&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#23558;JMS&#38431;&#21015;"exampleQueue"&#30340;&#26368;&#22823;&#20869;&#23384;&#20540;&#35774;&#20026;
               100000 &#23383;&#33410;&#24182;&#19988;&#38459;&#22622;&#21457;&#36865;&#32773;&#20197;&#38450;&#27490;&#28040;&#24687;&#37327;&#36229;&#36807;&#36825;&#20010;&#20540;&#12290;</p><p>&#27880;&#24847;&#24517;&#39035;&#35774;&#32622; <tt class="literal">BLOCK</tt>&#30340;&#31574;&#30053;&#25165;&#33021;&#25171;&#24320;&#38480;&#23450;&#21457;&#36865;&#32773;&#31383;&#21475;&#25511;&#21046;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#35831;&#27880;&#24847;&#40664;&#35748;&#30340;&#37197;&#32622;&#19979;&#24403;&#19968;&#20010;&#22320;&#22336;&#20013;&#30340;&#28040;&#24687;&#37327;&#36798;&#21040;10MiB&#26102;&#65292;&#20854;&#25152;&#26377;&#30340;&#28040;&#24687;&#21457;&#36865;&#32773;&#23558;&#21464;&#20026;&#38459;&#22622;&#29366;&#24577;&#65292;&#20063;&#23601;&#26159;&#35828;
                  &#22312;&#27809;&#26377;&#25509;&#25910;&#30340;&#24773;&#20917;&#19979;&#20320;&#19981;&#33021;&#21521;&#19968;&#20010;&#22320;&#22336;&#19981;&#38459;&#22622;&#22320;&#19968;&#27425;&#21457;&#36865;&#36229;&#36807;10MiB&#30340;&#28040;&#24687;&#12290;&#35201;&#24819;&#22686;&#21152;&#36825;&#20010;&#38480;&#21046;&#65292;&#21487;&#20197;&#21152;&#22823;
                  <tt class="literal">max-size-bytes</tt>&#21442;&#25968;&#30340;&#20540;&#65292;&#25110;&#32773;&#35843;&#25972;&#22320;&#22336;&#30340;&#28040;&#24687;&#23481;&#37327;&#38480;&#21046;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3628"></a>19.2.2.&nbsp;&#36895;&#29575;&#27969;&#25511;&#21046;</h3></div></div><div></div></div><p>HornetQ&#20063;&#21487;&#20197;&#25511;&#21046;&#21457;&#36865;&#32773;&#21457;&#36865;&#28040;&#24687;&#30340;&#36895;&#29575;&#12290;&#21333;&#20301;&#26159;&#27599;&#31186;&#28040;&#24687;&#25968;&#12290;&#36890;&#36807;&#35774;&#23450;&#36895;&#29575;&#21487;&#20445;&#35777;&#21457;&#36865;&#32773;&#30340;&#21457;&#36865;&#36895;&#29575;&#19981;&#36229;&#36807;&#26576;&#20010;&#20540;&#12290;</p><p>&#36895;&#29575;&#24517;&#39035;&#26159;&#19968;&#20010;&#27491;&#25972;&#25968;&#12290;&#22914;&#26524;&#35774;&#20026; <tt class="literal">-1</tt> &#21017;&#20851;&#38381;&#36895;&#29575;&#27969;&#25511;&#21046;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">-1</tt>&#12290;</p><p>&#35831;&#21442;&#35265;&#20363;&#23376;<a href="#producer-rate-limiting-example" title="11.1.36.&nbsp;&#28040;&#24687;&#21457;&#36865;&#36895;&#24230;&#38480;&#21046;">Section&nbsp;11.1.36, &#8220;&#28040;&#24687;&#21457;&#36865;&#36895;&#24230;&#38480;&#21046;&#8221;</a>&#36827;&#19968;&#27493;&#20102;&#35299;&#36895;&#29575;&#27969;&#25511;&#21046;&#30340;&#20351;&#29992;&#26041;&#27861;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="flow-control.producer.rate.core.api"></a>19.2.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;<tt class="literal">ClientSessionFactory.setProducerMaxRate(int consumerMaxRate)</tt>&#26041;&#27861;&#25110;
                  &#26576;&#20123; <tt class="literal">ClientSession.createProducer()</tt>&#26041;&#27861;&#21487;&#20197;&#35774;&#32622;&#26368;&#22823;&#36895;&#29575;&#20540;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e3656"></a>19.2.2.2.&nbsp;&#20351;&#29992; JMS</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;JNDI&#65292;&#38656;&#35201;&#37197;&#32622;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;       
      &lt;/entries&gt;
      &lt;!-- We limit producers created on this connection factory to produce messages 
                at a maximum rate
      of 10 messages per sec --&gt;
      &lt;producer-max-rate&gt;10&lt;/producer-max-rate&gt;
 &lt;/connection-factory&gt;</pre><p>&#22914;&#26524;&#30452;&#25509;&#23454;&#20363;&#21270;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#20351;&#29992;<tt class="literal">HornetQConnectionFactory.setProducerMaxRate(int
                  consumerMaxRate)</tt>&#26041;&#27861;&#26469;&#35774;&#32622;&#12290;</p></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="send-guarantees"></a>Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3691"></a>20.1.&nbsp;&#20107;&#21153;&#20445;&#35777;</h2></div></div><div></div></div><p>&#22312;&#25552;&#20132;&#25110;&#22238;&#28378;&#20107;&#21153;&#26102;&#65292;HornetQ&#23558;&#25552;&#20132;&#25110;&#22238;&#28378;&#30340;&#35831;&#27714;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#65292;&#23458;&#25143;&#31471;&#38459;&#22622;&#31561;&#24453;&#26381;&#21153;&#22120;&#30340;&#21709;&#24212;&#12290;</p><p>&#24403;&#26381;&#21153;&#22120;&#31471;&#25910;&#21040;&#25552;&#20132;&#25110;&#22238;&#28378;&#30340;&#35831;&#27714;&#26102;&#65292;&#23427;&#23558;&#20107;&#21153;&#20449;&#24687;&#35760;&#24405;&#21040;&#26085;&#24535;&#65288;journal&#65289;&#20013;&#12290;&#28982;&#21518;&#21521;&#23458;&#25143;&#31471;&#21457;&#22238;
              &#21709;&#24212;&#12290;&#21442;&#25968;<tt class="literal">journal-sync-transactional</tt>&#25511;&#21046;&#30528;&#22914;&#20309;&#21521;&#23458;&#25143;&#31471;&#21457;&#22238;&#21709;&#24212;&#12290;
            &#22914;&#26524;&#23427;&#30340;&#20540;&#26159;<tt class="literal">false</tt>&#65292;&#26381;&#21153;&#22120;&#21521;&#23458;&#25143;&#31471;&#21457;&#22238;&#21709;&#24212;&#26102;&#20107;&#21153;&#30340;&#22788;&#29702;&#32080;&#26524;&#19981;&#19968;&#23450;&#24050;&#32463;&#34987;
            &#20445;&#23384;&#21040;&#30913;&#30424;&#20013;&#12290;&#21487;&#33021;&#20250;&#22312;&#20043;&#21518;&#30340;&#26576;&#20010;&#26102;&#38388;&#20445;&#23384;&#12290;&#22914;&#26524;&#26399;&#38388;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#37027;&#20040;&#20107;&#21153;&#30340;&#22788;&#29702;&#20449;&#24687;&#21487;&#33021;&#20002;&#22833;&#12290;
            &#24403;&#23427;&#30340;&#20540;&#26159;<tt class="literal">true</tt>&#26102;&#65292;&#26381;&#21153;&#22120;&#23558;&#20445;&#35777;&#22312;&#21521;&#23458;&#25143;&#31471;&#21457;&#22238;&#21709;&#24212;&#26102;&#65292;&#20107;&#21153;&#30340;&#22788;&#29702;&#20449;&#24687;
            &#24050;&#32463;&#34987;&#20445;&#23384;&#21040;&#20102;&#30913;&#30424;&#20013;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p><p>&#26174;&#28982;&#23558;&#36825;&#20010;&#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#21487;&#20197;&#25552;&#39640;&#24615;&#33021;&#65292;&#20294;&#26159;&#35201;&#20197;&#29306;&#29298;&#20107;&#21153;&#30340;&#25345;&#20037;&#24615;&#20026;&#20195;&#20215;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="non-transactional-sends"></a>20.2.&nbsp;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;</h2></div></div><div></div></div><p>&#20351;&#29992;&#38750;&#20107;&#21153;&#24615;&#20250;&#35805;&#21457;&#36865;&#28040;&#24687;&#26102;&#65292;&#32463;&#36807;&#36866;&#24403;&#37197;&#32622;HornetQ&#65292;&#23458;&#25143;&#31471;&#22312;&#21457;&#36865;&#21518;&#20197;&#38459;&#22622;&#30340;&#26041;&#24335;&#31561;&#24453;&#65292;&#30452;&#21040;&#30830;&#35748;&#21457;&#20986;
            &#30340;&#28040;&#24687;&#24050;&#32463;&#21040;&#36798;&#26381;&#21153;&#22120;&#21518;&#20877;&#36820;&#22238;&#12290;&#21487;&#20197;&#23545;&#25345;&#20037;&#21270;&#25110;&#38750;&#25345;&#20037;&#21270;&#30340;&#28040;&#24687;&#20998;&#21035;&#37197;&#32622;&#65292;&#20855;&#20307;&#21442;&#25968;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">BlockOnDurableSend</tt>&#12290;&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#21017;&#36890;&#36807;
                    &#38750;&#20107;&#21153;&#24615;&#20250;&#35805;&#21457;&#36865;&#25345;&#20037;&#28040;&#24687;&#26102;&#65292;&#27599;&#27425;&#21457;&#36865;&#37117;&#23558;&#38459;&#22622;&#30452;&#21040;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#24182;&#36820;&#22238;&#36890;&#30693;&#20026;&#27490;&#12290;&#40664;&#35748;&#20540;&#26159;
                     <tt class="literal">true</tt>&#12290;
                </p></li><li><p><tt class="literal">BlockOnNonDurableSend</tt>&#12290;&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#65292;
                    &#21017;&#36890;&#36807;&#38750;&#20107;&#21153;&#24615;&#20250;&#35805;&#21457;&#36865;&#38750;&#25345;&#20037;&#28040;&#24687;&#26102;&#65292;&#27599;&#27425;&#21457;&#36865;&#37117;&#23558;&#38459;&#22622;&#30452;&#21040;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#24182;&#36820;&#22238;&#36890;&#30693;&#20026;&#27490;&#12290;&#40664;&#35748;&#20540;&#26159;
                    <tt class="literal">false</tt>&#12290;</p></li></ul></div><p>&#23558;&#21457;&#36865;&#35774;&#32622;&#20026;&#38459;&#22622;&#26041;&#24335;&#20250;&#38477;&#20302;&#31243;&#24207;&#30340;&#25928;&#29575;&#12290;&#22240;&#20026;&#27599;&#27425;&#21457;&#36865;&#37117;&#38656;&#35201;&#19968;&#27425;&#32593;&#32476;&#24448;&#36820;&#30340;&#36807;&#31243;&#65292;&#28982;&#21518;&#25165;&#21487;&#20197;&#36827;&#34892;&#19979;&#27425;&#21457;&#36865;&#12290;
            &#36825;&#26679;&#21457;&#36865;&#28040;&#24687;&#30340;&#36895;&#24230;&#23558;&#21463;&#32593;&#32476;&#24448;&#36820;&#26102;&#38388;&#65288;RTT&#65289;&#30340;&#38480;&#21046;&#12290;&#36825;&#26679;&#20320;&#30340;&#32593;&#32476;&#24102;&#23485;&#23601;&#21487;&#33021;&#27809;&#26377;&#34987;&#20805;&#20998;&#21033;&#29992;&#12290;&#20026;&#20102;&#25552;&#39640;&#25928;&#29575;&#65292;&#25105;&#20204;
            &#24314;&#35758;&#37319;&#29992;&#20107;&#21153;&#26469;&#25209;&#37327;&#21457;&#36865;&#28040;&#24687;&#12290;&#22240;&#20026;&#22312;&#20107;&#21153;&#20013;&#65292;&#21482;&#26377;&#22312;&#25552;&#20132;&#25110;&#22238;&#28378;&#26102;&#38459;&#22622;&#12290;&#21478;&#22806;&#20320;&#36824;&#21487;&#20197;&#21033;&#29992;HornetQ&#39640;&#32423;&#30340;
            <span class="emphasis"><em>&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#21151;&#33021;</em></span>&#12290;&#36825;&#19968;&#21151;&#33021;&#22312;<a href="#asynchronous-send-acknowledgements" title="20.4.&nbsp;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;">Section&nbsp;20.4, &#8220;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#8221;</a>
            &#36827;&#34892;&#20102;&#25551;&#36848;&#12290;</p><p>&#20351;&#29992;JMS&#26102;&#65292;&#22914;&#26524;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#26159;&#22312;&#26381;&#21153;&#22120;&#31471;&#34987;&#27880;&#20876;&#21040;JNDI&#26381;&#21153;&#65292;&#20320;&#38656;&#35201;&#37197;&#32622;
                <tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">block-on-durable-send</tt>
                &#21644;<tt class="literal">block-on-non-durable-send</tt>&#12290;&#22914;&#26524;&#19981;&#20351;&#29992;JNDI&#65292;&#21487;&#20197;&#35843;&#29992;
                <tt class="literal">HornetQConnectionFactory</tt>&#30456;&#24212;&#30340;&#35774;&#32622;&#26041;&#27861;&#36827;&#34892;&#37197;&#32622;&#12290;</p><p>&#22914;&#26524;&#20320;&#20351;&#29992;&#30340;&#26159;&#20869;&#26680;&#26381;&#21153;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">ClientSessionFactory</tt>&#19978;&#29992;&#30456;&#20851;&#30340;&#26041;&#27861;&#35774;&#32622;&#30456;&#24212;&#30340;&#21442;&#25968;&#12290;</p><p>&#24403;&#26381;&#21153;&#22120;&#20174;&#19968;&#20010;&#38750;&#20107;&#21153;&#24615;&#30340;&#20250;&#35805;&#25910;&#21040;&#19968;&#20010;&#28040;&#24687;&#26102;&#65292;&#22914;&#26524;&#36825;&#20010;&#28040;&#24687;&#26159;&#25345;&#20037;&#30340;&#24182;&#19988;&#27492;&#28040;&#24687;&#34987;&#36335;&#30001;&#21040;&#33267;&#23569;&#19968;&#20010;&#25345;&#20037;&#30340;&#38431;&#21015;&#20013;&#65292;
            &#21017;&#35813;&#28040;&#24687;&#20250;&#34987;&#25345;&#20037;&#21270;&#21040;&#27704;&#20037;&#23384;&#36142;&#20171;&#36136;&#20013;&#12290;&#22914;&#26524;&#26085;&#24535;&#65288;journal&#65289;&#30340;&#21442;&#25968;<tt class="literal">journal-sync-non-transactional</tt>&#35774;&#20026;<tt class="literal">true</tt>&#65292;&#26381;&#21153;&#22120;&#22312;&#21521;&#23458;&#25143;
            &#21457;&#36865;&#21709;&#24212;&#26102;&#65292;&#23427;&#33021;&#20445;&#35777;&#28040;&#24687;&#24050;&#32463;&#34987;&#25345;&#20037;&#21270;&#21040;&#30913;&#30424;&#20013;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="send-guarantees.nontrans.acks"></a>20.3.&nbsp;&#38750;&#20107;&#21153;&#24615;&#36890;&#30693;&#30340;&#20445;&#35777;</h2></div></div><div></div></div><p>&#24403;&#23458;&#25143;&#31471;&#20351;&#29992;&#38750;&#20107;&#21153;&#24615;&#20250;&#35805;&#21521;&#26381;&#21153;&#22120;&#36890;&#30693;&#28040;&#24687;&#25910;&#21040;&#26102;&#65292;&#21487;&#20197;&#37197;&#32622;HornetQ&#20351;&#24471;&#23458;&#25143;&#31471;&#30340;&#36890;&#30693;&#38459;&#22622;&#30452;&#21040;&#26381;&#21153;&#22120;&#25910;&#21040;
            &#20102;&#36890;&#30693;&#24182;&#36820;&#22238;&#20026;&#27490;&#12290;&#20854;&#30456;&#24212;&#30340;&#37197;&#32622;&#21442;&#25968;&#26159;<tt class="literal">BlockOnAcknowledge</tt>&#12290;&#22914;&#26524;&#35813;&#21442;&#25968;&#35774;&#20026;
            <tt class="literal">true</tt>&#21017;&#25152;&#26377;&#30340;&#36890;&#36807;&#38750;&#20107;&#21153;&#20250;&#35805;&#30340;&#28040;&#24687;&#36890;&#30693;&#37117;&#26159;&#38459;&#22622;&#24335;&#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#30340;&#28040;&#24687;&#20256;&#36882;&#31574;&#30053;&#26159;
            <span class="emphasis"><em>&#26368;&#22810;&#19968;&#27425;</em></span>&#30340;&#35805;&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#23558;&#27492;&#21442;&#25968;&#35774;&#20026;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="asynchronous-send-acknowledgements"></a>20.4.&nbsp;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#20351;&#29992;&#30340;&#26159;&#38750;&#20107;&#21153;&#20250;&#35805;&#26469;&#21457;&#36865;&#28040;&#24687;&#65292;&#24182;&#19988;&#24076;&#26395;&#20445;&#35777;&#27599;&#20010;&#21457;&#36865;&#20986;&#21435;&#30340;&#28040;&#24687;&#37117;&#21040;&#36798;&#26381;&#21153;&#22120;&#30340;&#35805;&#65292;&#20320;&#21487;&#20197;&#23558;HornetQ&#37197;&#32622;
            &#25104;&#38459;&#22622;&#30340;&#26041;&#24335;&#65292;&#22914;<a href="#non-transactional-sends" title="20.2.&nbsp;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;">Section&nbsp;20.2, &#8220;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;&#8221;</a>&#35752;&#35770;&#30340;&#37027;&#26679;&#12290;&#36825;&#26679;&#20570;&#30340;&#19968;&#20010;&#32570;&#28857;&#26159;&#24615;&#33021;&#30340;&#38477;&#20302;&#12290;
            &#22240;&#20026;&#36825;&#26679;&#27599;&#21457;&#36865;&#19968;&#20010;&#28040;&#24687;&#23601;&#38656;&#35201;&#19968;&#27425;&#32593;&#32476;&#30340;&#24448;&#36820;&#36890;&#20449;&#12290;&#22914;&#26524;&#32593;&#32476;&#26102;&#24310;&#36234;&#38271;&#65292;&#28040;&#24687;&#21457;&#36865;&#30340;&#25928;&#29575;&#23601;&#36234;&#20302;&#12290;&#21516;&#26102;&#32593;&#32476;&#30340;&#24102;&#23485;&#23545;&#28040;&#24687;
            &#30340;&#21457;&#36865;&#27809;&#26377;&#24433;&#21709;&#12290;</p><p>&#25105;&#20204;&#26469;&#20570;&#19968;&#20010;&#31616;&#21333;&#30340;&#35745;&#31639;&#12290;&#20551;&#35774;&#26377;&#19968;&#20010;1Gib&#30340;&#32593;&#32476;&#65292;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#38388;&#24448;&#36820;&#26102;&#38388;&#20026;0.25ms&#12290;</p><p>&#36825;&#26679;&#65292;&#22312;&#38459;&#22622;&#26041;&#24335;&#30340;&#24773;&#20917;&#19979;&#65292;&#23458;&#25143;&#31471;<span class="emphasis"><em>&#26368;&#22823;</em></span>&#30340;&#28040;&#24687;&#21457;&#36865;&#36895;&#24230;&#20026; 1000/ 0.25 =
            4000 &#28040;&#24687;&#27599;&#31186;&#12290;</p><p>&#22914;&#26524;&#27599;&#20010;&#28040;&#24687;&#30340;&#22823;&#23567;&lt; 1500&#23383;&#33410;&#65292;&#32780;&#19988;&#32593;&#32476;&#30340;&#26368;&#22823;&#20256;&#36755;&#21333;&#20803;&#65288;MTU&#65289;&#26159;1500&#23383;&#33410;&#12290;&#37027;&#20040;&#29702;&#35770;&#19978;1GiB&#30340;&#32593;&#32476;
            &#26368;&#22823;&#30340;&#20256;&#36755;&#36895;&#29575;&#26159; (1024 * 1024 * 1024 / 8) / 1500 = 89478 &#28040;&#24687;&#27599;&#31186;&#65281;&#23613;&#31649;&#36825;&#19981;&#26159;&#19968;&#20010;&#31934;&#30830;&#30340;&#24037;&#31243;&#35745;&#31639;&#20294;
            &#20320;&#21487;&#20197;&#30475;&#20986;&#38459;&#22622;&#24335;&#30340;&#21457;&#36865;&#23545;&#24615;&#33021;&#30340;&#24433;&#21709;&#20250;&#26377;&#22810;&#22823;&#12290;</p><p>&#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;HornetQ&#25552;&#20379;&#20102;&#19968;&#31181;&#26032;&#30340;&#21151;&#33021;&#65292;&#31216;&#20026;<span class="emphasis"><em>&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;</em></span>&#12290;
            &#23427;&#20801;&#35768;&#28040;&#24687;&#20197;&#38750;&#38459;&#22622;&#30340;&#26041;&#24335;&#21457;&#36865;&#65292;&#21516;&#26102;&#20174;&#21478;&#19968;&#20010;&#36830;&#25509;&#27969;&#20013;&#24322;&#27493;&#22320;&#25509;&#25910;&#26381;&#21153;&#22120;&#30340;&#36890;&#30693;&#12290;&#36825;&#26679;&#23601;&#20351;&#24471;&#28040;&#24687;&#30340;&#21457;&#36865;&#19982;&#36890;&#30693;&#20998;&#24320;&#26469;&#65292;
            &#36991;&#20813;&#20102;&#38459;&#22622;&#26041;&#24335;&#24102;&#26469;&#30340;&#32570;&#28857;&#12290;&#22312;&#20445;&#35777;&#28040;&#24687;&#21487;&#34892;&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;&#30340;&#21516;&#26102;&#25552;&#39640;&#20102;&#21585;&#21520;&#37327;&#12290;</p><p>&#21442;&#25968;&#29992;&#26469;&#23450;&#20041;&#28040;&#24687;&#21457;&#36865;&#36890;&#30693;&#30340;&#31383;&#21475;&#22823;&#23567;&#12290;&#23427;&#23646;&#20110;&#36830;&#25509;&#24037;&#21378;&#25110;&#23458;&#25143;&#20250;&#35805;&#24037;&#21378;&#12290;&#21442;&#35265;<a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">Chapter&nbsp;34, <i>&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</i></a>
            &#20197;&#33719;&#21462;&#26356;&#22810;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3827"></a>20.4.1.&nbsp;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;</h3></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;API&#65292;&#20320;&#38656;&#35201;&#23454;&#29616;<tt class="literal">org.hornetq.api.core.client.SendAcknowledgementHandler</tt>&#25509;&#21475;&#24182;&#23558;&#19968;&#20010;&#23454;&#20363;&#35774;&#32622;&#21040;
                    <tt class="literal">ClientSession</tt>&#20013;&#12290;</p><p>&#28982;&#21518;&#20351;&#29992;&#36825;&#20010;<tt class="literal">ClientSession</tt>&#21457;&#36865;&#28040;&#24687;&#12290;&#24403;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#21518;&#65292;&#26381;&#21153;&#22120;&#21521;&#23458;&#25143;&#31471;&#24322;&#27493;&#22320;&#21457;&#36865;&#36890;&#30693;&#65292;
                &#24182;&#22312;&#23458;&#25143;&#31471;&#35843;&#29992;&#20320;&#30340;SendAcknowledgementHandler&#23454;&#20363;&#30340;<tt class="literal">sendAcknowledged(ClientMessage message)</tt>&#26041;&#27861;&#12290;&#20854;&#20013;&#20256;&#20837;&#30340;&#21442;&#25968;&#23601;&#26159;&#21457;&#36865;&#30340;&#28040;&#24687;&#30340;&#24341;&#29992;&#12290;</p><p>&#20026;&#20102;&#20351;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#27491;&#24120;&#24037;&#20316;&#20320;&#24517;&#39035;&#30830;&#20445;<tt class="literal">confirmation-window-size</tt>&#30340;&#20540;&#20026;&#19968;&#20010;&#27491;&#25972;&#25968;&#65292;&#20363;&#22914; 10MiB</p><p>&#30456;&#20851;&#30340;&#20363;&#23376;&#35831;&#21442;&#35265; <a href="#asynchronous-send-acknowledgements-example" title="11.1.45.&nbsp;&#21457;&#36865;&#36890;&#30693;">Section&nbsp;11.1.45, &#8220;&#21457;&#36865;&#36890;&#30693;&#8221;</a>&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="undelivered-messages"></a>Chapter&nbsp;21.&nbsp;&#28040;&#24687;&#20877;&#20256;&#36882;&#21450;&#26410;&#20256;&#36882;&#30340;&#28040;&#24687;</h2></div></div><div></div></div><p>&#28040;&#24687;&#26377;&#21487;&#33021;&#20256;&#36882;&#22833;&#36133;&#65288;&#27604;&#22914;&#30456;&#20851;&#30340;&#20107;&#21153;&#21457;&#29983;&#22238;&#28378;&#65289;&#12290;&#22833;&#36133;&#30340;&#28040;&#24687;&#23558;&#36864;&#22238;&#21040;&#38431;&#21015;&#20013;&#20934;&#22791;&#37325;&#26032;&#20256;&#36882;&#12290;&#36825;&#26679;&#23601;&#20250;&#20986;&#29616;
      &#19968;&#31181;&#24773;&#20917;&#65292;&#23601;&#26159;&#21516;&#19968;&#20010;&#28040;&#24687;&#20250;&#34987;&#21453;&#22797;&#30340;&#20256;&#36882;&#32780;&#24635;&#19981;&#25104;&#21151;&#65292;&#20197;&#33267;&#20110;&#20351;&#31995;&#32479;&#22788;&#20110;&#24537;&#30340;&#29366;&#24577;&#12290;</p><p>&#23545;&#20110;&#36825;&#26679;&#30340;&#28040;&#24687;&#25105;&#20204;&#26377;&#20004;&#31181;&#22788;&#29702;&#26041;&#27861;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#24310;&#36831;&#20877;&#20256;&#36882;</p><p>&#36825;&#31181;&#26041;&#27861;&#26159;&#35753;&#28040;&#24687;&#20877;&#27425;&#20256;&#36882;&#26102;&#26377;&#19968;&#23450;&#30340;&#26102;&#38388;&#24310;&#36831;&#65292;&#36825;&#26679;&#23458;&#25143;&#31471;&#23601;&#26377;&#26426;&#20250;&#20174;&#25925;&#38556;&#20013;&#24674;&#22797;&#65292;&#21516;&#26102;&#32593;&#32476;&#36830;&#25509;&#21644;CPU&#36164;&#28304;
            &#20063;&#19981;&#33268;&#20110;&#34987;&#36807;&#24230;&#21344;&#29992;&#12290;</p></li><li><p>&#27515;&#20449;&#65288;Dead Letter&#65289;&#22320;&#22336;</p><p>&#36825;&#31181;&#26041;&#27861;&#26159;&#35268;&#23450;&#19968;&#20010;&#27515;&#20449;&#22320;&#22336;&#65292;&#22914;&#26524;&#28040;&#24687;&#20877;&#34987;&#21453;&#22797;&#20256;&#36882;&#36798;&#21040;&#19968;&#23450;&#27425;&#25968;&#26102;&#65292;&#23601;&#20250;&#20174;&#21407;&#26377;&#38431;&#21015;&#20013;&#21024;&#38500;&#65292;&#36716;&#21040;&#36825;&#20010;
            &#27515;&#20449;&#22320;&#22336;&#20013;&#12290;&#36825;&#26679;&#28040;&#24687;&#23601;&#19981;&#20250;&#27704;&#36828;&#22320;&#37325;&#22797;&#20256;&#36882;&#20102;&#12290;</p></li></ul></div><p>&#20197;&#19978;&#20004;&#31181;&#26041;&#27861;&#21487;&#20197;&#21512;&#29702;&#25645;&#37197;&#20351;&#29992;&#65292;&#20351;&#35299;&#20915;&#26041;&#26696;&#26356;&#21152;&#28789;&#27963;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3892"></a>21.1.&nbsp;&#24310;&#36831;&#20877;&#20256;&#36882;</h2></div></div><div></div></div><p>&#24310;&#36831;&#20877;&#20256;&#36882;&#23545;&#20110;&#26102;&#24120;&#20986;&#29616;&#25925;&#38556;&#25110;&#22238;&#28378;&#30340;&#23458;&#25143;&#31471;&#21313;&#20998;&#26377;&#29992;&#12290;&#22914;&#26524;&#27809;&#26377;&#24310;&#36831;&#65292;&#25972;&#20010;&#31995;&#32479;&#21487;&#33021;&#20250;&#22788;&#20110;&#19968;&#31181;&#8221;&#30127;&#29378;&#8220;&#30340;&#29366;&#24577;&#12290;
         &#23601;&#26159;&#28040;&#24687;&#34987;&#20256;&#36882;&#12289;&#22238;&#28378;&#12289;&#20877;&#20256;&#36882;&#65292;&#36825;&#26679;&#21453;&#22797;&#19981;&#38388;&#26029;&#22320;&#36827;&#34892;&#30528;&#65292;&#23558;&#23453;&#36149;&#30340;CPU&#21644;&#32593;&#32476;&#36164;&#28304;&#21344;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="undelivered-messages.delay"></a>21.1.1.&nbsp;&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;</h3></div></div><div></div></div><p>&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;&#22312;&#22320;&#22336;&#35774;&#23450;&#20869;&#65288;address-setting&#65289;&#65306;</p><pre class="programlisting">
     &lt;!-- delay redelivery of messages for 5s --&gt;
     &lt;address-setting match="jms.queue.exampleQueue"&gt;
        &lt;redelivery-delay&gt;5000&lt;/redelivery-delay&gt;
     &lt;/address-setting&gt;
             </pre><p>&#22914;&#26524;&#23450;&#20041;&#20102;<tt class="literal">redelivery-delay</tt>&#65292;HornetQ&#22312;&#20877;&#20256;&#36882;&#20043;&#21069;&#31561;&#24453;&#25152;&#23450;&#20041;&#30340;&#26102;&#38388;&#12290;</p><p>&#40664;&#35748;&#26159;&#27809;&#26377;&#24310;&#26102;&#30340;&#65288;&#21363;<tt class="literal">redelivery-delay</tt>&#30340;&#20540;&#26159;0&#65289;&#12290;</p><p>&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#20026;&#19968;&#32452;&#22320;&#22336;&#23450;&#20041;&#20877;&#20256;&#36882;&#30340;&#24310;&#36831;&#65288;&#21442;&#35265;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#65289;&#12290;
               </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3918"></a>21.1.2.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265; <a href="#examples.delayed-redelivery" title="11.1.12.&nbsp;&#24310;&#36831;&#20877;&#21457;&#36865;">Section&nbsp;11.1.12, &#8220;&#24310;&#36831;&#20877;&#21457;&#36865;&#8221;</a>&#12290;&#36825;&#26159;&#19968;&#20010;JMS&#24212;&#29992;&#20013;&#37197;&#32622;&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e3925"></a>21.2.&nbsp;&#27515;&#20449;&#22320;&#22336;</h2></div></div><div></div></div><p>&#36890;&#36807;&#23450;&#20041;&#19968;&#20010;<span class="italic">&#27515;&#20449;&#22320;&#22336;</span>&#20063;&#21487;&#20197;&#38450;&#27490;&#21516;&#19968;&#20010;&#28040;&#24687;&#34987;&#26080;&#20241;&#27490;&#22320;&#20256;&#36882;&#65306;
         &#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#37325;&#22797;&#20256;&#36882;&#19968;&#23450;&#27425;&#25968;&#21518;&#65292;&#23601;&#20250;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#24182;&#20256;&#36882;&#21040;&#23450;&#20041;&#22909;&#30340;&#27515;&#20449;&#22320;&#22336;&#20013;&#12290;</p><p>&#36825;&#20123;&#27515;&#20449;&#20013;&#30340;&#28040;&#24687;&#20043;&#21518;&#21487;&#20197;&#36716;&#21457;&#21040;&#26576;&#20010;&#38431;&#21015;&#20013;&#65292;&#20197;&#20379;&#31995;&#32479;&#31649;&#29702;&#21592;&#20998;&#26512;&#22788;&#29702;&#12290;</p><p>&#27599;&#20010;HornetQ&#30340;&#22320;&#22336;&#21487;&#20197;&#26377;&#19968;&#20010;&#27515;&#20449;&#22320;&#22336;&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#21453;&#22797;&#20256;&#36882;&#36798;&#19968;&#23450;&#27425;&#25968;&#26102;&#65292;&#23427;&#23601;&#20250;&#34987;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#24182;&#36865;&#21040;
         &#27515;&#20449;&#22320;&#22336;&#12290;&#36825;&#20123;<span class="emphasis"><em>&#27515;&#20449;</em></span>&#28040;&#24687;&#21487;&#20197;&#34987;&#25509;&#25910;&#36827;&#34892;&#20998;&#26512;&#22788;&#29702;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="undelivered-messages.configuring"></a>21.2.1.&nbsp;&#37197;&#32622;&#27515;&#20449;&#22320;&#22336;</h3></div></div><div></div></div><p>&#27515;&#20449;&#22320;&#22336;&#23450;&#20041;&#22312;&#22320;&#22336;&#35774;&#23450;&#20013;&#65288;address-setting&#65289;&#65306;</p><pre class="programlisting">
     &lt;!-- undelivered messages in exampleQueue will be sent to the dead letter address 
        deadLetterQueue after 3 unsuccessful delivery attempts
      --&gt;
     &lt;address-setting match="jms.queue.exampleQueue"&gt;
        &lt;dead-letter-address&gt;jms.queue.deadLetterQueue&lt;/dead-letter-address&gt;
        &lt;max-delivery-attempts&gt;3&lt;/max-delivery-attempts&gt;
     &lt;/address-setting&gt;
             </pre><p>&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;<tt class="literal">dead-letter-address</tt>&#65292;&#28040;&#24687;&#22312;&#32463;&#36807;
               <tt class="literal">max-delivery-attempts</tt>&#27425;&#37325;&#22797;&#20256;&#36882;&#21518;&#34987;&#21024;&#38500;&#12290;</p><p>&#40664;&#35748;&#30340;&#37325;&#22797;&#20256;&#36882;&#27425;&#25968;&#20026;10&#12290;&#23558;<tt class="literal">max-delivery-attempts</tt>&#35774;&#23450;&#20026;-1
               &#34920;&#31034;&#26080;&#38480;&#27425;&#37325;&#22797;&#20256;&#36882;&#12290;</p><p>&#20363;&#22914;&#65292;&#23545;&#19968;&#32452;&#22320;&#22336;&#35774;&#32622;&#20102;&#19968;&#20010;&#36890;&#29992;&#30340;&#27515;&#20449;&#22320;&#22336;&#21518;&#65292;&#20877;&#23558;&#20854;&#20013;&#26576;&#20010;&#22320;&#22336;&#30340;<tt class="literal">max-delivery-attempts</tt>
            &#35774;&#23450;&#20026;-1&#26102;&#65292;&#37027;&#20040;&#21482;&#26377;&#36825;&#20010;&#22320;&#22336;&#30340;&#20877;&#20256;&#36882;&#27425;&#25968;&#26159;&#26080;&#38480;&#30340;&#12290;</p><p>&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#23545;&#19968;&#32452;&#22320;&#22336;&#35774;&#23450;&#27515;&#20449;&#22320;&#22336;&#65288;&#21442;&#35265;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3969"></a>21.2.2.&nbsp;&#27515;&#20449;&#30340;&#23646;&#24615;</h3></div></div><div></div></div><p>&#20174;&#27515;&#20449;&#22320;&#22336;&#25509;&#25910;&#21040;&#30340;&#28040;&#24687;&#26377;&#20197;&#19979;&#23646;&#24615;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">_HQ_ORIG_ADDRESS</tt></p><p>&#36825;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#23646;&#24615;&#65292;&#23427;&#26159;&#35813;&#27515;&#20449;&#28040;&#24687;&#30340;<span class="emphasis"><em>&#21407;&#22987;&#22320;&#22336;</em></span>&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3984"></a>21.2.3.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.dead-letter" title="11.1.11.&nbsp;&#27515;&#28040;&#24687;&#65288;Dead Letter&#65289;">Section&nbsp;11.1.11, &#8220;&#27515;&#28040;&#24687;&#65288;Dead Letter&#65289;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#32473;&#20986;&#20102;&#22312;JMS&#24212;&#29992;&#20013;&#27515;&#20449;&#30340;&#37197;&#32622;&#19982;&#20351;&#29992;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring.delivery.count.persistence"></a>21.3.&nbsp;&#20256;&#36882;&#35745;&#25968;&#30340;&#25345;&#20037;&#21270;</h2></div></div><div></div></div><p>&#36890;&#24120;&#24773;&#20917;&#19979;HornetQ&#22312;&#19968;&#20010;&#28040;&#24687;&#34987;&#22238;&#28378;&#20043;&#21069;&#24182;&#19981;&#26356;&#26032;&#25345;&#20037;&#30340;&#20256;&#36882;&#35745;&#25968;&#65288;&#21363;&#22312;&#28040;&#24687;&#20256;&#36882;&#21040;&#25509;&#25910;&#32773;&#20043;&#21069;&#19981;&#20250;&#26356;&#26032;&#20256;&#36882;&#35745;&#25968;&#65289;&#12290;
         &#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#28040;&#24687;&#34987;&#25509;&#25910;&#12289;&#36890;&#30693;&#12289;&#28982;&#21518;&#34987;&#24536;&#25481;&#12290;&#36825;&#26679;&#23545;<span class="emphasis"><em>&#27599;&#19968;&#20010;&#28040;&#24687;</em></span>&#30340;&#20256;&#36882;&#37117;&#35201;&#26356;&#26032;&#19968;&#27425;&#25345;&#20037;&#30340;
         &#20256;&#36882;&#35745;&#25968;&#65292;&#20250;&#26174;&#33879;&#38477;&#20302;&#31995;&#32479;&#30340;&#24615;&#33021;&#12290;</p><p>&#20171;&#26159;&#22914;&#26524;&#22312;&#28040;&#24687;&#20256;&#36882;&#20043;&#21069;&#19981;&#36827;&#34892;&#25345;&#20037;&#20256;&#36882;&#35745;&#25968;&#30340;&#26356;&#26032;&#65292;&#26381;&#21153;&#22120;&#19968;&#26086;&#21457;&#29983;&#25925;&#38556;&#32780;&#23849;&#28291;&#65292;&#23601;&#20250;&#36896;&#25104;&#28040;&#24687;&#21487;&#33021;&#34987;&#20256;&#36882;&#20986;&#21435;&#32780;&#20256;&#36882;
         &#35745;&#25968;&#21364;&#27809;&#26377;&#27491;&#30830;&#21453;&#26144;&#20986;&#20256;&#36882;&#30340;&#32080;&#26524;&#12290;&#22312;&#24674;&#22797;&#38454;&#27573;&#65292;&#26381;&#21153;&#22120;&#23558;&#38169;&#35823;&#22320;&#23558;&#35813;&#28040;&#24687;&#30340;<tt class="literal">redelivered</tt>&#35774;&#20026;
         <tt class="literal">false</tt>&#32780;&#19981;&#26159;<tt class="literal">true</tt>&#12290; </p><p>&#36825;&#26679;&#26159;&#19981;&#31526;&#21512;&#20005;&#26684;&#30340;JMS&#35201;&#27714;&#30340;&#12290;&#22240;&#27492;HornetQ&#20801;&#35768;&#22312;&#28040;&#24687;&#20256;&#36882;&#21069;&#26356;&#26032;&#20256;&#36882;&#35745;&#25968;&#12290;&#20294;&#26159;&#40664;&#35748;&#19981;&#36825;&#26679;&#20570;&#65292;&#30446;&#30340;&#26159;&#20248;&#20808;&#32771;&#34385;
         &#20102;&#23427;&#23545;&#24615;&#33021;&#30340;&#24433;&#21709;&#12290;</p><p>&#35201;&#24819;&#25171;&#24320;&#20256;&#36882;&#35745;&#25968;&#26356;&#26032;&#21151;&#33021;&#65292;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;
            <tt class="literal">persist-delivery-count-before-delivery</tt>&#35774;&#20026;<tt class="literal">true</tt>&#21363;&#21487;&#65306;</p><pre class="programlisting">
&lt;persist-delivery-count-before-delivery&gt;true&lt;/persist-delivery-count-before-delivery&gt;
      </pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="message-expiry"></a>Chapter&nbsp;22.&nbsp;&#36807;&#26399;&#30340;&#28040;&#24687;</h2></div></div><div></div></div><p>&#28040;&#24687;&#22312;&#21457;&#36865;&#26102;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;<span class="emphasis"><em>&#29983;&#23384;&#26102;&#38388;</em></span>&#23646;&#24615;&#12290;</p><p>&#22914;&#26524;&#19968;&#20010;&#28040;&#24687;&#24050;&#32463;&#36229;&#36807;&#20102;&#23427;&#30340;&#29983;&#23384;&#26102;&#38388;&#65292;HornetQ&#19981;&#20877;&#23558;&#23427;&#20256;&#36882;&#32473;&#20219;&#20309;&#25509;&#25910;&#32773;&#12290;
      &#26381;&#21153;&#22120;&#20250;&#23558;&#36807;&#26399;&#30340;&#28040;&#24687;&#25243;&#24323;&#12290;</p><p>HornetQ&#30340;&#22320;&#22336;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;&#36807;&#26399;&#22320;&#22336;&#65292;&#24403;&#28040;&#24687;&#36807;&#26399;&#26102;&#65292;&#23427;&#20204;&#34987;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#24182;&#34987;&#36716;&#31227;&#21040;&#36807;&#26399;&#22320;&#22336;&#20013;&#12290;
      &#22810;&#20010;&#19981;&#21516;&#30340;&#38431;&#21015;&#21487;&#20197;&#32465;&#23450;&#21040;&#19968;&#20010;&#36807;&#26399;&#22320;&#22336;&#19978;&#12290;&#36825;&#20123;&#36807;&#26399;&#30340;&#28040;&#24687;&#36807;&#21518;&#21487;&#20197;&#25509;&#25910;&#19979;&#26469;&#20197;&#20379;&#20998;&#26512;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4054"></a>22.1.&nbsp;&#36807;&#26399;&#28040;&#24687;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;HornetQ&#26680;&#24515;API&#65292;&#21487;&#20197;&#30452;&#25509;&#22312;&#28040;&#24687;&#19978;&#35774;&#32622;&#36807;&#26399;&#26102;&#38388;&#65306;</p><pre class="programlisting">
// message will expire in 5000ms from now
message.setExpiration(System.currentTimeMillis() + 5000);         
              </pre><p>JMS&#30340;MessageProducer&#21487;&#20197;&#35774;&#32622;&#19968;&#20010;TimeToLive&#26469;&#25511;&#21046;&#20854;&#21457;&#36865;&#30340;&#28040;&#24687;&#65306;</p><pre class="programlisting">
// messages sent by this producer will be retained for 5s (5000ms) before expiration           
producer.setTimeToLive(5000);
        </pre><p>&#20174;&#36807;&#26399;&#22320;&#22336;&#20013;&#25509;&#25910;&#19979;&#26469;&#30340;&#28040;&#24687;&#26377;&#20197;&#19979;&#23646;&#24615;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">_HQ_ORIG_ADDRESS</tt></p><p>&#36825;&#26159;&#19968;&#20010;&#23383;&#31526;&#20018;&#65292;&#23427;&#26159;&#35813;&#28040;&#24687;&#30340;<span class="emphasis"><em>&#21407;&#22987;&#22320;&#22336;</em></span>&#12290;</p></li><li><p><tt class="literal">_HQ_ACTUAL_EXPIRY</tt></p><p>&#19968;&#20010;&#38271;&#25972;&#22411;&#37327;&#65292;&#20195;&#34920;&#27492;&#28040;&#24687;<span class="emphasis"><em>&#23454;&#38469;&#36807;&#26399;&#26102;&#38388;</em></span>&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="message-expiry.configuring"></a>22.2.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;</h2></div></div><div></div></div><p>&#36807;&#26399;&#22320;&#22336;&#37197;&#32622;&#22312;&#22320;&#22336;&#35774;&#32622;&#65288;address-setting&#65289;&#20013;&#65306;</p><pre class="programlisting">
&lt;!-- expired messages in exampleQueue will be sent to the expiry address expiryQueue --&gt;
&lt;address-setting match="jms.queue.exampleQueue"&gt;
   &lt;expiry-address&gt;jms.queue.expiryQueue&lt;/expiry-address&gt;
&lt;/address-setting&gt;
        </pre><p>&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36807;&#26399;&#22320;&#22336;&#65292;&#24403;&#19968;&#20010;&#28040;&#24687;&#36807;&#26399;&#26102;&#65292;&#23427;&#23558;&#34987;&#21024;&#38500;&#12290;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;&#26102;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;
         &#26469;&#32473;&#19968;&#32452;&#22320;&#22336;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;&#12290;&#65288;&#21442;&#35265;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring.expiry.reaper"></a>22.3.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22238;&#25910;&#32447;&#31243;</h2></div></div><div></div></div><p>HornetQ&#26377;&#19968;&#20010;&#22238;&#25910;&#32447;&#31243;&#23450;&#26399;&#22320;&#26816;&#26597;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#65292;&#30446;&#30340;&#26159;&#21457;&#29616;&#26159;&#21542;&#26377;&#28040;&#24687;&#36807;&#26399;&#12290;</p><p>&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#21487;&#20197;&#23545;&#22238;&#25910;&#32447;&#31243;&#36827;&#34892;&#37197;&#32622;&#65292;&#21442;&#25968;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">message-expiry-scan-period</tt></p><p>&#36807;&#26399;&#28040;&#24687;&#30340;&#25195;&#25551;&#38388;&#38548;&#65288;&#21333;&#20301;&#27627;&#31186;&#65292;&#40664;&#35748;&#20026;30000ms&#65289;&#12290;&#22914;&#35201;&#20851;&#38381;&#25195;&#25551;&#65292;&#23558;&#20854;&#35774;&#20026;<tt class="literal">-1</tt>&#12290;</p></li><li><p><tt class="literal">message-expiry-thread-priority</tt></p><p>&#22238;&#25910;&#32447;&#31243;&#30340;&#20248;&#20808;&#32423;&#65288;&#20026;0&#21040;9&#30340;&#25972;&#25968;&#65292;9&#20248;&#20808;&#32423;&#26368;&#39640;&#12290;&#40664;&#35748;&#26159;3&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4123"></a>22.4.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.expiry" title="11.1.28.&nbsp;&#28040;&#24687;&#22833;&#25928;">Section&nbsp;11.1.28, &#8220;&#28040;&#24687;&#22833;&#25928;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22312;JMS&#20013;&#22914;&#20309;&#37197;&#32622;&#20351;&#29992;&#28040;&#24687;&#36807;&#26399;&#21151;&#33021;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="large-messages"></a>Chapter&nbsp;23.&nbsp;&#22823;&#28040;&#24687;</h2></div></div><div></div></div><p>HornetQ&#25903;&#25345;&#36229;&#22823;&#28040;&#24687;&#30340;&#21457;&#36865;&#21644;&#25509;&#25910;&#12290;&#28040;&#24687;&#30340;&#22823;&#23567;&#19981;&#21463;&#23458;&#25143;&#31471;&#25110;&#26381;&#21153;&#22120;&#31471;&#30340;&#20869;&#23384;&#38480;&#21046;&#12290;&#23427;&#21482;&#21463;&#38480;&#20110;&#20320;&#30340;&#30913;&#30424;&#31354;&#38388;&#30340;&#22823;&#23567;&#12290;
        &#22312;&#25105;&#20204;&#20316;&#36807;&#30340;&#27979;&#35797;&#20013;&#65292;&#28040;&#24687;&#26368;&#22823;&#21487;&#36798;8GiB&#65292;&#32780;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#22120;&#31471;&#30340;&#20869;&#23384;&#21482;&#26377;50MiB&#65281;</p><p>&#35201;&#21457;&#36865;&#19968;&#20010;&#22823;&#28040;&#24687;&#65292;&#29992;&#25143;&#38656;&#35201;&#20026;&#22823;&#28040;&#24687;&#25552;&#20379;&#19968;&#20010;<tt class="literal">InputStream</tt>&#65292;&#24403;&#22823;&#28040;&#24687;&#34987;&#21457;&#36865;&#26102;&#65292;
        HornetQ&#20174;&#35813;<tt class="literal">InputStream</tt>&#35835;&#21462;&#28040;&#24687;&#12290;&#20363;&#22914;&#65292;&#35201;&#23558;&#19968;&#20010;&#30913;&#30424;&#20013;&#30340;&#22823;&#25991;&#20214;&#20197;&#28040;&#24687;&#24418;&#24335;&#21457;&#36865;&#65292;&#21487;&#20197;
        &#20351;&#29992;<tt class="literal">FileInputStream</tt>&#12290;</p><p>&#25968;&#25454;&#20174;<tt class="literal">InputStream</tt>&#35835;&#20986;&#24182;&#20998;&#35299;&#20026;&#19968;&#20010;&#20010;&#25968;&#25454;&#29255;&#27573;&#21521;&#26381;&#21153;&#22120;&#20197;&#27969;&#30340;&#24418;&#24335;&#21457;&#36865;&#12290;&#26381;&#21153;&#22120;&#22312;&#25910;&#21040;
        &#36825;&#20123;&#29255;&#27573;&#21518;&#23558;&#23427;&#20204;&#20445;&#23384;&#21040;&#30913;&#30424;&#19978;&#12290;&#24403;&#26381;&#21153;&#22120;&#20934;&#22791;&#21521;&#25509;&#25910;&#32773;&#20256;&#36882;&#28040;&#24687;&#26102;&#65292;&#23427;&#23558;&#36825;&#20123;&#29255;&#27573;&#35835;&#22238;&#65292;&#21516;&#26679;&#20197;&#29255;&#27573;&#27969;&#30340;&#24418;&#24335;&#21521;&#25509;&#25910;&#32773;
        &#19968;&#31471;&#21457;&#36865;&#12290;&#24403;&#25509;&#25910;&#32773;&#24320;&#22987;&#25509;&#25910;&#26102;&#65292;&#26368;&#21021;&#25910;&#21040;&#30340;&#21482;&#26159;&#19968;&#20010;&#31354;&#30340;&#28040;&#24687;&#20307;&#12290;&#23427;&#38656;&#35201;&#20026;&#20854;&#35774;&#32622;&#19968;&#20010;<tt class="literal">OutputStream</tt>
        &#20197;&#20415;&#21521;&#22823;&#28040;&#24687;&#20445;&#23384;&#21040;&#30913;&#30424;&#19978;&#25110;&#20854;&#23427;&#22320;&#26041;&#12290;&#20174;&#21457;&#36865;&#21040;&#25509;&#25910;&#25972;&#20010;&#36807;&#31243;&#20013;&#19981;&#38656;&#35201;&#25972;&#20010;&#28040;&#24687;&#37117;&#22312;&#20869;&#23384;&#20013;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="large.message.configuring"></a>23.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#22823;&#28040;&#24687;&#22312;&#26381;&#21153;&#22120;&#31471;&#26159;&#30452;&#25509;&#20445;&#23384;&#22312;&#30913;&#30424;&#30446;&#24405;&#20013;&#12290;&#36825;&#19968;&#30446;&#24405;&#21487;&#20197;&#22312;HornetQ&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#21517;&#23383;&#26159;<tt class="literal">large-messages-directory</tt>&#65306;</p><pre class="programlisting">&lt;configuration xmlns="urn:hornetq"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd"&gt;

...

&lt;large-message-directory&gt;/data/large-messages&lt;/large-message-directory&gt;

...

&lt;/configuration</pre><p>&#40664;&#35748;&#30340;&#22823;&#28040;&#24687;&#20445;&#23384;&#30446;&#24405;&#26159;<tt class="literal">data/largemessages</tt>&#12290;</p><p>&#20026;&#20102;&#25552;&#39640;&#24615;&#33021;&#65292;&#25105;&#20204;&#24314;&#35758;&#23558;&#22823;&#28040;&#24687;&#30340;&#20445;&#23384;&#30446;&#24405;&#23450;&#20041;&#21040;&#19982;&#28040;&#24687;&#26085;&#24535;&#65288;journal&#65289;&#25110;&#20998;&#39029;&#36716;&#23384;&#30446;&#24405;&#20998;&#24320;&#30340;&#29289;&#29702;&#21367;&#19978;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4190"></a>23.2.&nbsp;&#35774;&#23450;&#38480;&#21046;</h2></div></div><div></div></div><p>&#21442;&#25968;<tt class="literal">min-large-message-size</tt>&#23450;&#20041;&#20102;&#22823;&#28040;&#24687;&#30340;&#26368;&#23567;&#20540;&#12290;
              &#20219;&#20309;&#28040;&#24687;&#30340;&#22823;&#23567;&#22914;&#26524;&#36229;&#36807;&#20102;&#35813;&#20540;&#23601;&#34987;&#35270;&#20026;&#22823;&#28040;&#24687;&#12290;&#19968;&#26086;&#25104;&#20026;&#22823;&#28040;&#24687;&#65292;&#23427;&#23558;&#34987;&#20998;&#25104;&#23567;&#30340;
              &#29255;&#27573;&#26469;&#20256;&#36865;&#12290;</p><p>&#40664;&#35748;&#20540;&#26159;100KiB.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="large-messages.core.config"></a>23.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#30340;API</h3></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;HornetQ&#30340;&#26680;&#24515;&#65292;<tt class="literal">ClientSessionFactory.setMinLargeMessageSize</tt>&#26041;&#27861;
                  &#21487;&#20197;&#35774;&#32622;&#22823;&#28040;&#24687;&#30340;&#26368;&#23567;&#20540;&#12290;</p><pre class="programlisting">ClientSessionFactory factory = 
            HornetQClient.createClientSessionFactory(new 
            TransportConfiguration(NettyConnectorFactory.class.getName()), null);
factory.setMinLargeMessageSize(25 * 1024);</pre><p><a href="#configuring-transports.client.side" title="16.3.&nbsp;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#37197;&#32622;&#20256;&#36755;&#23618;">Section&nbsp;16.3, &#8220;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#37197;&#32622;&#20256;&#36755;&#23618;&#8221;</a>&#23545;&#20110;&#22914;&#20309;&#23454;&#20363;&#21270;&#19968;&#20010;&#20250;&#35805;&#24037;&#21378;&#65288;session factory&#65289;
                &#32473;&#20986;&#20102;&#36827;&#19968;&#27493;&#30340;&#35828;&#26126;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4213"></a>23.2.2.&nbsp;&#20351;&#29992;JMS</h3></div></div><div></div></div><p>&#22914;&#26524;&#36830;&#25509;&#24037;&#21378;&#26159;&#36890;&#36807;JNDI&#26041;&#24335;&#33719;&#24471;&#30340;&#65292;&#21017;&#38656;&#35201;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#65306;</p><pre class="programlisting">...
&lt;connection-factory name="ConnectionFactory"&gt;
&lt;connectors&gt;
   &lt;connector-ref connector-name="netty"/&gt;
&lt;/connectors&gt;
&lt;entries&gt;
   &lt;entry name="ConnectionFactory"/&gt;
   &lt;entry name="XAConnectionFactory"/&gt;
&lt;/entries&gt;
                
&lt;min-large-message-size&gt;250000&lt;/min-large-message-size&gt;
&lt;/connection-factory&gt;
...</pre><p>&#22914;&#26524;&#26159;&#30452;&#25509;&#23454;&#20363;&#21270;&#36830;&#25509;&#24037;&#21378;&#65292;&#21017;&#20351;&#29992;<tt class="literal">HornetQConnectionFactory.setMinLargeMessageSize</tt>&#26041;&#27861;&#26469;&#23450;&#20041;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4228"></a>23.3.&nbsp;&#22823;&#28040;&#24687;&#19982;&#27969;&#65288;stream&#65289;</h2></div></div><div></div></div><p>&#22312;HornetQ&#20013;&#21487;&#20197;&#23450;&#20041;&#22823;&#28040;&#24687;&#25152;&#20351;&#29992;&#30340;&#36755;&#20837;&#21644;&#36755;&#20986;&#27969;&#65288;<tt class="literal">java.lang.io</tt>)&#12290;</p><p>HornetQ&#23558;&#20351;&#29992;&#23450;&#20041;&#30340;&#27969;&#26469;&#21457;&#36865;&#65288;&#36755;&#20837;&#27969;&#65289;&#21644;&#25509;&#25910;&#65288;&#36755;&#20986;&#27969;&#65289;&#22823;&#28040;&#24687;&#12290;</p><p>&#22312;&#20351;&#29992;&#36755;&#20986;&#27969;&#25509;&#25910;&#22823;&#28040;&#24687;&#26102;&#65292;&#26377;&#20004;&#31181;&#36873;&#25321;&#65306;&#20320;&#21487;&#20197;&#29992;<tt class="literal">ClientMessage.saveOutputStream</tt>&#26041;&#27861;
            &#20197;&#38459;&#22622;&#30340;&#26041;&#24335;&#20445;&#23384;&#22823;&#28040;&#24687;&#65307;&#25110;&#32773;&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">ClientMessage.setOutputstream</tt>&#26041;&#27861;
            &#20197;&#24322;&#27493;&#26041;&#27861;&#20445;&#23384;&#22823;&#28040;&#24687;&#12290;&#22312;&#37319;&#29992;&#21518;&#19968;&#31181;&#26041;&#27861;&#26102;&#65292;&#24517;&#39035;&#20445;&#35777;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#22312;&#22823;&#28040;&#24687;&#30340;&#25509;&#25910;&#36807;&#31243;&#20013;&#20445;&#25345;
            &#26377;&#25928;&#29366;&#24577;&#12290;</p><p>&#26681;&#25454;&#38656;&#35201;&#36873;&#25321;&#25152;&#36866;&#21512;&#30340;&#27969;&#12290;&#26368;&#24120;&#35265;&#30340;&#24773;&#20917;&#26159;&#23558;&#30913;&#30424;&#25991;&#20214;&#20197;&#28040;&#24687;&#26041;&#24335;&#21457;&#36865;&#65292;&#20063;&#26377;&#21487;&#33021;&#26159;JDBC&#30340;Blob&#25968;&#25454;&#65292;
            &#25110;&#32773;&#26159;&#19968;&#20010;<tt class="literal">SocketInputStream</tt>&#65292;&#25110;&#26159;&#26469;&#33258;<tt class="literal">HTTPRequests</tt>
            &#30340;&#25968;&#25454;&#31561;&#31561;&#12290;&#21482;&#35201;&#26159;&#23454;&#29616;&#20102;<tt class="literal">java.io.InputStream</tt>&#21644;
            <tt class="literal">java.io.OutputStream</tt>&#30340;&#25968;&#25454;&#28304;&#37117;&#21487;&#20197;&#20316;&#20026;&#22823;&#28040;&#24687;&#20256;&#36865;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4260"></a>23.3.1.&nbsp;&#26680;&#24515;API&#20013;&#27969;&#30340;&#20351;&#29992;</h3></div></div><div></div></div><p>&#19979;&#34920;&#21015;&#20986;&#20102;<tt class="literal">ClientMessage</tt>&#19978;&#21487;&#20197;&#20351;&#29992;&#30340;&#26041;&#27861;&#12290;
                  &#36890;&#36807;&#30456;&#24212;&#30340;&#23545;&#35937;&#23646;&#24615;&#20063;&#21487;&#20197;&#22312;JMS&#20013;&#24212;&#29992;&#12290;</p><div class="table"><a name="large-messages.ClientMessageAPI"></a><p class="title"><b>Table&nbsp;23.1.&nbsp;org.hornetq.api.core.client.ClientMessage API</b></p><table summary="org.hornetq.api.core.client.ClientMessage API" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21517;&#31216;</th><th>&#35828;&#26126;</th><th>JMS&#30456;&#23545;&#24212;&#30340;&#23646;&#24615;</th></tr></thead><tbody><tr><td>setBodyInputStream(InputStream)</td><td>&#35774;&#23450;&#22823;&#28040;&#24687;&#21457;&#36865;&#26102;&#25152;&#20351;&#29992;&#30340;&#36755;&#20837;&#27969;&#12290;</td><td>JMS_HQ_InputStream</td></tr><tr><td>setOutputStream(OutputStream)</td><td>&#35774;&#23450;&#24322;&#27493;&#25509;&#25910;&#22823;&#28040;&#24687;&#25152;&#20351;&#29992;&#30340;&#36755;&#20986;&#27969;&#12290;</td><td>JMS_HQ_OutputStream</td></tr><tr><td>saveOutputStream(OutputStream)</td><td>&#35774;&#23450;&#20445;&#23384;&#22823;&#28040;&#24687;&#25152;&#20351;&#29992;&#30340;&#36755;&#20986;&#27969;&#12290;&#36825;&#20010;&#26041;&#27861;&#23558;&#20250;&#38459;&#22622;&#30452;&#21040;&#22823;&#28040;&#24687;&#20840;&#37096;
                                   &#20445;&#23384;&#23436;&#27605;&#25165;&#36820;&#22238;&#12290;</td><td>JMS_HQ_SaveStream</td></tr></tbody></table></div><p>&#19979;&#38754;&#20195;&#30721;&#20013;&#35774;&#23450;&#20102;&#25509;&#25910;&#26680;&#24515;&#28040;&#24687;&#25152;&#29992;&#30340;&#36755;&#20986;&#27969;&#65306; </p><pre class="programlisting">
...
ClientMessage msg = consumer.receive(...);


// This will block here until the stream was transferred
msg.saveOutputStream(someOutputStream); 

ClientMessage msg2 = consumer.receive(...);

// This will not wait the transfer to finish
msg.setOutputStream(someOtherOutputStream); 
...
                
            </pre><p> &#35774;&#23450;&#21457;&#36865;&#26680;&#24515;&#28040;&#24687;&#25152;&#29992;&#30340;&#36755;&#20837;&#27969;&#65306; </p><pre class="programlisting">
...
ClientMessage msg = session.createMessage();
msg.setInputStream(dataInputStream);
...
            </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="large-messages.streaming.over.jms"></a>23.3.2.&nbsp;&#22312;JMS&#20013;&#20351;&#29992;&#27969;</h3></div></div><div></div></div><p>&#20351;&#29992;JMS&#26102;&#65292;HornetQ&#26681;&#25454;&#23450;&#20041;&#30340;&#23646;&#24615;&#20540;&#35843;&#29992;&#23545;&#24212;&#30340;&#26680;&#24515;&#25509;&#21475;&#65288;&#21442;&#35265; <a href="#large-messages.ClientMessageAPI" title="Table&nbsp;23.1.&nbsp;org.hornetq.api.core.client.ClientMessage API">Table&nbsp;23.1, &#8220;org.hornetq.api.core.client.ClientMessage API&#8221;</a>&#65289;&#26469;&#20351;&#29992;&#27969;&#12290;&#20320;&#21482;&#38656;&#35201;&#29992;
                  <tt class="literal">Message.setObjectProperty</tt>&#26041;&#27861;&#35774;&#32622;&#36866;&#24403;&#30340;&#36755;&#20837;&#65295;&#36755;&#20986;&#27969;&#21363;&#21487;&#12290;</p><p>&#36755;&#20837;&#27969;<tt class="literal">InputStream</tt>&#21487;&#20197;&#36890;&#36807;JMS&#23646;&#24615;JMS_HQ_InputStream&#26469;&#23450;&#20041;&#65306;</p><pre class="programlisting">
BytesMessage message = session.createBytesMessage();

FileInputStream fileInputStream = new FileInputStream(fileInput);

BufferedInputStream bufferedInput = new BufferedInputStream(fileInputStream);

message.setObjectProperty("JMS_HQ_InputStream", bufferedInput);

someProducer.send(message);</pre><p>&#36755;&#20986;&#27969;<tt class="literal">OutputStream</tt>&#21487;&#20197;&#36890;&#36807;JMS&#23646;&#24615;JMS_HQ_SaveStream&#26469;&#23450;&#20041;&#12290;&#19979;&#38754;&#26159;&#38459;&#22622;&#24335;&#26041;&#27861;&#65306;</p><pre class="programlisting">
BytesMessage messageReceived = (BytesMessage)messageConsumer.receive(120000);
                
File outputFile = new File("huge_message_received.dat");
                
FileOutputStream fileOutputStream = new FileOutputStream(outputFile);
                
BufferedOutputStream bufferedOutput = new BufferedOutputStream(fileOutputStream);
                
// This will block until the entire content is saved on disk
messageReceived.setObjectProperty("JMS_HQ_SaveStream", bufferedOutput);
            </pre><p>&#20063;&#21487;&#20197;&#20351;&#29992;JMS_HQ_OutputStream&#23646;&#24615;&#20197;&#38750;&#38459;&#22622;&#24335;&#65288;&#24322;&#27493;&#65289;&#26041;&#27861;&#26469;&#23450;&#20041;&#36755;&#20986;&#27969;<tt class="literal">OutputStream</tt>&#65306;</p><pre class="programlisting">
// This won't wait the stream to finish. You need to keep the consumer active.
messageReceived.setObjectProperty("JMS_HQ_OutputStream", bufferedOutput);
            </pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#20351;&#29992;JMS&#26102;&#65292;&#21482;&#26377;<tt class="literal">StreamMessage</tt>&#21644;<tt class="literal">BytesMessage</tt>&#25165;&#25903;&#25345;&#22823;&#28040;&#24687;&#30340;&#20256;&#36865;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4353"></a>23.4.&nbsp;&#19981;&#20351;&#29992;&#27969;&#30340;&#26041;&#24335;</h2></div></div><div></div></div><p>&#22914;&#26524;&#19981;&#24819;&#20351;&#29992;&#36755;&#20837;&#27969;&#19982;&#36755;&#20986;&#27969;&#26469;&#20256;&#36865;&#22823;&#28040;&#24687;&#65292;&#21487;&#20197;&#29992;&#21478;&#22806;&#19968;&#31181;&#26041;&#27861;&#12290;</p><p>&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#26102;&#65292;&#21487;&#20197;&#30452;&#25509;&#20174;&#28040;&#24687;&#20013;&#35835;&#23383;&#33410;&#12290;</p><pre class="programlisting">ClientMessage msg = consumer.receive();
         
byte[] bytes = new byte[1024];
for (int i = 0 ;  i &lt; msg.getBodySize(); i += bytes.length)
{
   msg.getBody().readBytes(bytes);
   // Whatever you want to do with the bytes
}</pre><p>&#20351;&#29992;JMS&#25509;&#21475;&#26102;&#65292;<tt class="literal">BytesMessage</tt>&#21644;<tt class="literal">StreamMessage</tt>
            &#26412;&#36523;&#25552;&#20379;&#36825;&#26679;&#30340;&#25903;&#25345;&#12290;</p><pre class="programlisting">BytesMessage rm = (BytesMessage)cons.receive(10000);

byte data[] = new byte[1024];

for (int i = 0; i &lt; rm.getBodyLength(); i += 1024)
{
   int numberOfBytes = rm.readBytes(data);
   // Do whatever you want with the data
}        </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="large-messages.cache.client"></a>23.5.&nbsp;&#22312;&#23458;&#25143;&#31471;&#32531;&#23384;&#22823;&#28040;&#24687;</h2></div></div><div></div></div><p>&#22823;&#28040;&#24687;&#36890;&#36807;&#27969;&#22312;&#26381;&#21153;&#22120;&#21644;&#23458;&#25143;&#31471;&#20043;&#38388;&#20256;&#36755;&#12290;&#27599;&#20010;&#22823;&#28040;&#24687;&#34987;&#20998;&#21106;&#25104;&#24456;&#22810;&#23567;&#30340;&#25968;&#25454;&#21253;&#20256;&#36882;&#12290;&#22240;&#27492;&#22823;&#28040;&#24687;&#21482;&#33021;&#34987;
            &#35835;&#21462;&#19968;&#27425;&#12290;&#36825;&#26679;&#19968;&#20010;&#22823;&#28040;&#24687;&#22312;&#25910;&#21040;&#21518;&#23601;&#19981;&#33021;&#20877;&#34987;&#20877;&#27425;&#20256;&#36865;&#12290;&#20363;&#22914;&#65292;JMS Bridge&#22312;&#21457;&#36865;&#22823;&#28040;&#24687;&#26102;&#22914;&#26524;&#22312;&#20986;&#29616;&#25925;&#38556;&#65292;
            &#23558;&#19981;&#33021;&#25226;&#23427;&#37325;&#26032;&#21457;&#36865;&#12290;</p><p>&#35201;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#21487;&#20197;&#22312;&#36830;&#25509;&#24037;&#21378;&#19978;&#35774;&#32622;<tt class="literal">cache-large-message-client</tt>&#23646;&#24615;&#12290;
            &#36825;&#20010;&#23646;&#24615;&#21487;&#20197;&#20351;&#23458;&#25143;&#31471;&#25509;&#25910;&#32773;&#21019;&#24314;&#19968;&#20010;&#20020;&#26102;&#30340;&#25991;&#20214;&#20445;&#23384;&#25910;&#21040;&#30340;&#22823;&#28040;&#24687;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#22312;&#38656;&#35201;&#26102;&#33021;&#22815;&#37325;&#26032;&#21457;&#36865;&#35813;&#28040;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>&#22914;&#26524;JMS Bridge&#29992;&#26469;&#21457;&#36865;&#22823;&#28040;&#24687;&#65292;&#21487;&#20197;&#22312;&#23427;&#20351;&#29992;&#30340;&#36830;&#25509;&#24037;&#21378;&#19978;&#20351;&#29992;&#23427;&#12290;</div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="large-messages.example"></a>23.6.&nbsp;&#22823;&#28040;&#24687;&#20363;&#23376;</h2></div></div><div></div></div><p>&#25105;&#20204;&#22312;<a href="#examples.large-message" title="11.1.22.&nbsp;&#22823;&#28040;&#24687;">Section&nbsp;11.1.22, &#8220;&#22823;&#28040;&#24687;&#8221;</a>&#25552;&#20379;&#20102;&#19968;&#20010;&#22312;JMS&#20013;&#37197;&#32622;&#21644;&#20351;&#29992;&#22823;&#28040;&#24687;&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="paging"></a>Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;</h2></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#22312;&#26377;&#38480;&#30340;&#20869;&#23384;&#19979;&#25903;&#25345;&#21253;&#21547;&#30334;&#19975;&#28040;&#24687;&#30340;&#36229;&#22823;&#35268;&#27169;&#30340;&#38431;&#21015;&#12290;</p><p>&#24403;&#26377;&#38480;&#30340;&#20869;&#23384;&#26080;&#27861;&#35013;&#24471;&#19979;&#22914;&#27492;&#22810;&#30340;&#28040;&#24687;&#26102;&#65292;HornetQ&#23558;&#23427;&#20204;<span class="emphasis"><em>&#20998;&#39029;&#36716;&#23384;</em></span>&#21040;&#30913;&#30424;&#20013;&#65292;&#22312;&#20869;&#23384;
        &#26377;&#31354;&#38386;&#26102;&#20877;&#23558;&#28040;&#24687;&#20998;&#39029;&#35013;&#36733;&#21040;&#20869;&#23384;&#12290;&#36890;&#36807;&#36825;&#26679;&#30340;&#22788;&#29702;&#65292;&#19981;&#38656;&#35201;&#26381;&#21153;&#22120;&#26377;&#24456;&#22823;&#30340;&#20869;&#23384;&#23601;&#21487;&#20197;&#25903;&#25345;&#22823;&#23481;&#37327;&#30340;&#38431;&#21015;&#12290;</p><p>&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#32473;&#19968;&#20010;&#22320;&#22336;&#35774;&#32622;&#19968;&#20010;&#26368;&#22823;&#28040;&#24687;&#20540;&#12290;&#24403;&#36825;&#20010;&#22320;&#22336;&#28040;&#24687;&#25968;&#22312;&#20869;&#23384;&#20013;&#36229;&#36807;&#20102;&#36825;&#20010;&#20540;&#26102;&#65292;HornetQ&#24320;&#22987;&#23558;&#22810;&#20313;&#30340;&#28040;&#24687;
        &#36716;&#23384;&#21040;&#30913;&#30424;&#20013;&#12290;</p><p>&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#19981;&#36716;&#23384;&#20219;&#20309;&#28040;&#24687;&#12290;&#36825;&#19968;&#21151;&#33021;&#24517;&#39035;&#26174;&#24335;&#22320;&#36890;&#36807;&#37197;&#32622;&#26469;&#28608;&#27963;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4422"></a>24.1.&nbsp;&#20998;&#39029;&#25991;&#20214;</h2></div></div><div></div></div><p>&#28040;&#24687;&#25353;&#29031;&#25152;&#23646;&#30340;&#22320;&#22336;&#20998;&#21035;&#20445;&#23384;&#22312;&#19981;&#21516;&#30340;&#25991;&#20214;&#20013;&#12290;&#27599;&#19968;&#20010;&#22320;&#22336;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#25991;&#20214;&#22841;&#65292;&#27599;&#20010;&#25991;&#20214;&#22841;&#20869;&#28040;&#24687;&#34987;&#20445;&#23384;&#22312;
            &#25968;&#20010;&#25991;&#20214;&#20013;&#65288;&#20998;&#39029;&#25991;&#20214;&#65289;&#12290;&#27599;&#20010;&#25991;&#20214;&#20445;&#23384;&#22266;&#23450;&#25968;&#37327;&#30340;&#28040;&#24687;&#65288;&#30001;&#21442;&#25968;<tt class="literal">page-size-bytes</tt>
            &#35774;&#23450;&#65289;&#12290;&#24403;&#20174;&#20998;&#39029;&#25991;&#20214;&#20013;&#35835;&#21462;&#28040;&#24687;&#26102;&#65292;&#19968;&#20010;&#25991;&#20214;&#30340;&#25152;&#26377;&#28040;&#24687;&#34987;&#35835;&#21040;&#20869;&#23384;&#24182;&#34987;&#36335;&#30001;&#12290;&#24403;&#25152;&#26377;&#28040;&#24687;&#22788;&#29702;&#21518;&#65292;&#35813;&#25991;&#20214;&#23601;
            &#34987;&#21024;&#38500;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="paging.main.config"></a>24.2.&nbsp;&#37197;&#32622;</h2></div></div><div></div></div><p>&#20320;&#21487;&#20197;&#37197;&#32622;&#20998;&#39029;&#36716;&#23384;&#25991;&#20214;&#22841;&#30340;&#20301;&#32622;&#12290;</p><p>&#22312;&#20027;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>)&#20013;
            &#21487;&#20197;&#23450;&#20041;&#20840;&#23616;&#30340;&#20998;&#39029;&#36716;&#21457;&#21442;&#25968;&#12290;</p><pre class="programlisting">&lt;configuration xmlns="urn:hornetq"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:hornetq /schema/hornetq-configuration.xsd"&gt;
            
            ...
            
            &lt;paging-directory&gt;/somewhere/paging-directory&lt;/paging-directory&gt;
            
            ...        </pre><p>
            </p><div class="table"><a name="d0e4444"></a><p class="title"><b>Table&nbsp;24.1.&nbsp;&#20998;&#39029;&#36716;&#23384;&#30340;&#37197;&#32622;&#21442;&#25968;</b></p><table summary="&#20998;&#39029;&#36716;&#23384;&#30340;&#37197;&#32622;&#21442;&#25968;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21442;&#25968;&#21517;</th><th>&#35828;&#26126;</th><th>&#40664;&#35748;&#20540;</th></tr></thead><tbody><tr><td><tt class="literal">paging-directory</tt></td><td>&#20998;&#39029;&#36716;&#23384;&#25991;&#20214;&#30340;&#20301;&#32622;&#12290;HornetQ&#22312;&#36825;&#20010;&#20301;&#32622;&#19979;&#20026;&#27599;&#20010;&#22320;&#22336;&#24314;&#31435;&#19968;&#20010;&#25991;&#20214;&#22841;&#12290;</td><td>data/paging</td></tr></tbody></table></div><p>
        </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="paging.mode"></a>24.3.&nbsp;&#20998;&#39029;&#36716;&#23384;&#27169;&#24335;</h2></div></div><div></div></div><p>&#19968;&#20010;&#22320;&#22336;&#21482;&#35201;&#28040;&#24687;&#30340;&#25968;&#37327;&#36229;&#36807;&#23450;&#20041;&#30340;&#20540;&#65292;&#23427;&#23601;&#36716;&#21040;&#20998;&#39029;&#36716;&#23384;&#30340;&#27169;&#24335;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#20998;&#39029;&#36716;&#23384;&#26159;&#38024;&#23545;&#27599;&#20010;&#22320;&#22336;&#35774;&#32622;&#30340;&#12290;&#22914;&#26524;&#20320;&#20026;&#19968;&#20010;&#22320;&#22336;&#37197;&#32622;&#20102;&#19968;&#20010;max-size-bytes&#65292;&#37027;&#20040;&#27599;&#20010;&#21305;&#37197;&#30340;&#22320;&#22336;
                &#37117;&#26377;&#19968;&#20010;&#26368;&#22823;&#20540;&#30340;&#38480;&#21046;&#12290;&#20294;&#26159;&#36825;&#24182;&#19981;&#34920;&#31034;&#25152;&#26377;&#21305;&#37197;&#30340;&#22320;&#22336;&#30340;&#22823;&#23567;&#24635;&#21644;&#21463;&#36825;&#20010;&#21442;&#25968;&#30340;&#38480;&#21046;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e4477"></a>24.3.1.&nbsp;&#37197;&#32622;</h3></div></div><div></div></div><p>&#26377;&#20851;&#20998;&#39029;&#36716;&#23384;&#30340;&#37197;&#32622;&#22312;&#20027;&#35201;&#37197;&#32622;&#25991;&#20214;&#65288;<tt class="literal">hornetq-configuration.xml</tt>&#65289;
                  &#30340;&#22320;&#22336;&#35774;&#32622;&#30340;&#37096;&#20998;&#20869;&#12290;</p><pre class="programlisting">  &lt;address-settings&gt;
      &lt;address-setting match="jms.someaddress"&gt;
         &lt;max-size-bytes&gt;104857600&lt;/max-size-bytes&gt;
         &lt;page-size-bytes&gt;10485760&lt;/page-size-bytes&gt;
         &lt;address-full-policy&gt;PAGE&lt;/address-full-policy&gt;
      &lt;/address-setting&gt;
   &lt;/address-settings&gt;
        </pre><p>&#19979;&#38754;&#21015;&#20986;&#20102;&#21487;&#29992;&#30340;&#21442;&#25968;&#65306;</p><p>
                </p><div class="table"><a name="d0e4491"></a><p class="title"><b>Table&nbsp;24.2.&nbsp;&#20998;&#39029;&#36716;&#23384;&#21442;&#25968;&#35774;&#32622;</b></p><table summary="&#20998;&#39029;&#36716;&#23384;&#21442;&#25968;&#35774;&#32622;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21442;&#25968;&#21517;&#31216;</th><th>&#35828;&#26126;</th><th>&#40664;&#35748;&#20540;</th></tr></thead><tbody><tr><td><tt class="literal">max-size-bytes</tt></td><td>&#22320;&#22336;&#30340;&#26368;&#22823;&#20869;&#23384;&#20540;&#12290;&#24403;&#28040;&#24687;&#21344;&#29992;&#20869;&#23384;&#36229;&#36807;&#27492;&#20540;&#26102;&#65292;&#36827;&#20837;&#20998;&#39029;&#36716;&#23384;&#27169;&#24335;&#12290;</td><td>-1 &#65288;&#20851;&#38381;&#20998;&#39029;&#36716;&#23384;&#21151;&#33021;&#65289;</td></tr><tr><td><tt class="literal">page-size-bytes</tt></td><td>&#27599;&#20010;&#20998;&#39029;&#25991;&#20214;&#30340;&#22823;&#23567;&#12290;</td><td>10MiB (10 * 1024 * 1024 &#23383;&#33410;)</td></tr><tr><td><tt class="literal">address-full-policy</tt></td><td>&#35201;&#20351;&#29992;&#20998;&#39029;&#36716;&#23384;&#65292;&#36825;&#20010;&#21442;&#25968;&#24517;&#39035;&#35774;&#20026;PAGE&#12290;PAGE&#34920;&#31034;&#22810;&#20313;&#30340;&#28040;&#24687;&#20250;&#34987;&#20445;&#23384;&#21040;&#30913;&#30424;&#12290;
                                    &#22914;&#26524;&#35774;&#20026;DROP&#65292;&#37027;&#20040;&#22810;&#20313;&#30340;&#28040;&#24687;&#23558;&#20250;&#34987;&#20002;&#24323;&#12290;&#22914;&#26524;&#35774;&#20026;BLOCK&#65292;&#24403;&#28040;&#24687;&#21344;&#28385;&#35774;&#23450;&#30340;&#26368;&#22823;
                                    &#20869;&#23384;&#26102;&#65292;&#22312;&#23458;&#25143;&#31471;&#28040;&#24687;&#30340;&#21457;&#36865;&#32773;&#23558;&#34987;&#38459;&#22622;&#65292;&#19981;&#33021;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;&#26356;&#22810;&#30340;&#28040;&#24687;&#12290;</td><td>PAGE</td></tr></tbody></table></div><p>
            </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4532"></a>24.4.&nbsp;&#20002;&#24323;&#28040;&#24687;</h2></div></div><div></div></div><p>&#19968;&#20010;&#22320;&#22336;&#38500;&#20102;&#21487;&#20197;&#20998;&#39029;&#36716;&#23384;&#22810;&#20313;&#30340;&#28040;&#24687;&#22806;&#65292;&#36824;&#21487;&#20197;&#37197;&#32622;&#20026;&#20002;&#24323;&#22810;&#20313;&#28040;&#24687;&#12290;</p><p>&#21482;&#35201;&#23558;<tt class="literal">address-full-policy</tt>&#35774;&#20026;<tt class="literal">DROP</tt>&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4545"></a>24.5.&nbsp;&#38459;&#22622;&#21457;&#36865;&#32773;&#65288;producer&#65289;</h2></div></div><div></div></div><p>&#19968;&#20010;&#22320;&#22336;&#38500;&#20102;&#21487;&#20197;&#20998;&#39029;&#36716;&#23384;&#22810;&#20313;&#30340;&#28040;&#24687;&#22806;&#65292;&#36824;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#20351;&#24471;&#28040;&#24687;&#30340;&#21457;&#36865;&#32773;&#22312;&#28040;&#24687;&#36798;&#21040;&#26368;&#22823;&#20540;&#26102;&#38459;&#22622;&#28040;&#24687;
              &#30340;&#21457;&#36865;&#65292;&#20197;&#38450;&#27490;&#26381;&#21153;&#22120;&#30001;&#20110;&#28040;&#24687;&#36807;&#22810;&#32780;&#32791;&#23613;&#20869;&#23384;&#12290;</p><p>&#38543;&#30528;&#26381;&#21153;&#22120;&#30340;&#20869;&#23384;&#34987;&#37322;&#25918;&#65292;&#21457;&#36865;&#32773;&#33258;&#21160;&#35299;&#38500;&#38459;&#22622;&#65292;&#32487;&#32493;&#21457;&#36865;&#28040;&#24687;&#12290;</p><p>&#36825;&#31181;&#26041;&#24335;&#38656;&#35201;&#23558;<tt class="literal">address-full-policy</tt>&#35774;&#20026;<tt class="literal">BLOCK</tt>&#12290;</p><p>&#22312;&#40664;&#35748;&#30340;&#37197;&#32622;&#20013;&#65292;&#25152;&#26377;&#30340;&#22320;&#22336;&#22312;&#28040;&#24687;&#30340;&#37327;&#36798;&#21040;10MiB&#21518;&#23558;&#38459;&#22622;&#21457;&#36865;&#32773;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4562"></a>24.6.&nbsp;&#23545;&#20110;&#26377;&#22810;&#20010;&#38431;&#21015;&#32465;&#23450;&#30340;&#22320;&#22336;&#30340;&#37197;&#32622;&#27880;&#24847;&#20107;&#39033;</h2></div></div><div></div></div><p>&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#36335;&#30001;&#21040;&#19968;&#20010;&#32465;&#23450;&#20102;&#22810;&#20010;&#38431;&#21015;&#65288;queue&#65289;&#30340;&#22320;&#22336;&#26102;&#65288;&#27604;&#22914;JMS&#30340;&#35746;&#38405;&#65289;&#65292;&#22312;&#20869;&#23384;&#20013;&#20173;&#28982;&#21482;&#26377;&#19968;&#20998;&#28040;&#24687;&#30340;&#25335;&#36125;&#12290;&#27599;&#20010;
            &#38431;&#21015;&#25152;&#25345;&#26377;&#30340;&#19981;&#36807;&#26159;&#23427;&#30340;&#19968;&#20010;&#24341;&#29992;&#12290;&#22240;&#27492;&#65292;&#21482;&#26377;&#25152;&#26377;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#37117;&#25104;&#21151;&#22320;&#20256;&#36882;&#20986;&#21435;&#21518;&#65292;&#36825;&#20010;&#28040;&#24687;&#25165;&#20250;&#20174;&#20869;&#23384;&#20013;&#28165;&#38500;&#12290;&#20063;&#23601;&#26159;&#35828;
            &#21482;&#35201;&#26377;&#19968;&#20010;&#38431;&#21015;&#27809;&#26377;&#20256;&#36882;&#36825;&#20010;&#28040;&#24687;&#65292;&#37027;&#20040;&#23601;&#20250;&#36896;&#25104;&#36825;&#20010;&#28040;&#24687;&#22788;&#20110;&#26410;&#34987;&#20256;&#36882;&#30340;&#29366;&#24577;&#12290; </p><p>&#20363;&#22914;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#19968;&#20010;&#22320;&#22336;&#32465;&#23450;&#20102;10&#20010;&#38431;&#21015;&#65288;queue&#65289;&#12290;</p></li><li><p>&#20854;&#20013;&#19968;&#20010;&#38431;&#21015;&#27809;&#26377;&#20256;&#36882;&#23427;&#30340;&#28040;&#24687;&#65288;&#20063;&#35768;&#22240;&#20026;&#25509;&#25910;&#32773;&#24456;&#24930;&#65289;&#12290;</p></li><li><p>&#28040;&#24687;&#19981;&#26029;&#22686;&#21152;&#65292;&#35302;&#21457;&#20102;&#20998;&#39029;&#36716;&#23384;&#27169;&#24335;&#12290;</p></li><li><p>&#32780;&#20854;&#23427;9&#20010;&#38431;&#21015;&#23613;&#31649;&#21457;&#36865;&#20102;&#28040;&#24687;&#65292;&#20294;&#30001;&#20110;&#22320;&#22336;&#23558;&#22810;&#20313;&#30340;&#28040;&#24687;&#36716;&#23384;&#21040;&#30913;&#30424;&#65292;&#25152;&#20197;&#23427;&#20204;&#37117;&#26159;&#31354;&#30340;&#12290;</p></li></ul></div><p>&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#65292;&#24517;&#39035;&#35201;&#31561;&#21040;&#26368;&#21518;&#19968;&#20010;&#38431;&#21015;&#20256;&#36882;&#20102;&#19968;&#20123;&#28040;&#24687;&#21518;&#65292;&#37027;&#20123;&#36716;&#23384;&#30340;&#28040;&#24687;&#34987;&#35013;&#36733;&#22238;&#20869;&#23384;&#65292;&#20854;&#23427;&#38431;&#21015;&#25165;&#26377;&#26426;&#20250;&#24471;&#21040;&#26356;&#22810;&#30340;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4584"></a>24.7.&nbsp;&#20998;&#39029;&#36716;&#23384;&#19982;&#28040;&#24687;&#30340;&#36873;&#25321;&#22120;&#65288;selector&#65289;</h2></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#35831;&#27880;&#24847;&#28040;&#24687;&#36873;&#25321;&#22120;&#21482;&#23545;&#20869;&#23384;&#30340;&#28040;&#24687;&#36827;&#34892;&#25805;&#20316;&#12290;&#22914;&#26524;&#22823;&#37327;&#30340;&#28040;&#24687;&#34987;&#36716;&#23384;&#22312;&#30913;&#30424;&#20013;&#65292;&#32780;&#20854;&#20013;&#26377;&#20123;&#28040;&#24687;&#19982;&#36873;&#25321;&#22120;&#26159;&#30456;&#21305;&#37197;&#30340;&#65292;
        &#37027;&#20040;&#21482;&#26377;&#20869;&#23384;&#30340;&#28040;&#24687;&#34987;&#20256;&#36882;&#65292;&#36825;&#20123;&#28040;&#24687;&#34987;&#37325;&#26032;&#35013;&#36733;&#20837;&#20869;&#23384;&#21518;&#25165;&#26377;&#21487;&#33021;&#34987;&#20256;&#36882;&#20986;&#21435;&#12290;
        HornetQ&#19981;&#20250;&#25195;&#25551;&#22312;&#30913;&#30424;&#20013;&#30340;&#28040;&#24687;&#26469;&#25214;&#20986;&#19982;&#36873;&#25321;&#22120;&#21305;&#37197;&#30340;&#28040;&#24687;&#12290;&#36825;&#26679;&#20570;&#30340;&#35805;&#38656;&#35201;&#23454;&#29616;&#24182;&#31649;&#29702;&#19968;&#31181;&#32034;&#24341;&#26426;&#21046;&#25165;&#33021;&#20351;&#25195;&#25551;&#26377;&#25928;&#22320;&#36827;&#34892;&#65292;&#21478;&#22806;
        &#38656;&#35201;&#20854;&#23427;&#39069;&#22806;&#30340;&#24037;&#20316;&#12290;&#25152;&#26377;&#36825;&#20123;&#22914;&#26524;&#21435;&#23436;&#25104;&#30340;&#35805;&#65292;&#30456;&#24403;&#20110;&#23454;&#29616;&#19968;&#20010;&#20851;&#31995;&#22411;&#25968;&#25454;&#24211;&#65281;&#36825;&#24182;&#19981;&#26159;&#28040;&#24687;&#31995;&#32479;&#30340;&#20027;&#35201;&#20219;&#21153;&#12290;&#22914;&#26524;&#20320;&#35201;&#23436;&#25104;&#30340;&#20219;&#21153;&#26159;
        &#20174;&#28023;&#37327;&#30340;&#28040;&#24687;&#20013;&#36873;&#25321;&#23569;&#25968;&#28040;&#24687;&#65292;&#37027;&#20040;&#20320;&#24456;&#21487;&#33021;&#38656;&#35201;&#20351;&#29992;&#30340;&#26159;&#19968;&#20010;&#20851;&#31995;&#22411;&#25968;&#25454;&#24211;&#65292;&#19981;&#26159;&#28040;&#24687;&#31995;&#32479;&#12290;&#22240;&#20026;&#36825;&#30456;&#24403;&#20110;&#34920;&#30340;&#26597;&#35810;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4590"></a>24.8.&nbsp;&#20998;&#39029;&#36716;&#23384;&#19982;&#27983;&#35272;&#22120;</h2></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#35831;&#27880;&#24847;&#27983;&#35272;&#22120;&#21482;&#23545;&#20869;&#23384;&#20013;&#30340;&#28040;&#24687;&#36827;&#34892;&#25805;&#20316;&#65292;&#23427;&#19981;&#23545;&#36716;&#23384;&#21040;&#30913;&#30424;&#20013;&#30340;&#28040;&#24687;&#36827;&#34892;&#25805;&#20316;&#12290;
        &#28040;&#24687;&#26159;&#22312;&#34987;&#36335;&#30001;&#21040;&#20219;&#20309;&#38431;&#21015;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#36827;&#34892;&#36716;&#23384;&#30340;&#65292;&#25152;&#20197;&#22312;&#36716;&#23384;&#26102;&#21051;&#65292;&#23427;&#20204;&#36824;&#27809;&#26377;&#36827;&#20837;&#21040;&#20219;&#20309;&#38431;&#21015;&#20013;&#65292;
        &#33258;&#28982;&#20063;&#23601;&#19981;&#21487;&#33021;&#20986;&#29616;&#22312;&#23545;&#26576;&#20010;&#38431;&#21015;&#27983;&#35272;&#30340;&#32080;&#26524;&#20013;&#12290;
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4599"></a>24.9.&nbsp;&#20998;&#39029;&#36716;&#23384;&#19982;&#26410;&#36890;&#30693;&#30340;&#28040;&#24687;</h2></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
            &#35831;&#27880;&#24847;&#22914;&#26524;&#28040;&#24687;&#27809;&#26377;&#34987;&#36890;&#30693;&#65292;&#23427;&#20250;&#19968;&#30452;&#30041;&#22312;&#26381;&#21153;&#22120;&#30340;&#20869;&#23384;&#20013;&#65292;&#21344;&#29992;&#30528;&#20869;&#23384;&#36164;&#28304;&#12290;&#21482;&#35201;&#28040;&#24687;&#22312;&#34987;&#25509;&#25910;&#32773;&#25910;&#21040;&#24182;&#36890;&#30693;&#21518;&#65292;&#23427;&#25165;
            &#20250;&#22312;&#26381;&#21153;&#22120;&#31471;&#34987;&#28165;&#38500;&#65292;&#31354;&#20986;&#20869;&#23384;&#31354;&#38388;&#20197;&#20415;&#36716;&#23384;&#22312;&#30913;&#30424;&#19978;&#30340;&#28040;&#24687;&#34987;&#35013;&#36733;&#21040;&#20869;&#23384;&#36827;&#34892;&#20256;&#36882;&#12290;&#22914;&#26524;&#27809;&#26377;&#36890;&#30693;&#65292;&#28040;&#24687;&#19981;&#20250;&#34987;&#28165;&#38500;&#65292;
            &#20063;&#23601;&#19981;&#20250;&#31354;&#20986;&#20869;&#23384;&#31354;&#38388;&#65292;&#36716;&#23384;&#21040;&#30913;&#30424;&#19978;&#30340;&#28040;&#24687;&#20063;&#23601;&#26080;&#27861;&#35013;&#36733;&#21040;&#20869;&#23384;&#36827;&#34892;&#20256;&#36882;&#12290;&#20110;&#26159;&#22312;&#25509;&#25910;&#31471;&#23601;&#20250;&#21576;&#29616;&#20986;&#27515;&#26426;&#30340;&#29616;&#35937;&#12290;
            
            &#22914;&#26524;&#28040;&#24687;&#30340;&#36890;&#30693;&#26159;&#20381;&#38752;<tt class="literal">ack-batch-size</tt>&#30340;&#35774;&#23450;&#36827;&#34892;&#30340;&#25209;&#37327;&#36890;&#30693;&#65292;&#37027;&#20040;&#19968;&#23450;&#35201;&#27880;&#24847;&#19981;&#35201;&#23558;
            &#20998;&#39029;&#36716;&#23384;&#30340;&#28040;&#24687;&#20020;&#30028;&#20540;&#35774;&#24471;&#23567;&#20110;<tt class="literal">ack-batch-size</tt>&#65292;&#21542;&#21017;&#20320;&#30340;&#31995;&#32479;&#21487;&#33021;&#20250;&#21457;&#29983;&#27515;&#26426;&#29616;&#35937;!
        </p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4611"></a>24.10.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p><a href="#examples.paging" title="11.1.34.&nbsp;&#20998;&#39029;&#65288;paging&#65289;">Section&nbsp;11.1.34, &#8220;&#20998;&#39029;&#65288;paging&#65289;&#8221;</a>&#26159;&#19968;&#20010;&#35828;&#26126;&#22914;&#20309;&#20351;&#29992;HornetQ&#30340;&#20998;&#39029;&#36716;&#21457;&#21151;&#33021;&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="queue-attributes"></a>Chapter&nbsp;25.&nbsp;&#38431;&#21015;&#23646;&#24615;</h2></div></div><div></div></div><p>&#26377;&#20004;&#31181;&#26041;&#27861;&#21487;&#20197;&#35774;&#32622;&#38431;&#21015;&#30340;&#23646;&#24615;&#12290;&#19968;&#31181;&#20351;&#29992;&#37197;&#32622;&#25991;&#20214;&#65292;&#21478;&#19968;&#31181;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;core API&#65289;&#12290;
        &#26412;&#31456;&#35762;&#36848;&#36825;&#20123;&#23646;&#24615;&#30340;&#37197;&#32622;&#20197;&#21450;&#36825;&#20123;&#23646;&#24615;&#30340;&#20316;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="predefined.queues"></a>25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;</h2></div></div><div></div></div><p>&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#23450;&#20041;&#38431;&#21015;&#12290;&#38431;&#21015;&#30340;&#23450;&#20041;&#21487;&#20197;&#22312;&#26680;&#24515;&#23618;&#23450;&#20041;&#65292;&#20063;&#21487;&#20197;&#22312;JMS&#23618;&#26469;&#23450;&#20041;&#12290;&#39318;&#20808;&#25105;&#20204;&#30475;&#19968;&#19979;JMS&#23618;&#12290;</p><p>&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#23450;&#20041;&#30340;&#19968;&#20010;&#38431;&#21015;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;queue name="selectorQueue"&gt;
      &lt;entry name="/queue/selectorQueue"/&gt;
      &lt;selector string="color='red'"/&gt;
      &lt;durable&gt;true&lt;/durable&gt;
&lt;/queue&gt;</pre><p>&#36825;&#20010;&#38431;&#21015;&#30340;name&#23646;&#24615;&#23450;&#20041;&#20102;&#38431;&#21015;&#30340;&#21517;&#23383;&#12290;&#20363;&#23376;&#20013;&#25105;&#20204;&#37319;&#29992;&#20102;&#19968;&#31181;&#21629;&#21517;&#30340;&#24815;&#20363;&#65292;&#22240;&#20123;&#23545;&#24212;&#30340;&#26680;&#24515;&#38431;&#21015;&#30340;&#21517;&#23383;&#26159;
            <tt class="literal">jms.queue.selectorQueue</tt>&#12290;</p><p>&#22312;entry&#21333;&#20803;&#20869;&#23450;&#20041;&#30340;&#21517;&#23383;&#29992;&#26469;&#23558;&#38431;&#21015;&#32465;&#23450;&#20110;JNDI&#12290;&#36825;&#26159;&#24517;&#19981;&#21487;&#23569;&#30340;&#12290;&#19968;&#20010;&#38431;&#21015;&#21487;&#20197;&#26377;&#22810;&#20010;entry&#23450;&#20041;&#65292;&#27599;&#20010;
            &#23450;&#20041;&#20013;&#30340;&#21517;&#23383;&#37117;&#32465;&#23450;&#21040;&#21516;&#19968;&#20010;&#38431;&#21015;&#12290;</p><p>selector&#21333;&#20803;&#23450;&#20041;&#30340;&#26159;&#38431;&#21015;&#30340;&#36873;&#25321;&#22120;&#12290;&#23450;&#20041;&#20102;&#36873;&#25321;&#22120;&#21518;&#65292;&#21482;&#26377;&#19982;&#36873;&#25321;&#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#33021;&#34987;&#21152;&#21040;&#38431;&#21015;&#20013;&#12290;
            &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#39033;&#12290;&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36873;&#25321;&#22120;&#65292;&#38431;&#21015;&#23558;&#40664;&#35748;&#27809;&#26377;&#36873;&#25321;&#22120;&#12290;</p><p>durable&#23450;&#20041;&#20102;&#38431;&#21015;&#26159;&#21542;&#26159;&#19968;&#20010;&#21487;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;&#36825;&#20063;&#26159;&#19968;&#20010;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;true&#12290;</p><p>&#22914;&#26524;&#22312;&#26680;&#24515;&#23618;&#23450;&#20041;&#38431;&#21015;&#65292;&#21017;&#20351;&#29992;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#12290;
            &#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;queues&gt;     
   	&lt;queue name="jms.queue.selectorQueue"&gt;
   	    &lt;address&gt;jms.queue.selectorQueue&lt;/address&gt;
   	    &lt;filter string="color='red'"/&gt;
       &lt;durable&gt;true&lt;/durable&gt;
   	&lt;/queue&gt;
&lt;/queues&gt;</pre><p>&#23427;&#30340;&#37197;&#32622;&#19982;JMS&#30340;&#37197;&#32622;&#24456;&#30456;&#20284;&#65292;&#20294;&#26377;&#19977;&#20010;&#19981;&#21516;&#20043;&#22788;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#38431;&#21015;&#30340;name&#23646;&#24615;&#26159;&#38431;&#21015;&#30340;&#30495;&#27491;&#21517;&#23383;&#65292;&#19981;&#26159;JMS&#20013;&#30340;&#21517;&#23383;&#12290;</p></li><li><p>address&#19968;&#39033;&#23450;&#20041;&#20102;&#28040;&#24687;&#36335;&#30001;&#30340;&#22320;&#22336;&#12290;</p></li><li><p>&#27809;&#26377;entry&#21333;&#20803;&#12290;</p></li><li><p>filter&#30340;&#23450;&#20041;&#20351;&#29992;<span class="emphasis"><em>&#26680;&#24515;&#36807;&#28388;&#22120;&#35821;&#27861;</em></span> &#65288;&#22312;
                        <a href="#filter-expressions" title="Chapter&nbsp;14.&nbsp;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;">Chapter&nbsp;14, <i>&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</i></a>&#20013;&#25551;&#36848;&#65289;&#65292;&#19981;&#26159;JMS&#30340;&#36873;&#25321;&#22120;&#35821;&#27861;&#12290;</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4689"></a>25.2.&nbsp;&#20351;&#29992;&#25509;&#21475;&#65288;API&#65289;&#21019;&#24314;&#38431;&#21015;</h2></div></div><div></div></div><p>&#38431;&#21015;&#36824;&#21487;&#20197;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#25110;&#31649;&#29702;&#25509;&#21475;&#26469;&#21019;&#24314;&#12290;</p><p>&#26680;&#24515;&#25509;&#21475;&#30340;<tt class="literal">org.hornetq.api.core.client.ClientSession</tt>&#25509;&#21475;&#21487;&#20197;&#29992;&#26469;
              &#21019;&#24314;&#38431;&#21015;&#12290;&#23427;&#26377;&#20960;&#20010;<tt class="literal">createQueue</tt>&#26041;&#27861;&#65292;&#21487;&#20197;&#22312;&#21019;&#24314;&#38431;&#21015;&#26102;&#23545;&#19978;&#36848;&#30340;&#23646;&#24615;&#36827;&#34892;&#35774;&#32622;&#12290;
              &#38500;&#27492;&#20043;&#22806;&#65292;&#36824;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;&#23646;&#24615;<tt class="literal">temporary</tt>&#21487;&#20197;&#35774;&#32622;&#12290;&#22914;&#26524;&#23558;&#20854;&#35774;&#20026;true&#65292;
              &#37027;&#20040;&#38431;&#21015;&#22312;&#20250;&#35805;&#26029;&#24320;&#26102;&#23558;&#34987;&#21024;&#38500;&#12290;</p><p>&#22312;<a href="#management" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;">Chapter&nbsp;30, <i>&#31649;&#29702;</i></a>&#20013;&#35762;&#36848;&#20102;&#22914;&#20309;&#29992;&#31649;&#29702;&#25509;&#21475;&#26469;&#21019;&#24314;&#38431;&#21015;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queue-attributes.address-settings"></a>25.3.&nbsp;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;</h2></div></div><div></div></div><p>&#26377;&#20123;&#23646;&#24615;&#30340;&#23450;&#20041;&#20013;&#22320;&#22336;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#12290;&#19979;&#38754;&#26159;<tt class="literal">hornetq-configuration.xml</tt>
            &#25991;&#20214;&#20013;&#30340;&#19968;&#20010;<tt class="literal">address-setting</tt>&#30340;&#37197;&#32622;&#20363;&#23376;&#12290;</p><pre class="programlisting">&lt;address-settings&gt;
    &lt;address-setting match="jms.queue.exampleQueue"&gt;
        &lt;dead-letter-address&gt;jms.queue.deadLetterQueue&lt;/dead-letter-address&gt;
        &lt;max-delivery-attempts&gt;3&lt;/max-delivery-attempts&gt;
        &lt;redelivery-delay&gt;5000&lt;/redelivery-delay&gt;
        &lt;expiry-address&gt;jms.queue.expiryQueue&lt;/expiry-address&gt;
        &lt;last-value-queue&gt;true&lt;/last-value-queue&gt;        
        &lt;max-size-bytes&gt;100000&lt;/max-size-bytes&gt;
        &lt;page-size-bytes&gt;20000&lt;/page-size-bytes&gt;
        &lt;redistribution-delay&gt;0&lt;/redistribution-delay&gt;
        &lt;send-to-dla-on-no-route&gt;true&lt;/send-to-dla-on-no-route&gt;
        &lt;address-full-policy&gt;PAGE&lt;/address-full-policy&gt;
     &lt;/address-setting&gt;
&lt;/address-settings&gt;</pre><p>&#36890;&#36807;&#19978;&#36848;&#30340;&#22320;&#22336;&#35774;&#23450;&#21487;&#20197;&#23558;&#22810;&#20010;&#23646;&#24615;&#24212;&#29992;&#20110;&#25152;&#26377;&#19982;<tt class="literal">match</tt>&#23646;&#24615;&#30456;&#21305;&#37197;&#30340;&#22320;&#22336;&#12290;
            &#19978;&#38754;&#20363;&#23376;&#20013;&#25152;&#23450;&#20041;&#30340;&#23646;&#24615;&#24212;&#29992;&#20110;<tt class="literal">jms.queue.exampleQueue</tt>&#30340;&#22320;&#22336;&#12290;&#22914;&#26524;&#20351;&#29992;
            &#36890;&#37197;&#31526;&#65292;&#23601;&#21487;&#20197;&#23558;&#36825;&#20123;&#23646;&#24615;&#24212;&#29992;&#20110;&#19968;&#32452;&#21305;&#37197;&#30340;&#22320;&#22336;&#12290;&#36890;&#37197;&#31526;&#30340;&#35814;&#32454;&#35828;&#26126;&#22312;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">&#36825;&#37324;</a>&#12290;</p><p>&#20363;&#22914;&#22312;<tt class="literal">match</tt>&#20013;&#23450;&#20041;&#23383;&#31526;&#20018;<tt class="literal">jms.queue.#</tt>&#65292;&#37027;&#20040;
        &#23450;&#20041;&#30340;&#23646;&#24615;&#23601;&#20250;&#24212;&#29992;&#20110;&#25152;&#26377;&#20197;<tt class="literal">jms.queue.</tt>&#24320;&#22836;&#30340;&#22320;&#22336;&#65293;&#65293;&#21363;&#25152;&#26377;&#30340;JMS&#38431;&#21015;&#12290;</p><p>&#36825;&#20123;&#23646;&#24615;&#22312;&#26412;&#25163;&#20876;&#30340;&#21508;&#20010;&#22320;&#26041;&#26377;&#30456;&#24212;&#30340;&#20171;&#32461;&#12290;&#22312;&#27492;&#22788;&#32473;&#20986;&#20102;&#31616;&#21333;&#30340;&#35299;&#37322;&#21508;&#23427;&#25152;&#22312;&#31456;&#30340;&#36830;&#25509;&#12290;</p><p><tt class="literal">max-delivery-attempts</tt>&#23450;&#20041;&#20102;&#26368;&#22823;&#37325;&#20256;&#36882;&#30340;&#27425;&#25968;&#12290;&#19968;&#20010;&#28040;&#24687;&#22914;&#26524;&#21453;&#22797;&#20256;&#36882;&#36229;&#36807;
            &#20102;&#36825;&#20010;&#20540;&#23558;&#20250;&#34987;&#21457;&#24448;&#27515;&#20449;&#22320;&#22336;<tt class="literal">dead-letter-address</tt>&#12290;&#30456;&#20851;&#30340;&#23436;&#25972;&#30340;&#35299;&#37322;&#22312;
            <a href="#undelivered-messages.configuring" title="21.2.1.&nbsp;&#37197;&#32622;&#27515;&#20449;&#22320;&#22336;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">redelivery-delay</tt>&#23450;&#20041;&#20102;&#37325;&#26032;&#20256;&#36882;&#30340;&#24310;&#36831;&#12290;&#23427;&#25511;&#21046;HornetQ&#22312;&#37325;&#26032;
            &#20256;&#36882;&#19968;&#20010;&#34987;&#21462;&#28040;&#30340;&#28040;&#24687;&#26102;&#35201;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;&#21442;&#35265;<a href="#undelivered-messages.delay" title="21.1.1.&nbsp;&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">expiry-address</tt>&#23450;&#20041;&#20102;&#36807;&#26399;&#28040;&#24687;&#30340;&#21457;&#36865;&#22320;&#22336;&#12290;&#21442;&#35265;<a href="#message-expiry.configuring" title="22.2.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">last-value-queue</tt> &#23450;&#20041;&#19968;&#20010;&#38431;&#21015;&#26159;&#21542;&#20351;&#29992;&#26368;&#26032;&#20540;&#12290;&#21442;&#35265;<a href="#last-value-queues" title="Chapter&nbsp;27.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;&#65288;Last-Value Queues&#65289;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">max-size-bytes</tt>&#21644;<tt class="literal">page-size-bytes</tt>&#29992;&#26469;&#35774;&#32622;&#22320;&#22336;&#30340;&#20998;&#39029;&#36716;&#23384;&#21151;&#33021;&#12290;
            &#23427;&#20204;&#22312;<a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">&#36825;&#37324;</a>&#26377;&#35814;&#32454;&#30340;&#35299;&#37322;&#12290;</p><p><tt class="literal">redistribution-delay</tt>&#23450;&#20041;&#20102;&#24403;&#26368;&#21518;&#19968;&#20010;&#25509;&#25910;&#32773;&#20851;&#38381;&#26102;&#37325;&#26032;&#20998;&#37197;&#38431;&#21015;&#28040;&#24687;&#21069;&#25152;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;
            &#21442;&#35265;<a href="#clusters.message-redistribution" title="38.6.&nbsp;&#28040;&#24687;&#20877;&#20998;&#37197;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">send-to-dla-on-no-route</tt>&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#36865;&#21040;&#26576;&#20010;&#22320;&#22336;&#26102;&#65292;&#21487;&#33021;&#19981;&#20250;&#34987;&#36335;&#30001;&#21040;&#20219;&#20309;&#19968;&#20010;&#38431;&#21015;&#12290;
            &#20363;&#22914;&#35813;&#22320;&#22336;&#27809;&#26377;&#32465;&#23450;&#20219;&#20309;&#38431;&#21015;&#30340;&#24773;&#20917;&#65292;&#25110;&#32773;&#23427;&#25152;&#26377;&#30340;&#38431;&#21015;&#30340;&#36873;&#25321;&#22120;&#19982;&#35813;&#28040;&#24687;&#19981;&#21305;&#37197;&#26102;&#12290;&#36825;&#26679;&#30340;&#28040;&#24687;&#36890;&#24120;&#24773;&#20917;&#19979;&#20250;&#34987;&#20002;&#24323;&#12290;&#36825;&#26102;
            &#22914;&#26524;&#23558;&#36825;&#20010;&#21442;&#25968;&#35774;&#20026;true&#65292;&#21017;&#22914;&#26524;&#36825;&#20010;&#22320;&#22336;&#37197;&#32622;&#20102;&#27515;&#20449;&#22320;&#22336;&#30340;&#35805;&#65292;&#36825;&#26679;&#30340;&#28040;&#24687;&#23601;&#20250;&#34987;&#21457;&#36865;&#21040;&#35813;&#22320;&#22336;&#30340;&#27515;&#20449;&#22320;&#22336;&#65288;DLA&#65289;&#12290;</p><p><tt class="literal">address-full-policy</tt>&#12290;&#36825;&#20010;&#23646;&#24615;&#26377;&#19977;&#20010;&#21487;&#33021;&#30340;&#20540;&#65306;PAGE&#12289; DROP &#25110; BLOCK&#12290;&#23427;&#20915;&#23450;&#20102;
            &#22914;&#26524;&#22320;&#22336;&#30340;&#28040;&#24687;&#25152;&#21344;&#29992;&#30340;&#20869;&#23384;&#36798;&#21040;&#20102;<tt class="literal">max-size-bytes</tt>&#25152;&#23450;&#20041;&#30340;&#20540;&#26102;&#65292;&#22914;&#20309;&#22788;&#29702;&#21518;&#32487;&#21040;&#26469;&#30340;&#28040;&#24687;&#12290;
            &#40664;&#35748;&#20540;&#26159;PAGE&#65292;&#23601;&#26159;&#23558;&#21518;&#32493;&#30340;&#28040;&#24687;&#20998;&#39029;&#36716;&#23384;&#21040;&#30913;&#30424;&#19978;&#12290;DROP&#21017;&#34920;&#31034;&#20002;&#24323;&#21518;&#32493;&#30340;&#28040;&#24687;&#12290;BLOCK&#34920;&#31034;&#38459;&#22622;&#28040;&#24687;&#30340;&#21457;&#36865;&#26041;&#21457;&#36865;&#21518;&#32493;
            &#30340;&#28040;&#24687;&#12290;&#21442;&#35265;<a href="#flow-control" title="Chapter&nbsp;19.&nbsp;&#27969;&#25511;&#21046;">Chapter&nbsp;19, <i>&#27969;&#25511;&#21046;</i></a>&#21644;<a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">Chapter&nbsp;24, <i>&#20998;&#39029;&#36716;&#23384;</i></a>&#12290;
        </p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="scheduled-messages"></a>Chapter&nbsp;26.&nbsp;&#23450;&#26399;&#28040;&#24687;</h2></div></div><div></div></div><p>&#19982;&#26222;&#36890;&#28040;&#24687;&#19981;&#21516;&#65292;&#23450;&#26399;&#28040;&#24687;&#26159;&#22312;&#26410;&#26469;&#26576;&#20010;&#25351;&#23450;&#26102;&#38388;&#21457;&#36865;&#30340;&#28040;&#24687;&#12290;</p><p>&#20026;&#20102;&#21019;&#24314;&#23450;&#26399;&#28040;&#24687;&#65292;&#38656;&#35201;&#35774;&#23450;&#19968;&#20010;&#29305;&#27530;&#30340;&#21442;&#25968;.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4833"></a>26.1.&nbsp;&#23450;&#26399;&#20256;&#36882;&#21442;&#25968;</h2></div></div><div></div></div><p>&#29992;&#26469;&#26631;&#35782;&#19968;&#20010;&#23450;&#26399;&#28040;&#24687;&#30340;&#21442;&#25968;&#26159;<tt class="literal">"_HQ_SCHED_DELIVERY"</tt> &#65288;&#30456;&#24403;&#20110;&#24120;&#37327;<tt class="literal">Message.HDR_SCHEDULED_DELIVERY_TIME</tt>&#65289;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#20540;&#24517;&#39035;&#26159;&#19968;&#20010;&#22823;&#20110;&#38646;&#30340;&#38271;&#25972;&#22411;&#65292;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;&#19979;&#38754;&#20363;&#23376;&#32473;&#20986;&#20102;&#20351;&#29992;JMS&#25509;&#21475;&#21019;&#24314;&#23450;&#26399;&#28040;&#24687;&#30340;&#26041;&#27861;&#65306;</p><pre class="programlisting">
  TextMessage message = 
   session.createTextMessage("This is a scheduled message message which will be delivered
     in 5 sec.");
  message.setLongProperty("_HQ_SCHED_DELIVERY", System.currentTimeMillis() + 5000);
  producer.send(message);

  ...
         
  // message will not be received immediately but 5 seconds later
  TextMessage messageReceived = (TextMessage) consumer.receive();
      </pre><p>&#20063;&#21487;&#20197;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#26469;&#21457;&#36865;&#23450;&#26399;&#28040;&#24687;&#12290;&#23427;&#21482;&#38656;&#35201;&#23558;&#21516;&#26679;&#30340;&#21442;&#25968;&#35774;&#23450;&#21040;&#26680;&#24515;&#28040;&#24687;&#19978;&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4850"></a>26.2.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.scheduled-message" title="11.1.43.&nbsp;&#23450;&#26102;&#28040;&#24687;">Section&nbsp;11.1.43, &#8220;&#23450;&#26102;&#28040;&#24687;&#8221;</a>&#65292;&#23427;&#26159;&#19968;&#20010;JMS&#20351;&#29992;&#23450;&#26399;&#28040;&#24687;&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="last-value-queues"></a>Chapter&nbsp;27.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;&#65288;Last-Value Queues&#65289;</h2></div></div><div></div></div><p>&#26368;&#26032;&#20540;&#38431;&#21015;&#26159;&#19968;&#31181;&#29305;&#27530;&#30340;&#38431;&#21015;&#12290;&#24403;&#19968;&#20010;&#26032;&#28040;&#24687;&#21040;&#36798;&#19968;&#20010;&#26368;&#26032;&#20540;&#38431;&#21015;&#26102;&#65292;&#23427;&#20250;&#23558;&#25152;&#26377;&#19982;&#35813;&#28040;&#24687;&#23450;&#20041;&#30340;Last-Value&#30456;&#21516;&#30340;&#26087;&#28040;&#24687;
      &#25243;&#24323;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#21482;&#26377;&#26368;&#26032;&#30340;&#28040;&#24687;&#34987;&#20445;&#30041;&#19979;&#26469;&#12290;</p><p>&#19968;&#20010;&#20856;&#22411;&#30340;&#29992;&#20363;&#26159;&#32929;&#20215;&#20449;&#24687;&#65292;&#36890;&#24120;&#20320;&#21482;&#20851;&#24515;&#19968;&#25903;&#32929;&#31080;&#30340;&#26368;&#26032;&#20215;&#26684;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4881"></a>27.1.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#26368;&#26032;&#20540;&#38431;&#21015;&#30340;&#37197;&#32622;&#22312;address-setting&#20869;&#65306;</p><pre class="programlisting">
&lt;address-setting match="jms.queue.lastValueQueue"&gt;
    &lt;last-value-queue&gt;true&lt;/last-value-queue&gt;
&lt;/address-setting&gt;
            </pre><p>&#40664;&#35748;&#30340;<tt class="literal">last-value-queue</tt>&#20540;&#26159;false&#12290;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#26469;&#21305;&#37197;&#22320;&#22336;&#12290;
            &#65288;&#21442;&#35265; <a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4895"></a>27.2.&nbsp;&#20351;&#29992;Last-Value&#21442;&#25968;</h2></div></div><div></div></div><p>&#29992;&#26469;&#26631;&#35782;&#26368;&#26032;&#20540;&#30340;&#21442;&#25968;&#21517;&#26159;<tt class="literal">"_HQ_LVQ_NAME"</tt>
         &#65288;&#30456;&#24403;&#20110;&#26680;&#24515;API&#20013;&#23450;&#20041;&#30340;&#24120;&#37327;<tt class="literal">Message.HDR_LAST_VALUE_NAME</tt>&#65289;&#12290;</p><p>&#22914;&#26524;&#20004;&#20010;&#28040;&#24687;&#20855;&#26377;&#30456;&#21516;&#30340;Last-Value&#20540;&#65292;&#37027;&#20040;&#36739;&#26032;&#30340;&#28040;&#24687;&#23601;&#20250;&#20445;&#30041;&#65292;&#21478;&#22806;&#19968;&#20010;&#34987;&#20002;&#24323;&#65306;</p><pre class="programlisting">
// send 1st message with Last-Value property set to STOCK_NAME
TextMessage message = 
  session.createTextMessage("1st message with Last-Value property set");
message.setStringProperty("_HQ_LVQ_NAME", "STOCK_NAME");
producer.send(message);

// send 2nd message with Last-Value property set to STOCK_NAME             
message = 
  session.createTextMessage("2nd message with Last-Value property set");
message.setStringProperty("_HQ_LVQ_NAME", "STOCK_NAME");
producer.send(message);
       
...
       
// only the 2nd message will be received: it is the latest with 
// the Last-Value property set
TextMessage messageReceived = (TextMessage)messageConsumer.receive(5000);
System.out.format("Received message: %s\n", messageReceived.getText());             
            </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4910"></a>27.3.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.last-value-queue" title="11.1.23.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;">Section&nbsp;11.1.23, &#8220;&#26368;&#26032;&#20540;&#38431;&#21015;&#8221;</a>&#12290;&#23427;&#23637;&#31034;&#30340;&#26159;&#22312;JMS&#24212;&#29992;&#20013;&#26469;&#37197;&#32622;&#21644;&#20351;&#29992;
         &#26368;&#26032;&#20540;&#38431;&#21015;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="message-grouping"></a>Chapter&nbsp;28.&nbsp;&#28040;&#24687;&#20998;&#32452;</h2></div></div><div></div></div><p>&#28040;&#24687;&#32452;&#26159;&#20855;&#26377;&#19979;&#21015;&#29305;&#24615;&#30340;&#28040;&#24687;&#38598;&#21512;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22312;&#19968;&#20010;&#28040;&#24687;&#32452;&#20013;&#30340;&#28040;&#24687;&#26377;&#30456;&#21516;&#30340;&#32452;&#26631;&#35782;&#65288;id&#65289;&#65292;&#21363;&#23427;&#20204;&#30340;<tt class="literal">JMSXGroupID</tt>&#65288;JMS&#65289;&#25110;
               <tt class="literal">_HQ_GROUP_ID</tt>&#65288;HornetQ&#26680;&#24515;&#65289;&#30340;&#20540;&#30456;&#21516;&#12290;</p></li><li><p>&#19981;&#31649;&#23384;&#22312;&#22810;&#23569;&#20010;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#65292;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#25152;&#26377;&#28040;&#24687;&#24635;&#26159;&#34987;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#25152;&#25509;&#25910;&#12290;&#19968;&#20010;&#32452;id&#24635;&#26159;
            &#19982;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#30456;&#20851;&#32852;&#12290;&#22914;&#26524;&#36825;&#20010;&#25509;&#25910;&#32773;&#34987;&#20851;&#38381;&#65292;&#21478;&#22806;&#19968;&#20010;&#25509;&#25910;&#32773;&#23601;&#34987;&#36873;&#20013;&#26469;&#20195;&#26367;&#23427;&#25509;&#25910;&#35813;&#28040;&#24687;&#32452;&#30340;&#28040;&#24687;&#12290;</p></li></ul></div><p>&#28040;&#24687;&#32452;&#22312;&#38656;&#35201;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#25353;&#39034;&#24207;&#22788;&#29702;&#26576;&#31867;&#28040;&#24687;&#30340;&#26102;&#20505;&#24456;&#26377;&#29992;&#12290;</p><p>&#19968;&#25903;&#32929;&#31080;&#30340;&#35746;&#36141;&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;&#12290;&#26576;&#25903;&#32929;&#31080;&#30340;&#35746;&#21333;&#38656;&#35201;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#25353;&#39034;&#24207;&#22788;&#29702;&#12290;&#20110;&#26159;&#21487;&#20197;&#27599;&#25903;&#32929;&#31080;&#26377;&#19968;&#20010;&#25509;&#25910;&#32773;
      &#26469;&#22788;&#29702;&#65288;&#20063;&#21487;&#20197;&#29992;&#23569;&#19968;&#20123;&#30340;&#25509;&#25910;&#32773;&#65289;&#65292;&#28982;&#21518;&#23558;&#27599;&#25903;&#32929;&#31080;&#30340;&#21517;&#23383;&#35774;&#22312;&#28040;&#24687;&#30340;_HQ_GROUP_ID&#21442;&#25968;&#20013;&#12290;</p><p>&#36825;&#26679;&#21487;&#20197;&#20445;&#35777;&#19968;&#25903;&#32929;&#31080;&#30340;&#28040;&#24687;&#21482;&#34987;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#22788;&#29702;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4958"></a>28.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;</h2></div></div><div></div></div><p>&#29992;&#26469;&#26631;&#35782;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#21442;&#25968;&#26159; <tt class="literal">"_HQ_GROUP_ID""</tt> &#65288;&#25110;&#32773;&#30456;&#24212;&#30340;&#24120;&#37327;<tt class="literal">MessageImpl.HDR_GROUP_ID</tt>&#65289;&#12290;&#21478;&#19968;&#31181;&#26041;&#27861;&#26159;&#22312;<tt class="literal">SessionFactory</tt>
         &#20013;&#23558;<tt class="literal">autogroup</tt>&#35774;&#32622;&#20026;true&#12290;&#36825;&#26679;&#20570;&#30340;&#35805;&#32452;id&#26159;&#38543;&#26426;&#32473;&#20986;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="message-grouping.jmsconfigure"></a>28.2.&nbsp;&#20351;&#29992;JMS</h2></div></div><div></div></div><p>&#29992;&#26469;&#26631;&#35782;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#21442;&#25968;&#26159;<tt class="literal">JMSXGroupID</tt>&#12290;</p><pre class="programlisting">
 // send 2 messages in the same group to ensure the same
 // consumer will receive both
 Message message = ...
 message.setStringProperty("JMSXGroupID", "Group-0");
 producer.send(message);

 message = ...
 message.setStringProperty("JMSXGroupID", "Group-0");
 producer.send(message);          
       </pre><p>&#21478;&#19968;&#20010;&#26041;&#27861;&#26159;&#23558;<tt class="literal">HornetQConnectonFactory</tt>&#30340;<tt class="literal">autogroup</tt>
         &#23646;&#24615;&#35774;&#20026;true&#65292;&#25110;&#32773;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;
      &lt;/entries&gt;
      &lt;autogroup&gt;true&lt;/autogroup&gt;
&lt;/connection-factory&gt;</pre><p>&#36824;&#21487;&#20197;&#36890;&#36807;&#36830;&#25509;&#24037;&#21378;&#26469;&#35774;&#32622;&#32452;id&#12290;&#26469;&#33258;&#36825;&#20010;&#36830;&#25509;&#24037;&#21378;&#30340;&#25152;&#26377;&#30340;&#21457;&#36865;&#32773;&#65288;producer&#65289;&#21457;&#36865;&#30340;&#28040;&#24687;&#30340;<tt class="literal">JMSXGroupID</tt>&#23558;&#20855;&#26377;&#25351;&#23450;&#30340;&#20540;&#12290;&#36825;&#31181;&#26041;&#27861;&#38656;&#35201;&#22312;<tt class="literal">hornetq-jms.xml</tt>
            &#25991;&#20214;&#20013;&#20316;&#22914;&#19979;&#37197;&#32622;&#65306;
         </p><pre class="programlisting">
         &lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;
      &lt;/entries&gt;
      &lt;group-id&gt;Group-0&lt;/group-id&gt;
   &lt;/connection-factory&gt;
      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5008"></a>28.3.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.message-group" title="11.1.29.&nbsp;&#28040;&#24687;&#32452;">Section&nbsp;11.1.29, &#8220;&#28040;&#24687;&#32452;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#30340;&#26159;&#22312;JMS&#20013;&#22914;&#20309;&#37197;&#32622;&#19982;&#20351;&#29992;&#28040;&#24687;&#32452;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5015"></a>28.4.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p><a href="#examples.message-group2" title="11.1.30.&nbsp;&#28040;&#24687;&#32452;&#65288;&#20363;2&#65289;">Section&nbsp;11.1.30, &#8220;&#28040;&#24687;&#32452;&#65288;&#20363;2&#65289;&#8221;</a>&#26159;&#21478;&#22806;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#20363;&#23376;&#65292;&#22312;&#36825;&#20010;&#20363;&#23376;&#20013;&#36890;&#36807;&#37197;&#32622;&#36830;&#25509;&#24037;&#21378;
         &#26469;&#20351;&#29992;&#28040;&#24687;&#32452;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5021"></a>28.5.&nbsp;&#38598;&#32676;&#20013;&#30340;&#28040;&#24687;&#32452;</h2></div></div><div></div></div><p>&#22312;&#38598;&#32676;&#20013;&#20351;&#29992;&#28040;&#24687;&#32452;&#26159;&#30456;&#23545;&#27604;&#36739;&#22797;&#26434;&#30340;&#12290;&#36825;&#26159;&#22240;&#22312;&#22312;&#38598;&#32676;&#20013;&#65292;&#19968;&#20010;&#28040;&#24687;&#32452;&#20013;&#30340;&#28040;&#24687;&#26377;&#21487;&#33021;&#34987;&#36865;&#21040;&#38598;&#32676;&#20013;&#30340;&#20219;&#19968;&#20840;&#33410;&#28857;&#65292;
         &#36825;&#23601;&#35201;&#27714;&#27599;&#20010;&#33410;&#28857;&#37117;&#35201;&#30693;&#36947;&#36825;&#20010;&#28040;&#24687;&#26159;&#23646;&#20110;&#21738;&#20010;&#33410;&#28857;&#19978;&#30340;&#21738;&#20010;&#25509;&#25910;&#32773;&#65288;consumer&#65289;&#12290;&#19968;&#20010;&#28040;&#24687;&#32452;&#30340;&#28040;&#24687;&#24448;&#24448;&#20250;&#34987;&#21457;&#36865;&#21040;
         &#38598;&#32676;&#20013;&#30340;&#19968;&#20010;&#33410;&#28857;&#65292;&#32780;&#35813;&#28040;&#24687;&#32452;&#30340;&#25509;&#25910;&#32773;&#22312;&#21478;&#19968;&#20010;&#33410;&#28857;&#19978;&#12290;&#27599;&#20010;&#33410;&#28857;&#37117;&#35201;&#30693;&#36947;&#36825;&#20123;&#32454;&#33410;&#20197;&#20415;&#33021;&#23558;&#28040;&#24687;&#27491;&#30830;&#36335;&#30001;&#21040;&#25152;&#23646;&#25509;&#25910;
         &#32773;&#25152;&#22312;&#30340;&#33410;&#28857;&#19978;&#12290;</p><p>&#20026;&#20102;&#35299;&#20915;&#19978;&#36848;&#38382;&#39064;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#12290;&#27599;&#20010;&#33410;&#28857;&#37117;&#26377;&#19968;&#20010;&#33258;&#24049;&#30340;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#12290;&#24403;&#19968;&#20010;&#24102;&#26377;&#32452;id&#30340;&#28040;&#24687;&#25910;&#21040;&#26102;&#65292;
         &#36825;&#20123;&#33410;&#28857;&#30340;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#23601;&#20250;&#21327;&#21516;&#20316;&#20986;&#20915;&#23450;&#35813;&#22914;&#20309;&#23545;&#36825;&#20010;&#28040;&#24687;&#36827;&#34892;&#36335;&#30001;&#12290;</p><p>&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#26377;&#20004;&#31181;&#65306;&#26412;&#22320;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#21644;&#36828;&#31243;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#12290;&#22312;&#19968;&#20010;&#38598;&#32676;&#20013;&#35201;&#36873;&#25321;&#19968;&#20010;&#33410;&#28857;&#20316;&#20026;&#26412;&#22320;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#30340;
         &#33410;&#28857;&#65292;&#38598;&#32676;&#20013;&#25152;&#26377;&#20854;&#23427;&#30340;&#33410;&#28857;&#37117;&#25345;&#26377;&#36828;&#31243;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#12290;&#22312;&#38598;&#32676;&#20013;&#30001;&#26412;&#22320;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#26368;&#32066;&#20915;&#23450;&#28040;&#24687;&#24590;&#26679;&#36335;&#30001;&#65292;&#20854;&#23427;&#30340;&#36828;&#31243;
         &#22788;&#29702;&#22120;&#37197;&#21512;&#26412;&#22320;&#22788;&#29702;&#22120;&#23436;&#25104;&#20915;&#31574;&#12290;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#30340;&#37197;&#32622;&#22312;<span class="italic">hornetq-configuration.xml</span>
         &#25991;&#20214;&#20013;&#65292;&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;
</p><pre class="programlisting">   &lt;grouping-handler name="my-grouping-handler"&gt;
      &lt;type&gt;LOCAL&lt;/type&gt;
      &lt;address&gt;jms&lt;/address&gt;
      &lt;timeout&gt;5000&lt;/timeout&gt;
   &lt;/grouping-handler&gt;

   &lt;grouping-handler name="my-grouping-handler"&gt;
      &lt;type&gt;REMOTE&lt;/type&gt;
      &lt;address&gt;jms&lt;/address&gt;
      &lt;timeout&gt;5000&lt;/timeout&gt;
   &lt;/grouping-handler&gt;</pre><p><span class="italic">address</span>&#23646;&#24615;&#34920;&#31034;&#19968;&#20010;&#38598;&#32676;&#30340;&#36830;&#25509;&#20197;&#21450;&#23427;&#20351;&#29992;&#30340;&#22320;&#22336;&#12290;&#26377;&#20851;&#22914;&#20309;&#37197;&#32622;&#38598;&#32676;
         &#21442;&#35265;&#38598;&#32676;&#31456;&#33410;&#12290;<span class="italic">timeout</span>&#23646;&#24615;&#20195;&#34920;&#20570;&#20986;&#36335;&#30001;&#20915;&#23450;&#25152;&#38656;&#35201;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;&#22914;&#26524;&#36229;&#36807;
         &#20102;&#36825;&#20010;&#26102;&#38388;&#36824;&#27809;&#26377;&#20570;&#20986;&#20915;&#23450;&#65292;&#21017;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;&#36825;&#21487;&#20197;&#20445;&#35777;&#20005;&#26684;&#30340;&#39034;&#24207;&#12290;</p><p>&#25910;&#21040;&#28040;&#24687;&#30340;&#33410;&#28857;&#20250;&#39318;&#20808;&#25552;&#20986;&#19968;&#20010;&#28040;&#24687;&#36335;&#30001;&#30340;&#24314;&#35758;&#12290;&#23427;&#37319;&#29992;&#36718;&#35810;&#26041;&#24335;&#26469;&#36873;&#25321;&#19968;&#20010;&#21512;&#36866;&#30340;&#36335;&#30001;&#12290;&#23427;&#39318;&#20808;&#36873;&#25321;&#19968;&#20010;&#26412;&#22320;&#30340;&#38431;&#21015;&#65292;&#20043;&#21518;
         &#20877;&#36873;&#25321;&#19968;&#20010;&#26377;&#25509;&#25910;&#32773;&#30340;&#38431;&#21015;&#12290;&#22914;&#26524;&#36825;&#20010;&#24314;&#35758;&#34987;&#25152;&#26377;&#32452;&#22788;&#29702;&#22120;&#25509;&#21463;&#65292;&#28040;&#24687;&#23601;&#20250;&#34987;&#36335;&#30001;&#21040;&#25152;&#36873;&#30340;&#38431;&#21015;&#12290;&#22914;&#26524;&#34987;&#25298;&#32477;&#23601;&#25552;&#20986;&#21478;&#19968;&#20010;&#36335;
         &#30001;&#26041;&#26696;&#65292;&#22914;&#27492;&#21453;&#22797;&#30452;&#21040;&#26041;&#26696;&#34987;&#25509;&#21463;&#20026;&#27490;&#12290;&#38431;&#21015;&#36873;&#25321;&#21518;&#25152;&#26377;&#20854;&#23427;&#30340;&#33410;&#28857;&#37117;&#23558;&#28040;&#24687;&#36335;&#30001;&#21040;&#36825;&#20010;&#38431;&#21015;&#12290;&#36825;&#26679;&#25152;&#26377;&#30340;&#28040;&#24687;&#32452;&#30340;&#28040;&#24687;&#22312;&#19968;&#20010;
         &#33410;&#28857;&#19978;&#36827;&#34892;&#22788;&#29702;&#65292;&#20063;&#23601;&#26159;&#35813;&#33410;&#28857;&#19978;&#30340;&#25509;&#25910;&#32773;&#25509;&#25910;&#25152;&#26377;&#30340;&#21516;&#32452;&#30340;&#28040;&#24687;&#12290;</p><p>&#30001;&#20110;&#21482;&#26377;&#19968;&#20010;&#26412;&#22320;&#22788;&#29702;&#22120;&#65292;&#22914;&#26524;&#23427;&#30340;&#33410;&#28857;&#20986;&#29616;&#25925;&#38556;&#21017;&#26080;&#27861;&#20570;&#20986;&#20915;&#23450;&#12290;&#36825;&#26102;&#25152;&#26377;&#30340;&#28040;&#24687;&#23558;&#19981;&#33021;&#34987;&#20256;&#36882;&#65292;&#24182;&#19988;&#20250;&#25243;&#20986;&#24322;&#24120;&#12290;
         &#20026;&#20102;&#36991;&#20813;&#36825;&#19968;&#21333;&#28857;&#25925;&#38556;&#65292;&#26412;&#22320;&#22788;&#29702;&#22120;&#21487;&#20197;&#22312;&#22791;&#20221;&#33410;&#28857;&#19978;&#26377;&#19968;&#20010;&#22797;&#26412;&#12290;&#21482;&#35201;&#21019;&#24314;&#22791;&#20221;&#33410;&#28857;&#24182;&#37197;&#32622;&#19968;&#20010;&#30456;&#21516;&#30340;&#26412;&#22320;&#22788;&#29702;&#22120;&#21363;&#21487;&#12290;</p><p></p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5047"></a>28.5.1.&nbsp;&#38598;&#32676;&#28040;&#24687;&#32452;&#30340;&#26368;&#20339;&#20351;&#29992;&#24815;&#20363;</h3></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#19968;&#20123;&#24456;&#22909;&#30340;&#24314;&#35758;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#23613;&#21487;&#33021;&#20351;&#25509;&#25910;&#32773;&#22343;&#21248;&#20998;&#24067;&#22312;&#19981;&#21516;&#30340;&#33410;&#28857;&#19978;&#12290;&#30001;&#20110;&#28040;&#24687;&#32452;&#30340;&#28040;&#24687;&#24635;&#26159;&#20256;&#36882;&#21040;&#21516;&#19968;&#20010;&#38431;&#21015;&#30340;&#21516;&#19968;&#20010;&#25509;&#25910;&#32773;&#65292;
                     &#22914;&#26524;&#20320;&#32463;&#24120;&#24615;&#22320;&#21019;&#24314;&#19982;&#20851;&#38381;&#25509;&#25910;&#32773;&#65292;&#23601;&#21487;&#33021;&#20986;&#29616;&#28040;&#24687;&#30001;&#20110;&#27809;&#26377;&#25509;&#25910;&#32773;&#32780;&#20256;&#36882;&#19981;&#20986;&#21435;&#65292;&#36896;&#25104;&#28040;&#24687;&#22312;&#38431;&#21015;&#20013;
                     &#19981;&#26029;&#31215;&#32047;&#30340;&#24773;&#20917;&#12290;&#22240;&#27492;&#65292;&#23613;&#37327;&#35201;&#36991;&#20813;&#20851;&#38381;&#25509;&#25910;&#32773;&#65292;&#25110;&#32773;&#30830;&#20445;&#26377;&#36275;&#22815;&#25968;&#37327;&#30340;&#25509;&#25910;&#32773;&#12290;&#20363;&#22914;&#65292;&#22914;&#26524;&#20320;&#30340;&#38598;&#32676;
                     &#26377;3&#20010;&#33410;&#28857;&#65292;&#37027;&#20040;&#23601;&#21019;&#24314;3&#20010;&#25509;&#25910;&#32773;&#12290;</p></li><li><p>&#23613;&#21487;&#33021;&#20351;&#29992;&#25345;&#20037;&#22411;&#38431;&#21015;&#12290;&#22914;&#26524;&#28040;&#24687;&#32452;&#30340;&#28040;&#24687;&#19982;&#19968;&#20010;&#38431;&#21015;&#32465;&#23450;&#65292;&#19968;&#26086;&#36825;&#20010;&#38431;&#21015;&#34987;&#21024;&#38500;&#65292;&#20854;&#23427;&#33410;&#28857;&#21487;&#33021;&#20173;&#28982;
                     &#23581;&#35797;&#21521;&#36825;&#20010;&#24050;&#21024;&#38500;&#30340;&#38431;&#21015;&#36335;&#30001;&#28040;&#24687;&#12290;&#20026;&#36991;&#20813;&#36825;&#31181;&#24773;&#20917;&#65292;&#35201;&#30830;&#20445;&#36825;&#20010;&#38431;&#21015;&#30001;&#21457;&#36865;&#28040;&#24687;&#30340;&#20250;&#35805;&#26469;&#21024;&#38500;&#12290;&#36825;&#26679;&#22914;&#26524;
                     &#19979;&#19968;&#20010;&#28040;&#24687;&#21457;&#20986;&#21518;&#21457;&#29616;&#21407;&#26469;&#30340;&#38431;&#21015;&#34987;&#21024;&#38500;&#65292;&#26032;&#30340;&#36335;&#30001;&#24314;&#35758;&#23601;&#20250;&#25552;&#20986;&#12290;&#21478;&#22806;&#19968;&#31181;&#26041;&#26696;&#26159;&#20320;&#21487;&#20197;&#37325;&#26032;&#20351;&#29992;&#19968;&#20010;&#19981;
                     &#21516;&#30340;&#32452;ID&#12290;</p></li><li><p>&#19968;&#23450;&#35201;&#30830;&#20445;&#26412;&#22320;&#30340;&#28040;&#24687;&#32452;&#22788;&#29702;&#22120;&#26377;&#22791;&#20221;&#12290;&#36825;&#26679;&#22312;&#26377;&#25925;&#38556;&#26102;&#28040;&#24687;&#32452;&#20173;&#28982;&#21487;&#20197;&#27491;&#24120;&#24037;&#20316;&#12290;</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5062"></a>28.5.2.&nbsp;&#38598;&#32676;&#28040;&#24687;&#32452;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.clustered.grouping" title="11.1.6.&nbsp;&#38598;&#32676;&#20998;&#32452;">Section&nbsp;11.1.6, &#8220;&#38598;&#32676;&#20998;&#32452;&#8221;</a>&#65292;&#36825;&#20010;&#20363;&#23376;&#32473;&#20986;&#20102;&#22914;&#20309;&#22312;HornetQ&#38598;&#32676;&#20013;&#37197;&#32622;&#28040;&#24687;&#32452;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="pre-acknowledge"></a>Chapter&nbsp;29.&nbsp;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</h2></div></div><div></div></div><p>JMS &#35268;&#23450;&#20102;&#19977;&#31181;&#28040;&#24687;&#36890;&#30693;&#26041;&#24335;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">AUTO_ACKNOWLEDGE</tt></p></li><li><p><tt class="literal">CLIENT_ACKNOWLEDGE</tt></p></li><li><p><tt class="literal">DUPS_OK_ACKNOWLEDGE</tt></p></li></ul></div><p>&#36824;&#26377;&#19968;&#31181;&#24773;&#20917;JMS&#19981;&#25903;&#25345;&#65306;&#24212;&#29992;&#31243;&#24207;&#22312;&#20986;&#29616;&#25925;&#38556;&#26102;&#21487;&#20197;&#23481;&#24525;&#28040;&#24687;&#20002;&#22833;&#65292;&#36825;&#26679;&#21487;&#20197;&#22312;&#28040;&#24687;&#22312;&#20256;&#36882;&#32473;&#23458;&#25143;
      &#31471;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#23601;&#36890;&#30693;&#26381;&#21153;&#22120;&#12290;</p><p>HornetQ&#25903;&#25345;&#36825;&#31181;&#27169;&#24335;&#65292;&#31216;&#20026;<span class="emphasis"><em>pre-acknowledge</em></span>&#12290;</p><p>&#36825;&#31181;&#27169;&#24335;&#30340;&#32570;&#28857;&#26159;&#28040;&#24687;&#22312;&#36890;&#30693;&#21518;&#65292;&#22914;&#26524;&#31995;&#32479;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#28040;&#24687;&#21487;&#33021;&#20002;&#22833;&#12290;&#24182;&#19988;&#22312;&#31995;&#32479;&#37325;&#21551;&#21518;&#35813;&#28040;&#24687;
      &#19981;&#33021;&#24674;&#22797;&#12290;</p><p>&#20351;&#29992;<tt class="literal">pre-acknowledgement</tt>&#27169;&#24335;&#21487;&#20197;&#33410;&#30465;&#32593;&#32476;&#20256;&#36755;&#21644;CPU&#22788;&#29702;&#36164;&#28304;&#12290;</p><p>&#32929;&#31080;&#20215;&#26684;&#26356;&#26032;&#26159;&#19968;&#20010;&#36866;&#29992;&#20110;&#27492;&#27169;&#24335;&#30340;&#20363;&#23376;&#12290;&#22914;&#26524;&#22240;&#20026;&#26381;&#21153;&#22120;&#25925;&#38556;&#20002;&#22833;&#20102;&#19968;&#20123;&#28040;&#24687;&#65292;&#31561;&#26381;&#21153;&#22120;&#37325;&#21551;&#21518;&#26032;&#30340;
      &#32929;&#31080;&#26356;&#26032;&#28040;&#24687;&#24456;&#24555;&#21040;&#36798;&#65292;&#20197;&#21069;&#20002;&#22833;&#30340;&#36807;&#26102;&#30340;&#32929;&#31080;&#28040;&#24687;&#21363;&#20351;&#20002;&#22833;&#20063;&#26080;&#20851;&#32039;&#35201;&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#27880;&#24847;&#22914;&#26524;&#20320;&#20351;&#29992;pre-acknowledge&#27169;&#24335;&#65292;&#22312;&#25509;&#25910;&#28040;&#24687;&#31471;&#19981;&#33021;&#25903;&#25345;&#20107;&#21153;&#12290;&#22240;&#20026;&#36825;&#20010;&#27169;&#24335;&#19981;&#26159;&#22312;&#25552;&#20132;&#26102;
      &#36890;&#30693;&#28040;&#24687;&#65292;&#26159;&#22312;&#28040;&#24687;&#22312;&#20256;&#36882;&#20043;&#21069;&#23601;&#36890;&#30693;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pre-acknowledge.configure"></a>29.1.&nbsp;&#20351;&#29992;PRE_ACKNOWLEDGE</h2></div></div><div></div></div><p>&#36825;&#20010;&#27169;&#24335;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;
      &#30340;<tt class="literal">connection factory</tt>&#19979;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;
      &lt;/entries&gt;
      &lt;pre-acknowledge&gt;true&lt;/pre-acknowledge&gt;
&lt;/connection-factory&gt;</pre><p>&#21478;&#19968;&#20010;&#36873;&#25321;&#26159;&#20351;&#29992;JMS&#25509;&#21475;&#26469;&#35774;&#32622;pre-acknowledgement&#27169;&#24335;&#12290;&#21482;&#38656;&#35201;&#22312;&#21019;&#24314;JMS&#20250;&#35805;&#65288;session&#65289;
         &#26102;&#20351;&#29992;<tt class="literal">HornetQSession.PRE_ACKNOWLEDGE</tt>&#24120;&#25968;&#21363;&#21487;&#12290;</p><pre class="programlisting">
// messages will be acknowledge on the server *before* being delivered to the client
Session session = connection.createSession(false, HornetQSession.PRE_ACKNOWLEDGE);
      </pre><p>&#20320;&#36824;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">HornetQConnectionFactory</tt>&#23454;&#20363;&#19978;&#35774;&#32622;&#35813;&#27169;&#24335;&#12290;</p><p>&#21478;&#22806;&#65292;&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;&#21017;&#22312;<tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#19978;&#30452;&#25509;
            &#35774;&#32622;&#35813;&#27169;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5156"></a>29.2.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.pre-acknowledge" title="11.1.35.&nbsp;&#39044;&#20808;&#36890;&#30693;">Section&nbsp;11.1.35, &#8220;&#39044;&#20808;&#36890;&#30693;&#8221;</a>&#12290;&#36825;&#26159;&#19968;&#20010;&#20351;&#29992;JMS&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="management"></a>Chapter&nbsp;30.&nbsp;&#31649;&#29702;</h2></div></div><div></div></div><p>HornetQ&#25317;&#26377;&#22871;&#20016;&#23500;&#30340;&#31649;&#29702;&#25509;&#21475;&#12290;&#29992;&#25143;&#20351;&#29992;&#36825;&#20123;&#25509;&#21475;&#21487;&#20197;&#20462;&#25913;&#26381;&#21153;&#22120;&#37197;&#32622;&#12289;&#21019;&#24314;&#26032;&#30340;&#36164;&#28304;&#65288;&#22914;&#38431;&#21015;&#21644;
      &#35805;&#39064;&#65289;&#12289;&#26816;&#26597;&#36825;&#20123;&#36164;&#28304;&#65288;&#22914;&#38431;&#21015;&#20013;&#26377;&#22810;&#23569;&#28040;&#24687;&#65289;&#24182;&#36827;&#34892;&#31649;&#29702;&#65288;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#28040;&#24687;&#65289;&#12290;&#36825;&#26679;&#29992;&#25143;&#21487;&#20197;
      <span class="emphasis"><em>&#31649;&#29702;</em></span>HornetQ&#12290;&#21478;&#22806;&#65292;&#23458;&#25143;&#36824;&#21487;&#20197;&#35746;&#38405;&#31649;&#29702;&#36890;&#30693;&#12290;</p><p>&#26377;&#19977;&#31181;&#26041;&#24335;&#31649;&#29702;HornetQ&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;JMX -- JMX&#26159;&#26631;&#20934;&#30340;Java&#24212;&#29992;&#31243;&#24207;&#31649;&#29702;&#26041;&#24335;&#12290;</p></li><li><p>&#20351;&#29992;&#26680;&#24515;&#25509;&#21475; -- &#31649;&#29702;&#25805;&#20316;&#36890;&#36807;<span class="emphasis"><em>&#26680;&#24515;&#28040;&#24687;</em></span>&#30340;&#26041;&#27861;&#21457;&#21521;HornetQ&#26381;
         &#21153;&#12290;</p></li><li><p>&#20351;&#29992;JMS&#25509;&#21475; -- &#31649;&#29702;&#25805;&#20316;&#36890;&#36807;<span class="emphasis"><em>JMS&#28040;&#24687;</em></span>&#30340;&#26041;&#24335;&#21457;&#21521;HornetQ&#26381;&#21153;&#22120;&#12290;</p></li></ul></div><p>&#34429;&#28982;&#26377;&#19977;&#31181;&#26041;&#24335;&#65292;&#20294;&#23427;&#20204;&#25552;&#20379;&#30456;&#21516;&#30340;&#21151;&#33021;&#12290;&#20351;&#29992;JMX&#26041;&#27861;&#33021;&#23436;&#25104;&#30340;&#21151;&#33021;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#25110;JMS&#25509;&#21475;&#37117;&#21487;&#20197;&#23436;&#25104;&#12290;</p><p>&#26681;&#25454;&#19981;&#21516;&#30340;&#24212;&#29992;&#29615;&#22659;&#26469;&#36873;&#25321;&#26368;&#36866;&#24403;&#30340;&#26041;&#24335;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5210"></a>30.1.&nbsp;&#31649;&#29702;&#25509;&#21475;API</h2></div></div><div></div></div><p>&#19981;&#31649;&#20351;&#29992;&#21738;&#31181;&#26041;&#24335;&#65292;&#31649;&#29702;&#25509;&#21475;&#37117;&#26159;&#19968;&#26679;&#30340;&#12290;</p><p>&#23545;&#20110;&#27599;&#20010;<span class="emphasis"><em>&#34987;&#31649;&#29702;&#30340;&#36164;&#28304;</em></span>&#37117;&#26377;&#19968;&#20010;Java&#30340;&#25509;&#21475;&#25552;&#20379;&#21487;&#20351;&#29992;&#30340;&#25805;&#20316;&#12290;</p><p>HornetQ&#30340;&#31649;&#29702;&#25509;&#21475;&#20998;&#24067;&#22312;2&#20010;&#21253;&#20013;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>&#26680;&#24515;</em></span>&#36164;&#28304;&#30340;&#31649;&#29702;&#25509;&#21475;&#22312; <tt class="literal">org.hornetq.api.core.management</tt>&#21253;&#20013;&#12290;</p></li><li><p><span class="emphasis"><em>JMS</em></span>&#36164;&#28304;&#30340;&#31649;&#29702;&#25509;&#21475;&#22312; <tt class="literal">org.hornetq.api.jms.management</tt>&#21253;&#20013;&#12290;</p></li></ul></div><p>&#35843;&#29992;<span class="emphasis"><em>&#31649;&#29702;&#25805;&#20316;</em></span>&#30340;&#26041;&#27861;&#30001;&#25152;&#20351;&#29992;&#26159;&#26041;&#24335;&#26159;JMX&#12289;&#26680;&#24515;&#28040;&#24687;&#36824;&#26159;JMS
         &#28040;&#24687;&#26469;&#20915;&#23450;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#19968;&#23567;&#37096;&#20998;&#30340;&#31649;&#29702;&#25509;&#21475;&#38656;&#35201;&#19968;&#20010;<tt class="literal">&#36807;&#28388;&#22120;</tt>&#21442;&#25968;&#26469;&#36873;&#25321;&#38656;&#35201;&#30340;&#28040;&#24687;&#12290;
            &#22914;&#26524;&#35201;&#27714;<span class="emphasis"><em>&#25152;&#26377;&#30340;&#28040;&#24687;</em></span>&#65292;&#20256;&#36882;&#35813;&#21442;&#25968;&#26102;&#20351;&#29992;<tt class="literal">
            null</tt>&#25110;&#32773;&#19968;&#20010;&#31354;&#30340;&#23383;&#31526;&#20018;&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5256"></a>30.1.1.&nbsp;&#26680;&#24515;&#31649;&#29702;&#25509;&#21475;</h3></div></div><div></div></div><p>HornetQ&#23450;&#20041;&#20102;&#19968;&#22871;&#23545;&#26680;&#24515;&#36164;&#28304;&#30340;&#31649;&#29702;&#25509;&#21475;&#12290;&#20851;&#20110;&#23427;&#20204;&#30340;&#35814;&#32454;&#35828;&#26126;&#35831;&#21442;&#35265;&#30456;&#24212;&#30340;javadoc&#12290;
            &#19979;&#38754;&#26159;&#23545;&#23427;&#20204;&#30340;&#27010;&#36848;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5261"></a>30.1.1.1.&nbsp;&#26680;&#24515;&#26381;&#21153;&#22120;&#31649;&#29702;</h4></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#38431;&#21015;&#30340;&#21015;&#34920;&#12289;&#21019;&#24314;&#12289;&#37096;&#32626;&#19982;&#21024;&#38500;</p><p><tt class="literal">getQueueNames()</tt> method&#26041;&#27861;&#29992;&#26469;&#21015;&#20986;&#25152;&#26377;&#24050;&#32463;&#37096;&#32626;&#30340;&#38431;&#21015;&#12290;</p><p>&#22312;<tt class="literal">HornetQServerControl</tt> &#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=Server</tt>&#25110;&#36164;&#28304;&#21517;<tt class="literal">core.server</tt>&#65289;&#19978;&#26377;&#38431;&#21015;&#21019;&#24314;&#25110;&#21024;&#38500;&#30340;&#26041;&#27861;&#65292;&#23427;&#20204;&#26159;
                        <tt class="literal">createQueue()</tt>&#12289;<tt class="literal">deployQueue()</tt>&#21644;
                        <tt class="literal">destroyQueue()</tt>&#12290;</p><p>&#22914;&#26524;&#38431;&#21015;&#24050;&#32463;&#23384;&#22312;&#65292;&#37027;&#20040;<tt class="literal">createQueue</tt>&#26041;&#27861;&#35843;&#29992;&#20250;&#20986;&#38169;&#65292;&#32780;
                        <tt class="literal">deployQueue</tt>&#26041;&#27861;&#35843;&#29992;&#27809;&#26377;&#20219;&#20309;&#20316;&#29992;&#12290;</p></li><li><p>&#26242;&#20572;&#19982;&#24674;&#22797;&#38431;&#21015;</p><p><tt class="literal">QueueControl</tt>&#21487;&#29992;&#26469;&#26242;&#20572;&#19982;&#24674;&#22797;&#38431;&#21015;&#12290;&#22914;&#26524;&#19968;&#20010;&#38431;&#21015;&#34987;&#26242;&#20572;&#65292;&#23427;
                     &#34429;&#28982;&#21487;&#20197;&#32487;&#32493;&#25509;&#25910;&#28040;&#24687;&#20294;&#26159;&#19981;&#20256;&#36882;&#28040;&#24687;&#65307;&#24403;&#34987;&#24674;&#22797;&#26102;&#65292;&#38431;&#21015;&#21448;&#20250;&#24320;&#22987;&#20256;&#36882;&#28040;&#24687;&#12290;
                  </p></li><li><p>&#36828;&#31243;&#36830;&#25509;&#30340;&#21015;&#34920;&#19982;&#20851;&#38381;</p><p><tt class="literal">listRemoteAddresses()</tt>&#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#21015;&#20986;&#23458;&#25143;&#31471;&#30340;&#36828;&#31243;&#22320;&#22336;&#12290;
                     &#36824;&#21487;&#20197;&#20351;&#29992;<tt class="literal">closeConnectionsForAddress()</tt>&#26041;&#27861;&#26469;&#20851;&#38381;
                     &#19982;&#35813;&#22320;&#22336;&#30456;&#20851;&#30340;&#36828;&#31243;&#36830;&#25509;&#12290;</p><p>&#21478;&#22806;&#65292;&#20351;&#29992;<tt class="literal">listConnectionIDs()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#36830;&#25509;ID&#65292;
                     &#20351;&#29992;<tt class="literal">listSessions()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19982;&#19968;&#20010;&#36830;&#25509;ID&#30456;&#20851;&#30340;&#25152;&#26377;
                     &#20250;&#35805;&#65288;session&#65289;&#12290;</p></li><li><p>&#20107;&#21153;&#30340;&#25163;&#21160;&#25805;&#20316;&#65288;heuristic operations&#65289;</p><p>&#24403;&#26381;&#21153;&#22120;&#30001;&#20110;&#25925;&#38556;&#32780;&#37325;&#26032;&#21551;&#21160;&#26102;&#65292;&#21487;&#33021;&#36896;&#25104;&#19968;&#20123;&#20107;&#21153;&#27809;&#26377;&#23436;&#25104;&#32780;&#38656;&#35201;&#20154;&#24037;&#24178;&#39044;&#12290;
                        <tt class="literal">listPreparedTransactions()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#25152;&#26377;&#22788;&#20110;
                     &#20934;&#22791;&#65288;prepared&#65289;&#29366;&#24577;&#30340;&#20107;&#21153;&#65288;&#20107;&#21153;&#26159;&#29992;Base64&#23383;&#31526;&#20018;&#30340;&#24418;&#24335;&#21015;&#20986;&#65289;&#12290;&#22914;&#26524;&#35201;&#25552;&#20132;&#25110;&#22238;&#28378;&#65292;
                     &#21487;&#20197;&#20351;&#29992;<tt class="literal">commitPreparedTransaction()</tt>&#26041;&#27861;&#25110;
                     <tt class="literal">rollbackPreparedTransaction()</tt>&#26041;&#27861;&#12290;&#37319;&#29992;&#21551;&#21457;&#24335;
                    &#65288;heuristic&#65289;&#23436;&#25104;&#30340;&#20107;&#21153;&#21487;&#20197;&#29992;<tt class="literal">listHeuristicCommittedTransactions()</tt>
                     &#26041;&#27861;&#21644;<tt class="literal">listHeuristicRolledBackTransactions</tt>&#26041;&#27861;&#21015;&#20986;&#12290;</p></li><li><p>&#25171;&#24320;&#21644;&#37325;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;</p><p>&#28040;&#24687;&#35745;&#25968;&#22120;&#21487;&#20197;&#29992;<tt class="literal">enableMessageCounters()</tt>&#26041;&#27861;&#25171;&#24320;&#65292;&#29992;
                        <tt class="literal">disableMessageCounters()</tt>&#26041;&#27861;&#20851;&#38381;&#12290;&#22914;&#26524;&#35201;&#37325;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;&#65292;
                        &#21487;&#20197;&#20351;&#29992;<tt class="literal">resetAllMessageCounters()</tt>&#26041;&#27861;&#21644;
                        <tt class="literal">resetAllMessageCounterHistories()</tt>&#26041;&#27861;&#12290;</p></li><li><p>&#33719;&#24471;&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;&#21644;&#23646;&#24615;</p><p><tt class="literal">HornetQServerControl</tt>&#25552;&#20379;&#20102;&#35775;&#38382;HornetQ&#26381;&#21153;&#22120;&#25152;&#26377;&#23646;&#24615;
                     &#30340;&#26041;&#27861;&#65288;&#20363;&#22914;<tt class="literal">getVersion()</tt>&#26041;&#27861;&#21487;&#20197;&#24471;&#21040;&#26381;&#21153;&#22120;&#30340;&#29256;&#26412;&#65292;&#31561;&#31561;&#65289;&#12290; </p></li><li><p>&#26680;&#24515;&#26725;&#21644;&#36716;&#21457;&#22120;&#30340;&#21019;&#24314;&#65292;&#21024;&#38500;&#19982;&#21015;&#34920;</p><p>&#20351;&#29992;<tt class="literal">getBridgeNames()</tt>&#21487;&#20197;&#21015;&#20986;&#37096;&#32626;&#30340;&#26680;&#24515;&#26725;&#12290;
                        &#20351;&#29992;<tt class="literal">getDivertNames()</tt>&#21487;&#20197;&#21015;&#20986;&#37096;&#32626;&#30340;&#36716;&#21457;&#22120;&#12290;</p><p>&#20351;&#29992;<tt class="literal">HornetQServerControl</tt> (ObjectName <tt class="literal">org.hornetq:module=Core,type=Server</tt> &#25110;&#36164;&#28304;&#21517; <tt class="literal">core.server</tt>)&#30340;&#26041;&#27861;<tt class="literal">createBridge()</tt>
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;   &#21644;<tt class="literal">destroyBridge()</tt>&#21487;&#20197;&#21019;&#24314;&#21644;&#21024;&#38500;&#26680;&#24515;&#26725;&#12290;
                        &#36890;&#36807;<tt class="literal">createDivert()</tt>&#21644;<tt class="literal">destroyDivert()</tt>
                        &#21487;&#20197;&#21019;&#24314;&#21644;&#21024;&#38500;&#36716;&#21457;&#22120;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5406"></a>30.1.1.2.&nbsp;&#26680;&#24515;&#22320;&#22336;&#30340;&#31649;&#29702;</h4></div></div><div></div></div><p>&#26680;&#24515;&#22320;&#22336;&#21487;&#20197;&#36890;&#36807;<tt class="literal">AddressControl</tt>&#31867;&#36827;&#34892;&#35775;&#38382;&#65288;ObjectName
                  &#26159; <tt class="literal">org.hornetq:module=Core,type=Address,name="&lt;the
                  address name&gt;"</tt>&#25110;&#32773;&#36164;&#28304;&#21517; <tt class="literal">core.address.&lt;the
                  address name&gt;</tt>&#65289;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20462;&#25913;&#22320;&#22336;&#30340;&#35282;&#33394;&#21644;&#26435;&#38480;&#12290;</p><p>&#20320;&#21487;&#20197;&#20351;&#29992;<tt class="literal">addRole()</tt>&#26041;&#27861;&#25110;<tt class="literal">removeRole()</tt>
                  &#26041;&#27861;&#28155;&#21152;&#25110;&#21024;&#38500;&#22320;&#22336;&#30340;&#35282;&#33394;&#12290;&#29992;<tt class="literal">getRoles()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#22320;&#22336;&#30340;&#25152;&#26377;&#35282;&#33394;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5435"></a>30.1.1.3.&nbsp;&#26680;&#24515;&#38431;&#21015;&#30340;&#31649;&#29702;</h4></div></div><div></div></div><p>&#31649;&#29702;&#25509;&#21475;&#20013;&#30340;&#19968;&#22823;&#37096;&#20998;&#26159;&#31649;&#29702;&#26680;&#24515;&#38431;&#21015;&#30340;&#12290;<tt class="literal">QueueControl</tt>&#31867;&#23450;&#20041;&#20102;&#26680;&#24515;&#38431;&#21015;&#30340;&#31649;&#29702;
               &#25509;&#21475;&#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=Queue,address="&lt;&#32465;&#23450;&#22320;&#22336;
                  address&gt;",name="&lt;&#38431;&#21015;&#21517;&gt;"</tt> &#25110;&#36164;&#28304;&#21517; <tt class="literal">core.queue.&lt;&#38431;&#21015;&#21517;&gt;</tt>&#65289;&#12290;</p><p>&#32477;&#22823;&#37096;&#20998;&#30340;&#38431;&#21015;&#31649;&#29702;&#26041;&#27861;&#38656;&#35201;&#19968;&#20010;&#28040;&#24687;ID&#21442;&#25968;&#65288;&#22914;&#21024;&#38500;&#19968;&#20010;&#28040;&#24687;&#65289;&#25110;&#19968;&#20010;&#36807;&#28388;&#22120;&#21442;&#25968;&#65288;&#22914;&#23558;&#20855;&#26377;&#26576;&#20010;
               &#23646;&#24615;&#20540;&#30340;&#25152;&#26377;&#28040;&#24687;&#35774;&#32622;&#20026;&#36807;&#26399;&#65289;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#28040;&#24687;&#30340;&#36807;&#26399;&#65292;&#21457;&#21521;&#27515;&#20449;&#22320;&#22336;&#21450;&#21024;&#38500;</p><p><tt class="literal">expireMessages()</tt>&#26041;&#27861;&#21487;&#20197;&#20351;&#28040;&#24687;&#36807;&#26399;&#12290;&#22914;&#26524;&#35774;&#32622;&#20102;&#19968;&#20010;&#36807;&#26399;&#22320;&#22336;&#65292;
                     &#36825;&#20123;&#28040;&#24687;&#20250;&#34987;&#21457;&#21040;&#36807;&#26399;&#22320;&#22336;&#12290;&#21542;&#21017;&#36825;&#20123;&#28040;&#24687;&#20250;&#34987;&#20002;&#24323;&#12290;<tt class="literal">setExpiryAddress()</tt>
                     &#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#35774;&#32622;&#38431;&#21015;&#30340;&#36807;&#26399;&#22320;&#22336;&#12290;</p><p>&#28040;&#24687;&#21487;&#20197;&#29992;<tt class="literal">sendMessagesToDeadLetterAddress()</tt>&#26041;&#27861;&#21457;&#36865;&#21040;
                     &#19968;&#20010;&#27515;&#20449;&#22320;&#22336;&#12290;&#23427;&#36820;&#22238;&#21457;&#21040;&#36825;&#20010;&#27515;&#20449;&#22320;&#22336;&#30340;&#28040;&#24687;&#30340;&#25968;&#37327;&#12290;&#22914;&#26524;&#27809;&#26377;&#35774;&#32622;&#27515;&#20449;&#22320;&#22336;&#65292;&#37027;&#20040;&#28040;&#24687;&#23601;&#20250;&#20174;&#38431;&#21015;&#20013;
                     &#21024;&#38500;&#12290;&#29992;<tt class="literal">setDeadLetterAddress()</tt>&#26041;&#27861;&#21487;&#20197;&#35774;&#32622;&#38431;&#21015;&#30340;&#27515;&#20449;&#22320;&#22336;&#12290;</p><p>&#28040;&#24687;&#36824;&#21487;&#20197;&#20174;&#19968;&#20010;&#38431;&#21015;&#36716;&#31227;&#21040;&#21478;&#19968;&#20010;&#38431;&#21015;&#12290;&#20854;&#26041;&#27861;&#26159;
                        <tt class="literal">moveMessages()</tt>&#12290;</p></li><li><p>&#28040;&#24687;&#30340;&#21015;&#34920;&#19982;&#21024;&#38500;</p><p>&#29992;<tt class="literal">listMessages()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#38431;&#21015;&#20013;&#30340;&#25152;&#26377;&#28040;&#24687;&#12290;&#36825;&#20010;&#26041;&#27861;
                        &#36820;&#22238;&#30340;&#26159;&#19968;&#20010;<tt class="literal">Map</tt>&#30340;&#25968;&#32452;&#12290;&#27599;&#19968;&#20010;Map&#23545;&#24212;&#19968;&#20010;&#28040;&#24687;&#12290;</p><p>&#28040;&#24687;&#21487;&#20197;&#29992;<tt class="literal">removeMessages()</tt>&#26041;&#27861;&#21024;&#38500;&#12290;&#22914;&#26524;&#26159;&#20351;&#29992;&#28040;&#24687;ID&#65292;
                        &#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#24067;&#23572;&#24120;&#37327;&#65307;&#22914;&#26524;&#26159;&#29992;&#36807;&#28388;&#22120;&#65292;&#21017;&#36820;&#22238;&#30340;
                        &#26159;&#21024;&#38500;&#30340;&#28040;&#24687;&#25968;&#37327;&#12290;&#22312;&#20351;&#29992;&#36807;&#28388;&#22120;&#26469;&#21024;&#38500;&#36807;&#28388;&#30340;&#28040;&#24687;&#26102;&#65292;&#22914;&#26524;&#20256;&#20837;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;&#21017;&#34920;&#31034;&#35201;&#21024;&#38500;
                        &#25152;&#26377;&#30340;&#28040;&#24687;&#12290;</p></li><li><p>&#28040;&#24687;&#35745;&#25968;</p><p>&#19968;&#20010;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#25968;&#21487;&#20197;&#29992;<tt class="literal">getMessageCount()</tt>&#26041;&#27861;&#33719;&#24471;&#12290;
                        &#27492;&#22806;&#65292;<tt class="literal">countMessages()</tt>&#26041;&#27861;&#21487;&#20197;&#36820;&#22238;&#38431;&#21015;&#20013;&#19982;&#19968;
                        &#20010;<span class="emphasis"><em>&#36807;&#28388;&#22120;</em></span>&#21305;&#37197;&#30340;&#28040;&#24687;&#25968;&#37327;&#12290;</p></li><li><p>&#20462;&#25913;&#28040;&#24687;&#30340;&#20248;&#20808;&#32423;</p><p>&#29992;<tt class="literal">changeMessagesPriority()</tt>&#26041;&#27861;&#21487;&#20197;&#25913;&#21464;&#28040;&#24687;&#30340;&#20248;&#20808;&#32423;&#12290;
                        &#35813;&#26041;&#27861;&#22914;&#26524;&#24102;&#19968;&#20010;&#28040;&#24687;ID&#21442;&#25968;&#65292;&#36820;&#22238;&#19968;&#20010;&#24067;&#23572;&#24120;&#37327;&#65307;&#22914;&#26524;&#24102;&#19968;&#20010;&#36807;&#28388;&#22120;&#21442;&#25968;&#65292;&#36820;&#22238;&#20248;&#20808;&#32423;
                        &#34987;&#26356;&#26032;&#30340;&#28040;&#24687;&#30340;&#25968;&#37327;&#12290;</p></li><li><p>&#28040;&#24687;&#35745;&#25968;&#22120;</p><p>&#29992;<tt class="literal">listMessageCounter()</tt>&#26041;&#27861;&#21644;<tt class="literal">
                        listMessageCounterHistory()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#38431;&#21015;&#30340;&#28040;&#24687;&#35745;&#25968;&#22120;&#12290;
                        &#65288;&#21442;&#35265; <a href="#management.message-counters" title="30.6.&nbsp;&#28040;&#24687;&#35745;&#25968;&#22120;">Section&nbsp;30.6, &#8220;&#28040;&#24687;&#35745;&#25968;&#22120;&#8221;</a>&#65289;&#12290;&#28040;&#24687;&#35745;&#25968;&#22120;&#36824;&#21487;&#20197;
                       &#29992;<tt class="literal">resetMessageCounter()</tt>&#26041;&#27861;&#37325;&#32622;&#12290;</p></li><li><p>&#33719;&#24471;&#38431;&#21015;&#30340;&#23646;&#24615;</p><p>&#36890;&#36807;<tt class="literal">QueueControl</tt>&#21487;&#20197;&#33719;&#24471;&#26680;&#24515;&#38431;&#21015;&#30340;&#23646;&#24615;&#65288;&#20363;&#22914;&#29992;
                     <tt class="literal">getFilter()</tt>&#26041;&#27861;&#21487;&#20197;&#24471;&#21040;&#38431;&#21015;&#30340;
                     &#36807;&#28388;&#22120;&#65292;<tt class="literal">isDurable()</tt>&#26041;&#27861;&#21487;&#20197;&#30693;&#36947;&#38431;&#21015;&#26159;&#21542;&#26159;&#25345;&#20037;&#30340;&#38431;&#21015;&#31561;&#31561;&#65289;&#12290;</p></li><li><p>&#26242;&#20572;&#21644;&#24674;&#22797;&#38431;&#21015;</p><p><tt class="literal">QueueControl</tt>&#21487;&#29992;&#26469;&#26242;&#20572;&#19982;&#24674;&#22797;&#38431;&#21015;&#12290;&#22914;&#26524;&#19968;&#20010;&#38431;&#21015;&#34987;&#26242;&#20572;&#65292;&#23427;
                     &#34429;&#28982;&#21487;&#20197;&#32487;&#32493;&#25509;&#25910;&#28040;&#24687;&#20294;&#26159;&#19981;&#20256;&#36882;&#28040;&#24687;&#65307;&#24403;&#34987;&#24674;&#22797;&#26102;&#65292;&#38431;&#21015;&#21448;&#20250;&#24320;&#22987;&#20256;&#36882;&#28040;&#24687;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5550"></a>30.1.1.4.&nbsp;&#20854;&#23427;&#26680;&#24515;&#36164;&#28304;&#30340;&#31649;&#29702;</h4></div></div><div></div></div><p>HornetQ&#20801;&#35768;&#29992;&#25143;&#21551;&#21160;&#25110;&#20572;&#27490;&#20854;&#36828;&#31243;&#36164;&#28304;&#65288;&#25509;&#25910;&#22120;&#65292;&#36716;&#21457;&#22120;&#65292;&#26725;&#65292;&#31561;&#31561;&#65289;&#12290;&#36825;&#26679;&#21487;&#20197;&#20351;&#26381;&#21153;&#22120;&#26242;&#20572;&#24037;&#20316;
               &#32780;&#19981;&#38656;&#35201;&#23436;&#20840;&#20572;&#27490;&#26381;&#21153;&#22120;&#65288;&#27604;&#22914;&#21487;&#20197;&#20020;&#26102;&#23545;&#26381;&#21153;&#22120;&#36827;&#34892;&#19968;&#20123;&#31163;&#32447;&#25805;&#20316;&#65292;&#20687;&#23545;&#19968;&#20123;&#20107;&#21153;&#30340;&#22788;&#29702;&#65289;&#12290;&#36825;&#20123;&#36164;&#28304;&#26377;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25509;&#25910;&#22120;</p><p>&#29992;<tt class="literal">AcceptorControl</tt>&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=Acceptor,name="&lt;&#25509;&#25910;&#22120;&#21517;
                        &gt;"</tt> &#25110;&#36164;&#28304;&#21517; <tt class="literal">core.acceptor.&lt;&#22320;&#22336;&#21517;
                        &gt;</tt>&#65289;&#30340;<tt class="literal">start()</tt>&#26041;&#27861;&#21551;&#21160;&#65292;&#29992;<tt class="literal">
                        stop()</tt>&#26041;&#27861;&#20572;&#27490;&#12290;&#25509;&#25910;&#22120;&#30340;&#21442;&#25968;&#21487;&#20197;&#36890;&#36807;<tt class="literal">AcceptorControl</tt>
                        &#30340;&#23646;&#24615;&#33719;&#24471;&#12290;&#65288;&#21442;&#35265; <a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">Section&nbsp;16.1, &#8220;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;&#8221;</a>&#65289;&#12290;</p></li><li><p>&#36716;&#21457;&#22120;</p><p>&#29992;<tt class="literal">DivertControl</tt>&#65288;ObjectName&#26159; <tt class="literal">org.hornetq:module=Core,type=Divert,name=&lt;&#36716;&#21457;&#22120;&#21517;&gt;</tt>
                        &#25110;&#36164;&#28304;&#21517;<tt class="literal">core.divert.&lt;&#36716;&#21457;&#22120;&gt;</tt>&#65289;&#31867;&#30340;
                        <tt class="literal">start()</tt>&#26041;&#27861;&#21487;&#20197;&#21551;&#21160;&#65292;&#29992;<tt class="literal">stop()</tt>&#26041;&#27861;&#21487;&#20197;&#20572;&#27490;&#12290;
                        &#36890;&#36807;<tt class="literal">DivertControl</tt>&#36824;&#21487;&#20197;&#33719;&#24471;&#36716;&#21457;&#22120;&#30340;&#21508;&#31181;&#23646;&#24615;&#12290;&#65288;&#21442;&#35265; <a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">Chapter&nbsp;35, <i>&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</i></a>&#65289;&#12290;</p></li><li><p>&#26725;</p><p>&#26725;&#21487;&#20197;&#36890;&#36807;<tt class="literal">BridgeControl</tt>&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=Bridge,name="&lt;&#26725;&#30340;&#21517;&#23383;
                        &gt;"</tt> &#25110;&#36164;&#28304;&#21517; <tt class="literal">core.bridge.&lt;&#26725;&#30340;&#21517;&#23383;
                        &gt;</tt>&#65289;&#30340;<tt class="literal">start()</tt>
                        &#26041;&#27861;&#21551;&#21160;&#65292;&#29992;<tt class="literal">stop()</tt>&#26041;&#27861;&#20572;&#27490;&#12290;&#23427;&#30340;&#23646;&#24615;&#21487;&#20197;&#36890;&#36807;
                        <tt class="literal">BridgeControl</tt>&#30340;&#23646;&#24615;&#33719;&#24471;&#65288;&#21442;&#35265;
                        <a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#65289;&#12290;</p></li><li><p>&#24191;&#25773;&#32452;</p><p>&#24191;&#25773;&#32452;&#21487;&#20197;&#36890;&#36807;<tt class="literal">BroadcastGroupControl</tt>&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=BroadcastGroup,name="&lt;&#24191;&#25773;&#32452;&#21517;
                        &gt;"</tt> &#25110;&#32773;&#36164;&#28304;&#21517; <tt class="literal">core.broadcastgroup.&lt;&#24191;&#25773;&#32452;&#21517;&gt;</tt>)&#30340;<tt class="literal">
                        start()</tt>&#26041;&#27861;&#21551;&#21160;&#65292;&#29992;<tt class="literal">stop()</tt>&#26041;&#27861;&#20572;&#27490;&#12290;
                        &#23427;&#30340;&#23646;&#24615;&#20063;&#21487;&#20197;&#36890;&#36807;<tt class="literal">BroadcastGroupControl</tt>&#30340;&#23646;&#24615;&#33719;&#24471;&#65288;&#21442;&#35265;<a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">Section&nbsp;38.2.1, &#8220;&#24191;&#25773;&#32452;&#8221;</a>&#65289;&#12290;</p></li><li><p>&#21457;&#29616;&#32452;</p><p>&#21457;&#29616;&#32452;&#21487;&#20197;&#36890;&#36807;<tt class="literal">DiscoveryGroupControl</tt>&#31867;
                        &#65288;ObjectName <tt class="literal">org.hornetq:module=Core,type=DiscoveryGroup,
                        name="&lt;&#21457;&#29616;&#32452;&#21517;&gt;"</tt> &#25110;&#36164;&#28304;&#21517;<tt class="literal">core.discovery.&lt;
                        &#21457;&#29616;&#32452;&#21517;&gt;</tt>&#65289;&#30340;
                        <tt class="literal">start()</tt>&#26041;&#27861;&#21551;&#21160;&#65292;&#29992;<tt class="literal">stop()</tt>&#26041;&#27861;&#20572;&#27490;&#12290;
                        &#23427;&#30340;&#21442;&#25968;&#21487;&#20197;&#36890;&#36807;<tt class="literal">DiscoveryGroupControl</tt>&#30340;&#23646;&#24615;&#33719;&#24471;&#65288;&#21442;&#35265;
                        <a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">Section&nbsp;38.2.2, &#8220;&#21457;&#29616;&#32452;&#8221;</a>&#65289;&#12290;</p></li><li><p>&#38598;&#32676;&#36830;&#25509;</p><p>&#38598;&#32676;&#36830;&#25509;&#21487;&#20197;&#36890;&#36807;<tt class="literal">ClusterConnectionControl</tt>&#31867;&#65288;
                        ObjectName <tt class="literal">org.hornetq:module=Core,type=ClusterConnection,name="&lt;&#38598;&#32676;&#36830;&#25509;&#21517;
                        &gt;"</tt> &#25110;&#36164;&#28304;&#21517; <tt class="literal">core.clusterconnection.&lt;&#38598;&#32676;&#36830;&#25509;&#21517;&gt;</tt>&#65289;&#30340;<tt class="literal">
                        start()</tt>&#26041;&#27861;&#21551;&#21160;&#65292;&#29992;<tt class="literal">stop()</tt>&#26041;&#27861;&#20572;&#27490;&#12290;
                        &#23427;&#30340;&#21442;&#25968;&#21487;&#20197;&#36890;&#36807;<tt class="literal">ClusterConnectionControl</tt>&#30340;&#23646;&#24615;&#26469;&#33719;&#24471;&#65288;&#21442;&#35265;
                        <a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">Section&nbsp;38.3.1, &#8220;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;&#8221;</a>&#65289;&#12290;</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e5706"></a>30.1.2.&nbsp;JMS&#31649;&#29702;&#25509;&#21475;</h3></div></div><div></div></div><p>HornetQ&#23450;&#20041;&#20102;&#19968;&#22871;JMS&#31649;&#29702;&#25509;&#21475;&#26469;&#31649;&#29702;JMS&#30340;<span class="emphasis"><em>&#21487;&#31649;&#29702;&#30340;&#23545;&#35937;</em></span> 
              &#65288;&#20363;&#22914;JMS&#38431;&#21015;&#65292;&#35805;&#39064;&#21450;&#36830;&#25509;&#24037;&#21378;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5714"></a>30.1.2.1.&nbsp;JMS&#26381;&#21153;&#22120;&#31649;&#29702;</h4></div></div><div></div></div><p><tt class="literal">JMSServerControl</tt>&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=JMS,type=Server</tt> &#25110;&#36164;&#28304;&#21517;<tt class="literal">jms.server</tt>&#65289;&#29992;&#26469;&#21019;&#24314;JMS&#36164;&#28304;&#65288;&#36830;&#25509;&#24037;&#21378;&#21644;&#30446;&#26631;&#65289;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#21015;&#34920;&#12289;&#21019;&#24314;&#12289;&#21024;&#38500;&#36830;&#25509;&#24037;&#21378;</p><p>&#20351;&#29992;<tt class="literal">getConnectionFactoryNames()</tt> &#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#37096;&#32626;&#30340;&#36830;&#25509;&#24037;&#21378;&#30340;
                        &#21517;&#23383;&#12290;</p><p>&#29992;<tt class="literal">createConnectionFactory()</tt>&#26041;&#27861;&#21644;<tt class="literal">destroyConnectionFactory()</tt>&#26041;&#27861;&#33021;&#21019;&#24314;&#21644;&#21024;&#38500;JMS&#36830;&#25509;&#24037;&#21378;&#12290;
                     &#36825;&#20123;&#36830;&#25509;&#24037;&#21378;&#37117;&#19982;JNDI&#32465;&#23450;&#20197;&#20415;&#20110;&#23458;&#25143;&#31471;&#26469;&#26597;&#25214;&#12290;&#22914;&#26524;&#26159;&#22312;&#22270;&#24418;&#20171;&#38754;&#19979;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#65292;&#22312;&#24191;&#26412;&#26694;&#20869;&#36755;&#20837;
                     &#26377;&#20851;&#30340;&#20256;&#36755;&#21442;&#25968;&#26102;&#21487;&#20351;&#29992;&#19968;&#32452;&#29992;&#36887;&#21495;&#38548;&#24320;&#30340;&#38190;&#65293;&#20540;&#23545;&#65288;&#20363;&#22914;<tt class="literal">key1=10, key2="value", key3=false</tt>&#65289;&#12290;
                     &#22914;&#26524;&#38656;&#35201;&#23450;&#20041;&#22810;&#20010;&#20256;&#36755;&#65292;&#20320;&#38656;&#35201;&#23558;&#27599;&#20010;&#20256;&#36755;&#30340;&#21442;&#25968;&#23545;&#29992;&#22823;&#25324;&#21495;&#25324;&#36215;&#26469;&#65292;&#20363;&#22914;<tt class="literal">{key=10}, {key=20}</tt>&#12290;
                     &#31532;&#19968;&#20010;<tt class="literal">key</tt>&#23646;&#20110;&#31532;&#19968;&#20010;&#20256;&#36755;&#37197;&#32622;&#65292;&#31532;&#20108;&#20010;<tt class="literal">key</tt>&#23646;&#20110;&#31532;&#20108;&#20010;&#20256;&#36755;&#37197;&#32622;&#12290;
                     &#65288;&#26377;&#20851;&#20256;&#36755;&#30340;&#21508;&#31181;&#21442;&#25968;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#65289;&#12290;</p></li><li><p>&#21015;&#34920;&#12289;&#21019;&#24314;&#19982;&#21024;&#38500;&#38431;&#21015;</p><p><tt class="literal">getQueueNames()</tt>&#26041;&#27861;&#21487;&#20197;&#33719;&#24471;&#37096;&#32626;&#30340;JMS&#38431;&#21015;&#30340;&#21517;&#23383;&#21015;&#34920;&#12290;</p><p>JMS&#38431;&#21015;&#21487;&#20197;&#29992;<tt class="literal">createQueue()</tt>&#26041;&#27861;&#21019;&#24314;&#65292;&#29992;<tt class="literal">destroyQueue()</tt>&#26041;&#27861;&#21024;&#38500;&#12290;
                     &#21019;&#24314;&#30340;&#38431;&#21015;&#37117;&#32465;&#23450;&#21040;JNDI&#20197;&#20415;JMS&#23458;&#25143;&#31471;&#21487;&#20197;&#26597;&#25214;&#12290;</p></li><li><p>&#21015;&#34920;&#12289;&#21019;&#24314;&#19982;&#21024;&#38500;&#35805;&#39064;&#65288;topic&#65289;</p><p><tt class="literal">getTopicNames()</tt>&#26041;&#27861;&#21487;&#20197;&#33719;&#24471;&#37096;&#32626;&#30340;JMS&#35805;&#39064;&#21517;&#23383;&#12290;</p><p>JMS&#35805;&#39064;&#21487;&#20197;&#29992;<tt class="literal">createTopic()</tt>&#26041;&#27861;&#26469;&#21019;&#24314;&#65292;&#29992;<tt class="literal">destroyTopic()</tt>&#26041;&#27861;&#26469;&#21024;&#38500;&#12290;
                     &#21019;&#24314;&#30340;&#35805;&#39064;&#37117;&#32465;&#23450;&#21040;JNDI&#20197;&#20415;&#23458;&#25143;&#31471;&#26597;&#25214;&#12290;</p></li><li><p>&#36828;&#31243;&#36830;&#25509;&#30340;&#21015;&#34920;&#19982;&#20851;&#38381;</p><p>&#29992;<tt class="literal">listRemoteAddresses()</tt>&#26041;&#27861;&#21487;&#20197;&#33719;&#24471;JMS&#23458;&#25143;&#31471;&#30340;&#36828;&#31243;&#22320;&#22336;&#12290;
                     &#36824;&#21487;&#20197;&#29992;<tt class="literal">closeConnectionsForAddress()</tt>&#26041;&#27861;&#20851;&#38381;&#19982;&#26576;&#20010;&#36828;&#31243;&#22320;&#22336;&#30456;&#20851;&#32852;&#30340;&#36830;&#25509;&#12290;</p><p>&#21478;&#22806;&#65292;<tt class="literal">listConnectionIDs()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#36830;&#25509;&#30340;ID&#65292;
                     &#32780;<tt class="literal">listSessions()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#32473;&#23450;&#30340;&#36830;&#25509;ID&#30340;&#25152;&#26377;&#20250;&#35805;&#65288;session&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5807"></a>30.1.2.2.&nbsp;JMS&#36830;&#25509;&#24037;&#21378;&#30340;&#31649;&#29702;</h4></div></div><div></div></div><p>&#20351;&#29992;&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=JMS,type=ConnectionFactory,
                  name="&lt;&#36830;&#25509;&#24037;&#21378;&#21517;&gt;"</tt>&#25110;&#32773;&#36164;&#28304;&#21517;<tt class="literal">jms.connectionfactory.&lt;
                  &#36830;&#25509;&#24037;&#21378;&#21517;&gt;</tt>&#65289;&#21487;&#20197;&#31649;&#29702;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#33719;&#24471;&#36830;&#25509;&#24037;&#21378;&#30340;&#23646;&#24615;</p><p><tt class="literal">ConnectionFactoryControl</tt>&#31867;&#21487;&#20197;&#29992;&#26469;&#33719;&#24471;&#36830;&#25509;&#24037;&#21378;&#30340;&#23646;&#24615;&#65288;
                     &#20363;&#22914;<tt class="literal">getConsumerWindowSize()</tt>&#26041;&#27861;&#21487;&#20197;&#33719;&#24471;&#25509;&#25910;&#32773;&#27969;&#25511;&#21046;&#30340;&#31383;&#21475;&#22823;&#23567;&#65292;
                     <tt class="literal">isBlockOnNonDurableSend()</tt>&#26041;&#27861;&#21487;&#20197;&#30693;&#36947;&#20174;&#36825;&#20010;&#36830;&#25509;&#24037;&#21378;&#21019;&#24314;&#30340;&#21457;&#36865;
                     &#32773;&#26159;&#21542;&#37319;&#29992;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#38750;&#25345;&#20037;&#30340;&#28040;&#24687;&#65292;&#31561;&#31561;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5832"></a>30.1.2.3.&nbsp;JMS&#38431;&#21015;&#31649;&#29702;</h4></div></div><div></div></div><p>&#20351;&#29992;<tt class="literal">JMSQueueControl</tt>&#31867;&#65288;ObjectName <tt class="literal">org.hornetq:module=JMS,
                  type=Queue,name="&lt;&#38431;&#21015;&#21517;&gt;"</tt>&#25110;&#36164;&#28304;&#21517; <tt class="literal">jms.queue.&lt;&#38431;&#21015;&#21517;
                  &gt;</tt>&#21487;&#20197;&#31649;&#29702;JMS&#38431;&#21015;&#12290;</p><p><span class="emphasis"><em>JMS&#38431;&#21015;&#30340;&#31649;&#29702;&#25805;&#20316;&#19982;&#26680;&#24515;&#38431;&#21015;&#30340;&#31649;&#29702;&#21313;&#20998;&#30456;&#20284;&#12290;</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>&#36807;&#26399;&#65292;&#21457;&#36865;&#21040;&#27515;&#20449;&#22320;&#22336;&#21644;&#31227;&#21160;&#28040;&#24687;</p><p>&#21487;&#20197;&#20351;&#29992;<tt class="literal">expireMessages()</tt>&#26041;&#27861;&#23558;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#35774;&#25104;&#36807;&#26399;&#28040;&#24687;&#12290;
                        &#22914;&#26524;&#37197;&#32622;&#26377;&#36807;&#26399;&#22320;&#22336;&#65292;&#28040;&#24687;&#23601;&#20250;&#34987;&#21457;&#21040;&#36807;&#26399;&#22320;&#22336;&#12290;&#36807;&#26399;&#22320;&#22336;&#21487;&#20197;&#29992;
                     <tt class="literal">setExpiryAddress()</tt>&#26041;&#27861;&#26469;&#35774;&#23450;&#12290;</p><p>&#20351;&#29992;<tt class="literal">sendMessagesToDeadLetterAddress()</tt>&#26041;&#27861;&#21487;&#20197;&#23558;&#28040;&#24687;&#21457;&#36865;&#21040;&#27515;&#20449;&#22320;&#22336;&#12290;
                     &#23427;&#36820;&#22238;&#21457;&#36865;&#21040;&#27515;&#20449;&#22320;&#22336;&#28040;&#24687;&#30340;&#25968;&#37327;&#12290;&#22914;&#26524;&#27809;&#26377;&#35774;&#23450;&#27515;&#20449;&#22320;&#22336;&#65292;&#37027;&#20040;&#28040;&#24687;&#20250;&#34987;&#20002;&#24323;&#12290;&#20351;&#29992;
                     <tt class="literal">setDeadLetterAddress()</tt>&#26041;&#27861;&#21487;&#20197;&#35774;&#23450;&#38431;&#21015;&#30340;&#27515;&#20449;&#22320;&#22336;&#12290;</p><p><tt class="literal">moveMessages()</tt>&#26041;&#27861;&#23558;&#28040;&#24687;&#20174;&#19968;&#20010;&#38431;&#21015;&#31227;&#21160;&#21040;&#21478;&#19968;&#20010;&#38431;&#21015;&#12290;</p></li><li><p>&#21015;&#34920;&#19982;&#21024;&#38500;&#28040;&#24687;</p><p>&#20351;&#29992;<tt class="literal">listMessages()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#38431;&#21015;&#20013;&#30340;&#25152;&#26377;&#28040;&#24687;&#12290;&#23427;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;
                        Map&#30340;&#25968;&#32452;&#12290;&#27599;&#19968;&#20010;Map&#23545;&#24212;&#19968;&#20010;&#28040;&#24687;&#12290;</p><p>&#20351;&#29992;<tt class="literal">removeMessages()</tt>&#26041;&#27861;&#21487;&#20197;&#20174;&#38431;&#21015;&#20013;&#21024;&#38500;&#28040;&#24687;&#12290;&#22914;&#26524;&#24102;&#30340;&#21442;&#25968;&#26159;&#28040;&#24687;ID&#65292;
                        &#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#24067;&#23572;&#24120;&#26159;&#65307;&#22914;&#26524;&#24102;&#30340;&#21442;&#25968;&#26159;&#19968;&#20010;&#36807;&#28388;&#22120;&#65292;&#21017;&#36820;&#22238;&#21024;&#38500;&#30340;&#28040;&#24687;&#25968;&#12290;&#24102;&#26377;&#36807;&#28388;&#22120;&#21442;&#25968;&#30340;<tt class="literal">removeMessages()</tt>&#26041;&#27861;&#21482;&#21024;&#38500;&#36807;&#28388;&#22120;&#36873;&#25321;&#30340;&#28040;&#24687;&#12290;&#22914;&#26524;&#20123;&#21442;&#25968;&#26159;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;&#65292;&#37027;&#20040;&#23558;
                        &#21024;&#38500;&#25152;&#26377;&#30340;&#28040;&#24687;&#12290;</p></li><li><p>&#28040;&#24687;&#35745;&#25968;</p><p>&#20351;&#29992;<tt class="literal">getMessageCount()</tt>&#26041;&#27861;&#21487;&#20197;&#24471;&#21040;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#25968;&#12290;&#21478;&#22806;&#65292;&#26041;&#27861;
                        <tt class="literal">countMessages()</tt>&#21487;&#20197;&#24471;&#21040;&#38431;&#21015;&#20013;&#25152;&#26377;&#19982;<span class="emphasis"><em>&#36807;&#28388;&#22120;</em></span>&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25968;&#12290;</p></li><li><p>&#20462;&#25913;&#28040;&#24687;&#30340;&#20248;&#20808;&#32423;</p><p>&#28040;&#24687;&#30340;&#20248;&#20808;&#32423;&#21487;&#20197;&#29992;<tt class="literal">changeMessagesPriority()</tt>&#26041;&#27861;&#20462;&#25913;&#12290;&#22914;&#26524;&#26159;&#24102;&#19968;&#20010;&#28040;
                        &#24687;ID&#21442;&#25968;&#65292;&#23427;&#36820;&#22238;&#30340;&#26159;&#19968;&#20010;&#24067;&#23572;&#24120;&#37327;&#65307;&#22914;&#26524;&#26159;&#24102;&#19968;&#20010;&#36807;&#28388;&#22120;&#21442;&#25968;&#65292;&#21017;&#23427;&#36820;&#22238;&#30340;&#26159;&#20248;&#20808;&#32423;&#26356;&#26032;&#20102;&#30340;&#28040;&#24687;&#25968;&#12290;</p></li><li><p>&#28040;&#24687;&#35745;&#25968;&#22120;</p><p><tt class="literal">listMessageCounter()</tt>&#26041;&#27861;&#21644;<tt class="literal">listMessageCounterHistory()</tt>
                        &#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#21015;&#20986;&#38431;&#21015;&#20013;&#30340;&#25152;&#26377;&#28040;&#24687;&#35745;&#25968;&#22120;&#12290;&#65288;&#21442;&#35265; <a href="#management.message-counters" title="30.6.&nbsp;&#28040;&#24687;&#35745;&#25968;&#22120;">Section&nbsp;30.6, &#8220;&#28040;&#24687;&#35745;&#25968;&#22120;&#8221;</a>&#65289;&#12290;</p></li><li><p>&#33719;&#21462;&#38431;&#21015;&#30340;&#23646;&#24615;</p><p><tt class="literal">JMSQueueControl</tt>&#31867;&#21487;&#20197;&#29992;&#26469;&#33719;&#21462;JMS&#38431;&#21015;&#30340;&#35774;&#32622;&#21442;&#25968;&#65288;&#20363;&#22914;&#26041;&#27861;<tt class="literal">isTemporary()</tt>
                     &#21487;&#20197;&#21028;&#26029;&#38431;&#21015;&#26159;&#21542;&#20026;&#20020;&#26102;&#30340;&#65292;&#26041;&#27861;<tt class="literal">isDurable()</tt>&#21487;&#20197;&#21028;&#26029;&#38431;&#21015;&#26159;&#21542;&#20026;&#25345;&#20037;&#30340;&#31561;&#31561;&#65289;&#12290;</p></li><li><p>&#38431;&#21015;&#30340;&#26242;&#20572;&#19982;&#24674;&#22797;</p><p><tt class="literal">JMSQueueControl</tt>&#21487;&#20197;&#26242;&#20572;&#19968;&#20010;&#38431;&#21015;&#25110;&#24674;&#22797;&#19968;&#20010;&#38431;&#21015;&#12290;
                     &#22914;&#26524;&#19968;&#20010;&#38431;&#21015;&#34987;&#26242;&#20572;&#65292;&#23427;&#34429;&#28982;&#21487;&#20197;&#32487;&#32493;&#25509;&#25910;&#28040;&#24687;&#20294;&#26159;&#19981;&#20256;&#36882;&#28040;&#24687;&#65307;
                     &#24403;&#34987;&#24674;&#22797;&#26102;&#65292;&#38431;&#21015;&#21448;&#20250;&#24320;&#22987;&#20256;&#36882;&#28040;&#24687;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e5943"></a>30.1.2.4.&nbsp;JMS&#35805;&#39064;&#65288;Topic&#65289;&#30340;&#31649;&#29702;</h4></div></div><div></div></div><p>JMS&#35805;&#39064;&#30340;&#31649;&#29702;&#26159;&#36890;&#36807;<tt class="literal">TopicControl</tt>&#31867;&#65288;
               the ObjectName <tt class="literal">org.hornetq:module=JMS,type=Topic,name="&lt;&#35805;&#39064;&#21517;&gt;"</tt>
               &#25110;&#36164;&#28304;&#21517; <tt class="literal">jms.topic.&lt;&#35805;&#39064;&#21517;&gt;</tt>&#65289;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#35746;&#38405;&#21644;&#28040;&#24687;&#30340;&#21015;&#34920;</p><p><tt class="literal">listAllSubscriptions()</tt>&#12289;<tt class="literal">listDurableSubscriptions()</tt>&#12289; <tt class="literal">listNonDurableSubscriptions()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#35805;&#39064;&#30340;&#19981;&#21516;&#35746;&#38405;&#12290;
                     &#36825;&#20123;&#26041;&#27861;&#37117;&#36820;&#22238;<tt class="literal">Object</tt>&#25968;&#32452;&#65292;&#34920;&#31034;&#35746;&#38405;&#30340;&#32454;&#33410;&#65288;&#22914;&#35746;&#38405;&#21517;&#65292;
                     &#23458;&#25143;ID&#65292;&#25345;&#20037;&#24615;&#65292;&#28040;&#24687;&#35745;&#25968;&#31561;&#65289;&#12290;&#29992;<tt class="literal">listMessagesForSubscription()</tt>&#26041;&#27861;&#21487;&#20197;&#21015;&#20986;&#19968;&#20010;&#35746;&#38405;&#19978;&#30340;JMS&#28040;&#24687;&#12290;</p></li><li><p>&#21024;&#38500;&#35746;&#38405;</p><p>&#25345;&#20037;&#24615;&#35746;&#38405;&#21487;&#20197;&#20351;&#29992;<tt class="literal">dropDurableSubscription()</tt>&#26041;&#27861;&#26469;&#21024;&#38500;&#12290;</p></li><li><p>&#35746;&#38405;&#28040;&#24687;&#35745;&#25968;</p><p><tt class="literal">countMessagesForSubscription()</tt>&#26041;&#27861;&#21487;&#20197;&#24471;&#21040;&#19968;&#20010;&#35746;&#38405;&#19978;&#38754;&#25152;&#25345;&#26377;
                     &#30340;&#28040;&#24687;&#25968;&#65288;&#36824;&#21487;&#24102;&#19968;&#20010;&#28040;&#24687;&#36873;&#25321;&#22120;&#26469;&#24471;&#20986;&#26377;&#22810;&#23569;&#28040;&#24687;&#19982;&#20043;&#21305;&#37197;&#65289;&#12290;</p></li></ul></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="management.jmx"></a>30.2.&nbsp;&#20351;&#29992;JMX</h2></div></div><div></div></div><p>HornetQ&#25552;&#20379;&#20102;<a href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" target="_top">JMX</a>&#12290;</p><p>HornetQ&#36890;&#36807;MBean&#30340;&#25509;&#21475;&#26292;&#38706;&#20854;JMX&#31649;&#29702;&#25805;&#20316;&#12290;&#23427;&#23558;&#33258;&#24049;&#30340;&#36164;&#28304;&#27880;&#20876;&#21040;<tt class="literal">org.hornetq</tt>&#22495;&#12290;</p><p>&#27604;&#22914;&#65292;&#29992;&#26469;&#31649;&#29702;&#19968;&#20010;&#21517;&#20026;<tt class="literal">exampleQueue</tt>JMS&#38431;&#21015;&#30340;<tt class="literal">ObjectName</tt>&#26159;&#65306;</p><pre class="programlisting">
   org.hornetq:module=JMS,type=Queue,name="exampleQueue"   
      </pre><p>MBean&#20026;&#65306;</p><pre class="programlisting">
   org.hornetq.api.jms.management.JMSQueueControl   
      </pre><p>MBean&#30340;<tt class="literal">ObjectName</tt>&#29992; <tt class="literal">org.hornetq.api.core.management.ObjectNameBuilder</tt>&#26469;&#20135;&#29983;&#20986;&#26469;&#30340;&#12290;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;<tt class="literal">jconsole</tt>&#26469;&#26597;&#25214;&#20320;&#24819;&#35201;&#30340;MBean&#30340;<tt class="literal">ObjectName</tt>&#12290;</p><p>&#20351;&#29992;JMX&#26469;&#31649;&#29702;HornetQ&#19982;&#29992;JMX&#31649;&#29702;&#20854;&#23427;Java&#24212;&#29992;&#31243;&#24207;&#27809;&#26377;&#20160;&#20040;&#19981;&#21516;&#12290;&#20320;&#21487;&#20197;&#20351;&#29992;&#21453;&#23556;&#25110;&#32773;&#21019;&#24314;MBean&#20195;&#29702;&#30340;&#26041;&#27861;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="management.jmx.configuration"></a>30.2.1.&nbsp;&#37197;&#32622;JMX</h3></div></div><div></div></div><p>&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#30340;JMX&#26159;&#25171;&#24320;&#30340;&#12290;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">jmx-management-enabled</tt>&#35774;&#32622;&#20026;<tt class="literal">false</tt>&#23601;&#21487;&#20197;&#20851;&#38381;JMX&#65306;</p><pre class="programlisting">
&lt;!-- false to disable JMX management for HornetQ --&gt;
&lt;jmx-management-enabled&gt;false&lt;/jmx-management-enabled&gt;            
         </pre><p>&#22914;&#26524;JMX&#21151;&#33021;&#26159;&#25171;&#24320;&#30340;&#65292;&#21017;&#20351;&#29992;<tt class="literal">jconsole</tt>&#21487;&#20197;&#31649;&#29702;&#26412;&#22320;&#30340;HornetQ&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#20986;&#20110;&#23433;&#20840;&#32771;&#34385;&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;JMX&#36828;&#31243;&#36830;&#25509;&#26159;&#20851;&#38381;&#30340;&#12290;&#21442;&#35265;<a href="http://java.sun.com/j2se/1.5.0/docs/guide/management/agent.html#remote" target="_top">Java&#31649;&#29702;&#25351;&#21335;</a>&#26469;&#37197;&#32622;&#26381;&#21153;&#22120;&#30340;&#36828;&#31243;&#31649;&#29702;&#65288;&#31995;&#32479;&#21464;&#37327;&#24517;&#39035;&#22312;<tt class="literal">run.sh</tt>&#25110;<tt class="literal">run.bat</tt>&#20013;&#23450;&#20041;&#65289;&#12290;</p></div><p>HornetQ&#40664;&#35748;&#20351;&#29992;JMX&#22495;&#21517;"org.hornetq"&#12290;&#22914;&#26524;&#35201;&#29992;&#19968;&#20010;MBeanServer&#31649;&#29702;&#22810;&#20010;HornetQ&#26381;&#21153;&#22120;&#65292;&#21487;&#20197;&#23558;&#27599;&#20010;HornetQ
            &#26381;&#21153;&#22120;&#37197;&#32622;&#25104;&#19981;&#21516;&#30340;JMX&#22495;&#12290;&#26041;&#27861;&#23601;&#26159;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#35774;&#32622;<tt class="literal">jmx-domain</tt>&#65306;</p><pre class="programlisting">
&lt;!-- use a specific JMX domain for HornetQ MBeans --&gt;
&lt;jmx-domain&gt;my.org.hornetq&lt;/jmx-domain&gt;            
         </pre><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e6078"></a>30.2.1.1.&nbsp;MBeanServer&#30340;&#37197;&#32622;</h4></div></div><div></div></div><p>HornetQ&#22312;&#29420;&#31435;&#36816;&#34892;&#26102;&#20351;&#29992;Java&#34394;&#25311;&#26426;&#30340;<tt class="literal">Platform MBeanServer</tt>&#26469;&#27880;&#20876;&#20854;MBean&#12290;&#36825;&#22312;JBoss Microcontainer&#65288;&#24494;&#23481;&#22120;&#65289;&#30340;bean
               &#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#65288;&#21442;&#35265;<a href="#server.microcontainer.configuration" title="6.7.&nbsp;JBoss Microcontainer Beans &#25991;&#20214;">Section&nbsp;6.7, &#8220;JBoss Microcontainer Beans &#25991;&#20214;&#8221;</a>&#65289;&#65306;</p><pre class="programlisting">&lt;!-- MBeanServer --&gt;
&lt;bean name="MBeanServer" class="javax.management.MBeanServer"&gt;
   &lt;constructor factoryClass="java.lang.management.ManagementFactory"
                         factoryMethod="getPlatformMBeanServer" /&gt;
&lt;/bean&gt;            
            </pre><p>&#24403;&#19982;AS 5&#65291;&#38598;&#25104;&#36816;&#34892;&#26102;&#65292;&#23427;&#20351;&#29992;&#24212;&#29992;&#26381;&#21153;&#22120;&#33258;&#24049;&#30340;MBean&#26381;&#21153;&#65292;&#36825;&#26679;&#23601;&#21487;&#20197;&#20351;&#29992;&#23427;&#30340;jmx-console&#65306;</p><pre class="programlisting">&lt;!-- MBeanServer --&gt;
&lt;bean name="MBeanServer" class="javax.management.MBeanServer"&gt;
   &lt;constructor factoryClass="org.jboss.mx.util.MBeanServerLocator"
                         factoryMethod="locateJBoss" /&gt;
&lt;/bean&gt;            
            </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6094"></a>30.2.2.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.jmx" title="11.1.21.&nbsp;JMX&#31649;&#29702;">Section&nbsp;11.1.21, &#8220;JMX&#31649;&#29702;&#8221;</a>&#65292;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#36828;&#31243;JMX&#36830;&#25509;&#25110;MBean&#20195;&#29702;&#26469;&#31649;&#29702;HornetQ&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6101"></a>30.3.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;</h2></div></div><div></div></div><p>&#26680;&#24515;&#31649;&#29702;&#25509;&#21475;&#30340;&#35843;&#29992;&#23454;&#38469;&#19978;&#26159;&#21521;&#19968;&#20010;&#29305;&#27530;&#30340;&#22320;&#22336;&#21457;&#36865;&#26680;&#24515;&#28040;&#24687;&#12290;&#36825;&#20010;&#29305;&#27530;&#22320;&#22336;&#31216;&#20026;<span class="emphasis"><em>&#31649;&#29702;&#22320;&#22336;</em></span>&#12290;</p><p><span class="emphasis"><em>&#31649;&#29702;&#28040;&#24687;</em></span>&#26159;&#19968;&#20123;&#23450;&#20041;&#20102;&#19968;&#20123;&#22266;&#23450;&#23646;&#24615;&#30340;&#26222;&#36890;&#26680;&#24515;&#28040;&#24687;&#12290;&#26381;&#21153;&#22120;&#36890;&#36807;&#36825;&#20123;&#23646;&#24615;&#26469;&#35299;&#37322;&#31649;&#29702;&#25805;&#20316;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#31649;&#29702;&#36164;&#28304;&#30340;&#21517;&#31216;</p></li><li><p>&#31649;&#29702;&#25805;&#20316;&#30340;&#21517;&#31216;</p></li><li><p>&#31649;&#29702;&#25805;&#20316;&#30340;&#21442;&#25968;</p></li></ul></div><p>&#24403;&#19968;&#20010;&#31649;&#29702;&#28040;&#24687;&#21457;&#36865;&#21040;&#31649;&#29702;&#22320;&#22336;&#26102;&#65292;HornetQ&#26381;&#21153;&#22120;&#23558;&#20174;&#20013;&#25552;&#21462;&#20986;&#30456;&#24212;&#30340;&#20449;&#24687;&#65292;&#20877;&#35843;&#29992;&#30456;&#24212;&#30340;&#31649;&#29702;&#36164;&#28304;&#30340;&#26041;&#27861;&#65292;&#20043;&#21518;&#21521;
         &#35813;&#31649;&#29702;&#28040;&#24687;&#30340;&#22238;&#31572;&#22320;&#22336;&#65288;reply-to address&#65292;&#30001;<tt class="literal">ClientMessageImpl.REPLYTO_HEADER_NAME
         </tt>&#23450;&#20041;&#65289;&#21457;&#36865;&#19968;&#20010;<span class="emphasis"><em>&#31649;&#29702;&#22238;&#31572;</em></span>&#12290;</p><p>&#19968;&#20010;<tt class="literal">ClientConsumer</tt>&#29992;&#26469;&#25509;&#25910;&#31649;&#29702;&#22238;&#31572;&#24182;&#25552;&#21462;&#20986;&#20854;&#20013;&#30340;&#25805;&#20316;&#30340;&#32080;&#26524;&#65288;&#22914;&#26524;&#26377;&#30340;&#35805;&#65289;&#12290;
         &#32771;&#34385;&#21040;&#21487;&#31227;&#26893;&#24615;&#65292;&#36820;&#22238;&#30340;&#32080;&#26524;&#37319;&#29992;&#30340;&#26159;&#26684;&#24335;&#30340;&#23383;&#31526;&#20018;&#65292;&#32780;&#27809;&#26377;&#37319;&#29992;Java&#30340;&#24207;&#21015;&#21270;&#25216;&#26415;
         &#65288;<tt class="literal">org.hornetq.api.core.management.ManagementHelper</tt>&#21487;&#20197;&#29992;&#26469;&#23558;JSON&#23383;&#31526;&#20018;
         &#36716;&#25442;&#25104;Java&#23545;&#35937;&#65289;&#12290;</p><p>&#20351;&#29992;&#20197;&#19979;&#27493;&#39588;&#21487;&#20197;&#31616;&#21270;&#20351;&#29992;&#26680;&#24515;&#28040;&#24687;&#35843;&#29992;&#31649;&#29702;&#25805;&#20316;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#21019;&#24314;&#19968;&#20010;<tt class="literal">ClientRequestor</tt>&#23545;&#35937;&#65292;&#29992;&#26469;&#21457;&#36865;&#31649;&#29702;&#28040;&#24687;&#24182;&#25509;&#25910;&#22238;&#31572;&#12290;</p></li><li><p>&#21019;&#24314;&#19968;&#20010;<tt class="literal">ClientMessage</tt>&#12290;</p></li><li><p>&#20351;&#29992;<tt class="literal">org.hornetq.api.core.management.ManagementHelper</tt>&#31867;&#26469;&#24110;&#21161;&#35774;&#32622;&#28040;&#24687;&#30340;&#31649;&#29702;&#21442;&#25968;&#12290;</p></li><li><p>&#36890;&#36807;<tt class="literal">ClientRequestor</tt>&#23558;&#28040;&#24687;&#21457;&#36865;</p></li><li><p>&#20351;&#29992; <tt class="literal">org.hornetq.api.core.management.ManagementHelper</tt>&#31867;&#20174;&#31649;&#29702;&#25805;&#20316;&#32080;&#26524;&#20013;&#25552;&#21462;&#36820;&#22238;&#20540;&#12290;</p></li></ol></div><p>&#20363;&#22914;&#65292;&#35201;&#24471;&#21040;&#26680;&#24515;&#38431;&#21015;<tt class="literal">exampleQueue</tt>&#20013;&#28040;&#24687;&#30340;&#25968;&#37327;&#65306;</p><pre class="programlisting">
   ClientSession session = ...
   ClientRequestor requestor = new ClientRequestor(session, "jms.queue.hornetq.management");
   ClientMessage message = session.createMessage(false);
   ManagementHelper.putAttribute(message, "core.queue.exampleQueue", "messageCount");
   ClientMessage reply = requestor.request(m);
   int count = (Integer) ManagementHelper.getResult(reply);
   System.out.println("There are " + count + " messages in exampleQueue");
      </pre><p>&#31649;&#29702;&#25805;&#20316;&#21517;&#21450;&#20854;&#21442;&#25968;&#24517;&#39035;&#21644;<tt class="literal">management</tt>&#21253;&#20013;&#23450;&#20041;&#30340;Java&#25509;&#21475;&#19968;&#33268;&#12290;</p><p>&#36164;&#28304;&#30340;&#21517;&#31216;&#26159;&#29992;<tt class="literal">org.hornetq.api.core.management.ResourceNames</tt>&#31867;&#26469;&#29983;&#25104;&#30340;&#65292;
            &#21629;&#21517;&#37117;&#38750;&#24120;&#30452;&#35266;&#65288;&#22914;&#26680;&#24515;&#38431;&#21015;<tt class="literal">exampleQueue</tt>&#30340;&#21517;&#31216;&#20026;<tt class="literal">core.queue.exampleQueue</tt>&#65292;
            JMS Topic <tt class="literal">exampleTopic</tt>&#30340;&#21517;&#31216;&#20026;<tt class="literal">jms.topic.exampleTopic</tt>&#65292;&#31561;&#31561;&#65289;&#12290;
</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="management.core.configuration"></a>30.3.1.&nbsp;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;</h3></div></div><div></div></div><p>&#31649;&#29702;&#22320;&#22336;&#30340;&#37197;&#32622;&#22312;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#65306;</p><pre class="programlisting">
   &lt;management-address&gt;jms.queue.hornetq.management&lt;/management-address&gt;
         </pre><p>&#23427;&#30340;&#40664;&#35748;&#22320;&#22336;&#26159;<tt class="literal">jms.queue.hornetq.management</tt> &#65288;&#22320;&#22336;&#21069;&#32512;&#21152;&#19978;
            &#8220;jms.queue&#8221;&#26159;&#20026;&#20102;&#26041;&#20415;JMS&#23458;&#25143;&#31471;&#20063;&#21487;&#20197;&#21521;&#23427;&#21457;&#36865;&#31649;&#29702;&#28040;&#24687;&#12290;</p><p>&#31649;&#29702;&#22320;&#22336;&#38656;&#35201;&#19968;&#20010;<span class="emphasis"><em>&#29305;&#27530;</em></span>&#30340;&#29992;&#25143;&#26435;&#38480;
               <tt class="literal">manage</tt>&#26469;&#25509;&#25910;&#24182;&#22788;&#29702;&#31649;&#29702;&#28040;&#24687;&#12290;&#36825;&#20010;&#26435;&#38480;&#20063;&#22312;hornetq-configuration.xml&#25991;&#20214;&#20013;&#37197;&#32622;&#65306;</p><pre class="programlisting">
   &lt;!-- users with the admin role will be allowed to manage --&gt; 
   &lt;!-- HornetQ using management messages        --&gt;
   &lt;security-setting match="jms.queue.hornetq.management"&gt;
      &lt;permission type="manage" roles="admin" /&gt;
   &lt;/security-setting&gt;
         </pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="management.jms"></a>30.4.&nbsp;&#20351;&#29992;JMS&#36827;&#34892;&#31649;&#29702;</h2></div></div><div></div></div><p>&#20351;&#29992;JMS&#31649;&#29702;HornetQ&#19982;&#20351;&#29992;&#26680;&#24515;API&#31649;&#29702;HornetQ&#21313;&#20998;&#30456;&#20284;&#12290;</p><p>&#20854;&#20013;&#19968;&#20010;&#37325;&#35201;&#30340;&#19981;&#21516;&#26159;JMS&#38656;&#35201;&#19968;&#20010;JMS&#38431;&#21015;&#26469;&#21457;&#36865;&#28040;&#24687;&#65288;&#32780;&#26680;&#24515;&#25509;&#21475;&#20351;&#29992;&#30340;&#26159;&#19968;&#20010;&#22320;&#22336;&#65289;&#12290;</p><p><span class="emphasis"><em>&#31649;&#29702;&#38431;&#21015;</em></span>&#26159;&#19968;&#20010;&#29305;&#27530;&#30340;&#38431;&#21015;&#65292;&#23427;&#38656;&#35201;&#23458;&#25143;&#31471;&#30452;&#25509;&#23454;&#20363;&#21270;&#65306;</p><pre class="programlisting">
   Queue managementQueue = HornetQJMSClient.createQueue("hornetq.management");
      </pre><p>&#20854;&#20313;&#27493;&#39588;&#23436;&#20840;&#21644;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#19968;&#26679;&#65292;&#21482;&#26159;&#30456;&#24212;&#30340;&#23545;&#35937;&#19981;&#21516;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#21019;&#24314;&#19968;&#20010;<tt class="literal">QueueRequestor</tt>&#26469;&#21521;&#31649;&#29702;&#22320;&#22336;&#21457;&#36865;&#31649;&#29702;&#28040;&#24687;&#24182;&#25509;&#25910;&#22238;&#31572;&#12290;</p></li><li><p>&#21019;&#24314;&#19968;&#20010;<tt class="literal">&#28040;&#24687;</tt></p></li><li><p>&#20351;&#29992; <tt class="literal">org.hornetq.api.jms.management.JMSManagementHelper</tt>&#31867;&#21521;&#28040;&#24687;&#20013;&#35774;&#32622;&#31649;&#29702;&#21442;&#25968;&#12290;</p></li><li><p>&#20877;&#20351;&#29992;<tt class="literal">QueueRequestor</tt>&#21457;&#36865;&#28040;&#24687;&#12290;</p></li><li><p>&#20351;&#29992;<tt class="literal">org.hornetq.api.jms.management.JMSManagementHelper</tt>&#26469;&#20174;&#22238;&#31572;&#20013;&#25552;&#21462;&#36820;&#22238;&#32080;&#26524;&#12290;</p></li></ol></div><p>&#20363;&#22914;&#65292;&#35201;&#24471;&#21040;&#19968;&#20010;JMS&#38431;&#21015;<tt class="literal">exampleQueue</tt>&#20013;&#26377;&#22810;&#23569;&#28040;&#24687;&#65306;</p><pre class="programlisting">
   Queue managementQueue = HornetQJMSClient.createQueue("hornetq.management");   
   
   QueueSession session = ...      
   QueueRequestor requestor = new QueueRequestor(session, managementQueue);
   connection.start();
   Message message = session.createMessage();
   JMSManagementHelper.putAttribute(message, "jms.queue.exampleQueue", "messageCount");
   Message reply = requestor.request(message);
   int count = (Integer)JMSManagementHelper.getResult(reply);
   System.out.println("There are " + count + " messages in exampleQueue");
      </pre><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6278"></a>30.4.1.&nbsp;&#37197;&#32622;JMS&#31649;&#29702;</h3></div></div><div></div></div><p>JMS&#31649;&#29702;&#30340;&#37197;&#32622;&#19982;&#26680;&#24515;&#25509;&#21475;&#31649;&#29702;&#30340;&#37197;&#32622;&#27493;&#39588;&#26159;&#19968;&#26679;&#30340;&#65288;&#21442;&#35265;<a href="#management.core.configuration" title="30.3.1.&nbsp;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;">Section&nbsp;30.3.1, &#8220;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;&#8221;</a>&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6285"></a>30.4.2.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.management" title="11.1.25.&nbsp;&#31649;&#29702;">Section&nbsp;11.1.25, &#8220;&#31649;&#29702;&#8221;</a>&#65292;&#23427;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;JMS&#28040;&#24687;&#26469;&#31649;&#29702;HornetQ&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="management.notifications"></a>30.5.&nbsp;&#31649;&#29702;&#36890;&#30693;</h2></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#21521;listener&#21457;&#36865;&#21508;&#31181;&#20107;&#20214;&#30340;<span class="emphasis"><em>&#36890;&#30693;</em></span>&#65288;&#22914;&#36164;&#28304;&#30340;&#21019;&#24314;&#65292;&#23433;&#20840;&#30772;&#22351;&#31561;&#65289;&#12290;</p><p>&#26377;&#19977;&#31181;&#26041;&#24335;&#25509;&#25910;&#31649;&#29702;&#36890;&#30693;</p><div class="itemizedlist"><ul type="disc"><li><p>JMX&#36890;&#30693;</p></li><li><p>&#26680;&#24515;&#28040;&#24687;</p></li><li><p>JMS&#28040;&#24687;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6312"></a>30.5.1.&nbsp;JMX&#36890;&#30693;</h3></div></div><div></div></div><p>&#22914;&#26524;&#35774;&#32622;&#20102;JMX&#65288;&#21442;&#35265;<a href="#management.jmx.configuration" title="30.2.1.&nbsp;&#37197;&#32622;JMX">Section&nbsp;30.2.1, &#8220;&#37197;&#32622;JMX&#8221;</a>&#65289;&#65292;&#23601;&#21487;&#20197;&#36890;&#36807;&#35746;&#38405;&#20197;&#19979;
               &#20004;&#20010;MBean&#26469;&#33719;&#24471;&#36890;&#30693;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">org.hornetq:module=Core,type=Server</tt> &#21487;&#20197;&#33719;&#24471;&#26377;&#20851;
                     <span class="emphasis"><em>&#26680;&#24515;</em></span>&#36164;&#28304;&#30340;&#36890;&#30693;</p></li><li><p><tt class="literal">org.hornetq:module=JMS,type=Server</tt>&#21487;&#20197;&#33719;&#24471;&#26377;&#20851;
                     <span class="emphasis"><em>JMS</em></span>&#36164;&#28304;&#30340;&#36890;&#30693;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6336"></a>30.5.2.&nbsp;&#26680;&#24515;&#28040;&#24687;&#36890;&#30693;</h3></div></div><div></div></div><p>HornetQ&#23450;&#20041;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;<span class="emphasis"><em>&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;</em></span>&#12290;&#26680;&#24515;&#38431;&#21015;&#32465;&#23450;&#21040;&#35813;&#22320;&#22336;&#21518;&#65292;&#23458;&#25143;
            &#31471;&#23601;&#21487;&#20197;&#25509;&#25910;&#20197;&#26680;&#24515;&#28040;&#24687;&#24418;&#24335;&#21457;&#36865;&#30340;&#31649;&#29702;&#20449;&#36890;&#30693;&#20102;&#12290;</p><p>&#19968;&#20010;&#26680;&#24515;&#23458;&#25143;&#31471;&#35201;&#24819;&#25509;&#25910;&#21040;&#31649;&#29702;&#36890;&#30693;&#65292;&#23427;&#24517;&#39035;&#35201;&#21019;&#24314;&#19968;&#20010;&#38431;&#21015;&#24182;&#32465;&#23450;&#21040;&#36825;&#20010;&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;&#19978;&#65292;&#28982;&#21518;&#20174;&#36825;&#20010;
            &#38431;&#21015;&#25509;&#25910;&#36890;&#30693;&#12290;</p><p>&#36890;&#30693;&#28040;&#24687;&#23601;&#26159;&#26222;&#36890;&#30340;&#26680;&#24515;&#28040;&#24687;&#21152;&#19978;&#30456;&#20851;&#30340;&#23646;&#24615;&#65288;&#22914;&#36890;&#30693;&#31867;&#22411;&#65292;&#20107;&#20214;&#21457;&#29983;&#26102;&#38388;&#65292;&#36164;&#28304;&#31561;&#65289;&#12290;</p><p>&#30001;&#20110;&#26159;&#26631;&#20934;&#30340;&#26680;&#24515;&#28040;&#24687;&#65292;&#20351;&#29992;&#36873;&#25321;&#22120;&#36824;&#33021;&#22815;&#36807;&#28388;&#25481;&#19968;&#37096;&#20998;&#36890;&#30693;&#32780;&#21482;&#25509;&#25910;&#24863;&#20852;&#36259;&#30340;&#36890;&#30693;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="management.notifications.core.configuration"></a>30.5.2.1.&nbsp;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;</h4></div></div><div></div></div><p>&#29992;&#26469;&#21457;&#36865;&#31649;&#29702;&#36890;&#30693;&#30340;&#22320;&#22336;&#22312;&#25991;&#20214;&#20013;<tt class="literal">hornetq-configuration.xml</tt>&#37197;&#32622;&#65306;</p><pre class="programlisting">
               &lt;management-notification-address&gt;hornetq.notifications&lt;/management-notification-address&gt;
            </pre><p>&#40664;&#35748;&#30340;&#22320;&#22336;&#26159;<tt class="literal">hornetq.notifications</tt>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6365"></a>30.5.3.&nbsp;JMS&#28040;&#24687;&#36890;&#30693;</h3></div></div><div></div></div><p>HornetQ&#36824;&#21487;&#20197;&#36890;&#36807;JMS&#28040;&#24687;&#30340;&#26041;&#24335;&#21457;&#36865;&#36890;&#30693;&#12290;</p><p>&#36825;&#31181;&#26041;&#24335;&#19982;&#26680;&#24515;&#28040;&#24687;&#36890;&#30693;&#30456;&#20284;&#65292;&#20294;&#26159;&#26377;&#19968;&#20010;&#37325;&#35201;&#30340;&#19981;&#21516;&#65306;JMS&#28040;&#24687;&#38656;&#35201;&#19968;&#20010;JMS&#30340;&#30446;&#26631;&#65288;&#36890;&#24120;&#26159;&#19968;&#20010;Topic&#65289;&#12290;</p><p>&#35201;&#36890;&#36807;&#19968;&#20010;JMS&#30446;&#26631;&#26469;&#25509;&#25910;&#31649;&#29702;&#36890;&#30693;&#65292;&#24517;&#39035;&#23558;&#26381;&#21153;&#22120;&#30340;&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;&#20462;&#25913;&#20026;&#20197;<tt class="literal">jms.queue</tt>&#24320;&#22836;&#65288;&#22914;&#26524;&#26159;&#19968;&#20010;
            JMS&#38431;&#21015;&#65289;&#25110;&#32773;<tt class="literal">jms.topic</tt>&#65288;&#22914;&#26524;&#26159;&#19968;&#20010;&#35805;&#39064;&#65289;&#65306;</p><pre class="programlisting">
            &lt;!-- &#36890;&#30693;&#23558;&#20174;JMS&#35805;&#39064; "notificationsTopic"&#19978;&#25509;&#25910; --&gt; 
            &lt;management-notification-address&gt;jms.topic.notificationsTopic&lt;/management-notification-address&gt;
         </pre><p>&#36825;&#20010;&#36890;&#30693;&#35805;&#39064;&#19968;&#26086;&#34987;&#21019;&#24314;&#65292;&#23601;&#21487;&#20197;&#25509;&#25910;&#28040;&#24687;&#20102;&#65288;&#25110;&#32773;&#20351;&#29992;<tt class="literal">MessageListener</tt>&#65289;&#65306;</p><pre class="programlisting">
   Topic notificationsTopic = HornetQJMSClient.createTopic("notificationsTopic");

   Session session = ...
   MessageConsumer notificationConsumer = session.createConsumer(notificationsTopic);
      notificationConsumer.setMessageListener(new MessageListener()
      {
         public void onMessage(Message notif)
         {
            System.out.println("------------------------");
            System.out.println("Received notification:");
            try
            {
               Enumeration propertyNames = notif.getPropertyNames();
               while (propertyNames.hasMoreElements())
               {
                  String propertyName = (String)propertyNames.nextElement();
                  System.out.format("  %s: %s\n", propertyName, notif.getObjectProperty(propertyName));
               }
            }
            catch (JMSException e)
            {
            }
            System.out.println("------------------------");
         }            
      });            
         </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6389"></a>30.5.4.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.management-notifications" title="11.1.26.&nbsp;&#31649;&#29702;&#36890;&#30693;">Section&nbsp;11.1.26, &#8220;&#31649;&#29702;&#36890;&#30693;&#8221;</a>&#12290;&#26412;&#20363;&#37319;&#29992;&#20102;JMS&#30340;<tt class="literal">
            MessageListener</tt>&#26041;&#27861;&#20174;HornetQ
            &#26381;&#21153;&#22120;&#25509;&#25910;&#31649;&#29702;&#36890;&#30693;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="management.message-counters"></a>30.6.&nbsp;&#28040;&#24687;&#35745;&#25968;&#22120;</h2></div></div><div></div></div><p>HornetQ&#20445;&#23384;&#30528;&#38431;&#21015;&#30340;&#21382;&#21490;&#25968;&#25454;&#65292;&#32780;&#28040;&#24687;&#35745;&#25968;&#22120;&#21487;&#20197;&#20174;&#26381;&#21153;&#22120;&#19978;&#33719;&#21462;&#36825;&#20123;&#20449;&#24687;&#12290;</p><p>&#36825;&#20123;&#20449;&#24687;&#21487;&#20197;&#26174;&#31034;&#38431;&#21015;&#30340;&#19968;&#20123;<span class="emphasis"><em>&#36235;&#21183;</em></span>&#12290;&#20363;&#22914;&#65292;&#20351;&#29992;&#31649;&#29702;&#25509;&#21475;&#20320;&#21487;&#20197;&#23450;&#26399;&#26469;&#26597;&#35810;&#19968;&#20010;&#38431;&#21015;
         &#30340;&#28040;&#24687;&#25968;&#37327;&#12290;&#20294;&#36825;&#20010;&#25968;&#37327;&#19981;&#36275;&#20197;&#35828;&#26126;&#36825;&#20010;&#38431;&#21015;&#26159;&#21542;&#22312;&#24037;&#20316;&#65293;&#65293;&#20063;&#35768;&#36825;&#20010;&#38431;&#21015;&#26082;&#27809;&#26377;&#21457;&#36865;&#32773;&#20063;&#27809;&#26377;&#25509;&#25910;&#32773;&#65307;&#20063;&#35768;&#36825;&#20010;&#38431;&#21015;
         &#22312;&#19981;&#20572;&#22320;&#21457;&#36865;&#19982;&#25509;&#25910;&#65292;&#20294;&#26159;&#21457;&#36865;&#28040;&#24687;&#30340;&#36895;&#24230;&#19982;&#25509;&#25910;&#30340;&#36895;&#24230;&#30456;&#31561;&#12290;&#20004;&#21681;&#24773;&#20917;&#19979;&#37117;&#20250;&#36896;&#25104;&#28040;&#24687;&#25968;&#22312;&#38431;&#21015;&#20013;&#19981;&#21464;&#65292;&#20294;&#23454;&#38469;&#38431;&#21015;
         &#30340;&#29366;&#24577;&#30830;&#23436;&#20840;&#19981;&#19968;&#26679;&#12290;</p><p>&#28040;&#24687;&#35745;&#25968;&#22120;&#21487;&#20197;&#25552;&#20379;&#38431;&#21015;&#30340;&#26356;&#22810;&#30340;&#20449;&#24687;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">count</tt></p><p>&#20174;&#26381;&#21153;&#22120;&#21551;&#21160;&#26102;&#21152;&#21040;&#38431;&#21015;&#20013;&#30340;<span class="emphasis"><em>&#24635;</em></span>&#28040;&#24687;&#25968;&#12290;</p></li><li><p><tt class="literal">countDelta</tt></p><p>&#33258;<span class="emphasis"><em>&#19978;&#27425;&#28040;&#24687;&#35745;&#25968;&#22120;&#26356;&#26032;</em></span>&#21518;&#21152;&#20837;&#21040;&#38431;&#21015;&#30340;&#28040;&#24687;&#25968;&#12290;</p></li><li><p><tt class="literal">depth</tt></p><p>&#38431;&#21015;<span class="emphasis"><em>&#24403;&#21069;</em></span>&#30340;&#28040;&#24687;&#25968;&#12290;</p></li><li><p><tt class="literal">depthDelta</tt></p><p>&#33258;<span class="emphasis"><em>&#19978;&#27425;&#28040;&#24687;&#35745;&#25968;&#22120;&#26356;&#26032;</em></span>&#21518;&#34987;&#21152;&#20837;&#65295;&#21024;&#38500;&#30340;&#28040;&#24687;<span class="emphasis"><em>&#24635;&#25968;</em></span>&#12290;
                  &#20363;&#22914;&#65292;&#22914;&#26524;<tt class="literal">depthDelta</tt>&#26159;<tt class="literal">-10</tt>&#65292;&#23601;&#24847;&#35859;&#30528;&#26377;10&#20010;&#28040;&#24687;&#20174;
                  &#38431;&#21015;&#20013;&#21024;&#38500;&#20102;&#65288;&#26377;&#21487;&#33021;&#26159;2&#20010;&#28040;&#24687;&#21152;&#20837;&#20102;&#20294;&#26377;12&#20010;&#28040;&#24687;&#21024;&#38500;&#20102;&#65289;&#12290;</p></li><li><p><tt class="literal">lastAddTimestamp</tt></p><p>&#26368;&#21518;&#19968;&#20010;&#28040;&#24687;&#21152;&#20837;&#21040;&#38431;&#21015;&#30340;&#26102;&#38388;&#25139;&#12290;</p></li><li><p><tt class="literal">udpateTimestamp</tt></p><p>&#26368;&#21518;&#19968;&#27425;&#28040;&#24687;&#35745;&#25968;&#22120;&#26356;&#26032;&#30340;&#26102;&#38388;&#25139;&#12290;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="configuring.message.counters"></a>30.6.1.&nbsp;&#37197;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;</h3></div></div><div></div></div><p>&#40664;&#35748;&#30340;&#28040;&#24687;&#35745;&#25968;&#22120;&#26159;&#20851;&#38381;&#30340;&#65292;&#22240;&#20026;&#23427;&#38656;&#35201;&#21344;&#29992;&#19968;&#20123;&#20869;&#23384;&#12290;</p><p>&#35201;&#25171;&#24320;&#28040;&#24687;&#35745;&#25968;&#22120;&#65292;&#32534;&#36753;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#23558;&#20854;&#35774;&#20026;<tt class="literal">true</tt>&#65306;</p><pre class="programlisting">
&lt;message-counter-enabled&gt;true&lt;/message-counter-enabled&gt;
         </pre><p>&#28040;&#24687;&#35745;&#25968;&#22120;&#20250;&#20445;&#23384;&#38431;&#21015;&#30340;&#21382;&#21490;&#25968;&#25454;&#65288;&#40664;&#35748;&#26159;10&#22825;&#65289;&#12290;&#23427;&#20197;&#19968;&#23450;&#38388;&#38548;&#65288;&#40664;&#35748;10&#31186;&#19968;&#27425;&#65289;&#23545;&#27599;&#20010;&#38431;&#21015;&#36827;&#34892;&#25195;&#25551;&#12290;
            &#22914;&#26524;&#28040;&#24687;&#35745;&#25968;&#22120;&#25171;&#24320;&#65292;&#36825;&#20123;&#21442;&#25968;&#21487;&#20197;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#36827;&#34892;&#35843;&#25972;&#65306;</p><pre class="programlisting">
&lt;!-- keep history for a week --&gt;
&lt;message-counter-max-day-history&gt;7&lt;/message-counter-max-day-history&gt;            
&lt;!-- sample the queues every minute (60000ms) --&gt;
&lt;message-counter-sample-period&gt;60000&lt;/message-counter-sample-period&gt;
         </pre><p>&#20351;&#29992;&#31649;&#29702;&#25509;&#21475;&#21487;&#20197;&#33719;&#24471;&#28040;&#24687;&#35745;&#25968;&#22120;&#12290;&#20363;&#22914;&#35201;&#20351;&#29992;JMX&#24471;&#21040;&#19968;&#20010;JMS&#38431;&#21015;&#30340;&#28040;&#24687;&#35745;&#25968;&#22120;&#65306;</p><pre class="programlisting">
// retrieve a connection to HornetQ's MBeanServer
MBeanServerConnection mbsc = ...
JMSQueueControlMBean queueControl = (JMSQueueControl)MBeanServerInvocationHandler.newProxyInstance(mbsc,
   on,
   JMSQueueControl.class,
   false);
// message counters are retrieved as a JSON String                                                                                                      
String counters = queueControl.listMessageCounter();
// use the MessageCounterInfo helper class to manipulate message counters more easily
MessageCounterInfo messageCounter = MessageCounterInfo.fromJSON(counters);         
System.out.format("%s message(s) in the queue (since last sample: %s)\n",
   counter.getDepth(),
   counter.getDepthDelta());
         </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6495"></a>30.6.2.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.message-counters" title="11.1.27.&nbsp;&#28040;&#24687;&#35745;&#25968;&#22120;">Section&nbsp;11.1.27, &#8220;&#28040;&#24687;&#35745;&#25968;&#22120;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#20351;&#29992;&#28040;&#24687;&#35745;&#25968;&#22120;&#26469;&#33719;&#24471;&#19968;&#20010;JMS&#38431;&#21015;&#30340;&#30456;&#20851;&#25968;&#25454;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6502"></a>30.7.&nbsp;&#36890;&#36807;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;Admin Console&#26469;&#31649;&#29702;HornetQ&#30340;&#36164;&#28304;</h2></div></div><div></div></div><p>&#36890;&#36807;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;Admin Console&#21487;&#20197;&#21019;&#24314;&#19982;&#37197;&#32622;HornetQ&#30340;&#21508;&#31181;&#36164;&#28304;&#12290;</p><p>Admin Console&#20801;&#35768;&#20320;&#21019;&#24314;&#21508;&#31181;&#30446;&#26631;&#65288;JMS&#35805;&#39064;&#19982;&#38431;&#21015;&#65289;&#21644;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#12290;</p><p>&#30331;&#24405;admin console&#21518;&#20320;&#22312;&#24038;&#36793;&#30340;&#26641;&#20013;&#20250;&#30475;&#21040;JMS Manager&#33410;&#28857;&#12290;&#25152;&#26377;HornetQ&#30340;&#36164;&#28304;&#37117;&#23646;&#20110;&#36825;&#20010;&#33410;&#28857;&#12290;&#22312;&#23427;&#30340;&#19979;&#38754;&#26377;JMS Queues&#12289;
         Topics&#20197;&#21450;Connection Factories&#12290;&#20998;&#21035;&#28857;&#20987;&#23427;&#20204;&#23558;&#20250;&#30475;&#21040;&#30456;&#24212;&#30340;&#36164;&#28304;&#12290;&#19979;&#38754;&#23558;&#35299;&#37322;&#22914;&#20309;&#21019;&#24314;&#24182;&#37197;&#32622;&#23427;&#20204;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6511"></a>30.7.1.&nbsp;JMS&#38431;&#21015;</h3></div></div><div></div></div><p>&#35201;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;JMS&#38431;&#21015;&#65292;&#28857;&#20987;JMS Queues&#23558;&#21015;&#20986;&#24403;&#21069;&#30340;&#38431;&#21015;&#12290;&#22312;&#21491;&#36793;&#30340;&#31383;&#21475;&#20013;&#26377;&#19968;&#20010;&#8220;add a new resource&#8220;&#25353;&#38062;&#65292;&#28857;&#20987;&#36825;&#20010;&#25353;&#38062;
            &#24182;&#36873;&#25321;&#40664;&#35748;&#65288;JMS &#38431;&#21015;&#65289;&#27169;&#26495;&#12290;&#28857;&#20987;&#8220;continue&#8220;&#12290;&#22635;&#20837;&#30456;&#24212;&#30340;&#38431;&#21015;&#21517;&#31216;&#19982;JNDI&#21517;&#31216;&#12290;&#20854;&#23427;&#30340;&#21442;&#25968;&#20540;&#37117;&#32473;&#20986;&#20102;&#21512;&#29702;&#30340;&#40664;&#35748;&#20540;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;
            &#19981;&#29992;&#25913;&#21160;&#23427;&#20204;&#12290;&#22312;&#24213;&#37096;&#21487;&#20197;&#37197;&#32622;&#23433;&#20840;&#35282;&#33394;&#65292;&#22914;&#26524;&#20320;&#19981;&#25552;&#20379;&#23558;&#20351;&#29992;&#40664;&#35748;&#30340;&#37197;&#32622;&#12290;&#24403;&#36825;&#20010;&#38431;&#21015;&#25104;&#21151;&#21019;&#24314;&#21518;&#36825;&#20123;&#37197;&#32622;&#23558;&#20250;&#26174;&#31034;&#20986;&#26469;&#12290;&#38500;&#20102;&#38431;&#21015;&#30340;&#21517;&#23383;
            &#21644;JNDI&#21517;&#23383;&#22806;&#65292;&#20854;&#23427;&#21442;&#25968;&#37117;&#21487;&#20197;&#22312;contiguration&#26631;&#31614;&#39029;&#19979;&#36827;&#34892;&#20462;&#25913;&#12290;&#19979;&#38754;&#23601;&#23545;&#23427;&#20204;&#20998;&#21035;&#35299;&#37322;&#12290;</p><p>&#28857;&#20987; configuration&#21518;&#20320;&#23558;&#30475;&#21040;&#22914;&#19979;&#26174;&#31034;&#65306;</p><p>
            </p><div align="center"><img src="images/console1.png" align="middle"></div><p>
        </p><p>name&#21644;JNDI name&#26159;&#19981;&#33021;&#25913;&#21464;&#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#23427;&#20204;&#65292;&#24517;&#39035;&#37325;&#26032;&#21019;&#24314;&#38431;&#21015;&#12290;&#20854;&#23427;&#36873;&#39033;&#26159;&#20851;&#20110;&#22320;&#22336;&#35774;&#32622;&#19982;&#23433;&#20840;&#35774;&#32622;&#12290;
         &#40664;&#35748;&#30340;&#22320;&#22336;&#35774;&#32622;&#26469;&#33258;&#20110;&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;&#12290;&#22914;&#26524;&#20320;&#36890;&#36807;console&#20462;&#25913;&#25110;&#21019;&#24314;&#19968;&#20010;&#38431;&#21015;&#65292;&#37027;&#20040;&#23601;&#20250;&#22686;&#21152;&#19968;&#26465;&#26032;&#30340;&#22320;&#22336;&#35774;&#32622;&#12290;&#26377;&#20851;
         &#22320;&#22336;&#35774;&#32622;&#30340;&#23436;&#25972;&#35828;&#26126;&#21442;&#35265;<a href="#queue-attributes.address-settings" title="25.3.&nbsp;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;">Section&nbsp;25.3, &#8220;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;&#8221;</a>&#12290;</p><p>&#35201;&#21024;&#38500;&#19968;&#20010;&#38431;&#21015;&#65292;&#21482;&#35201;&#28857;&#20987;&#38431;&#21015;&#21517;&#31216;&#26049;&#36793;&#30340;&#8220;delete&#8220;&#25353;&#38062;&#21363;&#21487;&#12290;&#19982;&#27492;&#38431;&#21015;&#30456;&#20851;&#30340;&#20219;&#20309;&#22320;&#22336;&#35774;&#32622;&#25110;&#23433;&#20840;&#35774;&#32622;&#20063;&#23558;&#34987;&#21024;&#38500;&#12290;</p><p>&#37197;&#32622;&#30340;&#26368;&#21518;&#19968;&#37096;&#20998;&#26159;&#23433;&#20840;&#35282;&#33394;&#12290;&#22914;&#26524;&#22312;&#21019;&#24314;&#26102;&#27809;&#26377;&#32473;&#20986;&#21017;&#40664;&#35748;&#30340;&#23433;&#20840;&#35774;&#32622;&#23558;&#20250;&#26174;&#31034;&#22312;&#23631;&#24149;&#19978;&#12290;&#22914;&#26524;&#23427;&#20204;&#34987;&#20462;&#25913;&#24182;&#26356;&#26032;&#21017;&#38431;&#21015;&#30340;&#23433;&#20840;&#35774;&#32622;
            &#23558;&#34987;&#26356;&#26032;&#12290;&#20851;&#20110;&#23433;&#20840;&#35774;&#32622;&#21442;&#35265;<a href="#security" title="Chapter&nbsp;31.&nbsp;&#23433;&#20840;">Chapter&nbsp;31, <i>&#23433;&#20840;</i></a>&#12290; </p><p>&#22312;console&#20013;&#36824;&#26377;&#19968;&#20010;metrics&#26631;&#31614;&#39029;&#65292;&#23427;&#26174;&#31034;&#20102;&#38431;&#21015;&#30340;&#21508;&#39033;&#32479;&#35745;&#25968;&#25454;&#65292;&#22914;&#28040;&#24687;&#35745;&#25968;&#65292;&#25509;&#25910;&#32773;&#35745;&#25968;&#31561;&#12290;</p><p>&#22312;control&#26631;&#31614;&#39029;&#20013;&#21487;&#20197;&#23545;&#38431;&#21015;&#36827;&#34892;&#21508;&#31181;&#25805;&#20316;&#65292;&#27604;&#22914;&#21551;&#21160;&#21644;&#20572;&#27490;&#38431;&#21015;&#65292;&#23545;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;&#36827;&#34892;&#21015;&#34920;&#65292;&#31227;&#21160;&#65292;&#21464;&#20026;&#36807;&#26399;&#65292;&#21024;&#38500;&#31561;&#12290;
         &#35201;&#36827;&#34892;&#19968;&#39033;&#25805;&#20316;&#21482;&#35201;&#28857;&#20987;&#30456;&#24212;&#30340;&#25353;&#38062;&#65292;&#28982;&#21518;&#22312;&#20986;&#29616;&#30340;&#25552;&#31034;&#20013;&#36755;&#20837;&#30456;&#24212;&#30340;&#21442;&#25968;&#65292;&#20877;&#28857;&#20987;ok&#25353;&#38062;&#21363;&#21487;&#12290;&#25805;&#20316;&#30340;&#32080;&#26524;&#20250;&#26174;&#31034;&#22312;&#23631;&#24149;&#30340;&#24213;&#37096;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6536"></a>30.7.2.&nbsp;JMS&#35805;&#39064;</h3></div></div><div></div></div><p>&#21019;&#24314;&#21450;&#37197;&#32622;JMS&#35805;&#39064;&#20960;&#20046;&#19982;&#38431;&#21015;&#30340;&#25805;&#20316;&#26159;&#19968;&#26679;&#30340;&#12290;&#21807;&#19968;&#19981;&#21516;&#30340;&#26159;&#36825;&#20123;&#37197;&#32622;&#24212;&#29992;&#20110;&#19968;&#20010;&#20195;&#34920;&#35746;&#38405;&#30340;&#38431;&#21015;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6541"></a>30.7.3.&nbsp;JMS&#36830;&#25509;&#24037;&#21378;</h3></div></div><div></div></div><p>JMS&#36830;&#25509;&#24037;&#21378;&#30340;&#21019;&#24314;&#30340;&#25805;&#20316;&#36807;&#31243;&#19982;&#19978;&#36848;&#38431;&#21015;&#25110;&#35805;&#39064;&#30340;&#25805;&#20316;&#19968;&#33268;&#65292;&#21482;&#26159;&#37197;&#32622;&#20855;&#20307;&#30340;&#21442;&#25968;&#19981;&#21516;&#32780;&#24050;&#12290;&#20851;&#20110;&#36830;&#25509;&#24037;&#21378;&#30340;&#21442;&#25968;&#21442;&#35265;&#37197;&#32622;&#32034;&#24341;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="security"></a>Chapter&nbsp;31.&nbsp;&#23433;&#20840;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35762;&#36848;HornetQ&#30340;&#23433;&#20840;&#26426;&#21046;&#20197;&#21450;&#22914;&#20309;&#37197;&#32622;&#23427;&#12290;&#35201;&#23436;&#20840;&#20851;&#38381;&#23433;&#20840;&#65292;&#21482;&#35201;&#23558;<tt class="literal">hornetq-configuration.xml</tt>
        &#25991;&#20214;&#20013;&#30340;<tt class="literal">security-enabled</tt>&#21442;&#25968;&#35774;&#20026;false&#21363;&#21487;&#12290;</p><p>&#20986;&#20110;&#24615;&#33021;&#30340;&#32771;&#34385;&#65292;&#23433;&#20840;&#22312;HornetQ&#20013;&#34987;&#32531;&#23384;&#19968;&#23450;&#30340;&#26102;&#38388;&#12290;&#35201;&#25913;&#21464;&#36825;&#20010;&#26102;&#38388;&#65292;&#38656;&#35201;&#35774;&#32622;&#21442;&#25968;
        <tt class="literal">security-invalidation-interval</tt>&#65292;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;&#40664;&#35748;&#20540;&#26159;
        <tt class="literal">10000</tt>&#27627;&#31186;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="security.settings.roles"></a>31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;</h2></div></div><div></div></div><p>HornetQ&#37319;&#29992;&#20102;&#22522;&#20110;&#35282;&#33394;&#30340;&#23433;&#20840;&#27169;&#22411;&#26469;&#37197;&#32622;&#22320;&#22336;&#30340;&#23433;&#20840;&#20197;&#21450;&#20854;&#38431;&#21015;&#30340;&#23433;&#20840;&#12290;</p><p>&#27491;&#22914;&#22312;<a href="#using-core" title="Chapter&nbsp;8.&nbsp;&#20351;&#29992;HornetQ&#20869;&#26680;">Chapter&nbsp;8, <i>&#20351;&#29992;HornetQ&#20869;&#26680;</i></a>&#35299;&#37322;&#30340;&#37027;&#26679;&#65292;HornetQ&#26680;&#24515;&#20027;&#35201;&#30001;&#32465;&#23450;&#21040;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#32452;&#25104;&#12290;
            &#28040;&#24687;&#34987;&#21457;&#36865;&#21040;&#22320;&#22336;&#21518;&#65292;&#26381;&#21153;&#22120;&#26597;&#25214;&#19982;&#20043;&#32465;&#23450;&#30340;&#38431;&#21015;&#65292;&#24182;&#23558;&#28040;&#24687;&#36335;&#30001;&#21040;&#36825;&#20123;&#38431;&#21015;&#20013;&#12290;</p><p>HornetQ&#21487;&#20197;&#22522;&#20110;&#22320;&#22336;&#26469;&#32473;&#38431;&#21015;&#23450;&#20041;&#26435;&#38480;&#12290;&#22312;&#23450;&#20041;&#26435;&#38480;&#26102;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;'<tt class="literal">#</tt>'&#21644;
            '<tt class="literal">*</tt>'&#12290;</p><p>&#38431;&#21015;&#30340;&#26435;&#38480;&#26377;7&#31181;&#65292;&#23427;&#20204;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">createDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#30340;&#22320;&#22336;&#19978;&#21019;&#24314;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">deleteDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#30340;&#22320;&#22336;&#19978;&#21024;&#38500;&#30456;&#24212;&#30340;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">createNonDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#22320;&#22336;&#19978;&#21019;&#24314;&#38750;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">deleteNonDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#22320;&#22336;&#19978;&#21024;&#38500;&#38750;&#25345;&#20037;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">send</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#21521;&#30456;&#24212;&#22320;&#22336;&#21457;&#36865;&#28040;&#24687;&#12290;</p></li><li><p><tt class="literal">consume</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#20174;&#30456;&#24212;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#12290;</p></li><li><p><tt class="literal">manage</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#35843;&#29992;&#31649;&#29702;&#25805;&#20316;&#65292;&#21363;&#21521;&#31649;&#29702;&#22320;&#22336;&#21457;&#20851;&#31649;&#29702;&#28040;&#24687;&#12290;</p></li></ul></div><p>&#27599;&#20010;&#26435;&#38480;&#26377;&#19968;&#20010;&#35282;&#33394;&#34920;&#12290;&#22914;&#26524;&#29992;&#25143;&#30340;&#35282;&#33394;&#22312;&#36825;&#20010;&#34920;&#20013;&#65292;&#37027;&#20040;&#23427;&#23558;&#25317;&#26377;&#36825;&#20010;&#26435;&#38480;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#12290;&#19979;&#38754;&#26159;&#20174;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#25110;
              <tt class="literal">hornetq-queues.xml</tt>&#25991;&#20214;&#20013;&#25552;&#21462;&#30340;&#23433;&#20840;&#35774;&#32622;&#65306;</p><pre class="programlisting">
&lt;security-setting match="globalqueues.europe.#"&gt;
    &lt;permission type="createDurableQueue" roles="admin"/&gt;
    &lt;permission type="deleteDurableQueue" roles="admin"/&gt;
    &lt;permission type="createNonDurableQueue" roles="admin, guest, europe-users"/&gt;
    &lt;permission type="deleteNonDurableQueue" roles="admin, guest, europe-users"/&gt;
    &lt;permission type="send" roles="admin, europe-users"/&gt;
    &lt;permission type="consume" roles="admin, europe-users"/&gt;
&lt;/security-setting&gt;            
        </pre><p>&#22312;&#37197;&#32622;&#20013;&#23383;&#31526;'<tt class="literal">#</tt>'&#20195;&#34920;"&#20219;&#20309;&#21333;&#35789;&#24207;&#21015;&#8220;&#12290;&#21333;&#35789;&#30001;'<tt class="literal">.</tt>'&#23383;&#31526;&#20998;&#38548;&#12290;
            &#26377;&#20851;&#36890;&#37197;&#31526;&#30340;&#35821;&#27861;&#30340;&#23436;&#25972;&#35828;&#26126;&#35831;&#21442;&#35265;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#12290;&#19978;&#38754;&#30340;&#23433;&#20840;&#37197;&#32622;&#23545;&#20197;
            "globalqueues.europe."&#24320;&#22987;&#30340;&#22320;&#22336;&#26377;&#25928;&#65306;</p><p>&#21482;&#26377;&#20855;&#26377;<tt class="literal">admin</tt>&#35282;&#33394;&#30340;&#29992;&#25143;&#25165;&#21487;&#20197;&#21019;&#24314;&#21644;&#21024;&#38500;&#32465;&#23450;&#21040;&#20197;"globalqueues.europe."&#24320;&#22987;&#30340;&#22320;&#22336;&#30340;&#25345;&#20037;&#21270;&#38431;&#21015;&#12290;</p><p>&#20855;&#26377;<tt class="literal">admin</tt>&#12289;<tt class="literal">guest</tt>&#25110;<tt class="literal">europe-users</tt>
              &#35282;&#33394;&#30340;&#29992;&#25143;&#21487;&#20197;&#22312;&#20197;&#24320;&#22836;&#30340;&#22320;&#22336;&#19978;&#21019;&#24314;&#20020;&#26102;&#30340;&#38431;&#21015;&#12290;</p><p>&#20219;&#20309;&#20855;&#26377;<tt class="literal">admin</tt>&#25110;<tt class="literal">europe-users</tt>&#35282;&#33394;&#30340;&#29992;&#25143;&#21487;&#20197;&#21521;&#20197;"globalqueues.europe."&#24320;&#22836;&#30340;&#22320;&#22336;
            &#21457;&#36865;&#28040;&#24687;&#65292;&#24182;&#20174;&#32465;&#23450;&#21040;&#30456;&#21516;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#12290;</p><p>&#23433;&#20840;&#31649;&#29702;&#22120;&#22788;&#29702;&#19968;&#20010;&#29992;&#25143;&#21644;&#23427;&#30340;&#35282;&#33394;&#30340;&#23545;&#24212;&#20851;&#31995;&#12290;HornetQ&#26412;&#36523;&#33258;&#24102;&#19968;&#20010;&#29992;&#25143;&#31649;&#29702;&#22120;&#65292;&#33021;&#20174;&#25991;&#20214;&#20013;&#35835;&#21462;&#29992;&#25143;&#30340;&#36523;&#20221;&#20449;&#24687;&#12290;
            &#21478;&#22806;HornetQ&#36824;&#21487;&#20197;&#20351;&#29992;JAAS&#25110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#23433;&#20840;&#31649;&#29702;&#26426;&#21046;&#12290;</p><p>&#26377;&#20851;&#23433;&#20840;&#31649;&#29702;&#22120;&#30340;&#37197;&#32622;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;<a href="#change-security-manager" title="31.4.&nbsp;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;">Section&nbsp;31.4, &#8220;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;&#8221;</a>&#12290;</p><p>&#22312;&#27599;&#20010;xml&#25991;&#20214;&#20013;&#21487;&#20197;&#26377;&#38646;&#20010;&#25110;&#22810;&#20010; <tt class="literal">security-setting</tt>&#12290;&#24403;&#19968;&#32452;&#22320;&#22336;&#26377;&#22810;&#20010;&#36825;&#26679;&#30340;&#35774;&#32622;&#26102;&#65292;
              HornetQ&#24635;&#26159;&#36873;&#21462;<span class="emphasis"><em>&#26356;&#20855;&#20307;&#30340;</em></span>&#21305;&#37197;&#12290;</p><p>&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#23454;&#20363;&#65292;&#19979;&#38754;&#26159;&#21478;&#19968;&#20010;<tt class="literal">security-setting</tt>&#65306;</p><pre class="programlisting">
&lt;security-setting match="globalqueues.europe.orders.#"&gt;
    &lt;permission type="send" roles="europe-users"/&gt;
    &lt;permission type="consume" roles="europe-users"/&gt;
&lt;/security-setting&gt;            
        </pre><p>&#22312;&#36825;&#20010;<tt class="literal">security-setting</tt>&#22359;&#20013;&#65292;&#23383;&#31526;&#20018;
            'globalqueues.europe.orders.#' &#35201;&#27604;&#23427;&#20043;&#21069;&#30340;&#23383;&#31526;&#20018;'globalqueues.europe.#'&#26356;&#20855;&#20307;&#12290;
            &#22240;&#27492;&#24403;&#19968;&#20010;&#22320;&#22336;&#19982;'globalqueues.europe.orders.#'&#21305;&#37197;&#26102;&#65292;&#23427;<span class="emphasis"><em>&#21482;</em></span>&#36873;&#25321;&#36825;&#20010;&#23433;&#20840;&#37197;&#32622;&#12290;</p><p>&#27880;&#24847;&#23433;&#20840;&#35774;&#32622;&#27809;&#26377;&#32487;&#25215;&#24615;&#12290;&#23545;&#20110;&#20687;'globalqueues.europe.orders.plastics'&#30340;&#22320;&#22336;&#65292;&#21482;&#35201;&#19978;&#38754;&#30340;&#35774;&#32622;
            &#33021;&#34987;&#37319;&#29992;&#12290;&#21363;&#35282;&#33394;europe-users&#26377;<tt class="literal">send</tt>&#21644;<tt class="literal">consume</tt>&#26435;&#38480;&#12290;&#26435;&#38480;
            <tt class="literal">createDurableQueue</tt>&#12289; <tt class="literal">deleteDurableQueue</tt>&#12289;<tt class="literal">createNonDurableQueue</tt>&#12289;<tt class="literal">deleteNonDurableQueue</tt>&#19981;&#20250;&#20174;&#20808;&#21069;&#30340;&#35774;&#32622;&#20013;&#32487;&#25215;&#12290;</p><p>&#30001;&#20110;&#26435;&#38480;&#30340;&#19981;&#21487;&#32487;&#25215;&#65292;&#22914;&#26524;&#25105;&#20204;&#19981;&#22312;&#26356;&#20855;&#20307;&#30340;security-setting&#35774;&#32622;&#20013;&#32473;&#20986;&#19968;&#20010;&#26435;&#38480;&#65292;&#36825;&#20010;&#26435;&#38480;&#23601;&#26159;&#27809;&#26377;&#30340;&#65292;&#19981;&#20250;&#22240;&#20026;&#32487;&#25215;&#32780;&#24102;&#26469;
            &#40635;&#28902;&#12290;&#21542;&#21017;&#23601;&#19981;&#21487;&#33021;&#23545;&#19968;&#32452;&#22320;&#22336;&#20013;&#30340;&#37096;&#20998;&#22320;&#22336;&#36827;&#34892;&#22914;&#27492;&#30340;&#35774;&#32622;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6734"></a>31.2.&nbsp;&#23433;&#20840;&#22871;&#25509;&#23383;&#23618;(SSL)&#20256;&#36755;</h2></div></div><div></div></div><p>&#24403;&#28040;&#24687;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#31471;&#65292;&#25110;&#26381;&#21153;&#22120;&#20043;&#38388;&#65288;&#27604;&#22914;&#20351;&#29992;&#26725;&#30340;&#24773;&#20917;&#65289;&#36890;&#36807;&#19968;&#20010;&#19981;&#20449;&#20219;&#30340;&#32593;&#32476;&#30456;&#20114;&#36890;&#20449;&#26102;&#65292;HornetQ
            &#25903;&#25345;&#20351;&#29992;&#21152;&#23494;&#30340;&#23433;&#20840;&#22871;&#25509;&#23383;&#65288;SSL&#65289;&#20256;&#36755;&#25968;&#25454;&#12290;</p><p>&#20851;&#20110;SSL&#30340;&#35814;&#32454;&#37197;&#32622;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6743"></a>31.3.&nbsp;&#22522;&#26412;&#29992;&#25143;&#36523;&#20221;&#20449;&#24687;&#65288;Credentials&#65289;</h2></div></div><div></div></div><p>HornetQ&#33258;&#24102;&#19968;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#65288;security manager&#65289;&#21487;&#20197;&#20174;xml&#25991;&#20214;&#20013;&#35835;&#21462;&#29992;&#25143;&#36523;&#20221;&#20449;&#24687;&#65292;&#21363;&#29992;&#25143;&#21517;&#12289;
            &#23494;&#30721;&#12289;&#35282;&#33394;&#20449;&#24687;&#12290;&#35813;xml&#25991;&#20214;&#21517;&#20026;<tt class="literal">hornetq-users.xml</tt>&#65292;&#23427;&#24517;&#39035;&#35201;&#22312;classpath&#20013;&#12290;</p><p>&#22914;&#26524;&#20320;&#35201;&#20351;&#29992;&#36825;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#23601;&#23558;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#65292;&#35282;&#33394;&#31561;&#20449;&#24687;&#21152;&#20837;&#21040;&#36825;&#20010;&#25991;&#20214;&#20013;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;configuration xmlns="urn:hornetq" 
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:hornetq ../schemas/hornetq-users.xsd "&gt;
    
    &lt;defaultuser name="guest" password="guest"&gt;
        &lt;role name="guest"/&gt;
    &lt;/defaultuser&gt;
    
    &lt;user name="tim" password="marmite"&gt;
        &lt;role name="admin"/&gt;      
    &lt;/user&gt;
    
    &lt;user name="andy" password="doner_kebab"&gt;
        &lt;role name="admin"/&gt;
        &lt;role name="guest"/&gt;
    &lt;/user&gt;
    
    &lt;user name="jeff" password="camembert"&gt;
        &lt;role name="europe-users"/&gt;
        &lt;role name="guest"/&gt;
    &lt;/user&gt;
    
&lt;/configuration&gt;
        </pre><p>&#39318;&#20808;&#35201;&#27880;&#24847;&#30340;&#26159;<tt class="literal">defaultuser</tt>&#65292;&#23427;&#23450;&#20041;&#30340;&#26159;&#40664;&#35748;&#30340;&#29992;&#25143;&#12290;&#24403;&#23458;&#25143;&#31471;&#21019;&#24314;&#20250;&#35805;&#26102;
            &#27809;&#26377;&#25552;&#20379;&#29992;&#25143;&#21517;&#65295;&#23494;&#30721;&#26102;&#65292;&#23601;&#20250;&#20351;&#29992;&#36825;&#20010;&#29992;&#25143;&#12290;&#26681;&#25454;&#19978;&#36848;&#37197;&#32622;&#65292;&#36825;&#20010;&#40664;&#35748;&#29992;&#25143;&#26159;<tt class="literal">guest</tt>
            &#24182;&#19988;&#20182;&#30340;&#35282;&#33394;&#26159;<tt class="literal">guest</tt>&#12290;&#19968;&#20010;&#40664;&#35748;&#29992;&#25143;&#21487;&#20197;&#26377;&#22810;&#20010;&#35282;&#33394;&#12290;</p><p>&#21478;&#22806;&#19977;&#20010;&#29992;&#25143;&#20013;&#65292;&#29992;&#25143;<tt class="literal">tim</tt>&#20855;&#26377;&#35282;&#33394;<tt class="literal">admin</tt>&#12290;&#29992;&#25143;<tt class="literal">andy</tt>&#20855;&#26377;&#35282;&#33394;<tt class="literal">admin</tt>&#21644;<tt class="literal">guest</tt>&#65292;&#29992;&#25143;<tt class="literal">jeff</tt>
             &#20855;&#26377;&#35282;&#33394;<tt class="literal">europe-users</tt>&#21644;<tt class="literal">guest</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="change-security-manager"></a>31.4.&nbsp;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#29992;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21487;&#20197;&#36890;&#36807;&#20462;&#25913;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-beans.xml</tt>
            &#65288;&#25110;&#32773;&#22312;&#36816;&#34892;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#24773;&#20917;&#19979;<tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#65289;&#26469;&#26356;&#25442;&#12290;&#21516;&#26102;&#35201;&#26356;&#25442;
            <tt class="literal">HornetQSecurityManager</tt> bean &#30340;&#31867;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#27573;&#40664;&#35748;bean&#25991;&#20214;&#30340;&#20869;&#23481;&#65306;</p><pre class="programlisting">           
&lt;bean name="HornetQSecurityManager" 
      class="org.hornetq.spi.core.security.HornetQSecurityManagerImpl"&gt;
    &lt;start ignored="true"/&gt;
    &lt;stop ignored="true"/&gt;
&lt;/bean&gt;            
        </pre><p><tt class="literal">org.hornetq.spi.core.security.HornetQSecurityManagerImpl</tt>
            &#31867;&#23601;&#26159;HornetQ&#26381;&#21153;&#22120;&#30340;&#22312;&#29420;&#31435;&#36816;&#34892;&#26102;&#30340;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;</p><p>HornetQ&#33258;&#24102;&#26377;&#21478;&#22806;&#20004;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#21487;&#20379;&#20351;&#29992;&#12290;&#19968;&#20010;&#26159;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21478;&#19968;&#20010;&#26159;&#29992;&#26469;&#19982;JBoss&#24212;&#29992;&#26381;&#21153;
            &#22120;&#38598;&#25104;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#27492;&#22806;&#65292;&#20320;&#36824;&#21487;&#20197;&#32534;&#20889;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#39318;&#20808;&#35201;&#23454;&#29616;
            <tt class="literal">org.hornetq.core.security.SecurityManager</tt>&#25509;&#21475;&#65292;&#20877;&#23558;&#20320;&#30340;&#23454;&#29616;
            &#31867;&#23450;&#20041;&#21040;<tt class="literal">hornetq-beans.xml</tt>&#25991;&#20214;&#20013;&#21363;&#21487;&#65288;&#25110;&#32773;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;
            &#20351;&#29992;<tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#65289;&#12290;</p><p>&#20197;&#19979;&#20998;&#21035;&#20171;&#32461;&#36825;&#20004;&#21681;&#23433;&#20840;&#31649;&#29702;&#22120;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6829"></a>31.5.&nbsp;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>JAAS&#34920;&#31034;&#8220;Java&#35748;&#35777;&#19982;&#25480;&#26435;&#26381;&#21153;&#8220;&#12290;&#23427;&#26159;Java&#24179;&#21488;&#26631;&#20934;&#30340;&#19968;&#37096;&#20998;&#12290;&#23427;&#25552;&#20379;&#20102;&#36827;&#34892;&#23433;&#20840;&#35748;&#35777;&#19982;&#25480;&#26435;&#30340;&#36890;&#29992;&#25509;&#21475;&#12290;
            &#23427;&#20801;&#35768;&#20320;&#25554;&#20837;&#33258;&#24049;&#30340;&#23433;&#20840;&#31649;&#29702;&#27169;&#22359;&#12290;</p><p>&#35201;&#37197;&#32622;&#20351;&#29992;&#20320;&#33258;&#24049;&#30340;JAAS&#23433;&#20840;&#23454;&#29616;&#65292;&#38656;&#35201;&#22312;bean&#25991;&#20214;&#20013;&#23450;&#20041;<tt class="literal">JAASSecurityManager</tt>&#12290;
            &#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
&amp;lt;bean name="HornetQSecurityManager"
      class="org.hornetq.integration.jboss.security.JAASSecurityManager"&amp;gt;
    &amp;lt;start ignored="true"/&amp;gt;
    &amp;lt;stop ignored="true"/&amp;gt;

    &amp;lt;property name="ConfigurationName"&amp;gt;org.hornetq.jms.example.ExampleLoginModule&amp;lt;/property&amp;gt;
    &amp;lt;property name="Configuration"&amp;gt;
       &amp;lt;inject bean="ExampleConfiguration"/&amp;gt;
    &amp;lt;/property&amp;gt;
    &amp;lt;property name="CallbackHandler"&amp;gt;
       &amp;lt;inject bean="ExampleCallbackHandler"/&amp;gt;
    &amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;
        </pre><p>&#27880;&#24847;&#20320;&#38656;&#35201;&#20026;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;&#25552;&#20379;&#19977;&#20010;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>ConfigurationName: <tt class="literal">LoginModule</tt>&#30340;&#21517;&#23383;&#12290;</p></li><li><p>Configuration: <tt class="literal">Configuration</tt>&#30340;&#23454;&#29616;&#12290;</p></li><li><p>CallbackHandler: <tt class="literal">CallbackHandler</tt>&#23454;&#29616;&#65292;&#29992;&#20110;&#29992;&#25143;&#20132;&#20114;&#12290;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6862"></a>31.5.1.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.jaas" title="11.1.19.&nbsp;JAAS">Section&nbsp;11.1.19, &#8220;JAAS&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#24590;&#26679;&#22312;HornetQ&#20013;&#37197;&#32622;&#20351;&#29992;JAAS&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6869"></a>31.6.&nbsp;JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#23433;&#20840;&#31649;&#29702;&#22120;&#36866;&#29992;&#20110;&#24403;HornetQ&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#26102;&#12290;&#23427;&#21487;&#20197;&#19982;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;
            &#30340;&#23433;&#20840;&#27169;&#22411;&#32039;&#23494;&#38598;&#25104;&#12290;</p><p>&#27492;&#23433;&#20840;&#31649;&#29702;&#22120;&#30340;&#31867;&#26159; <tt class="literal">org.hornetq.integration.jboss.security.JBossASSecurityManager</tt>&#12290;</p><p>&#35201;&#20102;&#35299;&#22914;&#20309;&#37197;&#32622;JBoss&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21487;&#20197;&#30475;&#19968;&#30524;HornetQ&#21457;&#24067;&#21253;&#20013;&#30456;&#20851;&#20363;&#23376;&#20013;&#30340;
            <tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6884"></a>31.6.1.&nbsp;&#37197;&#32622;&#23458;&#25143;&#31471;&#30331;&#24405;</h3></div></div><div></div></div><p>JBoss&#21487;&#20197;&#37197;&#32622;&#20351;&#29992;&#23458;&#25143;&#30331;&#24405;&#12290;JEE&#30340;&#27169;&#22359;&#22914;servlet&#25110;EJB&#21487;&#20197;&#23558;&#23433;&#20840;&#35748;&#35777;&#20449;&#24687;&#35774;&#32622;&#21040;&#23433;&#20840;&#19978;&#19979;&#25991;&#65288;security context&#65289;&#20013;&#65292;
             &#29992;&#20110;&#25972;&#20010;&#35843;&#29992;&#36807;&#31243;&#12290;&#22914;&#26524;&#24819;&#22312;HornetQ&#22312;&#21457;&#36865;&#21644;&#25509;&#25910;&#28040;&#24687;&#26102;&#20351;&#29992;&#36825;&#20123;&#35748;&#35777;&#65288;credential&#65289;&#20449;&#24687;&#65292;&#38656;&#35201;&#23558;&#21442;&#25968;
             <tt class="literal">allowClientLogin</tt>&#35774;&#20026;true&#12290;&#23427;&#20250;&#36234;&#36807;HornetQ&#30340;&#36523;&#20221;&#39564;&#35777;&#36807;&#31243;&#24182;&#20250;&#20256;&#25773;&#23433;&#20840;&#19978;&#19979;&#25991;&#65288;security
             context&#65289;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;HornetQ&#20351;&#29992;&#20256;&#25773;&#30340;&#23433;&#20840;&#20449;&#24687;&#36827;&#34892;&#36523;&#20221;&#39564;&#35777;&#65292;&#38656;&#35201;&#21516;&#26102;&#23558;&#21442;&#25968;<tt class="literal">authoriseOnClientLogin</tt>
             &#35774;&#20026;true&#12290;</p><p>&#20851;&#20110;&#23458;&#25143;&#31471;&#30331;&#24405;&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#35775;&#38382;<a href="http://community.jboss.org/wiki/ClientLoginModule" target="_top">&#36825;&#37324;</a>&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#28040;&#24687;&#26159;&#20197;&#38750;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#30340;&#65292;&#37027;&#20040;&#26377;&#21487;&#33021;&#22312;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#26102;&#65292;&#35843;&#29992;&#32447;&#31243;&#24050;&#32463;&#32467;&#26463;&#65292;&#23433;&#20840;&#19978;&#19979;&#25991;&#20063;&#34987;&#28165;&#38500;&#20102;&#12290;
          &#25152;&#20197;&#22914;&#26524;&#20351;&#29992;&#23433;&#20840;&#19978;&#19979;&#25991;&#65292;&#38656;&#35201;&#37319;&#29992;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#28040;&#24687;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6903"></a>31.7.&nbsp;&#38598;&#32676;&#29992;&#25143;&#21517;&#65295;&#23494;&#30721;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#20026;&#20102;&#20351;&#38598;&#32676;&#36830;&#25509;&#27491;&#24120;&#24037;&#20316;&#65292;&#27599;&#20010;&#33410;&#28857;&#37117;&#24517;&#39035;&#19982;&#20854;&#23427;&#33410;&#28857;&#30456;&#36830;&#25509;&#12290;&#23427;&#20204;&#36830;&#25509;&#25152;&#20351;&#29992;&#30340;&#40664;&#35748;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#22312;&#27491;&#24335;&#20351;&#29992;&#26102;
            &#19968;&#23450;&#35201;&#20570;&#30456;&#24212;&#30340;&#26356;&#25913;&#65292;&#20197;&#38450;&#27490;&#23433;&#20840;&#38544;&#24739;&#12290;</p><p>&#35831;&#21442;&#35265;<a href="#management" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;">Chapter&nbsp;30, <i>&#31649;&#29702;</i></a>&#20102;&#35299;&#24590;&#26679;&#21435;&#20570;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="appserver-integration"></a>Chapter&nbsp;32.&nbsp;Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;</h2></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#23481;&#26131;&#22320;&#23433;&#35013;&#21040;JBoss 4&#24212;&#29992;&#26381;&#21153;&#22120;&#21450;&#20854;&#20197;&#19978;&#29256;&#26412;&#12290;&#26377;&#20851;&#23433;&#35013;&#30340;&#35814;&#32454;&#35828;&#26126;&#35831;&#21442;&#38405;&#24555;&#36895;&#25351;&#21335;&#12290;</p><p>HornetQ&#25552;&#20379;&#20102;&#19968;&#20010;JCA&#36866;&#37197;&#22120;&#65292;&#20351;&#24471;&#23427;&#36824;&#21487;&#20197;&#19982;&#20854;&#23427;JEE&#20860;&#23481;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;&#12290;&#35831;&#21442;&#38405;&#20854;&#23427;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;
          &#26377;&#20851;JCA&#36866;&#37197;&#22120;&#38598;&#25104;&#30340;&#35828;&#26126;&#26469;&#25805;&#20316;&#12290;</p><p>JCA&#36866;&#37197;&#22120;&#30340;&#20316;&#29992;&#26159;&#25511;&#21046;&#28040;&#24687;&#27969;&#20837;&#21040;&#28040;&#24687;Bean&#65288;MDB&#65289;&#65292;&#24182;&#25511;&#21046;&#28040;&#24687;&#20174;&#21508;&#31181;JEE&#27169;&#22359;&#20013;&#21457;&#20986;&#65288;&#22914;EJB&#21644;Servlet&#65289;&#12290;</p><p>&#26412;&#31456;&#35762;&#36848;&#36825;&#20123;JEE&#27169;&#22359;&#37197;&#32622;HornetQ&#30340;&#22522;&#26412;&#20449;&#24687;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6940"></a>32.1.&nbsp;&#37197;&#32622;&#28040;&#24687;Bean</h2></div></div><div></div></div><p>&#20351;&#29992;HornetQ&#21521;MDB&#20256;&#36882;&#28040;&#24687;&#65292;&#38656;&#35201;&#22312;&#25991;&#20214;<tt class="literal">ra.xml</tt>&#20013;&#37197;&#32622;JCA&#36866;&#37197;&#22120;&#12290;&#35813;&#25991;&#20214;&#22312;
            <tt class="literal">jms-ra.rar</tt>&#25991;&#20214;&#20013;&#12290;&#40664;&#35748;&#37197;&#32622;&#19979;HornetQ&#26381;&#21153;&#20351;&#29992;InVm&#36830;&#25509;&#22120;&#25509;&#25910;&#28040;&#24687;&#12290;&#22312;&#26412;&#31456;
            &#21518;&#38754;&#21015;&#20986;&#20102;&#21487;&#37197;&#32622;&#30340;&#36873;&#39033;&#12290;</p><p>&#25152;&#26377;MDB&#37117;&#38656;&#35201;&#26377;&#30446;&#26631;&#31867;&#22411;&#21644;&#30446;&#26631;&#30340;&#30456;&#20851;&#37197;&#32622;&#12290;&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#20351;&#29992;annotation&#37197;&#32622;MDB&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDBExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue")
                     })
@ResourceAdapter("hornetq-ra.rar")
public class MDBExample implements MessageListener
{
   public void onMessage(Message message)...
}</pre><p>&#19978;&#20363;&#20013;&#37197;&#32622;&#20102;MDB&#20174;&#19968;&#20010;&#38431;&#21015;&#20013;&#25509;&#25910;&#28040;&#24687;&#65292;&#23427;&#30340;JNDI&#32465;&#23450;&#21517;&#20026;<tt class="literal">queue/testQueue</tt>&#12290;
            &#36825;&#20010;&#38431;&#21015;&#24517;&#39035;&#20107;&#20808;&#22312;HornetQ&#26381;&#21153;&#22120;&#37197;&#32622;&#25991;&#20214;&#20013;&#37197;&#32622;&#24182;&#37096;&#32626;&#22909;&#30340;&#12290;</p><p><tt class="literal">ResourceAdapter</tt> annotation&#29992;&#26469;&#25351;&#20986;&#20351;&#29992;&#21738;&#20010;&#36866;&#37197;&#22120;&#12290;&#35201;&#20351;&#29992;&#23427;&#24517;&#39035;&#35201;&#24341;&#20837;
            <tt class="literal">org.jboss.ejb3.annotation.ResourceAdapter</tt> &#65288;JBoss AS 5.x&#25110;&#20197;&#19978;&#65289;&#12290;
            &#36825;&#20010;&#31867;&#22312;
            <tt class="literal">jboss-ejb3-ext-api.jar</tt>&#25991;&#20214;&#20013;&#12290;&#35813;&#25991;&#20214;&#21487;&#20197;&#22312;JBoss&#30340;repository&#20013;&#25214;&#21040;&#12290;
            &#21478;&#22806;&#19968;&#20010;&#26041;&#27861;&#26159;&#20351;&#29992;&#37096;&#32626;&#25551;&#36848;&#25991;&#20214;&#65288;deployment descriptor&#65289;&#65292;&#21363;&#22312;&#25991;&#20214;<tt class="literal">jboss.xml</tt>&#20013;&#21152;&#20837;&#31867;&#20284;&#20197;&#19979;&#30340;&#20869;&#23481;&#65306;
</p><pre class="programlisting">&lt;message-driven&gt;
   &lt;ejb-name&gt;ExampleMDB&lt;/ejb-name&gt;
   &lt;resource-adapter-name&gt;hornetq-ra.rar&lt;/resource-adapter-name&gt;
&lt;/message-driven&gt;
</pre><p>&#20320;&#36824;&#21487;&#20197;&#23558;hornetq-ra.rar&#25913;&#21517;&#20026;jms-ra.rar&#32780;&#19981;&#38656;&#35201;&#20219;&#20309;annotation&#25110;&#39069;&#22806;&#30340;&#37096;&#32626;&#25551;&#36848;&#20449;&#24687;&#12290;&#20294;&#26159;&#20320;&#38656;&#35201;
            &#32534;&#36753;<tt class="literal">jms-ds.xml</tt>&#25991;&#20214;&#65292;&#23558;&#20854;&#20013;&#30340;<tt class="literal">rar-name</tt>&#39033;&#25913;&#25104;&#30456;&#24212;&#30340;&#20540;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>HornetQ&#26159;JBoss AS 6&#40664;&#35748;&#30340;JMS&#25552;&#20379;&#32773;&#12290;&#20174;&#36825;&#20010;&#29256;&#26412;&#24320;&#22987;HornetQ&#30340;&#36164;&#28304;&#36866;&#37197;&#22120;&#21517;&#23383;&#26159;
               <tt class="literal">jms-ra.rar</tt>&#65292;&#24182;&#19988;&#20320;&#19981;&#38656;&#35201;&#22312;MDB&#30340;annotation&#20013;&#25351;&#23450;&#23427;&#12290;</p></div><p>HornetQ&#21457;&#24067;&#21253;&#20013;&#30340;&#25152;&#26377;&#20363;&#23376;&#37117;&#20351;&#29992;annotation&#26041;&#27861;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6990"></a>32.1.1.&nbsp;&#20351;&#29992;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;&#65288;CMT&#65289;</h3></div></div><div></div></div><p>&#24403;MDB&#20351;&#29992;&#23481;&#22120;&#31649;&#29702;&#20107;&#21153;&#26102;&#65292;&#28040;&#24687;&#30340;&#20256;&#36882;&#34987;&#21253;&#21547;&#22312;&#19968;&#20010;JTA&#20107;&#21153;&#20013;&#12290;&#20107;&#21153;&#30340;&#25552;&#20132;&#19982;&#22238;&#28378;&#26159;&#30001;&#23481;&#22120;&#26469;&#25511;&#21046;&#30340;&#12290;&#22914;&#26524;&#20107;&#21153;
                &#34987;&#22238;&#28378;&#65292;&#28040;&#24687;&#20256;&#36882;&#20250;&#36827;&#34892;&#30456;&#24212;&#30340;&#22788;&#29702;&#65288;&#40664;&#35748;&#26159;&#37325;&#26032;&#20256;&#36882;&#28040;&#24687;&#65292;&#22914;&#26524;&#37325;&#26032;&#20256;&#36882;&#27425;&#25968;&#36229;&#36807;10&#27425;&#65292;&#28040;&#24687;&#23601;&#34987;&#21457;&#24448;DLQ&#65289;&#12290;&#20351;&#29992;
                annotation&#37197;&#32622;&#22914;&#19979;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDB_CMP_TxRequiredExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue")
                     })
@TransactionManagement(value= TransactionManagementType.CONTAINER)
@TransactionAttribute(value= TransactionAttributeType.REQUIRED)
@ResourceAdapter("hornetq-ra.rar")
public class MDB_CMP_TxRequiredExample implements MessageListener
{
   public void onMessage(Message message)...
}</pre><p><tt class="literal">TransactionManagement</tt> &#34920;&#31034;&#36825;&#20010;MDB&#20351;&#29992;&#23481;&#22120;&#31649;&#29702;&#25345;&#20037;&#24615;&#12290;
                <tt class="literal">TransactionAttribute</tt> &#34920;&#31034;&#36825;&#20010;MDB&#35201;&#27714;JTA&#20107;&#21153;&#12290;&#27880;&#24847;&#36825;&#20010;annotation&#30340;
                &#21478;&#22806;&#21807;&#19968;&#30340;&#21512;&#27861;&#20540;&#26159;<tt class="literal">TransactionAttributeType.NOT_SUPPORTED</tt>&#65292;&#23427;&#34920;&#31034;
                MDB&#19981;&#38656;&#35201;JTA&#20107;&#21153;&#25903;&#25345;&#12290;</p><p>&#22914;&#26524;&#35201;&#22238;&#28378;&#20107;&#21153;&#65292;&#21487;&#20197;&#35843;&#29992;<tt class="literal">MessageDrivenContext</tt>&#30340;
                <tt class="literal">setRollbackOnly</tt>&#26041;&#27861;&#12290;&#22914;&#19979;&#38754;&#30340;&#20195;&#30721;&#25152;&#31034;&#65306;</p><pre class="programlisting">   @Resource
   MessageDrivenContextContext ctx;

   public void onMessage(Message message)
   {
      try
      {
         //something here fails
      }
      catch (Exception e)
      {
         ctx.setRollbackOnly();
      }
   }</pre><p>&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#20351;&#29992;XA&#20107;&#21153;&#65292;&#20320;&#21487;&#20197;&#29992;&#19968;&#30456;&#26412;&#22320;&#30340;&#20107;&#21153;&#26469;&#20195;&#26367;&#65288;&#27604;&#22914;&#20320;&#21482;&#26377;&#19968;&#20010;JMS&#36164;&#28304;&#65289;&#12290;
                &#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDB_CMP_TxLocalExample",
               activationConfig =
                     {
                           @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                           @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue"),
                           @ActivationConfigProperty(propertyName = "useLocalTx", propertyValue = "true")
                     })
@TransactionManagement(value = TransactionManagementType.CONTAINER)
@TransactionAttribute(value = TransactionAttributeType.NOT_SUPPORTED)
@ResourceAdapter("hornetq-ra.rar")
public class MDB_CMP_TxLocalExample implements MessageListener
{
   public void onMessage(Message message)...
}</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7021"></a>32.1.2.&nbsp;&#20351;&#29992;Bean&#31649;&#29702;&#20107;&#21153;&#65288;BMT&#65289;</h3></div></div><div></div></div><p>&#28040;&#24687;Bean&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#20351;&#29992;Bean&#31649;&#29702;&#30340;&#20107;&#21153;&#65288;BMT&#65289;&#12290;&#22312;&#31181;&#24773;&#20917;&#19979;&#20250;&#21019;&#24314;&#19968;&#20010;&#29992;&#25143;&#20107;&#21153;
                &#65288;User Transaction&#65289;&#12290;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDB_BMPExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue"),
                        @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Dups-ok-acknowledge")
                     })
@TransactionManagement(value= TransactionManagementType.BEAN)
@ResourceAdapter("hornetq-ra.rar")
public class MDB_BMPExample implements MessageListener
{
   public void onMessage(Message message)
}</pre><p>&#20351;&#29992;BMT&#26102;&#65292;&#28040;&#24687;&#30340;&#20256;&#36882;&#22312;&#29992;&#25143;&#20107;&#21153;&#30340;&#33539;&#22260;&#20043;&#22806;&#65292;&#23427;&#30340;&#36890;&#30693;&#27169;&#24335;&#30001;<tt class="literal">acknowledgeMode</tt>&#21442;&#25968;&#20915;&#23450;&#12290;
                &#35813;&#21442;&#25968;&#26377;&#20004;&#20010;&#21512;&#27861;&#30340;&#20540;&#65292;&#21363;<tt class="literal">Auto-acknowledge</tt>&#21644;<tt class="literal">Dups-ok-acknowledge</tt>&#12290;&#35831;&#27880;&#24847;&#65292;&#30001;&#20110;&#28040;&#24687;&#30340;&#20256;&#36882;&#22312;&#20107;&#21153;&#20043;&#22806;&#65292;&#22312;MDB&#20013;&#22914;&#26524;&#21457;&#29983;&#38169;&#35823;&#28040;&#24687;
                &#26159;&#19981;&#20250;&#37325;&#26032;&#20256;&#36882;&#30340;&#12290;</p><p>&#29992;&#25143;&#21487;&#20197;&#20687;&#22914;&#19979;&#25152;&#31034;&#25511;&#21046;&#20107;&#21153;&#30340;&#29983;&#21629;&#21608;&#26399;&#65306;</p><pre class="programlisting">   @Resource
   MessageDrivenContext ctx;

   public void onMessage(Message message)
   {
      UserTransaction tx;
      try
      {
         TextMessage textMessage = (TextMessage)message;

         String text = textMessage.getText();

         UserTransaction tx = ctx.getUserTransaction();

         tx.begin();
         
         //do some stuff within the transaction

         tx.commit();

      }
      catch (Exception e)
      {
         tx.rollback();
      }
   }</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7043"></a>32.1.3.&nbsp;&#22312;MDB&#20013;&#20351;&#29992;&#36873;&#25321;&#22120;</h3></div></div><div></div></div><p>MDB&#21487;&#20197;&#37197;&#32622;&#28040;&#24687;&#36873;&#25321;&#22120;&#12290;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDBMessageSelectorExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue"),
                        @ActivationConfigProperty(propertyName = "messageSelector", propertyValue = "color = 'RED'")
                     })
@TransactionManagement(value= TransactionManagementType.CONTAINER)
@TransactionAttribute(value= TransactionAttributeType.REQUIRED)
@ResourceAdapter("hornetq-ra.rar")
public class MDBMessageSelectorExample implements MessageListener
{
   public void onMessage(Message message)....
}</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7050"></a>32.2.&nbsp;&#22312;JEE&#27169;&#22359;&#20869;&#21457;&#36865;&#28040;&#24687;</h2></div></div><div></div></div><p>JCA&#36866;&#37197;&#22120;&#25903;&#25345;&#21457;&#36865;&#28040;&#24687;&#12290;&#36830;&#25509;&#24037;&#21378;&#30340;&#40664;&#35748;&#37197;&#32622;&#22312;<tt class="literal">jms-ds.xml</tt>&#25991;&#20214;&#20013;&#65292;&#23545;&#24212;&#30340;JNDI&#21517;&#23383;&#26159;
            <tt class="literal">java:/JmsXA</tt>&#12290;&#22312;JEE&#20013;&#20351;&#29992;&#23427;&#21457;&#36865;&#28040;&#24687;&#23558;&#20316;&#20026;JTA&#20107;&#21153;&#30340;&#19968;&#37096;&#20998;&#26469;&#23545;&#24453;&#12290;</p><p>&#22914;&#26524;&#28040;&#24687;&#21457;&#36865;&#22833;&#36133;&#65292;&#25972;&#20010;&#20107;&#21153;&#23558;&#22238;&#28378;&#65292;&#28040;&#24687;&#20250;&#34987;&#37325;&#26032;&#21457;&#36865;&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;MDB&#21457;&#36865;&#28040;&#24687;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDBMessageSendTxExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue")
                     })
@TransactionManagement(value= TransactionManagementType.CONTAINER)
@TransactionAttribute(value= TransactionAttributeType.REQUIRED)
@ResourceAdapter("hornetq-ra.rar")
public class MDBMessageSendTxExample implements MessageListener
{
   @Resource(mappedName = "java:/JmsXA")
   ConnectionFactory connectionFactory;

   @Resource(mappedName = "queue/replyQueue")
   Queue replyQueue;

   public void onMessage(Message message)
   {
      Connection conn = null;
      try
      {
         //Step 9. We know the client is sending a text message so we cast
         TextMessage textMessage = (TextMessage)message;

         //Step 10. get the text from the message.
         String text = textMessage.getText();

         System.out.println("message " + text);

         conn = connectionFactory.createConnection();

         Session sess = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);

         MessageProducer producer = sess.createProducer(replyQueue);

         producer.send(sess.createTextMessage("this is a reply"));

      }
      catch (Exception e)
      {
         e.printStackTrace();
      }
      finally
      {
         if(conn != null)
         {
            try
            {
               conn.close();
            }
            catch (JMSException e)
            { 
            }
         }
      }
   }
   }</pre><p>&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;EJB&#65288;&#21253;&#25324;&#20250;&#35805;Bean, &#23454;&#20307;Bean&#21644;&#28040;&#24687;Bean&#65289;&#12289;Servlet&#65288;&#21253;&#25324;jsp&#65289;&#25105;&#23450;&#21046;&#30340;MBean&#20013;
            &#37117;&#21487;&#20197;&#20351;&#29992;JMS&#30340;JCA&#36866;&#37197;&#22120;&#26469;&#21457;&#36865;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7067"></a>32.3.&nbsp;MDB&#19982;&#25509;&#25910;&#27744;&#30340;&#22823;&#23567;</h2></div></div><div></div></div><p>&#21253;&#25324;JBoss&#22312;&#20869;&#30340;&#32477;&#22823;&#22810;&#25968;&#24212;&#29992;&#26381;&#21153;&#22120;&#20801;&#35768;&#29992;&#25143;&#23450;&#20041;&#19968;&#20010;&#27744;&#20013;&#30340;MDB&#25968;&#37327;&#12290;&#22312;JBoss&#20013;&#36825;&#20010;&#21442;&#25968;&#21517;&#26159;<tt class="literal">MaxPoolSize</tt>&#65292;&#23427;&#22312;&#25991;&#20214;
         ejb3-interceptors-aop.xml&#20013;&#37197;&#32622;&#12290;&#36825;&#20010;&#21442;&#25968;&#19981;&#24433;&#21709;&#23454;&#38469;&#21019;&#24314;&#30340;&#20250;&#35805;&#65295;&#25509;&#25910;&#32773;&#30340;&#25968;&#37327;&#12290;&#36164;&#28304;&#36866;&#37197;&#22120;&#19981;&#30693;&#36947;MDB&#30340;&#20855;&#20307;&#23454;&#29616;&#12290;&#25152;&#20197;&#21363;&#20351;&#20320;&#35774;&#32622;MDB&#27744;&#22312;&#22823;&#23567;
         &#20026;1&#65292;&#20173;&#28982;&#20250;&#26377;15&#20010;&#20250;&#35805;&#65295;&#25509;&#25910;&#32773;&#34987;&#21019;&#24314;&#65288;&#40664;&#35748;&#20540;&#65289;&#12290;&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#20250;&#35805;&#65295;&#25509;&#25910;&#32773;&#21019;&#24314;&#30340;&#25968;&#37327;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;&#36164;&#28304;&#36866;&#37197;&#22120;&#30340;&#21442;&#25968;
         <tt class="literal">maxSession</tt>&#23454;&#29616;&#12290;&#20063;&#21487;&#20197;&#36890;&#36807;&#35774;&#32622;MDB&#30340;&#28608;&#27963;&#37197;&#32622;&#21442;&#25968;&#26469;&#23436;&#25104;&#65306;</p><pre class="programlisting">@MessageDriven(name = "MDBMessageSendTxExample",
               activationConfig =
                     {
                        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
                        @ActivationConfigProperty(propertyName = "destination", propertyValue = "queue/testQueue"),
                        @ActivationConfigProperty(propertyName = "maxSession", propertyValue = "1")
                     })
@TransactionManagement(value= TransactionManagementType.CONTAINER)
@TransactionAttribute(value= TransactionAttributeType.REQUIRED)
@ResourceAdapter("hornetq-ra.rar")
public class MyMDB implements MessageListener
{ ....}
      </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7080"></a>32.4.&nbsp;&#37197;&#32622;JCA&#36866;&#37197;&#22120;</h2></div></div><div></div></div><p>&#36890;&#36807;JCA&#36866;&#37197;&#22120;&#21487;&#20197;&#23558;HornetQ&#38598;&#25104;&#21040;JEE&#20860;&#23481;&#30340;&#27169;&#22359;&#20013;&#65292;&#22914;MDB&#21644;EJB&#12290;&#23427;&#30340;&#37197;&#32622;&#20915;&#23450;&#20102;&#36825;&#20123;&#27169;&#22359;&#22914;&#20309;&#25509;&#25910;&#21644;&#21457;&#36865;&#28040;&#24687;&#12290;</p><p>HornetQ&#30340;JCA&#36866;&#37197;&#22120;&#26159;&#36890;&#36807;<tt class="literal">jms-ra.rar</tt>&#37096;&#32626;&#30340;&#12290;&#23427;&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#20854;&#20013;&#30340;
              <tt class="literal">META-INF/ra.xml</tt>&#12290;</p><p>&#19979;&#38754;&#26159;&#23427;&#30340;&#20855;&#20307;&#37197;&#32622;&#20869;&#23481;&#65306;</p><pre class="programlisting">&lt;resourceadapter&gt;
      &lt;resourceadapter-class&gt;org.hornetq.ra.HornetQResourceAdapter&lt;/resourceadapter-class&gt;
      &lt;config-property&gt;
         &lt;description&gt;The transport type&lt;/description&gt;
         &lt;config-property-name&gt;ConnectorClassName&lt;/config-property-name&gt;
         &lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
         &lt;config-property-value&gt;org.hornetq.core.remoting.impl.invm.InVMConnectorF
         actory&lt;/config-property-value&gt;
      &lt;/config-property&gt;
      &lt;config-property&gt;
         &lt;description&gt;The transport configuration. These values must be in the form of key=val;key=val;&lt;/description&gt;
         &lt;config-property-name&gt;ConnectionParameters&lt;/config-property-name&gt;
         &lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
         &lt;config-property-value&gt;server-id=0&lt;/config-property-value&gt;
      &lt;/config-property&gt;

      &lt;outbound-resourceadapter&gt;
         &lt;connection-definition&gt;
            &lt;managedconnectionfactory-class&gt;org.hornetq.ra.HornetQRAManagedConnection
            Factory&lt;/managedconnectionfactory-class&gt;

            &lt;config-property&gt;
               &lt;description&gt;The default session type&lt;/description&gt;
               &lt;config-property-name&gt;SessionDefaultType&lt;/config-property-name&gt;
               &lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
               &lt;config-property-value&gt;javax.jms.Queue&lt;/config-property-value&gt;
            &lt;/config-property&gt;
            &lt;config-property&gt;
               &lt;description&gt;Try to obtain a lock within specified number of seconds; less
               than or equal to 0 disable this functionality&lt;/description&gt;
               &lt;config-property-name&gt;UseTryLock&lt;/config-property-name&gt;
               &lt;config-property-type&gt;java.lang.Integer&lt;/config-property-type&gt;
               &lt;config-property-value&gt;0&lt;/config-property-value&gt;
            &lt;/config-property&gt;

            &lt;connectionfactory-interface&gt;org.hornetq.ra.HornetQRAConnectionFactory
            &lt;/connectionfactory-interface&gt;
            &lt;connectionfactororg.hornetq.ra.HornetQConnectionFactoryImplonFactoryImpl
            &lt;/connectionfactory-impl-class&gt;
            &lt;connection-interface&gt;javax.jms.Session&lt;/connection-interface&gt;
            &lt;connection-impl-class&gt;org.hornetq.ra.HornetQRASession
            &lt;/connection-impl-class&gt;
         &lt;/connection-definition&gt;
         &lt;transaction-support&gt;XATransaction&lt;/transaction-support&gt;
         &lt;authentication-mechanism&gt;
            &lt;authentication-mechanism-type&gt;BasicPassword
            &lt;/authentication-mechanism-type&gt;
            &lt;credential-interface&gt;javax.resource.spi.security.PasswordCredential
            &lt;/credential-interface&gt;
         &lt;/authentication-mechanism&gt;
         &lt;reauthentication-support&gt;false&lt;/reauthentication-support&gt;
      &lt;/outbound-resourceadapter&gt;

      &lt;inbound-resourceadapter&gt;
         &lt;messageadapter&gt;
            &lt;messagelistener&gt;
               &lt;messagelistener-type&gt;javax.jms.MessageListener&lt;/messagelistener-type&gt;
               &lt;activationspec&gt;
                  &lt;activationspec-class&gt;org.hornetq.ra.inflow.HornetQActivationSpec
                  &lt;/activationspec-class&gt;
                  &lt;required-config-property&gt;
                      &lt;config-property-name&gt;destination&lt;/config-property-name&gt;
                  &lt;/required-config-property&gt;
               &lt;/activationspec&gt;
            &lt;/messagelistener&gt;
         &lt;/messageadapter&gt;
      &lt;/inbound-resourceadapter&gt;

   &lt;/resourceadapter&gt;</pre><p>&#25972;&#20010;&#37197;&#32622;&#21487;&#20197;&#20998;&#20026;&#19977;&#20010;&#20027;&#35201;&#37096;&#20998;</p><div class="orderedlist"><ol type="1"><li><p>&#36866;&#37197;&#22120;&#30340;&#20840;&#23616;&#21442;&#25968;</p></li><li><p>&#36866;&#37197;&#22120;&#22806;&#37096;&#65288;outbound&#65289;&#37197;&#32622;&#12290;&#29992;&#20110;&#22312;JEE&#29615;&#22659;&#20013;&#21019;&#24314;JMS&#36164;&#28304;&#12290;</p></li><li><p>&#36866;&#37197;&#22120;&#20869;&#37096;&#65288;inbound&#65289;&#37197;&#32622;&#12290;&#29992;&#20110;&#25511;&#21046;MDB&#30340;&#28040;&#24687;&#25509;&#25910;&#12290; </p></li></ol></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7109"></a>32.4.1.&nbsp;&#36866;&#37197;&#22120;&#30340;&#20840;&#23616;&#21442;&#25968;</h3></div></div><div></div></div><p>&#39318;&#20808;&#30475;&#21040;&#30340;&#31532;&#19968;&#20010;&#21442;&#25968;&#26159;<tt class="literal">resourceadapter-class</tt>&#12290;&#36825;&#26159;HornetQ
                &#30340;&#36866;&#37197;&#22120;&#31867;&#12290;&#27492;&#21442;&#25968;&#19981;&#21487;&#26356;&#25913;&#12290;</p><p>&#22312;&#27492;&#20043;&#21518;&#26159;&#21487;&#37197;&#32622;&#30340;&#21442;&#25968;&#12290;&#21069;&#20004;&#20010;&#37197;&#32622;&#36866;&#37197;&#22120;&#25152;&#20351;&#29992;&#30340;&#20256;&#36755;&#12290;&#20854;&#20313;&#30340;&#29992;&#26469;&#37197;&#32622;&#36830;&#25509;&#24037;&#21378;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#25152;&#26377;&#36830;&#25509;&#24037;&#21378;&#30340;&#21442;&#25968;&#22312;&#27809;&#26377;&#23450;&#20041;&#26102;&#20351;&#29992;&#40664;&#35748;&#20540;&#12290;&#21442;&#25968;<tt class="literal">reconnectAttempts</tt>
                        &#30340;&#40664;&#35748;&#20540;&#21462;-1&#65292;&#34920;&#31034;&#22914;&#26524;&#36830;&#25509;&#22833;&#36133;&#65292;HornetQ&#20250;&#19981;&#20572;&#22320;&#23581;&#35797;&#37325;&#26032;&#36830;&#25509;&#12290;&#36825;&#20010;&#21442;&#25968;&#21482;&#36866;&#29992;&#20110;&#21019;&#24314;&#36828;&#31243;
                        &#36830;&#25509;&#30340;&#24773;&#20917;&#12290;&#22914;&#26524;&#26159;InVm&#36830;&#25509;&#22120;&#65292;&#21017;&#27704;&#36828;&#19981;&#21487;&#33021;&#21457;&#29983;&#36830;&#25509;&#25925;&#38556;&#12290;</p></div><p>&#19979;&#38754;&#32473;&#20986;&#20102;&#27599;&#20010;&#21442;&#25968;&#30340;&#35828;&#26126;&#65306;</p><div class="table"><a name="d0e7127"></a><p class="title"><b>Table&nbsp;32.1.&nbsp;&#20840;&#23616;&#37197;&#32622;&#21442;&#25968;</b></p><table summary="&#20840;&#23616;&#37197;&#32622;&#21442;&#25968;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21442;&#25968;&#21517;</th><th>&#21442;&#25968;&#31867;&#22411;</th><th>&#21442;&#25968;&#35828;&#26126;</th></tr></thead><tbody><tr><td>ConnectorClassName</td><td>String</td><td>&#36830;&#25509;&#22120;&#30340;&#31867;&#21517;&#65292;&#21442;&#35265; <a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a></td></tr><tr><td>ConnectionParameters</td><td>String</td><td>&#20256;&#36755;&#37197;&#32622;&#21442;&#25968;&#12290;&#23427;&#30340;&#20540;&#24517;&#39035;&#26159;&#37319;&#29992;
                                <tt class="literal">key1=val1;key2=val2;</tt>&#30340;&#24418;&#24335;&#12290;&#19981;&#21516;&#36830;&#25509;&#22120;&#26377;&#19981;&#21516;&#30340;&#21442;&#25968;&#12290;</td></tr><tr><td>useLocalTx</td><td>boolean</td><td>&#35774;&#20026;True&#65292;&#21017;&#36827;&#34892;&#26412;&#22320;&#20107;&#21153;&#20248;&#21270;&#12290;</td></tr><tr><td>UserName</td><td>String</td><td>&#29992;&#20110;&#21019;&#24314;&#36830;&#25509;&#26102;&#20351;&#29992;&#30340;&#29992;&#25143;&#21517;</td></tr><tr><td>Password</td><td>String</td><td>&#29992;&#20110;&#21019;&#24314;&#36830;&#25509;&#26102;&#20351;&#29992;&#30340;&#29992;&#25143;&#23494;&#30721;</td></tr><tr><td>BackupConnectorClassName</td><td>String</td><td>&#21457;&#29983;&#25925;&#38556;&#26159;&#20351;&#29992;&#30340;&#22791;&#20221;&#20256;&#36755;</td></tr><tr><td>BackupConnectionParameters</td><td>String</td><td>&#22791;&#20221;&#20256;&#36755;&#30340;&#37197;&#32622;&#21442;&#25968;</td></tr><tr><td><a href="#configuration.discovery-group.group-address">DiscoveryAddress</a></td><td>String</td><td>&#26381;&#21153;&#22120;&#33258;&#21160;&#26816;&#27979;&#25152;&#20351;&#29992;&#30340;&#21457;&#29616;&#32452;&#65288;discovery group&#65289;&#22320;&#22336;</td></tr><tr><td><a href="#configuration.discovery-group.group-port">DiscoveryPort</a></td><td>Integer</td><td>&#26816;&#27979;&#25152;&#20351;&#29992;&#30340;&#31471;&#21475;&#21495;</td></tr><tr><td><a href="#configuration.discovery-group.refresh-timeout">DiscoveryRefreshTimeout</a></td><td>Long</td><td>&#21047;&#26032;&#30340;&#26102;&#38388;&#65288;timeout&#65289;&#12290;&#21333;&#20301;&#20026;&#27627;&#31186;</td></tr><tr><td><a href="#configuration.connection-factory.discovery-initial-wait-timeout">
                                  DiscoveryInitialWaitTimeout
                               </a></td><td>Long</td><td>&#26816;&#27979;&#20043;&#21069;&#25152;&#38656;&#31561;&#24453;&#30340;&#26102;&#38388;</td></tr><tr><td><a href="#configuration.connection-factory.connection-load-balancing-policy-class-name">
                                  ConnectionLoadBalancingPolicyClassName</a></td><td>String</td><td>&#36127;&#36733;&#22343;&#34913;&#31574;&#30053;&#20351;&#29992;&#30340;&#31867;</td></tr><tr><td><a href="#configuration.connection-factory.discovery-initial-wait-timeout">
                                  DiscoveryInitialWaitTimeout
                               </a></td><td>Long</td><td>&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;ping&#30340;&#21608;&#26399;&#65292;&#21333;&#20301;&#27627;&#31186;</td></tr><tr><td><a href="#configuration.connection-factory.connection-ttl">ConnectionTTL</a></td><td>Long</td><td>&#36830;&#25509;&#30340;&#23384;&#27963;&#26102;&#38388;&#65288;TTL&#65289;</td></tr><tr><td><a href="#configuration.connection-factory.call-timeout">CallTimeout</a></td><td>Long</td><td>&#27599;&#20010;&#25968;&#25454;&#21253;&#30340;&#35843;&#29992;&#36229;&#26102;&#12290;&#21333;&#20301;&#27627;&#31186;</td></tr><tr><td><a href="#configuration.connection-factory.dups-ok-batch-size">DupsOKBatchSize</a></td><td>Integer</td><td>Dups OK&#30340;&#24773;&#20917;&#19979;&#28040;&#24687;&#25209;&#37327;&#30340;&#22823;&#23567;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.transaction-batch-size">TransactionBatchSize</a></td><td>Integer</td><td>&#22312;&#20107;&#21153;&#20013;&#21457;&#36865;&#28040;&#24687;&#30340;&#25209;&#37327;&#22823;&#23567;</td></tr><tr><td><a href="#configuration.connection-factory.consumer-window-size">ConsumerWindowSize</a></td><td>Integer</td><td>&#25509;&#25910;&#32773;&#20869;&#37096;&#32531;&#23384;&#30340;&#31383;&#21475;&#22823;&#23567;</td></tr></tbody></table></div><p>&#25509;&#19978;&#39029;..</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><a href="#configuration.connection-factory.consumer-max-rate">ConsumerMaxRate</a></td><td>Integer</td><td>&#25509;&#25910;&#32773;&#25509;&#25910;&#28040;&#24687;&#30340;&#26368;&#22823;&#36895;&#24230;</td></tr><tr><td><a href="#configuration.connection-factory.confirmation-window-size">ConfirmationWindowSize</a></td><td>Integer</td><td>&#29992;&#20110;&#30830;&#35748;&#30340;&#31383;&#21475;&#22823;&#23567;</td></tr><tr><td><a href="#configuration.connection-factory.producer-max-rate">ProducerMaxRate</a></td><td>Integer</td><td>&#21457;&#36865;&#32773;&#21457;&#36865;&#28040;&#24687;&#30340;&#26368;&#22823;&#36895;&#24230;</td></tr><tr><td><a href="#configuration.connection-factory.min-large-message-size">MinLargeMessageSize</a></td><td>Integer</td><td>&#22823;&#28040;&#24687;&#30340;&#26368;&#23567;&#25968;&#20540;&#65292;&#21333;&#20301;&#23383;&#33410;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.block-on-acknowledge">BlockOnAcknowledge</a></td><td>Boolean</td><td>&#22914;&#26524;&#20026;true&#65292;&#34920;&#31034;&#20197;&#38459;&#22622;&#26041;&#27861;&#21457;&#36865;&#28040;&#24687;&#36890;&#30693;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.block-on-non-durable-send">BlockOnNonDurableSend</a></td><td>Boolean</td><td>&#22914;&#26524;&#20026;true&#65292;&#34920;&#31034;&#20197;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#38750;&#25345;&#20037;&#28040;&#24687;</td></tr><tr><td><a href="#configuration.connection-factory.block-on-durable-send">BlockOnDurableSend</a></td><td>Boolean</td><td>&#22914;&#26524;&#20026;true&#65292;&#34920;&#31034;&#20197;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#25345;&#20037;&#28040;&#24687;</td></tr><tr><td><a href="#configuration.connection-factory.auto-group">AutoGroup</a></td><td>Boolean</td><td>&#22914;&#26524;&#20026;true&#65292;&#34920;&#31034;&#33258;&#21160;&#28040;&#24687;&#20998;&#32452;</td></tr><tr><td><a href="#configuration.connection-factory.pre-acknowledge">PreAcknowledge</a></td><td>Boolean</td><td>&#20915;&#23450;&#26159;&#21542;&#36827;&#34892;&#28040;&#24687;&#30340;&#39044;&#20808;&#36890;&#30693;&#65288;pre-acknowledge&#65289;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.reconnect-attempts">ReconnectAttempts</a></td><td>Integer</td><td>&#36830;&#25509;&#37325;&#35797;&#30340;&#27425;&#25968;&#65292;&#40664;&#35748;&#20026; -1</td></tr><tr><td><a href="#configuration.connection-factory.retry-interval">RetryInterval</a></td><td>Long</td><td>&#27599;&#27425;&#36830;&#25509;&#37325;&#35797;&#21069;&#31561;&#24453;&#30340;&#26102;&#38388;&#65292;&#21333;&#20301;&#27627;&#31186;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.retry-interval-multiplier">RetryIntervalMultiplier</a></td><td>Double</td><td>&#29992;&#20110;&#35745;&#31639;&#37325;&#35797;&#38388;&#38548;</td></tr><tr><td><a href="#configuration.connection-factory.failover-on-server-shutdown">FailoverOnServerShutdown</a></td><td>Boolean</td><td>&#22914;&#26524;&#35774;&#20026;true&#34920;&#31034;&#23581;&#35797;&#36830;&#25509;&#20854;&#23427;&#30340;&#26381;&#21153;&#22120;</td></tr><tr><td><a href="#configuration.connection-factory.client-id">ClientID</a></td><td>String</td><td>&#36830;&#25509;&#30340;&#23458;&#25143;&#31471;ID</td></tr><tr><td><a href="#configuration.connection-factory.client-failure-check-period">ClientFailureCheckPeriod</a></td><td>Long</td><td>&#23458;&#25143;&#31471;&#22914;&#26524;&#22312;&#36825;&#20010;&#26102;&#38388;&#20869;&#27809;&#26377;&#25910;&#21040;&#26381;&#21153;&#22120;&#25968;&#25454;&#21253;&#65292;&#23558;&#35748;&#20026;&#36830;&#25509;&#20986;&#29616;&#25925;&#38556;&#12290;</td></tr><tr><td><a href="#configuration.connection-factory.use-global-pools">UseGlobalPools</a></td><td>Boolean</td><td>&#26159;&#21542;&#20351;&#29992;&#20840;&#23616;&#32447;&#31243;&#27744;</td></tr><tr><td><a href="#configuration.connection-factory.scheduled-thread-pool-max-size">ScheduledThreadPoolMaxSize</a></td><td>Integer</td><td><span class="emphasis"><em>&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;</em></span>&#30340;&#26368;&#22823;&#32447;&#31243;&#25968;</td></tr><tr><td><a href="#configuration.connection-factory.thread-pool-max-size">ThreadPoolMaxSize</a></td><td>Integer</td><td>&#32447;&#31243;&#27744;&#30340;&#22823;&#23567;</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7438"></a>32.4.2.&nbsp;&#36866;&#37197;&#22120;&#22806;&#37096;&#65288;outbound&#65289;&#37197;&#32622;</h3></div></div><div></div></div><p>&#22806;&#37096;&#37197;&#32622;&#21442;&#25968;&#24212;&#35813;&#20445;&#25345;&#19981;&#21464;&#12290;&#36825;&#26159;&#22240;&#20026;&#23427;&#25152;&#23450;&#20041;&#30340;&#36830;&#25509;&#24037;&#21378;&#35201;&#34987;Java EE&#30340;&#27169;&#22359;&#25152;&#20351;&#29992;&#12290;&#36825;&#20123;&#36830;&#25509;&#24037;&#21378;
                &#21487;&#20197;&#23450;&#20041;&#22312;&#21517;&#23383;&#26679;&#24335;&#20026;<tt class="literal">*-ds.xml</tt>&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;&#22312;JBoss&#30340;&#37096;&#32626;&#30446;&#24405;
                <tt class="literal">hornetq.sar</tt>&#19979;&#26377;&#19968;&#20010;&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;<tt class="literal">jms-ds.xml</tt>&#12290;
                &#22312;&#36825;&#20010;&#25991;&#20214;&#20013;&#30340;&#36830;&#25509;&#24037;&#21378;&#30340;&#37197;&#32622;&#20174;&#20027;&#35201;&#30340;&#37197;&#32622;&#25991;&#20214;<tt class="literal">ra.xml</tt>&#20013;&#32487;&#25215;&#65292;
                &#20294;&#26159;&#21487;&#20197;&#22312;&#36825;&#37324;&#37325;&#26032;&#23450;&#20041;&#12290;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#32473;&#20986;&#20102;&#37325;&#26032;&#23450;&#20041;&#30340;&#26041;&#27861;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#35831;&#27880;&#24847;&#36825;&#37324;&#30340;&#37197;&#32622;&#21482;&#36866;&#29992;&#20110;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#23433;&#35013;&#30340;HornetQ&#12290;&#22914;&#26524;&#35201;&#22312;&#20854;&#23427;JEE&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;
                &#20351;&#29992;&#24182;&#37197;&#32622;HornetQ&#65292;&#35831;&#21442;&#29031;&#30456;&#24212;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#25163;&#20876;&#12290;</p></div><pre class="programlisting">&lt;tx-connection-factory&gt;
      &lt;jndi-name&gt;RemoteJmsXA&lt;/jndi-name&gt;
      &lt;xa-transaction/&gt;
      &lt;rar-name&gt;jms-ra.rar&lt;/rar-name&gt;
      &lt;connection-definition&gt;org.hornetq.ra.HornetQRAConnectionFactory
&lt;/connection-definition&gt;
      &lt;config-property name="SessionDefaultType" type="String"&gt;javax.jms.Topic
      &lt;/config-property&gt;
      &lt;config-property name="ConnectorClassName" type="String"&gt;
        org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
      &lt;/config-property&gt;
      &lt;config-property name="ConnectionParameters" type="String"&gt;
          port=5445&lt;/config-property&gt;
      &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
&lt;/tx-connection-factory&gt;</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#30340;&#36830;&#25509;&#24037;&#21378;&#32465;&#23450;&#21040;JNDI&#21517;&#23383;<tt class="literal">RemoteJmsXA</tt>&#12290;EJB&#21644;MDB&#21487;&#20197;&#29992;
                &#19979;&#38754;&#30340;&#26041;&#27861;&#26469;&#24471;&#21040;&#23427;&#65306;</p><pre class="programlisting">@Resource(mappedName="java:RemoteJmsXA")
private ConnectionFactory connectionFactory;</pre><p><tt class="literal">config-property</tt>&#35206;&#30422;&#20102;<tt class="literal">ra.xml</tt>&#25991;&#20214;&#20013;&#30340;&#37197;&#32622;&#12290;
                &#20197;&#27492;&#31867;&#25512;&#65292;&#20854;&#23427;&#26377;&#20851;&#36830;&#25509;&#24037;&#21378;&#30340;&#21442;&#25968;&#20063;&#21487;&#20197;&#22312;&#27492;&#35206;&#30422;&#12290;</p><p>&#38500;&#20102;&#20840;&#23616;&#30340;&#37197;&#32622;&#21442;&#25968;&#22806;&#65292;&#22806;&#37096;&#30340;&#37197;&#32622;&#36824;&#23450;&#20041;&#20102;&#20854;&#23427;&#19968;&#20123;&#21442;&#25968;&#12290;</p><div class="table"><a name="d0e7476"></a><p class="title"><b>Table&nbsp;32.2.&nbsp;&#22806;&#37096;&#37197;&#32622;&#21442;&#25968;</b></p><table summary="&#22806;&#37096;&#37197;&#32622;&#21442;&#25968;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21442;&#25968;&#21517;</th><th>&#21442;&#25968;&#31867;&#22411;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>SessionDefaultType</td><td>String</td><td>&#40664;&#35748;&#30340;&#20250;&#35805;&#31867;&#22411;</td></tr><tr><td>UseTryLock</td><td>Integer</td><td>&#22312;&#35268;&#23450;&#30340;&#31186;&#25968;&#20869;&#33719;&#24471;&#38145;&#12290;&#22914;&#26524;&#19981;&#24819;&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#65292;&#23558;&#23427;&#35774;&#20026;0&#25110;&#36127;&#25968;</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7506"></a>32.4.3.&nbsp;&#36866;&#37197;&#22120;&#20869;&#37096;&#65288;inbound&#65289;&#37197;&#32622;</h3></div></div><div></div></div><p>&#20869;&#37096;&#37197;&#32622;&#21442;&#25968;&#20063;&#24212;&#35813;&#20445;&#25345;&#19981;&#21464;&#12290;&#23427;&#20204;&#25511;&#21046;&#21521;MDB&#36716;&#21457;&#28040;&#24687;&#30340;&#21508;&#31181;&#23646;&#24615;&#12290;&#36890;&#36807;&#22312;MDB&#19978;&#28155;&#21152;&#30456;&#24212;&#30340;&#28608;&#27963;&#37197;&#32622;
                &#65288;activation configuration&#65289;&#21487;&#20197;&#35206;&#30422;&#36825;&#20123;&#21442;&#25968;&#30340;&#20540;&#12290;&#23427;&#21487;&#20197;&#29992;&#26469;&#37197;&#32622;&#19968;&#20010;MDB&#20174;&#21478;&#22806;&#19968;&#20010;&#26381;&#21153;&#22120;
                &#25509;&#25910;&#28040;&#24687;&#12290;</p><p>&#38500;&#20102;&#20840;&#23616;&#30340;&#37197;&#32622;&#21442;&#25968;&#22806;&#65292;&#20869;&#37096;&#30340;&#37197;&#32622;&#36824;&#23450;&#20041;&#20102;&#20854;&#23427;&#19968;&#20123;&#21442;&#25968;&#12290;</p><div class="table"><a name="d0e7513"></a><p class="title"><b>Table&nbsp;32.3.&nbsp;Inbound Configuration Properties</b></p><table summary="Inbound Configuration Properties" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>&#21442;&#25968;&#21517;</th><th>&#21442;&#25968;&#31867;&#22411;</th><th>&#35828;&#26126;</th></tr></thead><tbody><tr><td>Destination</td><td>String</td><td>&#30446;&#26631;&#30340;JNDI&#21517;&#23383;</td></tr><tr><td>DestinationType</td><td>String</td><td>&#30446;&#26631;&#30340;&#31867;&#22411;&#65292;<tt class="literal">javax.jms.Queue</tt>&#25110;&#32773;<tt class="literal">javax.jms.Topic</tt>
                                 (&#40664;&#35748;&#26159;javax.jms.Queue)</td></tr><tr><td>AcknowledgeMode</td><td>String</td><td>&#36890;&#30693;&#27169;&#24335;&#65292;<tt class="literal">Auto-acknowledge</tt> &#25110; <tt class="literal">Dups-ok-acknowledge</tt>
                                (&#40664;&#35748;&#20540;&#26159;Auto-acknowledge). <tt class="literal">AUTO_ACKNOWLEDGE</tt>&#21644;<tt class="literal">DUPS_OK_ACKNOWLEDGE</tt>&#20063;&#26159;&#26377;&#25928;&#20540;</td></tr><tr><td>MaxSession</td><td>Integer</td><td>&#20869;&#37096;&#37197;&#32622;&#21019;&#24314;&#30340;&#26368;&#22823;&#20250;&#35805;&#25968;&#65288;&#40664;&#35748;&#26159;5&#65289;</td></tr><tr><td>MessageSelector</td><td>String</td><td>&#25509;&#25910;&#32773;&#30340;&#28040;&#24687;&#36873;&#25321;&#22120;</td></tr><tr><td>SubscriptionDurability</td><td>String</td><td>&#35746;&#38405;&#30340;&#31867;&#22411;&#65292;<tt class="literal">Durable</tt>&#25110;&#32773;<tt class="literal">NonDurable</tt></td></tr><tr><td>SubscriptionName</td><td>String</td><td>&#35746;&#38405;&#30340;&#21517;&#23383;</td></tr><tr><td>TransactionTimeout</td><td>Long</td><td>&#20107;&#21153;&#36229;&#26102;&#65288;&#27627;&#31186;&#65292;&#40664;&#35748;&#26159;0&#65292;&#34920;&#31034;&#20107;&#21153;&#19981;&#20250;&#36229;&#26102;&#65289;</td></tr><tr><td>UseJNDI</td><td>Boolean</td><td>&#26159;&#21542;&#20351;&#29992;JNDI&#26469;&#26597;&#25214;&#30446;&#26631;&#65288;&#40664;&#35748;&#26159;true&#65289;</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7615"></a>32.4.4.&nbsp;&#37197;&#32622;&#36866;&#37197;&#22120;&#35775;&#38382;&#21333;&#29420;&#30340;HornetQ&#26381;&#21153;&#22120;</h3></div></div><div></div></div><p>&#22312;&#26377;&#30340;&#24773;&#20917;&#19979;&#65292;&#28040;&#24687;&#26381;&#21153;&#22120;&#19982;&#24212;&#29992;&#26381;&#21153;&#22120;&#36816;&#34892;&#22312;&#19981;&#21516;&#30340;&#26426;&#22120;&#19978;&#12290;&#36825;&#26102;&#23458;&#25143;&#31471;&#21482;&#38656;&#35201;&#23433;&#35013;HornetQ&#30340;&#23458;&#25143;&#31471;&#30340;&#24211;&#25991;&#20214;&#12290;&#26412;&#33410;&#32473;&#20986;&#20102;&#20855;&#20307;&#30340;&#37197;&#32622;&#21644;&#25152;&#38656;&#35201;&#30340;jar&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div></div><div></div></div><p>&#20320;&#38656;&#35201;&#37197;&#32622;&#20004;&#20010;&#37197;&#32622;&#25991;&#20214;&#12290;&#19968;&#20010;&#26159;MDB&#25152;&#29992;&#30340;&#20869;&#37096;&#36866;&#37197;&#22120;&#65292;&#21478;&#19968;&#20010;&#26159;&#21487;&#20197;&#21019;&#24314;&#22806;&#37096;&#36830;&#25509;&#30340;&#22806;&#37096;&#36866;&#37197;&#22120;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e7623"></a>32.4.4.1.1.&nbsp;&#37197;&#32622;&#20869;&#37096;&#36866;&#37197;&#22120;</h5></div></div><div></div></div><p>&#39318;&#20808;&#22312;<tt class="literal">deploy</tt>&#30446;&#24405;&#19979;&#21019;&#24314;&#19968;&#20010;&#20197;.rar&#20026;&#32467;&#23614;&#30340;&#25991;&#20214;&#22841;&#12290;
                      &#22312;&#36825;&#37324;&#25105;&#20204;&#23558;&#20854;&#21629;&#21517;&#20026;<tt class="literal">hornetq-ra.rar</tt>&#12290;&#20027;&#27880;&#24847;&#36825;&#19968;&#28857;&#24456;&#37325;&#35201;&#65292;&#22240;&#20026;MDB&#21644;&#22806;&#37096;&#37197;&#32622;&#37117;&#38656;&#35201;&#24341;&#29992;
                      &#35813;&#25991;&#20214;&#22841;&#30340;&#21517;&#23383;&#12290;
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22312;JBoss&#20013;&#35813;&#25991;&#20214;&#22841;&#30340;&#40664;&#35748;&#21517;&#20026;<tt class="literal">jms-ra.rar</tt>&#12290;&#20320;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#36825;&#20010;&#21517;&#23383;&#12290;&#20294;&#26159;&#20320;&#21487;&#33021;&#38656;&#35201;&#36991;&#20813;
                      &#19982;&#20854;&#23427;&#30340;&#36890;&#29992;&#36866;&#37197;&#22120;&#30456;&#20914;&#31361;&#12290;
                   </p></div><p>&#22312;&#25991;&#20214;&#22841;
                   <tt class="literal">hornetq-ra.rar</tt>
                   &#19979;&#21019;&#24314;&#21517;&#20026;
                   <tt class="literal">META-INF</tt>
                   &#30340;&#25991;&#20214;&#22841;&#65292;&#28982;&#21518;&#22312;&#20123;&#25991;&#20214;&#22841;&#20869;&#21019;&#24314;&#19968;&#20010;
                   <tt class="literal">ra.xml</tt>&#37197;&#32622;&#25991;&#20214;&#12290;&#22312;HornetQ&#21457;&#24067;&#21253;&#20013;
                   &#26377;&#19968;&#20010;<tt class="literal">ra.xml</tt>&#27169;&#26495;&#25991;&#20214;&#20379;&#20320;&#20351;&#29992;&#12290;
                </p><p>&#35201;&#37197;&#32622;MDB&#25509;&#25910;&#36828;&#31243;HornetQ&#26381;&#21153;&#22120;&#30340;&#28040;&#24687;&#65292;&#20320;&#38656;&#35201;&#20462;&#25913;<tt class="literal">deploy/hornet-ra.rar/META-INF</tt>&#19979;&#38754;&#30340;
                   <tt class="literal">ra.xml</tt>&#25991;&#20214;&#65292;&#23558;&#20256;&#36755;&#23618;&#25913;&#20026;netty&#36830;&#25509;&#22120;&#65288;&#19981;&#35201;&#20351;&#29992;invm&#36830;&#25509;&#22120;&#65289;&#21450;&#20854;&#30456;&#24212;&#30340;&#21442;&#25968;&#12290;&#19979;&#38754;
                   &#26159;&#19968;&#20010;&#37197;&#32622;&#30340;&#20363;&#23376;&#65306;
                </p><pre class="programlisting">
            &lt;resourceadapter-class&gt;org.hornetq.ra.HornetQResourceAdapter&lt;/resourceadapter-class&gt;
              &lt;config-property&gt;
                 &lt;description&gt;The transport type&lt;/description&gt;
                 &lt;config-property-name&gt;ConnectorClassName&lt;/config-property-name&gt;
                 &lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
                 &lt;config-property-value&gt;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory&lt;/config-property-value&gt;
              &lt;/config-property&gt;
              &lt;config-property&gt;
                 &lt;description&gt;The transport configuration. These values must be in the form of key=val;key=val;&lt;/description&gt;
                 &lt;config-property-name&gt;ConnectionParameters&lt;/config-property-name&gt;
                 &lt;config-property-type&gt;java.lang.String&lt;/config-property-type&gt;
                 &lt;config-property-value&gt;host=127.0.0.1;port=5446&lt;/config-property-value&gt;
              &lt;/config-property&gt;
          </pre><p>&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#65292;&#36866;&#37197;&#22120;&#36830;&#25509;&#21040;&#19968;&#20010;&#36816;&#34892;&#22312;&#26412;&#26426;&#19978;&#31471;&#21475;&#20026;5446&#30340;&#26381;&#21153;&#22120;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e7666"></a>32.4.4.1.2.&nbsp;&#37197;&#32622;&#22806;&#37096;&#36866;&#37197;&#22120;</h5></div></div><div></div></div><p>&#20320;&#36824;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<tt class="literal">hornetq-ds.xml</tt>&#25991;&#20214;&#26469;&#37197;&#32622;&#22806;&#37096;&#36830;&#25509;&#12290;&#35813;&#25991;&#20214;&#38656;&#35201;&#25918;&#32622;&#22312;<tt class="literal">deploy</tt>
                   &#19979;&#30340;&#20219;&#24847;&#19968;&#20010;&#25991;&#20214;&#22841;&#20013;&#12290;&#22312;&#19968;&#30456;&#26631;&#20934;&#30340;&#23433;&#35013;&#20013;&#36825;&#20010;&#25991;&#20214;&#22841;&#26159;<tt class="literal">horneq</tt> &#25110;&#32773; <tt class="literal">hornetq.sar</tt>&#12290;
                   &#24403;&#28982;&#20320;&#21487;&#20197;&#36873;&#25321;&#20854;&#23427;&#25991;&#20214;&#22841;&#12290;&#35813;&#25991;&#20214;&#30340;&#21517;&#23383;&#21482;&#35201;&#26159;&#20197;<tt class="literal">-ds.xml</tt>&#21363;&#21487;&#12290;&#22312;HornetQ&#30340;&#21457;&#24067;&#21253;&#20013;&#21253;&#21547;&#26377;&#19968;&#20010;&#27169;&#26495;&#25991;&#20214;&#65292;
                   &#23427;&#30340;&#21517;&#23383;&#26159;<tt class="literal">jms-ds.xml</tt>&#65292;&#20301;&#32622;&#23601;&#22312;config&#25991;&#20214;&#22841;&#19979;&#12290;
                </p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#37197;&#32622;&#30340;&#20363;&#23376;&#12290;</p><pre class="programlisting">
             &lt;tx-connection-factory&gt;
              &lt;jndi-name&gt;RemoteJmsXA&lt;/jndi-name&gt;
              &lt;xa-transaction/&gt;
              &lt;rar-name&gt;hornetq-ra.rar&lt;/rar-name&gt;
              &lt;connection-definition&gt;org.hornetq.ra.HornetQRAConnectionFactory&lt;/connection-definition&gt;
              &lt;config-property name="SessionDefaultType" type="java.lang.String"&gt;javax.jms.Topic&lt;/config-property&gt;
              &lt;config-property name="ConnectorClassName" type="java.lang.String"&gt;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory&lt;/config-property&gt;
              &lt;config-property name="ConnectionParameters" type="java.lang.String"&gt;host=127.0.0.1;port=5446&lt;/config-property&gt;
              &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
           &lt;/tx-connection-factory&gt;
          </pre><p>&#36825;&#20010;&#37197;&#32622;&#21516;&#26679;&#26159;&#36830;&#25509;&#21040;&#36816;&#34892;&#22312;&#26412;&#26426;&#19978;&#30340;&#31471;&#21475;&#20026;5446&#30340;HornetQ&#26381;&#21153;&#22120;&#12290;JEE&#27169;&#22359;&#21487;&#20197;&#36890;&#36807;JNDI&#26597;&#25214;
                <tt class="literal">java:/RemoteJmsXA</tt>&#65288;&#30001;<tt class="literal">jndi-name</tt>&#21442;&#25968;&#23450;&#20041;&#65289;&#12290;&#22914;&#19978;&#33410;&#25152;&#36848;&#65292;
                &#36164;&#28304;&#36866;&#37197;&#22120;&#26681;&#25454;&#25991;&#20214;&#22841;&#19979;&#30340;&#37197;&#32622;&#26469;&#21019;&#24314;&#22806;&#37096;&#36830;&#25509;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h6 class="title"><a name="d0e7701"></a>32.4.4.1.2.1.&nbsp;&#20381;&#36182;&#30340;jar&#25991;&#20214;</h6></div></div><div></div></div><p>&#19979;&#38754;&#21015;&#20986;&#20102;HornetQ&#25152;&#38656;&#35201;&#30340;&#31532;&#19977;&#26041;jar&#25991;&#20214;</p><div class="table"><a name="d0e7706"></a><p class="title"><b>Table&nbsp;32.4.&nbsp;Jar&#25991;&#20214;</b></p><table summary="Jar&#25991;&#20214;" border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Jar&#25991;&#20214;&#21517;</th><th>&#35828;&#26126;</th><th>&#20301;&#32622;</th></tr></thead><tbody><tr><td>hornetq-ra.jar</td><td>HornetQ&#36164;&#28304;&#36866;&#37197;&#22120;&#25991;&#20214;</td><td>deploy/hornetq-ra.rar&#25110;&#30456;&#24212;&#30340;&#20301;&#32622;</td></tr><tr><td>hornetq-core-client.jar</td><td>HornetQ&#26680;&#24515;&#23458;&#25143;&#31867;&#24211;</td><td>&#22312;JBoss&#30340;default/lib&#19979;&#25110;&#32773;&#26159;$JBOSS_HOME/common/lib&#19979;&#12290; </td></tr><tr><td>hornetq-jms-client.jar</td><td>HornetQ&#30340;JMS&#31867;</td><td>&#21516;&#19978;</td></tr><tr><td>netty.jar</td><td>Netty&#31867;&#24211;</td><td>&#21516;&#19978;</td></tr></tbody></table></div></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e7750"></a>32.4.5.&nbsp;&#39640;&#21487;&#33719;&#24471;&#24615;JNDI (HA-JNDI)</h3></div></div><div></div></div><p>&#37319;&#29992;JNDI&#26469;&#26597;&#25214;JMS&#23545;&#35937;&#26102;&#65288;&#38431;&#21015;&#65292;&#35805;&#39064;&#21450;&#36830;&#25509;&#24037;&#21378;&#65289;&#65292;&#20351;&#29992;HA&#65293;JNDI&#21487;&#20197;&#22686;&#21152;&#23481;&#38169;&#30340;&#33021;&#21147;&#12290;&#21363;&#24403;&#20320;&#27491;&#22312;&#20351;&#29992;
            &#30340;JNDI&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#26102;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#20351;&#29992;&#38598;&#32676;&#20013;&#30340;&#20854;&#23427;JNDI&#26381;&#21153;&#22120;&#32487;&#32493;&#24037;&#20316;&#12290;</p><p>HA-JNDI&#26159;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#19968;&#39033;&#26381;&#21153;&#65292;&#23427;&#20026;&#23458;&#25143;&#31471;&#25552;&#20379;JNDI&#26381;&#21153;&#65292;&#23458;&#25143;&#31471;&#26080;&#38656;&#30693;&#36947;JNDI&#20855;&#20307;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;
            &#32454;&#33410;&#12290;&#36825;&#20010;&#26381;&#21153;&#21482;&#26377;&#22312;&#38598;&#32676;&#30340;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#19978;&#25165;&#21487;&#20351;&#29992;&#12290;</p><p>&#35201;&#20351;&#29992;HA&#65293;JNDI&#65292;&#38656;&#35201;&#20351;&#29992;&#19979;&#38754;&#30340;JNDI&#21442;&#25968;&#12290;</p><pre class="programlisting">Hashtable&lt;String, String&gt; jndiParameters = new Hashtable&lt;String, String&gt;();
jndiParameters.put("java.naming.factory.initial", 
    "org.jnp.interfaces.NamingContextFactory");
jndiParameters.put("java.naming.factory.url.pkgs=", 
    "org.jboss.naming:org.jnp.interfaces");

initialContext = new InitialContext(jndiParameters);</pre><p>&#26377;&#20851;HA-JNDI&#26356;&#22810;&#30340;&#20449;&#24687;&#35831;&#21442;&#35265;<a href="http://www.jboss.org/file-access/default/members/jbossas/freezone/docs/Clustering_Guide/5/html/clustering-jndi.html" target="_top">JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#32676;&#25991;&#26723;</a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="xa-recovery"></a>32.4.6.&nbsp;XA&#24674;&#22797;</h3></div></div><div></div></div><p><span class="emphasis"><em>XA&#24674;&#22797;</em></span>&#35299;&#20915;&#30340;&#26159;&#20107;&#21153;&#22312;&#31995;&#32479;&#25110;&#24212;&#29992;&#20986;&#29616;&#25925;&#38556;&#26102;&#30340;&#22788;&#29702;&#12290;&#23427;&#21487;&#20197;&#20445;&#35777;&#22312;&#24212;&#29992;&#36827;&#31243;&#25110;&#20027;&#26426;&#20986;&#29616;&#25925;&#38556;
            &#25110;&#32593;&#32476;&#23849;&#28291;&#31561;&#24773;&#20917;&#19979;&#65292;&#20107;&#21153;&#20869;&#25152;&#26377;&#36164;&#28304;&#30340;&#29366;&#24577;&#30340;&#19968;&#33268;&#24615;&#12290;&#26377;&#20851;XA&#24674;&#22797;&#30340;&#26356;&#22810;&#20449;&#24687;&#35831;&#35265; <a href="http://www.jboss.org/community/wiki/JBossTransactions" target="_top">JBoss
                &#20107;&#21153;</a>&#12290;</p><p>&#24403;HornetQ&#19982;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#38598;&#25104;&#26102;&#65292;&#23427;&#21487;&#20197;&#21033;&#29992;JBoss&#30340;&#20107;&#21153;&#22788;&#29702;&#26469;&#23545;&#28040;&#24687;&#36164;&#28304;&#36827;&#34892;&#24674;&#22797;&#12290;&#22914;&#26524;&#28040;&#24687;&#22788;&#29702;&#21253;&#25324;
            &#22312;&#19968;&#20010;XA&#20107;&#21153;&#20013;&#65292;&#22914;&#26524;&#26381;&#21153;&#22120;&#20986;&#29616;&#25925;&#38556;&#24182;&#37325;&#21551;&#26102;&#65292;&#24674;&#22797;&#31649;&#29702;&#22120;&#23558;&#36127;&#36131;&#24674;&#22797;&#20107;&#21153;&#65292;&#36825;&#26679;&#20854;&#20013;&#30340;&#28040;&#24687;&#35201;&#20040;&#34987;&#25552;&#20132;&#65292;&#35201;&#20040;&#34987;&#22238;&#28378;&#65288;&#21462;
            &#20915;&#20110;&#20107;&#21153;&#30340;&#22788;&#29702;&#20915;&#23450;&#65289;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7778"></a>32.4.6.1.&nbsp;XA&#24674;&#22797;&#30340;&#37197;&#32622;</h4></div></div><div></div></div><p>&#35201;&#24819;HornetQ&#20855;&#26377;XA&#24674;&#22797;&#21151;&#33021;&#65292;&#21017;&#24517;&#39035;&#37197;&#32622;&#24674;&#22797;&#31649;&#29702;&#22120;&#36830;&#25509;&#21040;HornetQ&#24182;&#24674;&#22797;&#20854;&#36164;&#28304;&#12290;&#19979;&#38754;&#30340;&#21442;&#25968;&#24517;&#39035;&#35201;&#21152;&#21040;
                <tt class="literal">conf/jbossts-properties.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">jta</tt>&#37096;&#20998;:</p><pre class="programlisting">
&lt;properties depends="arjuna" name="jta"&gt;
   ...
                     
   &lt;property name="com.arjuna.ats.jta.recovery.XAResourceRecovery.HornetQ1"
                value="org.hornetq.jms.server.recovery.HornetQXAResourceRecovery;[&#36830;&#25509;&#37197;&#32622;]"/&gt;
&lt;/properties&gt;
            </pre><p>&#20854;&#20013;<tt class="literal">[&#36830;&#25509;&#37197;&#32622;]</tt>&#21253;&#25324;&#36830;&#25509;HornetQ&#33410;&#28857;&#25152;&#24517;&#38656;&#30340;&#20449;&#24687;&#12290;
                &#23427;&#30340;&#26684;&#24335;&#26159;<tt class="literal">[&#36830;&#25509;&#24037;&#21378;&#31867;&#21517;],[&#29992;&#25143;&#21517;], [&#23494;&#30721;], [&#36830;&#25509;&#21442;&#25968;]</tt>&#12290; </p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">[&#36830;&#25509;&#24037;&#21378;&#31867;&#21517;]</tt>&#25351;&#30340;&#26159;<tt class="literal">ConnectorFactory</tt>
                        &#30340;&#31867;&#21517;&#65292;&#29992;&#26469;&#36830;&#25509;HornetQ&#26381;&#21153;&#22120;&#12290;&#20854;&#20540;&#21487;&#20197;&#26159;<tt class="literal">org.hornetq.core.remoting.impl.invm.InVMConnectorFactory</tt> &#25110;
                            <tt class="literal">org.hornetq.core.remoting.impl.netty.NettyConnectorFactory</tt></p></li><li><p><tt class="literal">[&#29992;&#25143;&#21517;]</tt>&#26159;&#29992;&#20110;&#21019;&#24314;&#23458;&#25143;&#20250;&#35805;&#30340;&#29992;&#25143;&#21517;&#12290;&#26159;&#21487;&#36873;&#39033;&#12290;</p></li><li><p><tt class="literal">[&#23494;&#30721;]</tt>&#26159;&#21019;&#24314;&#23458;&#25143;&#20250;&#35805;&#26102;&#25152;&#29992;&#30340;&#23494;&#30721;&#12290;&#21482;&#26377;&#22312;&#29992;&#25143;&#21517;&#23384;&#22312;&#26102;&#38656;&#35201;&#12290;</p></li><li><p><tt class="literal">[&#36830;&#25509;&#21442;&#25968;]</tt> &#26159;&#29992;&#36887;&#21495;&#20998;&#38548;&#30340;&#19968;&#20018;&#38190;&#65293;&#20540;&#23545;&#12290;&#23427;&#20204;&#20250;&#20256;&#36882;&#32473;&#36830;&#25509;&#22120;&#24037;&#21378;
                        &#65288;&#21442;&#35265; <a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#65289;&#12290;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>HornetQ&#24517;&#39035;&#26377;&#19968;&#20010;&#19982;<tt class="literal">conf/jbossts-properties.xml</tt>&#20013;&#23450;&#20041;&#30340;&#36830;&#25509;&#22120;&#30456;&#23545;&#24212;&#30340;&#25509;&#21463;&#22120;&#65288;acceptor&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e7836"></a>32.4.6.1.1.&nbsp;&#37197;&#32622;&#21442;&#25968;</h5></div></div><div></div></div><p>&#22914;&#26524;HornetQ&#37197;&#32622;&#20102;&#19968;&#20010;&#40664;&#35748;&#30340;in-vm&#25509;&#21463;&#22120;&#65306;</p><pre class="programlisting">
&lt;acceptor name="in-vm"&gt;
    &lt;factory-class&gt;org.hornetq.core.remoting.impl.invm.InVMAcceptorFactory&lt;/factory-class&gt;
&lt;/acceptor&gt;
                </pre><p>&#30456;&#24212;&#22320;&#22312; <tt class="literal">conf/jbossts-properties.xml</tt>&#25991;&#20214;&#20013;&#65306;</p><pre class="programlisting">
&lt;property name="com.arjuna.ats.jta.recovery.XAResourceRecovery.HORNETQ1"
   value="org.hornetq.jms.server.recovery.HornetQXAResourceRecovery;org.hornetq.core.remoting.impl.invm.InVMConnectorFactory"/&gt;        			
                </pre><p>&#22914;&#26524;&#37197;&#32622;&#20102;&#19968;&#20010;netty&#25509;&#21463;&#22120;&#65292;&#24182;&#19988;&#31471;&#21475;&#19981;&#26159;&#40664;&#35748;&#30340;&#65306;</p><pre class="programlisting">
&lt;acceptor name="netty"&gt;
    &lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory&lt;/factory-class&gt;
    &lt;param key="port" value="8888"/&gt;
&lt;/acceptor&gt;
                </pre><p>&#30456;&#24212;&#30340;&#22312; <tt class="literal">conf/jbossts-properties.xml</tt>&#25991;&#20214;&#20013;&#65306;</p><pre class="programlisting">
&lt;property name="com.arjuna.ats.jta.recovery.XAResourceRecovery.HORNETQ1"
       value="org.hornetq.jms.server.recovery.HornetQXAResourceRecovery;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory, , , port=8888"/&gt;        			                    
                </pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#27880;&#24847;&#22312;&#27809;&#26377;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#26102;&#65292;&#36887;&#21495;&#26159;&#19981;&#33021;&#30465;&#30053;&#30340;&#12290;</p></div><p>&#22914;&#26524;&#24674;&#22797;&#24517;&#39035;&#35201;&#27714;&#26159;<tt class="literal">admin, adminpass</tt>&#65292;&#21017;&#20854;&#37197;&#32622;
                    &#24212;&#20026;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">
                    &lt;property name="com.arjuna.ats.jta.recovery.XAResourceRecovery.HORNETQ1"
                           value="org.hornetq.jms.server.recovery.HornetQXAResourceRecovery;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory, admin, adminpass, port=8888"/&gt;        			                    
                </pre><p>&#25512;&#33616;&#22312;XA&#24674;&#22797;&#20013;&#65292;&#23558;HornetQ&#37197;&#32622;&#19968;&#20010;invm&#25509;&#21463;&#22120;&#65292;&#24182;&#37197;&#32622;&#24674;&#22797;&#31649;&#29702;&#22120;&#20351;&#29992;invm&#36830;&#25509;&#22120;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e7873"></a>32.4.6.2.&nbsp;&#20363;&#23376;</h4></div></div><div></div></div><p>&#21442;&#35265;<a href="#xa-recovery-example" title="11.3.9.&nbsp;XA &#24674;&#22797;&#65288;recovery&#65289;">Section&nbsp;11.3.9, &#8220;XA &#24674;&#22797;&#65288;recovery&#65289;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#26469;&#37197;&#32622;XA&#24674;&#22797;&#20197;&#20415;&#22312;&#26381;&#21153;&#22120;&#23849;&#28291;&#21518;&#24674;&#22797;&#28040;&#24687;&#12290;</p></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="jms-bridge"></a>Chapter&nbsp;33.&nbsp;JMS&#26725;&#65288;Bridge&#65289;</h2></div></div><div></div></div><p>HornetQ&#25552;&#20379;&#20102;JMS&#28040;&#24687;&#26725;&#26381;&#21153;&#12290;</p><p>&#26725;&#30340;&#20316;&#29992;&#26159;&#20174;&#19968;&#20010;&#28040;&#24687;&#28304;&#38431;&#21015;&#25110;&#35805;&#39064;&#65288;topic&#65289;&#25509;&#25910;&#28040;&#24687;&#65292;&#28982;&#21518;&#23558;&#23427;&#20204;&#21457;&#36865;&#21040;&#19968;&#20010;&#30446;&#26631;&#38431;&#21015;&#25110;&#35805;&#39064;&#12290;&#36890;&#24120;&#28304;&#21644;
            &#30446;&#30340;&#19981;&#22312;&#21516;&#19968;&#21488;&#26381;&#21153;&#22120;&#19978;&#12290;</p><p>&#20316;&#20026;&#28040;&#24687;&#28304;&#30340;&#26381;&#21153;&#22120;&#19982;&#30446;&#30340;&#26381;&#21153;&#22120;&#19981;&#24517;&#22312;&#21516;&#19968;&#20010;&#38598;&#32676;&#20869;&#12290;&#36890;&#36807;&#26725;&#30340;&#20316;&#29992;&#65292;&#20004;&#21488;&#26381;&#21153;&#22120;&#21487;&#20197;&#36890;&#36807;&#38750;&#21487;&#38752;&#30340;&#32593;&#32476;&#36830;&#25509;
            &#36215;&#26469;&#65292;&#27604;&#22914;WAN&#12290;</p><p>&#26725;&#21487;&#20197;&#20316;&#20026;&#21333;&#29420;&#30340;&#26381;&#21153;&#37096;&#32626;&#65292;&#25110;&#32773;&#37096;&#32626;&#20110;HornetQ&#21333;&#29420;&#26381;&#21153;&#22120;&#20869;&#65292;&#25110;&#32773;&#37096;&#32626;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#12290;&#28304;&#25110;&#30446;&#30340;&#21487;&#20197;
            &#22312;&#21516;&#19968;&#20010;VM&#20013;&#65292;&#20063;&#21487;&#20197;&#22312;&#20854;&#23427;&#30340;VM&#20013;&#12290;</p><p>&#26725;&#36824;&#21487;&#20197;&#22312;HornetQ&#26381;&#21153;&#22120;&#19982;&#20854;&#23427;JMS 1.1 &#20860;&#23481;&#30340;&#26381;&#21153;&#22120;&#20043;&#38388;&#36827;&#34892;&#28040;&#24687;&#30340;&#20256;&#36882;&#12290;
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#36824;&#35201;&#23558;JMS&#26725;&#19982;&#26680;&#24515;&#26725;&#28151;&#28102;&#12290;JMB&#26725;&#21487;&#20197;&#36830;&#25509;&#20004;&#20010;JMS 1.1&#20860;&#23481;&#30340;&#26381;&#21153;&#22120;&#65292;&#23427;&#20351;&#29992;&#30340;&#26159;JMS&#25509;&#21475;&#12290;
                    &#32780;&#26680;&#24515;&#26725;&#65288;&#22312;<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#20013;&#25551;&#36848;&#65289;&#20351;&#29992;&#26680;&#24515;API&#23558;&#20004;&#20010;HornetQ&#23454;&#20363;&#36830;&#25509;
                    &#36215;&#26469;&#12290;&#26680;&#24515;&#26725;&#30340;&#24615;&#33021;&#36890;&#24120;&#35201;&#27604;JMS&#26725;&#30340;&#24615;&#33021;&#39640;&#65292;&#25152;&#20197;&#23613;&#21487;&#33021;&#20351;&#29992;&#26680;&#24515;&#26725;&#12290;&#21478;&#22806;&#26680;&#24515;&#26725;&#21487;&#20197;&#19981;&#29992;XA
                    &#23601;&#21487;&#20197;&#23454;&#29616;<span class="emphasis"><em>&#19968;&#27425;&#24182;&#21482;&#26377;&#19968;&#27425;</em></span>&#30340;&#28040;&#24687;&#20256;&#36882;&#20445;&#35777;&#12290;</p></div><p>&#26725;&#21487;&#20197;&#36866;&#24403;&#22788;&#29702;&#36830;&#25509;&#25925;&#38556;&#12290;&#24403;&#28304;&#30340;&#36830;&#25509;&#25110;&#30446;&#30340;&#30340;&#36830;&#25509;&#21457;&#29983;&#25925;&#38556;&#26102;&#65292;&#20363;&#22914;&#32593;&#32476;&#25925;&#38556;&#65292;&#26725;&#23558;&#19981;&#26029;&#37325;&#35797;&#36830;&#25509;&#30452;&#21040;&#36830;&#25509;
            &#24674;&#22797;&#20026;&#27490;&#12290;&#24403;&#36830;&#25509;&#24674;&#22797;&#21518;&#65292;&#26725;&#20250;&#32487;&#32493;&#27491;&#24120;&#24037;&#20316;&#12290;</p><p>&#26725;&#36824;&#21487;&#20197;&#26377;&#19968;&#20010;&#21487;&#36873;&#30340;JMS&#36873;&#25321;&#22120;&#65292;&#23427;&#21487;&#20197;&#20351;&#26725;&#21482;&#25509;&#25910;&#36873;&#25321;&#22120;&#36873;&#25321;&#30340;&#28040;&#24687;&#12290;</p><p>&#21487;&#20197;&#37197;&#32622;&#26725;&#20174;&#38431;&#21015;&#36824;&#26159;&#20174;&#35805;&#39064;&#20013;&#25509;&#25910;&#28040;&#24687;&#12290;&#22914;&#26524;&#37197;&#32622;&#25104;&#20174;&#35805;&#39064;&#20013;&#25509;&#25910;&#28040;&#24687;&#65292;&#36824;&#20197;&#35774;&#23450;&#26159;&#20197;&#38750;&#25345;&#20037;&#35746;&#38405;&#30340;&#26041;&#24335;&#25509;&#25910;&#65292;&#36824;&#26159;
            &#20197;&#25345;&#20037;&#35746;&#38405;&#30340;&#26041;&#24335;&#25509;&#25910;&#12290;</p><p>&#36890;&#24120;&#26725;&#26159;&#36890;&#36807;&#19968;&#20010;bean&#37197;&#32622;&#25991;&#20214;&#30001;JBoss Micro Container&#37096;&#32626;&#21040;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#12290;&#19979;&#38754;&#30340;&#23601;&#26159;&#19968;
            &#20010;&#26725;&#30340;bean&#25991;&#20214;&#20363;&#23376;&#12290;&#36825;&#20010;&#26725;&#23558;&#21516;&#19968;&#26381;&#21153;&#22120;&#19978;&#30340;&#20004;&#20010;&#30446;&#26631;&#36830;&#25509;&#36215;&#26469;&#12290;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;deployment xmlns="urn:jboss:bean-deployer:2.0"&gt;

       &lt;bean name="JMSBridge" class="org.hornetq.api.jms.bridge.impl.JMSBridgeImpl"&gt;
           &lt;!-- HornetQ must be started before the bridge --&gt;
           &lt;depends&gt;HornetQServer&lt;/depends&gt;
           &lt;constructor&gt;
               &lt;!-- Source ConnectionFactory Factory --&gt;
               &lt;parameter&gt;
                   &lt;inject bean="SourceCFF"/&gt;
               &lt;/parameter&gt;
               &lt;!-- Target ConnectionFactory Factory --&gt;
               &lt;parameter&gt;
                   &lt;inject bean="TargetCFF"/&gt;
               &lt;/parameter&gt;
               &lt;!-- Source DestinationFactory --&gt;
               &lt;parameter&gt;
                   &lt;inject bean="SourceDestinationFactory"/&gt;
               &lt;/parameter&gt;
               &lt;!-- Target DestinationFactory --&gt;
               &lt;parameter&gt;
                   &lt;inject bean="TargetDestinationFactory"/&gt;
               &lt;/parameter&gt;
               &lt;!-- Source User Name (no username here) --&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Source Password (no password here)--&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Target User Name (no username here)--&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Target Password (no password here)--&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Selector --&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Failure Retry Interval (in ms) --&gt;
               &lt;parameter&gt;5000&lt;/parameter&gt;
               &lt;!-- Max Retries --&gt;
               &lt;parameter&gt;10&lt;/parameter&gt;
               &lt;!-- Quality Of Service --&gt;
               &lt;parameter&gt;ONCE_AND_ONLY_ONCE&lt;/parameter&gt;
               &lt;!-- Max Batch Size --&gt;
               &lt;parameter&gt;1&lt;/parameter&gt;
               &lt;!-- Max Batch Time (-1 means infinite) --&gt;
               &lt;parameter&gt;-1&lt;/parameter&gt;
               &lt;!-- Subscription name (no subscription name here)--&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Client ID  (no client ID here)--&gt;
               &lt;parameter&gt;&lt;null /&gt;&lt;/parameter&gt;
               &lt;!-- Add MessageID In Header --&gt;
               &lt;parameter&gt;true&lt;/parameter&gt;
               &lt;!-- register the JMS Bridge in the AS MBeanServer --&gt;
               &lt;parameter&gt;
                   &lt;inject bean="MBeanServer"/&gt;
               &lt;/parameter&gt;
               &lt;parameter&gt;org.hornetq:service=JMSBridge&lt;/parameter&gt;
             &lt;/constructor&gt;
           &lt;property name="transactionManager"&gt;
               &lt;inject bean="RealTransactionManager"/&gt;
           &lt;/property&gt;
       &lt;/bean&gt;

       &lt;!-- SourceCFF describes the ConnectionFactory used to connect to the 
            source destination --&gt;
       &lt;bean name="SourceCFF" 
            class="org.hornetq.api.jms.bridge.impl.JNDIConnectionFactoryFactory"&gt;
           &lt;constructor&gt;
               &lt;parameter&gt;
                   &lt;inject bean="JNDI" /&gt;
               &lt;/parameter&gt;
               &lt;parameter&gt;/ConnectionFactory&lt;/parameter&gt;
           &lt;/constructor&gt;  
       &lt;/bean&gt;

       &lt;!-- TargetCFF describes the ConnectionFactory used to connect to the 
        target destination --&gt;
       &lt;bean name="TargetCFF" 
            class="org.hornetq.api.jms.bridge.impl.JNDIConnectionFactoryFactory"&gt;
           &lt;constructor&gt;
               &lt;parameter&gt;
                   &lt;inject bean="JNDI" /&gt;
               &lt;/parameter&gt;
               &lt;parameter&gt;/ConnectionFactory&lt;/parameter&gt;
           &lt;/constructor&gt;  
       &lt;/bean&gt;

       &lt;!-- SourceDestinationFactory describes the Destination used as the source --&gt;
       &lt;bean name="SourceDestinationFactory" 
            class="org.hornetq.api.jms.bridge.impl.JNDIDestinationFactory"&gt;
           &lt;constructor&gt;
               &lt;parameter&gt;
                   &lt;inject bean="JNDI" /&gt;
               &lt;/parameter&gt;
               &lt;parameter&gt;/queue/source&lt;/parameter&gt;
           &lt;/constructor&gt;  
       &lt;/bean&gt;

       &lt;!-- TargetDestinationFactory describes the Destination used as the target --&gt;
       &lt;bean name="TargetDestinationFactory" 
            class="org.hornetq.api.jms.bridge.impl.JNDIDestinationFactory"&gt;
           &lt;constructor&gt;
               &lt;parameter&gt;
                   &lt;inject bean="JNDI" /&gt;
               &lt;/parameter&gt;
               &lt;parameter&gt;/queue/target&lt;/parameter&gt;
           &lt;/constructor&gt;  
       &lt;/bean&gt;
       
       &lt;!-- JNDI is a Hashtable containing the JNDI properties required --&gt;
       &lt;!-- to connect to the sources and targets JMS resrouces         --&gt;       
      &lt;bean name="JNDI" class="java.util.Hashtable"&gt;
         &lt;constructor class="java.util.Map"&gt;
            &lt;map class="java.util.Hashtable" keyClass="String"
                                             valueClass="String"&gt;
               &lt;entry&gt;
                  &lt;key&gt;java.naming.factory.initial&lt;/key&gt;
                  &lt;value&gt;org.jnp.interfaces.NamingContextFactory&lt;/value&gt;
               &lt;/entry&gt;
               &lt;entry&gt;
                  &lt;key&gt;java.naming.provider.url&lt;/key&gt;
                  &lt;value&gt;jnp://localhost:1099&lt;/value&gt;
               &lt;/entry&gt;
               &lt;entry&gt;
                  &lt;key&gt;java.naming.factory.url.pkgs&lt;/key&gt;
                  &lt;value&gt;org.jboss.naming:org.jnp.interfaces"&lt;/value&gt;
               &lt;/entry&gt;
               &lt;entry&gt;
                  &lt;key&gt;jnp.timeout&lt;/key&gt;
                  &lt;value&gt;5000&lt;/value&gt;
               &lt;/entry&gt;
               &lt;entry&gt;
                  &lt;key&gt;jnp.sotimeout&lt;/key&gt;
                  &lt;value&gt;5000&lt;/value&gt;
               &lt;/entry&gt;
            &lt;/map&gt;
         &lt;/constructor&gt;
      &lt;/bean&gt;

      &lt;bean name="MBeanServer" class="javax.management.MBeanServer"&gt;
         &lt;constructor factoryClass="org.jboss.mx.util.MBeanServerLocator"
                      factoryMethod="locateJBoss"/&gt;
      &lt;/bean&gt;
&lt;/deployment&gt;</pre><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e7928"></a>33.1.&nbsp;JMS&#26725;&#30340;&#37197;&#32622;&#21442;&#25968;</h2></div></div><div></div></div><p>&#26725;&#30340;&#20027;&#35201;&#30340;bean&#26159;<tt class="literal">JMSBridge</tt>&#12290;&#25152;&#26377;&#30340;&#37197;&#32622;&#21442;&#25968;&#38656;&#35201;&#20256;&#36882;&#32473;&#36825;&#20010;bean&#30340;
                &#26500;&#36896;&#20989;&#25968;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#19981;&#24819;&#25351;&#23450;&#26576;&#20010;&#21442;&#25968;&#30340;&#20540;&#65288;&#20363;&#22914;&#21311;&#21517;&#35748;&#35777;&#25110;&#27809;&#26377;&#36873;&#25321;&#22120;&#65289;&#65292;&#23558;&#35813;&#21442;&#25968;&#35774;&#20026;<tt class="literal">&lt;null
                        /&gt;</tt>&#21363;&#21487;&#12290;</p></div><div class="itemizedlist"><ul type="disc"><li><p>&#28304;&#36830;&#25509;&#24037;&#21378;&#30340;&#24037;&#21378;&#65288;Source ConnectionFactory Factory&#65289;</p><p>&#36825;&#20010;&#21442;&#25968;&#27880;&#20837;&#19968;&#20010;<tt class="literal">SourceCFF</tt>bean&#65288;&#30001;bean&#25991;&#20214;&#23450;&#20041;&#65289;&#12290;&#23427;&#34987;
                        &#29992;&#26469;&#21019;&#24314;<span class="emphasis"><em>&#28304;</em></span>&#30340;<tt class="literal">ConnectionFactory</tt>
                    </p></li><li><p>&#30446;&#26631;&#36830;&#25509;&#24037;&#21378;&#30340;&#24037;&#21378;&#65288;Target ConnectionFactory Factory&#65289;</p><p>&#36825;&#20010;&#21442;&#25968;&#27880;&#20837;&#19968;&#20010;<tt class="literal">TargetCFF</tt>bean&#65288;&#30001;bean&#25991;&#20214;&#23450;&#20041;&#65289;&#12290;&#23427;&#34987;
                        &#29992;&#26469;&#21019;&#24314;<span class="emphasis"><em>&#30446;&#30340;</em></span>&#30340;<tt class="literal">ConnectionFactory</tt>
                    </p></li><li><p>&#28304;&#30446;&#26631;&#24037;&#21378;&#65288;Source DestinationFactory&#65289;</p><p>&#36825;&#20010;&#21442;&#25968;&#27880;&#20837;&#19968;&#20010;<tt class="literal">SourceDestinationFactory</tt>bean&#65288;&#30001;
                        bean&#25991;&#20214;&#23450;&#20041;&#65289;&#12290;&#23427;&#29992;&#26469;&#21019;&#24314;<span class="emphasis"><em>&#28304;</em></span>
                        <tt class="literal">&#30446;&#26631;&#65288;Destination&#65289;</tt>
                    </p></li><li><p>&#30446;&#30340;&#30446;&#26631;&#24037;&#21378;&#65288;Target DestinationFactory&#65289;</p><p>&#36825;&#20010;&#21442;&#25968;&#27880;&#20837;&#19968;&#20010;<tt class="literal">TargetDestinationFactory</tt>bean&#65288;&#30001;
                        bean&#25991;&#20214;&#23450;&#20041;&#65289;&#12290;&#23427;&#29992;&#26469;&#21019;&#24314;<span class="emphasis"><em>&#30446;&#30340;</em></span>
                        <tt class="literal">&#30446;&#26631;&#65288;Destination&#65289;</tt>
                    </p></li><li><p>&#28304;&#29992;&#25143;&#21517;&#65288;Source User Name&#65289;</p><p>&#29992;&#20110;&#21019;&#24314;&#21040;<span class="emphasis"><em>&#28304;</em></span>&#30340;&#36830;&#25509;&#30340;&#29992;&#25143;&#21517;</p></li><li><p>&#28304;&#23494;&#30721;&#65288;Source Password&#65289;</p><p>&#29992;&#20110;&#21019;&#24314;<span class="emphasis"><em>&#28304;</em></span>&#36830;&#25509;&#30340;&#23494;&#30721;</p></li><li><p>&#30446;&#30340;&#29992;&#25143;&#21517;&#65288;Target User Name&#65289;</p><p>&#29992;&#20110;&#21019;&#24314;<span class="emphasis"><em>&#30446;&#30340;</em></span>&#36830;&#25509;&#30340;&#29992;&#25143;&#21517;</p></li><li><p>&#30446;&#30340;&#23494;&#30721;&#65288;Target Password&#65289;</p><p>t&#29992;&#20110;&#21019;&#24314;<span class="emphasis"><em>&#30446;&#30340;</em></span>&#36830;&#25509;&#30340;&#23494;&#30721;</p></li><li><p>&#36873;&#25321;&#22120;&#65288;Selector&#65289;</p><p>&#36825;&#26159;&#19968;&#20010;JMS&#30340;&#36873;&#25321;&#22120;&#34920;&#36798;&#24335;&#65292;&#23427;&#29992;&#20110;&#20174;&#28304;&#30446;&#26631;&#25509;&#25910;&#28040;&#24687;&#12290;&#21482;&#26377;&#19982;&#36873;&#25321;&#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#26725;
                        &#36716;&#21457;&#21040;&#30446;&#30340;&#30446;&#26631;</p><p>&#36873;&#25321;&#22120;&#24517;&#39035;&#31526;&#21512;<a href="http://java.sun.com/j2ee/1.4/docs/api/javax/jms/Message.html" target="_top">JMS
                            &#36873;&#25321;&#22120;&#35821;&#27861;</a></p></li><li><p>&#25925;&#38556;&#37325;&#35797;&#38388;&#38548;&#65288;Failure Retry Interval&#65289;</p><p>&#20195;&#34920;&#24403;&#26725;&#21457;&#29616;&#36830;&#25509;&#25925;&#38556;&#26102;&#22312;&#27599;&#20004;&#27425;&#37325;&#35797;&#36830;&#25509;&#20043;&#38388;&#25152;&#35201;&#31561;&#24453;&#30340;&#26102;&#38388;&#38388;&#38548;&#65292;&#21333;&#20301;&#27627;&#31186;</p></li><li><p>&#26368;&#22823;&#37325;&#35797;&#27425;&#25968;&#65288;Max Retries&#65289;</p><p>&#34920;&#31034;&#26725;&#22312;&#21457;&#29616;&#36830;&#25509;&#25925;&#38556;&#26102;&#25152;&#36827;&#34892;&#30340;&#26368;&#22823;&#37325;&#35797;&#27425;&#25968;&#12290;&#36229;&#36807;&#36825;&#20010;&#27425;&#25968;&#65292;&#26725;&#23601;&#25918;&#24323;&#37325;&#35797;&#12290;
                          <tt class="literal">-1</tt>&#20195;&#34920;&#19968;&#30452;&#37325;&#35797;&#19979;&#21435;</p></li><li><p>&#26381;&#21153;&#36136;&#37327;&#65288;Quality Of Service&#65289;</p><p>&#36825;&#20010;&#21442;&#25968;&#20195;&#34920;&#25152;&#38656;&#35201;&#30340;&#26381;&#21153;&#36136;&#37327;&#27169;&#24335;</p><p>&#26377;&#25928;&#30340;&#20540;&#20026;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">AT_MOST_ONCE</tt></p></li><li><p><tt class="literal">DUPLICATES_OK</tt></p></li><li><p><tt class="literal">ONCE_AND_ONLY_ONCE</tt></p></li></ul></div><p>&#26377;&#20851;&#36825;&#20123;&#27169;&#24335;&#30340;&#35299;&#37322;&#65292;&#21442;&#35265;<a href="#quality-of-service" title="33.4.&nbsp;&#26381;&#21153;&#36136;&#37327;">Section&nbsp;33.4, &#8220;&#26381;&#21153;&#36136;&#37327;&#8221;</a>&#12290;</p></li><li><p>&#26368;&#22823;&#25209;&#37327;&#65288;Max Batch Size&#65289;</p><p>&#34920;&#31034;&#26725;&#19968;&#27425;&#24615;&#20174;&#28304;&#30446;&#26631;&#26368;&#22810;&#25509;&#25910;&#22810;&#23569;&#28040;&#24687;&#65292;&#24182;&#23558;&#23427;&#20204;&#19968;&#27425;&#21457;&#24448;&#30446;&#30340;&#22320;&#12290;&#23427;&#30340;&#20540;&#24517;&#39035;&#26159;
                        <tt class="literal">&gt;= 1</tt>
                    </p></li><li><p>&#26368;&#22823;&#25209;&#26102;&#38388;&#65288;Max Batch Time&#65289;</p><p>&#20195;&#34920;&#26725;&#22312;&#23558;&#19968;&#25209;&#28040;&#24687;&#21457;&#21521;&#30446;&#30340;&#20043;&#21069;&#31561;&#24453;&#30340;&#26368;&#22823;&#27627;&#31186;&#25968;&#12290;&#36825;&#20010;&#26102;&#38388;&#36807;&#21518;&#65292;&#21363;&#20351;&#25509;&#25910;&#30340;&#28040;&#24687;&#25968;&#23567;&#20110;
                        <tt class="literal">MaxBatchSize</tt>&#65292;&#26725;&#20063;&#20250;&#24320;&#22987;&#21521;&#30446;&#30340;&#21457;&#36865;&#28040;&#24687;&#12290;&#23427;&#30340;&#20540;&#24517;&#39035;&#26159;
                        <tt class="literal">-1</tt> &#65288;&#20195;&#34920;&#27704;&#36828;&#31561;&#24453;&#65289;&#25110;<tt class="literal">&gt;= 1</tt>&#12290;</p></li><li><p>&#35746;&#38405;&#21517;&#65288;Subscription Name&#65289;</p><p>&#22914;&#26524;&#28304;&#30340;&#30446;&#26631;&#26159;&#19968;&#20010;&#35805;&#39064;&#65288;topic&#65289;&#65292;&#20320;&#24819;&#20351;&#29992;&#25345;&#20037;&#30340;&#35746;&#38405;&#26469;&#25509;&#25910;&#28040;&#24687;&#30340;&#35805;&#65292;&#36825;&#20010;&#21442;&#25968;&#21487;&#20197;&#25351;&#23450;
                        &#35746;&#38405;&#21517;&#12290;</p></li><li><p>&#23458;&#25143;ID&#65288;Client ID&#65289;</p><p>&#22914;&#26524;&#28304;&#30340;&#30446;&#26631;&#26159;&#19968;&#20010;&#35805;&#39064;&#65288;topic&#65289;&#65292;&#20320;&#24819;&#20351;&#29992;&#25345;&#20037;&#30340;&#35746;&#38405;&#26469;&#25509;&#25910;&#28040;&#24687;&#30340;&#35805;&#65292;&#36825;&#20010;&#21442;&#25968;&#21487;&#20197;&#25351;&#23450;
                        JMS&#30340;&#23458;&#25143;ID&#12290;&#23427;&#29992;&#20110;&#21019;&#24314;&#65295;&#26597;&#25214;&#25345;&#20037;&#35746;&#38405;&#12290;</p></li><li><p>&#22312;&#28040;&#24687;&#22836;&#28155;&#21152;MessageID&#65288;Add MessageID In Header&#65289;</p><p>&#22914;&#26524;&#20540;&#20026;<tt class="literal">true</tt>&#65292;&#21407;&#22987;&#30340;&#28040;&#24687;ID&#22312;&#21457;&#24448;&#30446;&#30340;&#26159;&#22238;&#21040;&#28040;&#24687;&#30340;&#21517;&#20026;<tt class="literal">HORNETQ_BRIDGE_MSG_ID_LIST</tt>&#30340;&#22836;&#20013;&#12290;&#22914;&#26524;&#19968;&#20010;&#28040;&#24687;&#34987;&#26725;&#36716;&#21457;&#20102;&#22810;&#27425;&#65292;
                        &#21017;&#27599;&#27425;&#36716;&#21457;&#30340;&#28040;&#24687;ID&#37117;&#28155;&#21152;&#22312;&#36825;&#20010;&#22836;&#20013;&#12290;&#36825;&#29992;&#20110;&#20998;&#24067;&#24335;&#35831;&#27714;&#65295;&#22238;&#31572;&#30340;&#28040;&#24687;&#27169;&#24335;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#24403;&#25910;&#21040;&#19968;&#20010;&#28040;&#24687;&#26102;&#65292;&#36890;&#36807;&#23427;&#30340;&#30456;&#20851;ID&#65288;coorelation id&#65289;&#21487;&#20197;&#21457;&#36865;&#19968;&#20010;&#22238;&#31572;&#12290;&#36825;&#26679;
                            &#22312;&#28040;&#24687;&#21457;&#36865;&#26041;&#24471;&#21040;&#36825;&#20010;&#22238;&#31572;&#28040;&#24687;&#26102;&#65292;&#23427;&#21487;&#20197;&#19982;&#21407;&#28040;&#24687;&#30456;&#20851;&#32852;&#36215;&#26469;&#12290;</p></div></li><li><p>MBean&#26381;&#21153;&#22120;&#65288;MBean Server&#65289;</p><p>&#35201;&#20351;&#29992;JMX&#31649;&#29702;JMS&#26725;&#65292;&#38656;&#25351;&#23450;JMS&#26725;&#25152;&#35201;&#27880;&#20876;&#30340;MBeanServer&#65288;&#22914;JVM Platform MBeanServer &#25110;
                      JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#30340;MBeanServer&#65289;</p></li><li><p>ObjectName</p><p>&#35774;&#32622;&#20102;MBeanServer&#21518;&#65292;&#20320;&#36824;&#38656;&#35201;&#35774;&#32622;JMS&#26725;MBean&#27880;&#20876;&#29992;&#30340;ObjectName&#65288;&#24517;&#39035;&#26159;&#21807;&#19968;&#30340;&#65289;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8133"></a>33.2.&nbsp;&#28304;&#21644;&#30446;&#30340;&#30340;&#36830;&#25509;&#24037;&#21378;</h2></div></div><div></div></div><p>&#28304;&#24037;&#30446;&#30340;&#30340;&#36830;&#25509;&#24037;&#21378;&#20998;&#21035;&#29992;&#20110;&#21019;&#24314;&#21040;&#28304;&#21644;&#21040;&#30446;&#30340;&#30340;&#36830;&#25509;&#12290;</p><p>&#19978;&#38754;&#30340;&#37197;&#32622;&#20363;&#23376;&#20013;&#20351;&#29992;&#30340;&#26159;HornetQ&#25552;&#20379;&#30340;&#40664;&#35748;&#23454;&#29616;&#12290;&#23427;&#20351;&#29992;JNDI&#26597;&#25214;&#36830;&#25509;&#24037;&#21378;&#12290;&#23545;&#20110;&#20854;&#23427;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;
                &#25110;JMS&#25552;&#20379;&#32773;&#65292;&#38656;&#35201;&#23454;&#29616;&#30456;&#24212;&#30340;&#23454;&#29616;&#65292;&#21363;&#23454;&#29616;<tt class="literal">org.hornetq.jms.bridge.ConnectionFactoryFactory</tt>&#25509;&#21475;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8143"></a>33.3.&nbsp;&#28304;&#21644;&#30446;&#30340;&#30340;&#30446;&#26631;&#24037;&#21378;</h2></div></div><div></div></div><p>&#23427;&#20204;&#29992;&#26469;&#21019;&#24314;&#25110;&#26597;&#25214;&#30456;&#24212;&#30340;&#30446;&#26631;&#12290;</p><p>&#19978;&#38754;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20351;&#29992;&#20102;HornetQ&#30340;&#40664;&#35748;&#23454;&#29616;&#65292;&#20174;JNDI&#20013;&#26597;&#25214;&#30456;&#24212;&#30340;&#23545;&#35937;&#12290;</p><p>&#35201;&#25552;&#20379;&#26032;&#30340;&#23454;&#29616;&#65292;&#21482;&#35201;&#23454;&#29616;&#25509;&#21475;<tt class="literal">org.hornetq.jms.bridge.DestinationFactory</tt>&#21363;&#21487;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="quality-of-service"></a>33.4.&nbsp;&#26381;&#21153;&#36136;&#37327;</h2></div></div><div></div></div><p>&#19979;&#38754;&#32473;&#26159;&#26725;&#30340;&#19977;&#31181;&#26381;&#21153;&#36136;&#37327;&#30340;&#35814;&#32454;&#35828;&#26126;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8160"></a>33.4.1.&nbsp;AT_MOST_ONCE</h3></div></div><div></div></div><p>&#36825;&#31181;QoS&#27169;&#24335;&#34920;&#31034;&#30340;&#26159;&#28040;&#24687;&#26368;&#22810;&#36865;&#36798;&#30446;&#26631;&#19968;&#27425;&#12290;&#22312;&#28040;&#24687;&#21457;&#24448;&#30446;&#30340;&#20043;&#21069;&#65292;&#28040;&#24687;&#23601;&#20250;&#34987;&#36890;&#30693;&#12290;&#22240;&#27492;&#65292;
                    &#22914;&#26524;&#22312;&#28040;&#24687;&#34987;&#28304;&#21024;&#38500;&#20294;&#24182;&#26410;&#21040;&#36798;&#30446;&#30340;&#26102;&#21457;&#29983;&#25925;&#38556;&#65292;&#28040;&#24687;&#26377;&#21487;&#33021;&#20002;&#22833;&#12290;&#25152;&#20197;&#35828;&#28040;&#24687;&#30340;
                    &#21457;&#36865;&#26368;&#22810;&#19968;&#27425;&#12290; </p><p>&#36825;&#20010;&#27169;&#24335;&#36866;&#29992;&#20110;&#25345;&#20037;&#25110;&#38750;&#25345;&#20037;&#30340;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8167"></a>33.4.2.&nbsp;DUPLICATES_OK</h3></div></div><div></div></div><p>&#22312;&#36825;&#20010;QoS&#27169;&#24335;&#19979;&#65292;&#28040;&#24687;&#20174;&#28304;&#25509;&#25910;&#21518;&#20877;&#21457;&#36865;&#21040;&#30446;&#30340;&#65292;&#20043;&#21518;&#25165;&#23545;&#28304;&#36827;&#34892;&#28040;&#24687;&#36890;&#30693;&#12290;&#36825;&#26679;&#22914;&#26524;&#22312;&#21457;&#36865;&#25104;&#21151;&#20043;&#21518;
                    &#28040;&#24687;&#36890;&#30693;&#21069;&#30340;&#26102;&#38388;&#20869;&#21457;&#29983;&#25925;&#38556;&#30340;&#35805;&#65292;&#22312;&#25925;&#38556;&#24674;&#22797;&#26102;&#21516;&#19968;&#20010;&#28040;&#24687;&#21487;&#33021;&#34987;&#20877;&#27425;&#20256;&#36882;&#12290;&#32080;&#26524;&#21487;&#33021;&#26159;&#22312;&#30446;&#30340;&#22788;
                    &#35813;&#28040;&#24687;&#25910;&#21040;&#20102;&#20004;&#27425;&#12290;</p><p>&#36825;&#20010;&#27169;&#24335;&#36866;&#29992;&#20110;&#25345;&#20037;&#25110;&#38750;&#25345;&#20037;&#30340;&#28040;&#24687;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8174"></a>33.4.3.&nbsp;ONCE_AND_ONLY_ONCE</h3></div></div><div></div></div><p>&#36825;&#20010;&#27169;&#24335;&#20445;&#35777;&#28040;&#24687;&#20174;&#28304;&#21457;&#36865;&#21040;&#30446;&#30340;&#19968;&#27425;&#65292;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;&#12290;&#65288;&#26377;&#26102;&#36825;&#20010;&#27169;&#24335;&#21448;&#31216;&#20026;&#8220;&#21482;&#19968;&#27425;&#8221;&#65289;&#12290;&#33509;&#28304;&#19982;&#30446;&#30340;&#22788;&#20110;
                    &#21516;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#20013;&#65292;&#36825;&#20010;&#27169;&#24335;&#36890;&#36807;&#26412;&#22320;&#20107;&#21153;&#26469;&#20445;&#35777;&#28040;&#24687;&#30340;&#21457;&#36865;&#21644;&#36890;&#30693;&#12290;&#22914;&#26524;&#26159;&#22312;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#19978;&#65292;
                    &#21017;&#20250;&#20351;&#29992;&#19968;&#20010;JTA&#30340;&#20107;&#21153;&#23558;&#21457;&#36865;&#21644;&#25509;&#25910;&#21253;&#25324;&#20854;&#20013;&#12290;&#36825;&#37324;&#20351;&#29992;&#30340;JTA&#20107;&#21153;&#26159;JBoss&#30340;&#23454;&#29616;&#65292;&#23427;&#21253;&#21547;&#26377;&#19968;&#20010;
                    &#23436;&#25972;&#30340;&#20107;&#21153;&#24674;&#22797;&#31649;&#29702;&#22120;&#65292;&#25152;&#20197;&#33021;&#25552;&#20379;&#39640;&#24230;&#21487;&#38752;&#30340;&#25345;&#20037;&#24615;&#12290;&#22914;&#26524;&#20351;&#29992;JTA&#21017;&#26725;&#30340;&#25152;&#26377;&#36830;&#25509;&#24037;&#21378;&#24517;&#39035;&#26159;
                    XAConnectionFactory&#12290;&#36825;&#31181;&#27169;&#24335;&#30340;&#25928;&#29575;&#36890;&#24120;&#26159;&#26368;&#20302;&#30340;&#65292;&#22240;&#20026;&#23427;&#38656;&#35201;&#39069;&#22806;&#35760;&#24405;&#20107;&#21153;&#30340;&#26085;&#24535;&#12290;</p><p>&#36825;&#20010;&#27169;&#24335;&#21482;&#36866;&#29992;&#20110;&#25345;&#20037;&#24615;&#28040;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#26576;&#20123;&#24773;&#20917;&#19979;&#21487;&#20197;&#19981;&#20351;&#29992;ONCE_AND_ONLY_ONCE&#27169;&#24335;&#65292;&#32780;&#21516;&#26679;&#21487;&#20197;&#20445;&#35777;&#8220;&#19968;&#27425;&#19988;&#21482;&#19968;&#27425;&#8221;&#30340;&#25928;&#26524;&#12290;
                        &#36825;&#26159;&#36890;&#36807;&#20351;&#29992;DUPLICATES_OK&#27169;&#24335;&#65292;&#21152;&#19978;&#22312;&#30446;&#30340;&#31471;&#24212;&#29992;&#31243;&#24207;&#26469;&#26816;&#27979;&#37325;&#22797;&#30340;&#28040;&#24687;&#65292;&#22914;&#26524;&#26377;&#21017;&#23558;&#20854;&#20002;&#24323;&#12290;
                        &#19968;&#20123;JMS&#26381;&#21153;&#22120;&#26412;&#36523;&#25552;&#20379;&#33258;&#21160;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;&#30340;&#21151;&#33021;&#65292;&#36825;&#26679;&#33410;&#30465;&#20102;&#22312;&#24212;&#29992;&#23618;&#23454;&#29616;&#30340;&#24037;&#20316;&#12290;&#22312;&#24212;&#29992;&#23618;&#24120;&#35265;
                        &#30340;&#23454;&#29616;&#26041;&#27861;&#26159;&#23558;&#25509;&#25910;&#21040;&#30340;&#28040;&#24687;&#30340;ID&#23384;&#25918;&#21040;&#32531;&#23384;&#25991;&#20214;&#20013;&#65292;&#28982;&#21518;&#19982;&#27599;&#20010;&#26032;&#21040;&#30340;&#28040;&#24687;&#36827;&#34892;&#23545;&#27604;&#12290;&#36825;&#31181;&#26041;&#24335;
                        &#21487;&#33021;&#22312;&#26576;&#27573;&#26102;&#38388;&#20869;&#26377;&#25928;&#65292;&#25152;&#20197;&#23427;&#19981;&#22914;ONCE_AND_ONLY_ONCE&#37027;&#26679;&#20005;&#26684;&#65292;&#23427;&#35270;&#20855;&#20307;&#24773;&#20917;&#20063;&#21487;&#33021;&#26159;&#19968;&#20010;
                        &#19981;&#38169;&#30340;&#36873;&#25321;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8184"></a>33.4.4.&nbsp;JMS bridge&#20013;&#30340;&#36229;&#26102;&#38382;&#39064;</h3></div></div><div></div></div><p>&#26377;&#26102;&#20505;&#30446;&#26631;&#26381;&#21153;&#22120;&#25110;&#28304;&#26381;&#21153;&#22120;&#20250;&#36830;&#25509;&#19981;&#19978;&#65292;&#36825;&#37324;&#26725;&#23601;&#20250;&#23581;&#35797;&#37325;&#26032;&#36830;&#25509;&#12290;&#37325;&#26032;&#36830;&#25509;&#30340;&#27425;&#25968;&#30001;<tt class="literal">Max Retries</tt>
              &#21442;&#25968;&#20915;&#23450;&#65292;&#20004;&#27425;&#37325;&#26032;&#36830;&#25509;&#30340;&#26102;&#38388;&#38388;&#38548;&#30001;<tt class="literal">Failure Retry Interval</tt>&#23450;&#20041;&#12290;</p><p>&#22312;&#37325;&#26032;&#23581;&#35797;&#26102;&#20250;&#36827;&#34892;JNDI&#30340;&#26597;&#25214;&#12290;HornetQ&#30340;JNDI&#20351;&#29992;&#30340;&#26159;JBoss&#30340;&#23454;&#29616;&#65292;&#22914;&#26524;&#22312;JNDI&#26597;&#25214;&#36807;&#31243;&#20013;&#32593;&#32476;&#20986;&#29616;&#25925;&#38556;&#65292;
              &#26597;&#25214;&#30340;&#25805;&#20316;&#21487;&#33021;&#25346;&#36215;&#12290;&#20026;&#20102;&#36991;&#20813;&#36825;&#31181;&#24773;&#20917;&#30340;&#21457;&#29983;&#65292;&#25105;&#20204;&#21487;&#20197;&#20026;JNDI&#35774;&#32622;&#36866;&#24403;&#30340;&#36229;&#26102;&#12290;&#36825;&#26159;&#36890;&#36807;&#23450;&#20041;&#21021;&#22987;&#19978;&#19979;&#25991;&#30340;
              <tt class="literal">jnp.timeout</tt>&#21442;&#25968;&#21644;<tt class="literal">jnp.sotimeout</tt>&#21442;&#25968;&#26469;
              &#23454;&#29616;&#30340;&#12290;&#31532;&#19968;&#20010;&#21442;&#25968;&#23450;&#20041;&#20102;&#21021;&#22987;&#36830;&#25509;&#30340;&#36229;&#26102;&#65292;&#31532;&#20108;&#20010;&#21442;&#25968;&#23450;&#20041;&#30340;&#26159;&#22871;&#25509;&#23383;&#30340;&#35835;&#21462;&#36229;&#26102;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#19968;&#26086;JNDI&#36830;&#25509;&#25104;&#21151;&#65292;&#25152;&#26377;&#35843;&#29992;&#37117;&#26159;&#36890;&#36807;RMI&#23436;&#25104;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;&#25511;&#21046;RMI&#36830;&#25509;&#30340;&#36229;&#26102;&#65292;&#20320;&#38656;&#35201;&#23450;&#20041;&#30456;&#24212;&#30340;&#31995;&#32479;&#21464;&#37327;&#12290;
                 JBoss&#20351;&#29992;Sun&#30340;RMI&#23454;&#29616;&#65292;&#23427;&#30340;&#25511;&#21046;&#21442;&#25968;&#21487;&#20197;&#22312;<a href="http://java.sun.com/j2se/1.5.0/docs/guide/rmi/sunrmiproperties.html" target="_top">&#36825;&#37324;</a>&#25214;&#21040;&#12290;
                 &#40664;&#35748;&#30340;&#36830;&#25509;&#36229;&#26102;&#26159;10&#31186;&#65292;&#40664;&#35748;&#30340;&#35835;&#36229;&#26102;&#26159;18&#31186;&#12290;</p></div><p>&#22914;&#26524;&#20320;&#20351;&#29992;&#33258;&#24049;&#30340;&#23454;&#29616;&#26469;&#26597;&#25214;JMS&#36164;&#28304;&#65292;&#20320;&#38656;&#35201;&#27880;&#24847;&#36229;&#26102;&#38382;&#39064;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e8211"></a>33.4.5.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.javaee.jms-bridge" title="11.3.5.&nbsp;JMS &#26725;&#65288;Bridge&#65289;">Section&nbsp;11.3.5, &#8220;JMS &#26725;&#65288;Bridge&#65289;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#37197;&#32622;&#24182;&#20351;&#29992;
                    JMS&#26725;&#20174;&#19968;&#22788;&#30446;&#26631;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#21478;&#19968;&#20010;&#30446;&#26631;&#12290;</p><p>&#20851;&#20110;&#22914;&#20309;&#22312;&#20004;&#20010;&#21333;&#29420;HornetQ&#26381;&#21153;&#22120;&#38388;&#20351;&#29992;&#26725;&#30340;&#20363;&#23376;&#65292;&#35831;&#21442;&#35265;<a href="#examples.jms.jms-bridge" title="11.1.20.&nbsp;JMS&#26725;&#65288;Bridge&#65289;">Section&nbsp;11.1.20, &#8220;JMS&#26725;&#65288;Bridge&#65289;&#8221;</a>&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="client-reconnection"></a>Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</h2></div></div><div></div></div><p>&#36890;&#36807;&#37197;&#32622;&#65292;HornetQ&#30340;&#23458;&#25143;&#31471;&#22312;&#19982;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#21487;&#20197;&#33258;&#21160;&#22320;&#37325;&#26032;&#24314;&#31435;&#36830;&#25509;&#24182;&#24674;&#22797;&#19982;&#26381;&#21153;&#22120;&#30340;&#36890;&#36805;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8244"></a>34.1.&nbsp;100%&#36879;&#26126;&#30340;&#20250;&#35805;&#24674;&#22797;&#65288;re-attachment&#65289;</h2></div></div><div></div></div><p>&#22914;&#26524;&#32593;&#32476;&#20986;&#29616;&#26242;&#26102;&#24615;&#36830;&#25509;&#25925;&#38556;&#65292;&#24182;&#19988;&#26381;&#21153;&#22120;&#27809;&#26377;&#37325;&#21551;&#30340;&#24773;&#20917;&#19979;&#65292;&#24403;&#21069;&#30340;&#20250;&#35805;&#36824;&#20250;&#23384;&#22312;&#26381;&#21153;&#22120;&#20013;&#65292;&#20854;&#29366;&#24577;&#22914;&#21516;&#23458;&#25143;&#31471;
            &#27809;&#26377;&#26029;&#24320;&#36229;&#36807;&#36830;&#25509;TTL<a href="#connection-ttl" title="Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;">Chapter&nbsp;17, <i>&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;</i></a>&#26102;&#38388;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#24403;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19978;&#26381;&#21153;&#22120;&#21518;&#65292;HornetQ&#33258;&#21160;&#23558;&#23458;&#25143;&#31471;&#21644;&#20250;&#35805;&#19982;&#26381;&#21153;&#22120;&#31471;&#30340;&#20250;&#35805;&#37325;&#26032;&#36830;&#25509;&#36215;&#26469;&#12290;&#25972;&#20010;&#36807;&#31243;
            &#23545;&#20110;&#23458;&#25143;&#31471;&#26159;&#23436;&#20840;&#36879;&#26126;&#30340;&#65292;&#22312;&#23458;&#25143;&#31471;&#23601;&#22909;&#20687;&#20160;&#20040;&#37117;&#27809;&#26377;&#21457;&#29983;&#19968;&#26679;&#12290;</p><p>&#20855;&#20307;&#24037;&#20316;&#21407;&#29702;&#22914;&#19979;&#65306;</p><p>&#23458;&#25143;&#31471;&#20877;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;&#21629;&#20196;&#26102;&#65292;&#23427;&#23558;&#27599;&#20010;&#21629;&#20196;&#20445;&#23384;&#21040;&#20869;&#23384;&#30340;&#19968;&#22359;&#32531;&#23384;&#20013;&#12290;&#24403;&#36830;&#25509;&#20986;&#29616;&#25925;&#38556;&#26102;&#23458;&#25143;&#31471;&#20250;&#23581;&#35797;&#19982;&#35813;&#26381;&#21153;
            &#22120;&#24674;&#22797;&#20250;&#35805;&#12290;&#20570;&#20026;&#24674;&#22797;&#21327;&#35758;&#30340;&#19968;&#37096;&#20998;&#65292;&#26381;&#21153;&#22120;&#22312;&#20250;&#35805;&#24674;&#22797;&#26102;&#36890;&#30693;&#23458;&#25143;&#31471;&#26368;&#21518;&#19968;&#20010;&#25104;&#21151;&#25509;&#25910;&#30340;&#21629;&#20196;id&#12290;</p><p>&#26681;&#25454;&#36825;&#20010;&#21629;&#20196;id&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#21028;&#26029;&#23427;&#30340;&#32531;&#23384;&#20013;&#26159;&#21542;&#26377;&#21629;&#20196;&#36824;&#26410;&#34987;&#26381;&#21153;&#22120;&#25104;&#21151;&#25509;&#25910;&#12290;&#22914;&#26524;&#26377;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#37325;&#26032;&#21457;&#36865;
            &#36825;&#20123;&#21629;&#20196;&#12290;</p><p>&#32531;&#23384;&#30340;&#22823;&#23567;&#30001;<tt class="literal">ConfirmationWindowSize</tt>&#21442;&#25968;&#20915;&#23450;&#12290;&#24403;&#26381;&#21153;&#22120;&#25104;&#21151;&#25509;&#25910;&#20102;
            <tt class="literal">ConfirmationWindowSize</tt>&#23383;&#33410;&#30340;&#21629;&#20196;&#26102;&#65292;&#20250;&#21521;&#23458;&#25143;&#31471;&#21457;&#36865;&#19968;&#20010;&#21629;&#20196;&#30830;&#35748;&#65292;&#20197;&#20351;&#23458;&#25143;&#31471;
            &#21450;&#26102;&#28165;&#38500;&#32531;&#23384;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;JMS&#26381;&#21153;&#65292;&#24182;&#19988;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#26159;&#27880;&#20876;&#21040;JNDI&#30340;&#35805;&#65292;&#30456;&#24212;&#30340;&#21442;&#25968;&#26159;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">confirmation-window-size</tt>&#39033;&#12290;&#22914;&#26524;&#20320;&#24182;&#19981;&#23558;JMS&#36830;&#25509;&#24037;&#21378;&#27880;&#20876;&#21040;JNDI&#65292;&#21017;&#20320;&#38656;&#35201;&#22312;
            <tt class="literal">HornetQConnectionFactory</tt>&#19978;&#20351;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;&#30452;&#25509;&#35774;&#32622;&#35813;&#21442;&#25968;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#26381;&#21153;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#19978;&#30452;&#25509;&#35774;&#32622;&#35813;&#21442;&#25968;&#12290;</p><p>&#21442;&#25968;&#30340;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;</p><p>&#22914;&#26524;&#35813;&#21442;&#25968;&#26159;&#20540;&#35774;&#20026;<tt class="literal">-1</tt>&#65292;&#21017;&#20851;&#38381;&#32531;&#23384;&#65292;&#21363;&#20851;&#38381;&#20102;&#37325;&#26032;&#24674;&#22797;&#21151;&#33021;&#65292;&#36843;&#20351;&#36827;&#34892;&#37325;&#26032;&#36830;&#25509;&#12290;&#40664;&#35748;
              &#20540;&#26159;<tt class="literal">-1</tt>&#65288;&#34920;&#31034;&#27809;&#26377;&#33258;&#21160;&#24674;&#22797;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8293"></a>34.2.&nbsp;&#20250;&#35805;&#37325;&#26032;&#36830;&#25509;</h2></div></div><div></div></div><p>&#26377;&#26102;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#21518;&#36827;&#34892;&#20102;&#37325;&#21551;&#12290;&#36825;&#26102;&#26381;&#21153;&#22120;&#23558;&#20002;&#22833;&#25152;&#26377;&#24403;&#21069;&#30340;&#20250;&#35805;&#65292;&#19978;&#38754;&#25152;&#36848;&#30340;&#20250;&#35805;&#24674;&#22797;&#23601;&#19981;&#33021;&#20570;&#21040;&#23436;&#20840;&#36879;&#26126;&#20102;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;HornetQ&#33258;&#21160;&#22320;&#37325;&#26032;&#24314;&#31435;&#36830;&#25509;&#24182;<span class="italic">&#37325;&#26032;&#21019;&#24314;</span>&#20250;&#35805;
            &#21644;&#25509;&#25910;&#32773;&#12290;&#36825;&#19968;&#36807;&#31243;&#19982;&#21521;&#22791;&#20221;&#26381;&#21153;&#22120;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#65288;failover&#65289;&#23436;&#20840;&#19968;&#26679;&#12290;</p><p>&#23458;&#25143;&#37325;&#26032;&#36830;&#25509;&#30340;&#21151;&#33021;&#36824;&#29992;&#22312;&#20854;&#23427;&#19968;&#20123;&#27169;&#22359;&#19978;&#65292;&#22914;&#26680;&#24515;&#26725;&#65292;&#20197;&#20351;&#23427;&#20204;&#33021;&#22815;&#37325;&#26032;&#36830;&#25509;&#21040;&#30446;&#26631;&#26381;&#21153;&#22120;&#19978;&#12290;</p><p>&#35201;&#20840;&#38754;&#29702;&#35299;&#20107;&#21153;&#24615;&#20250;&#35805;&#21644;&#38750;&#20107;&#21153;&#24615;&#20250;&#35805;&#22312;&#22833;&#25928;&#22791;&#25588;&#65295;&#37325;&#36830;&#25509;&#24773;&#20917;&#19979;&#30340;&#32454;&#33410;&#65292;&#20197;&#21450;&#22914;&#20309;&#20445;&#35777;<span class="italic">
            &#19968;&#27425;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;</span>&#30340;&#28040;&#24687;&#20256;&#36882;&#65292;&#35831;&#21442;&#35265;<a href="#ha.automatic.failover" title="39.2.1.&nbsp;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;">Section&nbsp;39.2.1, &#8220;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;&#8221;</a>&#30340;&#26377;&#20851;&#20869;&#23481;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8312"></a>34.3.&nbsp;&#37325;&#26032;&#36830;&#25509;&#65295;&#20250;&#35805;&#24674;&#22797;&#30340;&#37197;&#32622;&#21442;&#25968;</h2></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#23458;&#25143;&#31471;&#29992;&#20110;&#37325;&#26032;&#36830;&#25509;&#30340;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">retry-interval</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#20915;&#23450;&#20102;&#20004;&#27425;&#37325;&#26032;&#36830;&#25509;&#23581;&#35797;&#38388;&#38548;&#30340;&#26102;&#38388;&#12290;&#21333;&#20301;
                    &#26159;&#27627;&#31186;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">2000</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">retry-interval-multiplier</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#34920;&#31034;&#19979;&#19968;&#27425;&#37325;&#35797;&#26102;&#38388;&#38388;&#38548;&#30340;
                    &#31995;&#25968;&#12290;&#21363;&#19979;&#19968;&#27425;&#37325;&#35797;&#30340;&#26102;&#38388;&#38388;&#38548;&#26159;&#26412;&#27425;&#26102;&#38388;&#38388;&#38548;&#20056;&#20197;&#35813;&#21442;&#25968;&#12290;</p><p>&#36825;&#26679;&#21487;&#20197;&#23454;&#29616;&#37325;&#35797;&#38388;&#38548;&#30340;<span class="emphasis"><em>&#25351;&#25968;&#24310;&#36831;&#65288;exponential backoff&#65289;</em></span>&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><p>&#20551;&#35774;<tt class="literal">retry-interval</tt>&#20026;<tt class="literal">1000</tt> ms&#65292;&#24182;&#19988;&#25105;&#20204;
                    &#23558;<tt class="literal">retry-interval-multiplier</tt>&#35774;&#20026;<tt class="literal">2.0</tt>&#65292;&#22914;&#26524;
                    &#31532;&#19968;&#27425;&#23581;&#35797;&#22833;&#36133;&#65292;&#21017;&#31561;&#24453;<tt class="literal">1000</tt>&#27627;&#31186;&#21518;&#36827;&#34892;&#31532;&#20108;&#27425;&#37325;&#35797;&#65292;&#22914;&#26524;&#20877;&#22833;&#36133;&#65292;&#21017;&#27599;&#19977;&#27425;&#37325;
                    &#35797;&#35201;&#22312;<tt class="literal">2000</tt>&#27627;&#31186;&#21518;&#36827;&#34892;&#65292;&#31532;&#22235;&#27425;&#35201;&#31561;&#24453;<tt class="literal">4000</tt>&#27627;&#31186;&#65292;
                    &#20197;&#27492;&#31867;&#25512;&#12290;</p><p>&#40664;&#35748;&#20540;&#26159;<tt class="literal">1.0</tt>&#65292;&#34920;&#31034;&#27599;&#27425;&#37325;&#35797;&#38388;&#38548;&#30456;&#21516;&#30340;&#26102;&#38388;&#12290;</p></li><li><p><tt class="literal">max-retry-interval</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#20915;&#23450;&#20102;&#37325;&#35797;&#38388;&#30340;&#26368;&#22823;&#26102;&#38388;&#38388;&#38548;&#12290;
                    &#20351;&#29992;<tt class="literal">retry-interval-multiplier</tt>&#21487;&#20197;&#20351;&#37325;&#35797;&#30340;&#26102;&#38388;&#38388;&#38548;&#20197;&#25351;&#25968;&#32423;&#22686;&#21152;&#12290;
                    &#26377;&#21487;&#33021;&#36896;&#25104;&#26102;&#38388;&#38388;&#38548;&#22686;&#21152;&#21040;&#19968;&#20010;&#38750;&#24120;&#22823;&#30340;&#25968;&#20540;&#12290;&#36890;&#36807;&#35774;&#32622;&#19968;&#20010;&#26368;&#22823;&#20540;&#21487;&#23545;&#20854;&#22686;&#38271;&#36827;&#34892;&#38480;&#21046;&#12290;&#40664;&#35748;
                    &#20540;&#26159;<tt class="literal">2000</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">reconnect-attempts</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#34920;&#31034;&#35201;&#36827;&#34892;&#22810;&#23569;&#37325;&#35797;&#21518;&#25165;&#25918;&#24323;
                    &#24182;&#36864;&#20986;&#12290;<tt class="literal">-1</tt>&#34920;&#31034;&#36827;&#34892;&#26080;&#38480;&#27425;&#37325;&#35797;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">0</tt>&#12290;</p></li></ul></div><p>&#22914;&#26524;&#20351;&#29992;JMS&#24182;&#19988;&#23558;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#32465;&#23450;&#21040;JNDI&#26381;&#21153;&#20013;&#65292;&#21017;&#38656;&#35201;&#22312;<tt class="literal">hornetq-jms.xml</tt>
            &#25991;&#20214;&#20013;&#23545;&#36825;&#20123;&#21442;&#25968;&#36827;&#34892;&#37197;&#32622;&#65292;&#22914;&#19979;&#20363;&#25152;&#31034;&#65306;</p><pre class="programlisting">
&lt;connection-factory name="ConnectionFactory"&gt;
&lt;connectors&gt;
   &lt;connector-ref connector-name="netty"/&gt;
&lt;/connectors&gt;
&lt;entries&gt;
   &lt;entry name="ConnectionFactory"/&gt;
   &lt;entry name="XAConnectionFactory"/&gt;
&lt;/entries&gt;
&lt;retry-interval&gt;1000&lt;/retry-interval&gt;
&lt;retry-interval-multiplier&gt;1.5&lt;/retry-interval-multiplier&gt;
&lt;max-retry-interval&gt;60000&lt;/max-retry-interval&gt;
&lt;reconnect-attempts&gt;1000&lt;/reconnect-attempts&gt;
&lt;/connection-factory&gt;          
    </pre><p>&#22914;&#26524;&#20351;&#29992;JMS&#20294;&#26159;&#30452;&#25509;&#23454;&#20363;&#21270;JMS&#36830;&#25509;&#24037;&#21378;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#36866;&#24403;&#30340;&#26041;&#27861;&#22312; <tt class="literal">HornetQConnectionFactory</tt> &#23545;&#35937;&#19978;&#30452;&#25509;&#35774;&#32622;&#36825;&#20123;&#21442;&#25968;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#30452;&#25509;&#21019;&#24314; <tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#65292;&#21017;&#29992;&#23427;&#30340;&#36866;&#24403;&#30340;&#26041;&#27861;&#21487;&#20197;&#35774;&#32622;&#36825;&#20123;&#21442;&#25968;&#12290;</p><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#21518;&#21457;&#29616;&#20250;&#35805;&#24050;&#32463;&#20002;&#22833;&#65288;&#22914;&#26381;&#21153;&#22120;&#37325;&#21551;&#25110;&#36229;&#26102;&#65289;&#65292;&#21017;&#26080;&#27861;&#23436;&#25104;&#24674;&#22797;&#12290;&#22914;&#26524;&#22312;&#36830;&#25509;&#19978;&#25110;&#20250;&#35805;&#19978;&#27880;&#20876;&#20102;
              <tt class="literal">ExceptionListener</tt>&#25110;<tt class="literal">FailureListener</tt>&#65292;
              &#23427;&#20204;&#23558;&#20250;&#34987;&#36890;&#30693;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="client-reconnection.exceptionlistener"></a>34.4.&nbsp;ExceptionListeners and SessionFailureListeners</h2></div></div><div></div></div><p>&#35831;&#27880;&#24847;&#24403;&#23458;&#25143;&#31471;&#36827;&#34892;&#37325;&#26032;&#36830;&#25509;&#25110;&#24674;&#22797;&#20250;&#35805;&#26102;&#65292;&#27880;&#20876;&#30340;JMS <tt class="literal">ExceptionListener</tt> &#25110;&#26680;&#24515;&#25509;&#21475;&#30340; <tt class="literal">SessionFailureListener</tt>
             &#23558;&#20250;&#34987;&#35843;&#29992;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="diverts"></a>Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</h2></div></div><div></div></div><p>&#22312;HornetQ&#20013;&#21487;&#20197;&#37197;&#32622;&#19968;&#20123;&#31216;&#20026;&#36716;&#21457;&#22120;&#65288;<span class="emphasis"><em>diverts</em></span>&#65289;&#30340;&#23545;&#35937;&#12290;</p><p>&#36716;&#21457;&#22120;&#21487;&#20197;&#23558;&#36335;&#30001;&#21040;&#19968;&#20010;&#22320;&#22336;&#30340;&#28040;&#24687;&#36879;&#26126;&#22320;&#36716;&#21457;&#21040;&#20854;&#23427;&#30340;&#22320;&#22336;&#21435;&#65292;&#19981;&#38656;&#35201;&#23458;&#25143;&#31471;&#30340;&#21442;&#19982;&#12290;</p><p>&#36716;&#21457;&#22120;&#21487;&#20197;&#26159;<span class="emphasis"><em>&#21807;&#19968;&#65288;exclusive&#65289;</em></span>&#30340;&#65292;&#21363;&#28040;&#24687;&#21482;&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#65292;&#19981;&#21457;&#21040;&#21407;
        &#26469;&#30340;&#22320;&#22336;&#65307;&#20063;&#21487;&#20197;&#26159;<span class="emphasis"><em>&#19981;&#21807;&#19968;&#65288;non-exclusive&#65289;</em></span>&#30340;&#65292;&#21363;&#28040;&#24687;&#22312;&#21457;&#24448;&#21407;&#26377;&#22320;&#22336;&#30340;
        &#21516;&#26102;&#65292;&#23427;&#30340;&#19968;&#20010;<span class="emphasis"><em>&#25335;&#36125;</em></span>&#34987;&#21457;&#24448;&#26032;&#30340;&#22320;&#22336;&#12290;&#19981;&#21807;&#19968;&#30340;&#36716;&#21457;&#22120;&#21487;&#20197;&#22312;&#24212;&#29992;&#20013;&#23558;&#28040;&#24687;&#36827;&#34892;
        <span class="emphasis"><em>&#20998;&#27969;&#65288;splitting&#65289;</em></span>&#12290;&#27604;&#22914;&#22312;&#19968;&#20010;&#35746;&#21333;&#31995;&#32479;&#20013;&#23427;&#21487;&#20197;&#29992;&#20110;&#30417;&#35270;&#21457;&#24448;&#35746;&#21333;&#38431;&#21015;&#20013;
        &#30340;&#27599;&#20010;&#35746;&#21333;&#28040;&#24687;&#12290;</p><p>&#36716;&#21457;&#22120;&#36824;&#21487;&#20197;&#24102;&#19968;&#20010;&#21487;&#36873;&#30340;&#28040;&#24687;&#36873;&#25321;&#22120;&#12290;&#21482;&#26377;&#34987;&#36873;&#25321;&#22120;&#36873;&#25321;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#36716;&#21457;&#12290;</p><p>&#36716;&#21457;&#22120;&#36824;&#21487;&#20197;&#24102;&#26377;&#19968;&#20010;<tt class="literal">&#36716;&#25442;&#22120;&#65288;Transformer&#65289;</tt>&#12290;&#23427;&#21487;&#20197;&#23558;&#28040;&#24687;&#36827;&#34892;&#36716;&#25442;&#12290;</p><p>&#36716;&#21457;&#22120;&#21482;&#22312;&#21516;&#19968;&#20010;&#26381;&#21153;&#22120;&#20013;&#30340;&#22320;&#22336;&#38388;&#36827;&#34892;&#36716;&#21457;&#12290;&#22914;&#26524;&#35201;&#21521;&#21478;&#22806;&#26381;&#21153;&#22120;&#20013;&#30340;&#22320;&#22336;&#36827;&#34892;&#36716;&#21457;&#65292;&#21487;&#20197;&#37319;&#29992;&#36716;&#21457;&#22120;&#19982;&#26725;&#37197;&#21512;
        &#26469;&#23454;&#29616;&#12290;&#20808;&#23558;&#28040;&#24687;&#36890;&#36807;&#36716;&#21457;&#22120;&#36716;&#21457;&#21040;&#19968;&#20010;&#23384;&#20648;&#19982;&#36716;&#21457;&#30340;&#38431;&#21015;&#20013;&#65292;&#20877;&#30001;&#19968;&#20010;&#26725;&#23558;&#36825;&#20010;&#38431;&#21015;&#30340;&#28040;&#24687;&#36716;&#21457;&#21040;&#36828;&#31243;&#26381;&#21153;&#22120;&#30340;&#30446;&#30340;
        &#22320;&#22336;&#20013;&#12290;</p><p>&#30001;&#36716;&#21457;&#22120;&#19982;&#26725;&#36827;&#34892;&#37197;&#21512;&#21487;&#20197;&#32452;&#25104;&#22797;&#26434;&#30340;&#36335;&#30001;&#31995;&#32479;&#12290;&#22312;&#26381;&#21153;&#22120;&#20013;&#30001;&#19968;&#32452;&#36716;&#21457;&#22120;&#21487;&#20197;&#24418;&#25104;&#19968;&#20010;&#28040;&#24687;&#36335;&#30001;&#34920;&#12290;&#22914;&#26524;&#21152;&#19978;&#26725;&#65292;&#23601;
        &#21487;&#20197;&#36827;&#19968;&#27493;&#24418;&#25104;&#19968;&#20010;&#20998;&#24067;&#24335;&#30340;&#21487;&#38752;&#30340;&#28040;&#24687;&#36335;&#30001;&#32593;&#12290;</p><p>&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#23450;&#20041;&#12290;&#21487;&#20197;&#37197;&#32622;&#38646;&#20010;&#25110;&#22810;&#20010;&#36716;&#21457;&#22120;&#12290;</p><p>&#21442;&#35265;&#36716;&#21457;&#22120;&#30340;&#20363;&#23376;<a href="#divert-example" title="11.1.13.&nbsp;&#36716;&#31227;&#65288;Divert&#65289;">Section&nbsp;11.1.13, &#8220;&#36716;&#31227;&#65288;Divert&#65289;&#8221;</a>&#65292;&#23427;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;&#19982;&#20351;&#29992;&#36716;&#21457;&#22120;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20123;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#20363;&#23376;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8487"></a>35.1.&nbsp;&#21807;&#19968;&#24335;&#36716;&#21457;&#22120;</h2></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#21807;&#19968;&#24335;&#36716;&#21457;&#22120;&#30340;&#20363;&#23376;&#12290;&#23427;&#23558;&#25152;&#26377;&#31526;&#21512;&#26465;&#20214;&#30340;&#28040;&#24687;&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#65292;&#32780;&#26087;&#30340;&#22320;&#22336;&#23558;&#19981;&#33021;&#24471;&#21040;&#36825;&#20123;&#28040;&#24687;&#12290;</p><p>&#20197;&#19979;&#37197;&#32622;&#26469;&#33258;&#20110;divert&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;divert name="prices-divert"&gt;                  
    &lt;address&gt;jms.topic.priceUpdates&lt;/address&gt;
    &lt;forwarding-address&gt;jms.queue.priceForwarding&lt;/forwarding-address&gt;    
    &lt;filter string="office='New York'"/&gt;
    &lt;transformer-class-name&gt;
        org.hornetq.jms.example.AddForwardingTimeTransformer
    &lt;/transformer-class-name&gt;     
    &lt;exclusive&gt;true&lt;/exclusive&gt;
&lt;/divert&gt;                        
        </pre><p>&#22312;&#36825;&#37324;&#25105;&#20204;&#23450;&#20041;&#20102;&#19968;&#30456;&#21517;&#20026;&#8220;<tt class="literal">prices-divert</tt>&#8221;&#30340;&#36716;&#21457;&#22120;&#65292;&#23427;&#23558;&#21457;&#24448;
            &#8220;<tt class="literal">jms.topic.priceUpdates</tt>&#8221;&#65288;&#23545;&#24212;JMS&#35805;&#39064;<tt class="literal">priceUpdates</tt>&#65289;&#30340;&#28040;&#24687;&#36716;&#21521;&#21478;&#19968;&#20010;&#26412;&#22320;&#22320;&#22336;&#8220;<tt class="literal">jms.queue.priceForwarding</tt>&#8221;&#65288;&#23545;&#24212;JMS&#38431;&#21015;
                <tt class="literal">priceForwarding</tt>&#65289;&#12290;</p><p>&#25105;&#20204;&#36824;&#37197;&#32622;&#20102;&#19968;&#30456;&#28040;&#24687;&#36807;&#28388;&#22120;&#12290;&#21482;&#26377;<tt class="literal">office</tt>&#23646;&#24615;&#20540;&#20026;<tt class="literal">New York</tt>
            &#30340;&#28040;&#24687;&#25165;&#34987;&#36716;&#21457;&#21040;&#26032;&#22320;&#22336;&#65292;&#20854;&#23427;&#28040;&#24687;&#21017;&#32487;&#32493;&#21457;&#24448;&#21407;&#22320;&#22336;&#12290;&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36807;&#28388;&#22120;&#65292;&#25152;&#26377;&#28040;&#24687;&#23558;&#34987;&#36716;&#21457;&#12290;</p><p>&#26412;&#20363;&#20013;&#36824;&#37197;&#32622;&#20102;&#19968;&#20010;&#36716;&#25442;&#22120;&#30340;&#31867;&#12290;&#24403;&#27599;&#36716;&#21457;&#19968;&#20010;&#28040;&#24687;&#26102;&#65292;&#35813;&#36716;&#25442;&#22120;&#23601;&#34987;&#25191;&#34892;&#19968;&#27425;&#12290;&#36716;&#25442;&#22120;&#21487;&#20197;&#23545;&#28040;&#24687;&#22312;&#36716;&#21457;&#21069;&#36827;&#34892;
            &#26356;&#25913;&#12290;&#36825;&#37324;&#30340;&#36716;&#25442;&#22120;&#21482;&#26159;&#22312;&#28040;&#24687;&#20013;&#21152;&#20837;&#20102;&#19968;&#20010;&#35760;&#24405;&#36716;&#21457;&#26102;&#38388;&#30340;&#28040;&#24687;&#22836;&#12290;</p><p>&#26412;&#20363;&#20013;&#28040;&#24687;&#34987;&#36716;&#21457;&#21040;&#19968;&#20010;&#8217;&#23384;&#36142;&#19982;&#36716;&#21457;&#26159;&#8216;&#38431;&#21015;&#65292;&#28982;&#21518;&#36890;&#36807;&#19968;&#20010;&#26725;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#21478;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#20013;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8525"></a>35.2.&nbsp;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;</h2></div></div><div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#19981;&#21807;&#19968;&#30340;&#36716;&#21457;&#22120;&#12290;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#23558;&#28040;&#24687;&#30340;<span class="emphasis"><em>&#25335;&#36125;</em></span>&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#20013;&#65292;
            &#21407;&#28040;&#24687;&#21017;&#32487;&#32493;&#21457;&#24448;&#21407;&#26377;&#22320;&#22336;&#12290;</p><p>&#22240;&#27492;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#21487;&#20197;&#23558;&#28040;&#24687;&#36827;&#34892;&#20998;&#27969;&#65288;splitting&#65289;&#12290;</p><p>&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#19982;&#21807;&#19968;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#20013;&#19968;&#26679;&#30340;&#65292;&#20063;&#21487;&#20197;&#24102;&#19968;&#20010;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#21644;&#36716;&#25442;&#22120;&#12290;&#19979;&#38754;&#30340;&#37197;&#32622;&#20063;&#26159;&#20986;&#33258;
             divert&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;divert name="order-divert"&gt;                 
    &lt;address&gt;jms.queue.orders&lt;/address&gt;
    &lt;forwarding-address&gt;jms.topic.spyTopic&lt;/forwarding-address&gt;         
    &lt;exclusive&gt;false&lt;/exclusive&gt;
&lt;/divert&gt;                       
        </pre><p>The above divert example takes a copy of every message sent to the address '<tt class="literal">jms.queue.orders</tt>' (Which corresponds to a JMS Queue called '<tt class="literal">orders</tt>') and sends it to a local address called '<tt class="literal">jms.topic.SpyTopic</tt>' (which corresponds to a JMS Topic called '<tt class="literal">SpyTopic</tt>').</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="core-bridges"></a>Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;</h2></div></div><div></div></div><p>&#26725;&#30340;&#21151;&#33021;&#26159;&#20174;&#19968;&#20010;&#28304;&#38431;&#21015;&#20013;&#25509;&#25910;&#28040;&#24687;&#65292;&#20877;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#30446;&#30340;&#22320;&#22336;&#12290;&#36890;&#24120;&#36825;&#20010;&#30446;&#30340;&#22320;&#22336;&#22312;&#21478;&#22806;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#20013;&#12290;</p><p>&#28304;&#19982;&#30446;&#30340;&#19981;&#38656;&#35201;&#22312;&#21516;&#19968;&#20010;&#38598;&#32676;&#20013;&#12290;&#25152;&#20197;&#26725;&#24456;&#36866;&#21512;&#23558;&#28040;&#24687;&#20174;&#19968;&#20010;&#38598;&#32676;&#20013;&#21487;&#38752;&#22320;&#36716;&#21457;&#21040;&#21478;&#19968;&#20010;&#38598;&#32676;&#12290;&#27604;&#22914;&#36890;&#36807;&#19968;&#20010;WAN&#65292;&#25110;
        internet&#65292;&#31561;&#36830;&#25509;&#19981;&#31283;&#23450;&#30340;&#32593;&#32476;&#12290;</p><p>&#26725;&#26377;&#22788;&#29702;&#25925;&#38556;&#30340;&#33021;&#21147;&#12290;&#22914;&#26524;&#30446;&#30340;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22833;&#36133;&#65288;&#20687;&#32593;&#32476;&#25925;&#38556;&#65289;&#65292;&#26725;&#20250;&#37325;&#35797;&#19982;&#30446;&#30340;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#65292;&#30452;&#25509;&#36830;&#25509;&#25104;&#21151;
        &#20026;&#27490;&#12290;&#24403;&#36830;&#25509;&#25104;&#21151;&#21518;&#65292;&#26725;&#21017;&#32487;&#32493;&#36827;&#34892;&#24037;&#20316;&#12290;</p><p>&#24635;&#20043;&#65292;&#26725;&#26159;&#21487;&#38752;&#36830;&#25509;&#20004;&#20010;HornetQ&#26381;&#21153;&#22120;&#30340;&#19968;&#31181;&#25163;&#27573;&#12290;&#20351;&#29992;&#26680;&#24515;&#26725;&#26102;&#28304;&#21644;&#30446;&#30340;&#26381;&#21153;&#22120;&#24517;&#39035;&#37117;&#26159;HornetQ&#26381;&#21153;&#22120;&#12290;</p><p>&#26725;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#25552;&#20379;<span class="emphasis"><em>&#19968;&#27425;&#19988;&#21482;&#26377;&#19968;&#27425;</em></span>&#30340;&#20256;&#36882;&#20445;&#35777;&#12290;&#20854;&#37319;&#29992;&#30340;&#26041;&#27861;&#26159;&#37325;&#22797;&#26816;&#27979;&#65288;&#35814;&#32454;
        &#25551;&#36848;&#22312;<a href="#duplicate-detection" title="Chapter&nbsp;37.&nbsp;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;">Chapter&nbsp;37, <i>&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</i></a>&#65289;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#26680;&#24515;&#26725;&#30340;&#21151;&#33021;&#19982;JMS&#26725;&#30340;&#21151;&#33021;&#30456;&#20284;&#65292;&#20294;&#26159;&#19981;&#33021;&#23558;&#23427;&#20204;&#28151;&#28102;&#65281;</p><p>&#26680;&#24515;&#26725;&#29992;&#26469;&#36830;&#25509;&#20004;&#20010;HornetQ&#33410;&#28857;&#65292;&#23427;&#19981;&#20351;&#29992;JMS&#25509;&#21475;&#12290;JMS&#26725;&#20351;&#29992;&#30340;&#26159;JMS&#25509;&#21475;&#65292;&#23427;&#36830;&#25509;&#30340;&#26159;&#20219;&#20309;&#20004;&#20010;&#31526;&#21512;
            JMS 1.1&#35268;&#33539;&#30340;&#26381;&#21153;&#22120;&#12290;&#22240;&#27492;&#65292;JMS&#26725;&#21487;&#20197;&#23558;&#20004;&#20010;&#19981;&#21516;&#30340;JMS&#26381;&#21153;&#22120;&#36830;&#25509;&#36215;&#26469;&#12290;&#20174;&#24615;&#33021;&#35282;&#24230;&#32771;&#34385;&#65292;&#26680;&#24515;&#26725;&#30001;&#20110;&#37319;&#29992;
            &#37325;&#22797;&#26816;&#27979;&#26469;&#23454;&#29616;<span class="emphasis"><em>&#19968;&#27425;&#19988;&#21482;&#19968;&#27425;</em></span>&#30340;&#20256;&#36882;&#20445;&#35777;&#65292;&#21487;&#20197;&#25552;&#20379;&#26356;&#39640;&#30340;&#24615;&#33021;&#12290;
            JMS&#26725;&#21017;&#38656;&#35201;&#20351;&#29992;XA&#36825;&#31181;&#22797;&#26434;&#30340;&#26426;&#21046;&#26469;&#25552;&#20379;&#21516;&#26679;&#30340;&#20256;&#36882;&#20445;&#35777;&#65292;&#22240;&#20123;&#24615;&#33021;&#35201;&#27604;&#26680;&#24515;&#26725;&#20302;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8596"></a>36.1.&nbsp;&#26725;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#26725;&#30340;&#37197;&#32622;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;&#35753;&#25105;&#20204;&#20808;&#30475;&#19968;&#20010;&#37197;&#32622;&#30340;&#20363;&#23376;
            &#65288;&#23427;&#23454;&#38469;&#19978;&#20986;&#33258;bridge&#20363;&#23376;&#65289;&#65306;</p><pre class="programlisting">
&lt;bridge name="my-bridge"&gt;
    &lt;queue-name&gt;jms.queue.sausage-factory&lt;/queue-name&gt;
    &lt;forwarding-address&gt;jms.queue.mincing-machine&lt;/forwarding-address&gt;
    &lt;filter-string="name='aardvark'"/&gt;
    &lt;transformer-class-name&gt;
        org.hornetq.jms.example.HatColourChangeTransformer
    &lt;/transformer-class-name&gt;
    &lt;retry-interval&gt;1000&lt;/retry-interval&gt;
    &lt;retry-interval-multiplier&gt;1.0&lt;/retry-interval-multiplier&gt;
    &lt;reconnect-attempts&gt;-1&lt;/reconnect-attempts&gt;
    &lt;failover-on-server-shutdown&gt;false&lt;/failover-on-server-shutdown&gt;
    &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;
    &lt;confirmation-window-size&gt;10000000&lt;/confirmation-window-size&gt;
    &lt;connector-ref connector-name="remote-connector" 
        backup-connector-name="backup-remote-connector"/&gt;     
    &lt;user&gt;foouser&lt;/user&gt;
    &lt;password&gt;foopassword&lt;/password&gt;
&lt;/bridge&gt;                        
        </pre><p>&#22312;&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#21253;&#25324;&#20102;&#26725;&#30340;&#25152;&#26377;&#21442;&#25968;&#12290;&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#21487;&#33021;&#20854;&#20013;&#24456;&#22810;&#30340;&#21442;&#25968;&#21487;&#20197;&#20351;&#29992;&#40664;&#35748;&#20540;&#65292;&#19981;&#38656;&#35201;&#22312;&#37197;&#32622;&#20013;
            &#25351;&#23450;&#12290;</p><p>&#19979;&#38754;&#25105;&#20204;&#23545;&#27599;&#20010;&#21442;&#25968;&#20998;&#21035;&#35828;&#26126;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">name</tt>&#21442;&#25968;&#12290;&#25152;&#26377;&#26725;&#37117;&#24517;&#39035;&#26377;&#19968;&#20010;&#21807;&#19968;&#30340;&#21517;&#23383;&#12290;</p></li><li><p><tt class="literal">queue-name</tt>&#12290;&#26412;&#22320;&#38431;&#21015;&#30340;&#21517;&#23383;&#12290;&#26725;&#20174;&#26412;&#22320;&#38431;&#21015;&#20013;&#25509;&#25910;&#28040;&#24687;&#12290;
                    &#36825;&#26159;&#19968;&#20010;&#24517;&#35201;&#30340;&#21442;&#25968;&#12290;</p><p>&#36825;&#20010;&#38431;&#21015;&#22312;&#26725;&#30340;&#21551;&#21160;&#20043;&#21069;&#24517;&#39035;&#24050;&#32463;&#23384;&#22312;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;JMS&#30340;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-jms.xml</tt>&#22312;&#26680;&#24515;&#37197;&#32622;&#25991;&#20214;<tt class="literal">
                         hornetq-configuration.xml</tt>&#20043;&#21518;&#35013;&#36733;&#12290;&#25152;&#20197;&#22914;&#26524;&#20320;&#30340;&#26725;&#35201;&#20174;JMS
                         &#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#65292;&#23601;&#38656;&#35201;&#20445;&#35777;JMS&#38431;&#21015;&#21516;&#26102;&#35201;&#20316;&#20026;&#26680;&#24515;&#38431;&#21015;&#37096;&#32626;&#12290;&#20855;&#20307;&#26041;&#27861;&#21487;&#20197;&#21442;&#35265;
                         bridge&#20363;&#23376;&#12290;</p></div></li><li><p><tt class="literal">forwarding-address</tt>&#12290;&#30446;&#30340;&#26381;&#21153;&#22120;&#20013;&#30340;&#22320;&#22336;&#12290;&#28040;&#24687;&#23558;&#34987;&#36716;&#21457;&#21040;&#36825;&#20010;&#22320;&#22336;&#12290;
                    &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#36825;&#20010;&#36716;&#21457;&#22320;&#22336;&#65292;&#28040;&#24687;&#30340;&#21407;&#22987;&#22320;&#22336;&#23558;&#20250;&#20445;&#30041;&#12290;</p></li><li><p><tt class="literal">filter-string</tt>&#12290;&#19968;&#20010;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#12290;&#23427;&#34920;&#31034;&#21482;&#26377;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#36873;&#25321;
                    &#30340;&#28040;&#24687;&#25165;&#34987;&#36716;&#21457;&#12290;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;&#30340;&#35821;&#27861;&#21442;&#35265; <a href="#filter-expressions" title="Chapter&nbsp;14.&nbsp;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;">Chapter&nbsp;14, <i>&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</i></a>&#12290;</p></li><li><p><tt class="literal">transformer-class-name</tt>&#12290;&#21487;&#36873;&#30340;&#36716;&#25442;&#22120;&#31867;&#21517;&#12290;&#36825;&#26159;&#19968;&#20010;&#29992;&#25143;&#23450;&#20041;&#30340;
                    &#31867;&#65292;&#23427;&#38656;&#35201;&#23454;&#29616;&#25509;&#21475;<tt class="literal">org.hornetq.core.server.cluster.Transformer</tt>
                    &#12290;</p><p>&#22914;&#26524;&#25351;&#23450;&#20102;&#36825;&#20010;&#31867;&#65292;&#27599;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#36716;&#21457;&#20043;&#21069;&#65292;&#23427;&#30340;<tt class="literal">transform()</tt>&#26041;&#27861;
                    &#23601;&#20250;&#34987;&#35843;&#29992;&#12290;&#29992;&#25143;&#21033;&#29992;&#36825;&#20010;&#26426;&#20250;&#21487;&#20197;&#23545;&#28040;&#24687;&#26412;&#36523;&#25110;&#28040;&#24687;&#22836;&#20449;&#24687;&#36827;&#34892;&#20462;&#25913;&#12290;</p></li><li><p><tt class="literal">retry-interval</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#21442;&#25968;&#20915;&#23450;&#20102;&#22312;&#36827;&#34892;&#36830;&#25509;&#37325;&#35797;&#26102;&#65292;&#20004;&#27425;&#37325;&#35797;
                    &#20043;&#38388;&#30340;&#26102;&#38388;&#38388;&#38548;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">2000</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">retry-interval-multiplier</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#21442;&#25968;&#22522;&#20110;&#21069;&#19968;&#27425;&#37325;&#35797;&#36830;&#25509;
                    &#30340;&#26102;&#38388;&#38388;&#38548;&#26469;&#35745;&#31639;&#19979;&#19968;&#27425;&#37325;&#35797;&#30340;&#38388;&#38548;&#65292;&#21363;&#21069;&#19968;&#27425;&#30340;&#38388;&#38548;&#20056;&#20197;&#35813;&#21442;&#25968;&#12290;</p><p>&#36825;&#26679;&#21487;&#20197;&#23454;&#29616;&#37325;&#35797;&#38388;&#38548;&#30340;<span class="emphasis"><em>&#25351;&#25968;&#24310;&#36831;&#65288;exponential backoff&#65289;</em></span>&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><p>&#20551;&#35774;<tt class="literal">retry-interval</tt>&#20026;<tt class="literal">1000</tt> ms&#65292;&#24182;&#19988;&#25105;&#20204;
                    &#23558;<tt class="literal">retry-interval-multiplier</tt>&#35774;&#20026;<tt class="literal">2.0</tt>&#65292;&#22914;&#26524;
                    &#31532;&#19968;&#27425;&#23581;&#35797;&#22833;&#36133;&#65292;&#21017;&#31561;&#24453;<tt class="literal">1000</tt>&#27627;&#31186;&#21518;&#36827;&#34892;&#31532;&#20108;&#27425;&#37325;&#35797;&#65292;&#22914;&#26524;&#20877;&#22833;&#36133;&#65292;&#21017;&#27599;&#19977;&#27425;&#37325;
                    &#35797;&#35201;&#22312;<tt class="literal">2000</tt>&#27627;&#31186;&#21518;&#36827;&#34892;&#65292;&#31532;&#22235;&#27425;&#35201;&#31561;&#24453;<tt class="literal">4000</tt>&#27627;&#31186;&#65292;
                    &#20197;&#27492;&#31867;&#25512;&#12290;</p><p>&#40664;&#35748;&#20540;&#26159;<tt class="literal">1.0</tt>&#65292;&#34920;&#31034;&#27599;&#27425;&#37325;&#35797;&#38388;&#38548;&#30456;&#21516;&#30340;&#26102;&#38388;&#12290;</p></li><li><p><tt class="literal">reconnect-attempts</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#34920;&#31034;&#35201;&#36827;&#34892;&#22810;&#23569;&#37325;&#35797;&#21518;&#25165;&#25918;&#24323;
                    &#24182;&#36864;&#20986;&#12290;<tt class="literal">-1</tt>&#34920;&#31034;&#36827;&#34892;&#26080;&#38480;&#27425;&#37325;&#35797;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">&#65293;1</tt>&#12290;</p></li><li><p><tt class="literal">failover-on-server-shutdown</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#25351;&#23450;&#20102;&#24403;&#30446;&#30340;&#26381;&#21153;&#22120;&#27491;&#24120;
                    &#36864;&#20986;&#26102;&#26725;&#26159;&#21542;&#23581;&#35797;&#22833;&#25928;&#22791;&#25588;&#65288;failover&#65289;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#65288;&#22914;&#26524;&#37197;&#32622;&#20102;&#30340;&#35805;&#65289;&#19978;&#12290;</p><p>&#26725;&#30340;&#36830;&#25509;&#22120;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;&#20027;&#26381;&#21153;&#22120;&#21644;&#19968;&#20010;&#22791;&#20221;&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#37197;&#32622;&#20102;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#24182;&#19988;&#36825;&#20010;&#21442;&#25968;&#26159;
                    <tt class="literal">true</tt>&#26102;&#65292;&#22312;&#20027;&#26381;&#21153;&#22120;&#27491;&#24120;&#36864;&#20986;&#26102;&#65292;&#26725;&#20250;&#33258;&#21160;&#22320;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#19978;&#32487;&#32493;&#24037;&#20316;&#12290;
                    &#22914;&#26524;&#26725;&#30340;&#36830;&#25509;&#22120;&#27809;&#26377;&#37197;&#32622;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#21017;&#36825;&#20010;&#21442;&#25968;&#19981;&#36215;&#20316;&#29992;&#12290;</p><p>&#20320;&#30340;&#26725;&#37197;&#32622;&#20102;&#22791;&#20221;&#26381;&#21153;&#22120;&#21518;&#65292;&#26377;&#26102;&#20320;&#38656;&#35201;&#20020;&#26102;&#23558;&#20027;&#26381;&#21153;&#22120;&#20851;&#38381;&#36827;&#34892;&#19968;&#20123;&#32500;&#25252;&#65292;&#27492;&#26102;&#24182;&#19981;&#24076;&#26395;&#26725;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;
                    &#22120;&#20013;&#12290;&#20351;&#29992;&#35813;&#21442;&#25968;&#23601;&#21487;&#20197;&#36798;&#21040;&#36825;&#20010;&#30446;&#30340;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#12290;</p></li><li><p><tt class="literal">use-duplicate-detection</tt>&#12290;&#21487;&#36873;&#21442;&#25968;&#12290;&#23427;&#25511;&#21046;&#26725;&#26159;&#21542;&#22312;&#36716;&#21457;&#30340;&#28040;&#24687;&#20013;&#33258;&#21160;
                    &#28155;&#21152;&#19968;&#20010;&#37325;&#22797;ID&#30340;&#23646;&#24615;&#12290;</p><p>&#28155;&#21152;&#36825;&#26679;&#19968;&#20010;&#23646;&#24615;&#21487;&#20197;&#20351;&#30446;&#30340;&#26381;&#21153;&#22120;&#23545;&#26469;&#33258;&#28304;&#26381;&#21153;&#22120;&#30340;&#28040;&#24687;&#36827;&#34892;&#37325;&#22797;&#26816;&#27979;&#12290;&#24403;&#20986;&#29616;&#36830;&#25509;&#25925;&#38556;&#25110;&#26381;&#21153;&#22120;&#23849;&#28291;&#26102;&#65292;
                    &#26725;&#22312;&#24674;&#22797;&#26102;&#23558;&#37325;&#26032;&#36716;&#21457;&#37027;&#20123;&#27809;&#26377;&#34987;&#36890;&#30693;&#30340;&#28040;&#24687;&#12290;&#36825;&#22312;&#30446;&#30340;&#26381;&#21153;&#22120;&#31471;&#26377;&#21487;&#33021;&#36896;&#25104;&#37325;&#22797;&#21457;&#36865;&#12290;&#20351;&#29992;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#65292;&#21487;
                    &#20197;&#23558;&#37325;&#22797;&#21457;&#36865;&#30340;&#28040;&#24687;&#36807;&#28388;&#25481;&#12290;</p><p>&#20351;&#29992;&#36825;&#20010;&#21151;&#33021;&#65292;&#26381;&#21153;&#22120;&#23601;&#21487;&#20197;&#20445;&#35777; <span class="emphasis"><em>&#19968;&#27425;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;</em></span>&#30340;&#20256;&#36882;&#65292;&#32780;&#19981;&#38656;&#35201;&#20351;&#29992;
                    &#37325;&#37327;&#32423;&#30340;&#26041;&#27861;&#65292;&#22914;XA&#65288;&#21442;&#35265; <a href="#duplicate-detection" title="Chapter&nbsp;37.&nbsp;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;">Chapter&nbsp;37, <i>&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</i></a>&#65289;&#12290;</p><p>&#40664;&#35748;&#30340;&#20540;&#26159;<tt class="literal">true</tt>.</p></li><li><p><tt class="literal">confirmation-window-size</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#21442;&#25968;&#20915;&#23450;&#20102;&#21521;&#30446;&#30340;&#26381;&#21153;&#22120;&#36716;&#21457;&#28040;&#24687;&#26102;
                    &#25152;&#20351;&#29992;&#30340;&#30830;&#35748;&#31383;&#21475;&#30340;&#22823;&#23567;&#12290;&#35814;&#32454;&#30340;&#25551;&#36848;&#22312;<a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">Chapter&nbsp;34, <i>&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</i></a>&#12290;</p><p>
                    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>&#24403;&#26725;&#20174;&#19968;&#20010;&#35774;&#32622;&#20102;max-size-bytes&#21442;&#25968;&#30340;&#38431;&#21015;&#25509;&#25910;&#24182;&#36716;&#21457;&#28040;&#24687;&#26102;&#65292;&#19968;&#20010;&#37325;&#35201;&#30340;&#20107;&#24773;&#23601;&#26159;&#35201;&#23558;
                        confirmation-window-size&#30340;&#20540;&#35774;&#32622;&#20026;&#23567;&#20110;&#31561;&#20110;
                        <tt class="literal">max-size-bytes</tt>&#30340;&#20540;&#65292;&#20197;&#36991;&#20813;&#36896;&#25104;&#28040;&#24687;&#27969;&#30340;&#20572;&#27490;&#12290;</div><p>
                </p></li><li><p><tt class="literal">connector-ref</tt>&#12290;&#36825;&#26159;&#19968;&#20010;&#24517;&#38656;&#30340;&#21442;&#25968;&#12290;&#23427;&#25351;&#23450;&#20102;&#26725;&#29992;&#26469;&#36830;&#25509;&#30446;&#30340;&#26381;&#21153;&#22120;&#30340;
                        <span class="emphasis"><em>&#36830;&#25509;&#22120;</em></span>&#12290;</p><p><span class="emphasis"><em>connector</em></span>&#21253;&#21547;&#20102;&#25152;&#29992;&#30340;&#20256;&#36755;&#65288;TCP, SSL, HTTP&#31561;&#65289;&#65292;&#20197;&#21450;&#26381;&#21153;&#22120;&#36830;&#25509;&#21442;&#25968;
                    &#65288;&#22914;&#20027;&#26426;&#21517;&#65292;&#31471;&#21475;&#31561;&#65289;&#12290;&#20851;&#20110;&#36830;&#25509;&#22120;&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#21442;&#35265;&#65288;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#65289;&#12290;</p><p><tt class="literal">connector-ref</tt>&#26377;&#20004;&#20010;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="circle"><li><p><tt class="literal">connector-name</tt>&#12290;&#36825;&#20010;&#25351;&#30340;&#26159;&#26680;&#24515;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#23450;&#20041;&#30340;&#36830;&#25509;&#22120;&#30340;&#21517;&#23383;&#12290;&#26725;&#20351;&#29992;
                            &#36825;&#20010;&#36830;&#25509;&#22120;&#21019;&#24314;&#19982;&#30446;&#30340;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#12290;&#36825;&#20010;&#21442;&#25968;&#26159;&#24517;&#38656;&#25351;&#23450;&#30340;&#12290;</p></li><li><p><tt class="literal">backup-connector-name</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#21442;&#25968;&#21516;&#26679;&#25351;&#23450;&#19968;&#20010;&#22312;&#26680;&#24515;
                            &#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#23450;&#20041;&#30340;&#36830;&#25509;&#22120;&#21517;&#23383;&#12290;
                            &#24403;&#30446;&#30340;&#26381;&#21153;&#22120;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#25110;&#32773;&#27491;&#24120;&#36864;&#20986;&#20294;&#26159;&#21442;&#25968;<tt class="literal">failover-on-server-shutdown</tt>&#30340;&#20540;&#35774;&#20026;<tt class="literal">true</tt>&#26102;&#65292;&#26725;&#20351;&#29992;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#30340;&#36830;&#25509;&#22120;&#36890;&#36807;&#22833;&#25928;&#22791;&#25588;&#65288;failover&#65289;&#36830;&#25509;
                            &#21040;&#22791;&#29992;&#30340;&#26381;&#21153;&#22120;&#12290;</p></li></ul></div></li><li><p><tt class="literal">user</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#21442;&#25968;&#25351;&#23450;&#20102;&#26725;&#22312;&#21019;&#24314;&#19982;&#36828;&#31243;&#26381;&#21153;&#22120;&#36830;&#25509;&#26102;&#25152;&#29992;&#30340;&#29992;&#25143;&#21517;&#12290;&#22914;&#26524;
                    &#27809;&#26377;&#25351;&#23450;&#29992;&#25143;&#21517;&#65292;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;
                    <tt class="literal">cluster-user</tt>&#25152;&#23450;&#20041;&#30340;&#40664;&#35748;&#38598;&#32676;&#29992;&#25143;&#21517;&#23558;&#34987;&#20351;&#29992;&#12290; </p></li><li><p><tt class="literal">password</tt>&#12290;&#36825;&#20010;&#21487;&#36873;&#30340;&#21442;&#25968;&#32473;&#20986;&#30340;&#26159;&#26725;&#21019;&#24314;&#19982;&#36828;&#31243;&#26381;&#21153;&#22120;&#36830;&#25509;&#25152;&#20351;&#29992;&#30340;&#23494;&#30721;&#12290;
                    &#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#23494;&#30721;&#65292;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;
                    <tt class="literal">cluster-password</tt>&#25152;&#23450;&#20041;&#30340;&#40664;&#35748;&#38598;&#32676;&#23494;&#30721;&#23558;&#34987;&#20351;&#29992;&#12290;</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="duplicate-detection"></a>Chapter&nbsp;37.&nbsp;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</h2></div></div><div></div></div><p>HornetQ&#20855;&#26377;&#24378;&#22823;&#30340;&#33258;&#21160;&#26816;&#27979;&#37325;&#22797;&#28040;&#24687;&#30340;&#21151;&#33021;&#12290;&#24212;&#29992;&#23618;&#26080;&#38656;&#23454;&#29616;&#22797;&#26434;&#30340;&#37325;&#22797;&#26816;&#27979;&#12290;&#26412;&#31456;&#35299;&#37322;&#20102;&#20160;&#20040;&#26159;&#37325;&#22797;&#26816;&#27979;&#65292;&#23427;
        &#22312;HornetQ&#20013;&#22914;&#20309;&#24037;&#20316;&#30340;&#65292;&#20197;&#21450;&#22914;&#20309;&#36827;&#34892;&#37197;&#32622;&#12290;</p><p>&#24403;&#23458;&#25143;&#31471;&#21521;&#26381;&#21153;&#22120;&#31471;&#21457;&#36865;&#28040;&#24687;&#26102;&#65292;&#25110;&#32773;&#20174;&#19968;&#20010;&#26381;&#21153;&#22120;&#21521;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#20256;&#36882;&#28040;&#24687;&#26102;&#65292;&#22914;&#26524;&#28040;&#24687;&#21457;&#36865;&#21518;&#30446;&#26631;&#26381;&#21153;&#22120;&#25110;&#32773;
        &#36830;&#25509;&#20986;&#29616;&#25925;&#38556;&#65292;&#23548;&#33268;&#21457;&#36865;&#19968;&#26041;&#27809;&#26377;&#25910;&#21040;&#21457;&#36865;&#25104;&#21151;&#30340;&#30830;&#35748;&#20449;&#24687;&#65292;&#21457;&#36865;&#26041;&#22240;&#27492;&#23601;&#26080;&#27861;&#30830;&#23450;&#28040;&#24687;&#26159;&#21542;&#24050;&#32463;&#25104;&#21151;&#21457;&#36865;&#21040;&#20102;&#30446;&#26631;&#22320;
        &#22336;&#12290;</p><p>&#22914;&#26524;&#19978;&#36848;&#30340;&#25925;&#38556;&#21457;&#29983;&#22312;&#28040;&#24687;&#34987;&#25104;&#21151;&#25509;&#25910;&#24182;&#22788;&#29702;&#21518;&#65292;&#20294;&#26159;&#22312;&#21521;&#21457;&#36865;&#26041;&#36820;&#22238;&#21151;&#33021;&#30830;&#35748;&#20449;&#24687;&#20043;&#21069;&#65292;&#37027;&#20040;&#28040;&#24687;&#23454;&#38469;&#19978;&#21487;&#20197;&#21040;&#36798;
        &#20854;&#30446;&#30340;&#22320;&#22336;&#65307;&#22914;&#26524;&#25925;&#38556;&#21457;&#29983;&#22312;&#28040;&#24687;&#30340;&#25509;&#25910;&#21450;&#22788;&#29702;&#36807;&#31243;&#20013;&#65292;&#21017;&#28040;&#24687;&#19981;&#20250;&#21040;&#36798;&#20854;&#30446;&#30340;&#22320;&#22336;&#12290;&#20174;&#21457;&#36865;&#26041;&#30340;&#35282;&#24230;&#30475;&#65292;&#23427;&#26080;&#27861;&#21306;&#20998;
        &#36825;&#20004;&#31181;&#24773;&#20917;&#12290;</p><p>&#24403;&#26381;&#21153;&#22120;&#24674;&#22797;&#21518;&#65292;&#23458;&#25143;&#31471;&#38754;&#20020;&#30340;&#22256;&#38590;&#30340;&#36873;&#25321;&#12290;&#23427;&#30693;&#36947;&#26381;&#21153;&#22120;&#20986;&#20102;&#25925;&#38556;&#65292;&#20294;&#26159;&#19981;&#30693;&#36947;&#21018;&#21018;&#21457;&#36865;&#30340;&#28040;&#24687;&#26159;&#21542;&#25104;&#21151;&#21040;&#36798;&#30446;&#30340;
        &#22320;&#22336;&#12290;&#22914;&#26524;&#23427;&#37325;&#26032;&#21457;&#36865;&#36825;&#20010;&#28040;&#24687;&#65292;&#23601;&#26377;&#21487;&#33021;&#36896;&#25104;&#28040;&#24687;&#30340;&#37325;&#22797;&#12290;&#22914;&#26524;&#36825;&#20010;&#28040;&#24687;&#26159;&#19968;&#20010;&#35746;&#21333;&#30340;&#35805;&#65292;&#37325;&#22797;&#21457;&#36865;&#28040;&#24687;&#23601;&#20250;&#20135;&#29983;&#20004;
        &#20010;&#30456;&#21516;&#30340;&#35746;&#21333;&#65292;&#36825;&#24403;&#28982;&#19981;&#26159;&#25152;&#24076;&#26395;&#30340;&#32080;&#26524;&#12290;</p><p>&#23558;&#28040;&#24687;&#30340;&#21457;&#36865;&#25918;&#21040;&#19968;&#20010;&#20107;&#21153;&#20013;&#20063;&#19981;&#33021;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#12290;&#22914;&#26524;&#22312;&#20107;&#21153;&#25552;&#20132;&#30340;&#36807;&#31243;&#20013;&#21457;&#29983;&#25925;&#38556;&#65292;&#21516;&#26679;&#19981;&#33021;&#30830;&#23450;&#36825;&#20010;&#20107;&#21153;&#26159;&#21542;&#25552;&#20132;
        &#25104;&#21151;&#65281;</p><p>&#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;HornetQ&#25552;&#20379;&#20102;&#33258;&#21160;&#28040;&#24687;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8862"></a>37.1.&nbsp;&#22312;&#28040;&#24687;&#21457;&#36865;&#20013;&#24212;&#29992;&#37325;&#22797;&#26816;&#27979;</h2></div></div><div></div></div><p>&#22312;&#28040;&#24687;&#21457;&#36865;&#20013;&#21551;&#29992;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#21313;&#20998;&#31616;&#21333;&#65306;&#20320;&#21482;&#38656;&#23558;&#28040;&#24687;&#30340;&#19968;&#20010;&#29305;&#27530;&#23646;&#24615;&#35774;&#32622;&#19968;&#20010;&#21807;&#19968;&#20540;&#12290;&#20320;&#21487;&#20197;&#29992;&#20219;&#24847;&#26041;&#27861;&#26469;
            &#35745;&#31639;&#36825;&#20010;&#20540;&#65292;&#20294;&#26159;&#35201;&#20445;&#35777;&#23427;&#30340;&#21807;&#19968;&#24615;&#12290;&#24403;&#30446;&#26631;&#26381;&#21153;&#22120;&#25509;&#25910;&#21040;&#36825;&#20010;&#28040;&#24687;&#26102;&#65292;&#23427;&#20250;&#26816;&#26597;&#36825;&#20010;&#23646;&#24615;&#26159;&#21542;&#34987;&#35774;&#32622;&#65292;&#22914;&#26524;&#35774;&#32622;&#20102;&#65292;
            &#23601;&#26816;&#26597;&#20869;&#23384;&#32531;&#23384;&#20013;&#26159;&#21542;&#24050;&#32463;&#25509;&#25910;&#21040;&#20102;&#30456;&#21516;&#20540;&#30340;&#28040;&#24687;&#12290;&#22914;&#26524;&#21457;&#29616;&#24050;&#32463;&#25509;&#25910;&#36807;&#20855;&#26377;&#30456;&#21516;&#23646;&#24615;&#20540;&#30340;&#28040;&#24687;&#65292;&#23427;&#23558;&#24573;&#30053;&#36825;&#20010;&#28040;&#24687;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22312;&#33410;&#28857;&#20043;&#38388;&#30340;&#28040;&#24687;&#20256;&#36882;&#20351;&#29992;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;&#21487;&#20197;&#20445;&#35777;<span class="emphasis"><em>&#19968;&#27425;&#19988;&#21482;&#19968;&#27425;</em></span>&#30340;&#20256;&#36882;&#65292;&#21644;&#20351;&#29992;
                XA&#20107;&#21153;&#25509;&#25910;&#28040;&#24687;&#30340;&#25928;&#26524;&#19968;&#26679;&#65292;&#20294;&#26159;&#27604;XA&#28040;&#32791;&#30340;&#36164;&#28304;&#35201;&#23569;&#65292;&#24182;&#19988;&#26356;&#23481;&#26131;&#12290;</p></div><p>&#22914;&#26524;&#26159;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#21457;&#36865;&#28040;&#24687;&#65292;&#21017;&#21482;&#38656;&#35201;&#35774;&#32622;&#20854;&#20013;&#19968;&#20010;&#28040;&#24687;&#30340;&#23646;&#24615;&#20540;&#12290;&#22312;&#26381;&#21153;&#22120;&#31471;&#22914;&#26524;&#26381;&#21153;&#22120;&#26816;&#27979;&#21040;&#19968;&#20010;&#20107;&#21153;&#20013;&#26576;&#19968;&#20010;
            &#28040;&#24687;&#37325;&#22797;&#65292;&#21017;&#20250;&#24573;&#30053;&#25972;&#20010;&#20107;&#21153;&#12290;</p><p>&#36825;&#20010;&#23646;&#24615;&#30340;&#21517;&#31216;&#30001;<tt class="literal">org.hornetq.api.core.HDR_DUPLICATE_DETECTION_ID</tt>&#23450;&#20041;&#65292;&#21363;&#65306;
               <tt class="literal">_HQ_DUPL_ID</tt>&#12290;</p><p>&#35813;&#23646;&#24615;&#30340;&#20540;&#21487;&#20197;&#26159;<tt class="literal">byte[]</tt>&#31867;&#22411;&#25110;<tt class="literal">SimpleString</tt>&#31867;&#22411;&#65288;&#26680;&#24515;&#25509;&#21475;&#65289;&#12290;&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#23427;&#24517;&#39035;&#26159;<tt class="literal">String</tt>
            &#31867;&#22411;&#12290;&#23427;&#30340;&#20540;&#19968;&#23450;&#26159;&#21807;&#19968;&#30340;&#12290;&#19968;&#20010;&#31616;&#21333;&#30340;&#26041;&#27861;&#26159;&#20351;&#29992;UUID&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#35774;&#32622;&#36825;&#20010;&#23646;&#24615;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">
...     

ClientMessage message = session.createMessage(true);

SimpleString myUniqueID = "This is my unique id";   // Could use a UUID for this

message.setStringProperty(HDR_DUPLICATE_DETECTION_ID, myUniqueID);

...
        </pre><p>&#19979;&#38754;&#21017;&#26159;&#19968;&#20010;&#20351;&#29992;JMS&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">
...     

Message jmsMessage = session.createMessage();

String myUniqueID = "This is my unique id";   // Could use a UUID for this

message.setStringProperty(HDR_DUPLICATE_DETECTION_ID.toString(), myUniqueID);

...
        </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="duplicate.id.cache"></a>37.2.&nbsp;&#37197;&#32622;&#37325;&#22797;ID&#32531;&#23384;</h2></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#32531;&#23384;&#20013;&#20445;&#23384;&#25509;&#25910;&#21040;&#30340;&#28040;&#24687;&#30340;<tt class="literal">org.hornetq.core.message.impl.HDR_DUPLICATE_DETECTION_ID</tt>&#23646;&#24615;&#20540;&#12290;&#27599;&#20010;&#22320;&#22336;&#26377;
              &#21333;&#29420;&#30340;&#32531;&#23384;&#12290;</p><p>&#32531;&#23384;&#30340;&#22823;&#23567;&#26159;&#22266;&#23450;&#30340;&#65292;&#24490;&#29615;&#20351;&#29992;&#12290;&#22914;&#26524;&#32531;&#23384;&#30340;&#26368;&#22823;&#21487;&#20197;&#23384;&#25918;<tt class="literal">n</tt>&#26465;&#35760;&#24405;&#65292;&#37027;&#20040;<tt class="literal">n + 1</tt>&#26465;&#35760;&#24405;&#23558;&#20250;&#35206;&#30422;&#32531;&#23384;&#20013;&#30340;&#31532;<tt class="literal">0</tt>
                &#26465;&#35760;&#24405;&#12290;</p><p>&#32531;&#23384;&#30340;&#26368;&#22823;&#23481;&#37327;&#22312;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#37197;&#32622;&#65292;&#21442;&#25968;&#26159;<tt class="literal">id-cache-size</tt>&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">2000</tt>&#26465;&#35760;&#24405;&#12290;</p><p>&#22312;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#36824;&#21487;&#20197;&#37197;&#32622;&#23558;&#32531;&#23384;&#25345;&#20037;&#21270;&#21040;&#30913;&#30424;&#12290;&#30456;&#24212;&#30340;&#21442;&#25968;
            &#26159;<tt class="literal">persist-id-cache</tt>&#12290;&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#65292;&#21017;&#27599;&#21152;&#20837;&#19968;&#20010;id&#23601;&#23558;
            &#23427;&#21516;&#26102;&#20445;&#23384;&#21040;&#30913;&#30424;&#20013;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#27880;&#24847;&#22312;&#35774;&#32622;&#32531;&#23384;&#22823;&#23567;&#26102;&#65292;&#19968;&#23450;&#35201;&#20445;&#35777;&#32531;&#23384;&#33021;&#20445;&#23384;&#36275;&#22816;&#25968;&#37327;&#30340;&#35760;&#24405;&#65292;&#24403;&#28040;&#24687;&#34987;&#37325;&#26032;&#21457;&#36865;&#26102;&#65292;&#20043;&#21069;&#21457;&#36865;&#30340;ID&#19981;&#34987;
                &#35206;&#30422;&#25481;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8949"></a>37.3.&nbsp;&#26725;&#19982;&#37325;&#22797;&#26816;&#27979;</h2></div></div><div></div></div><p>&#26680;&#24515;&#26725;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#22312;&#23558;&#28040;&#24687;&#21457;&#21521;&#30446;&#30340;&#26381;&#21153;&#22120;&#20043;&#21069;&#33258;&#21160;&#21521;&#28040;&#24687;&#20013;&#28155;&#21152;&#21807;&#19968;&#30340;id&#65288;&#22914;&#26524;&#28040;&#24687;&#20013;&#36824;&#27809;&#26377;&#30340;&#35805;&#65289;&#12290;&#36825;&#26679;
            &#22914;&#26524;&#30446;&#30340;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#65292;&#26680;&#24515;&#26725;&#22312;&#37325;&#26032;&#21457;&#36865;&#28040;&#24687;&#26102;&#65292;&#30446;&#30340;&#26381;&#21153;&#22120;&#23601;&#21487;&#20197;&#33258;&#21160;&#26816;&#27979;&#37325;&#22797;&#30340;&#28040;&#24687;&#65292;&#21457;&#29616;&#37325;&#22797;&#28040;&#24687;&#21363;&#20002;&#24323;&#12290;</p><p>&#35201;&#37197;&#32622;&#26680;&#24515;&#26725;&#30340;&#33258;&#21160;&#28155;&#21152;id&#30340;&#21151;&#33021;&#65292;&#38656;&#35201;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#26725;&#30340;&#37197;&#32622;
              &#37324;&#23558;<i class="parameter"><tt>use-duplicate-detection</tt></i>&#21442;&#25968;&#35774;&#20026;<tt class="literal">true</tt>&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p><p>&#20851;&#20110;&#26680;&#24515;&#26725;&#30340;&#37197;&#32622;&#21644;&#20351;&#29992;&#65292;&#21442;&#35265;<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8974"></a>37.4.&nbsp;&#37325;&#22797;&#26816;&#27979;&#19982;&#38598;&#32676;&#36830;&#25509;</h2></div></div><div></div></div><p>&#38598;&#32676;&#36830;&#25509;&#20869;&#37096;&#20351;&#29992;&#26680;&#24515;&#26725;&#22312;&#33410;&#28857;&#38388;&#21487;&#38752;&#22320;&#31227;&#21160;&#28040;&#24687;&#65292;&#22240;&#27492;&#23427;&#20204;&#30340;&#26680;&#24515;&#26725;&#20063;&#21487;&#20197;&#37197;&#32622;&#33258;&#21160;&#28155;&#21152;id&#30340;&#21151;&#33021;&#12290;</p><p>&#37197;&#32622;&#30340;&#26041;&#27861;&#26159;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23558;&#38598;&#32676;&#36830;&#25509;&#30340;
              <i class="parameter"><tt>use-duplicate-detection</tt></i>&#21442;&#25968;&#35774;&#20026;<tt class="literal">true</tt>&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p><p>&#26377;&#20851;&#38598;&#32676;&#36830;&#25509;&#37197;&#32622;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;<a href="#clusters" title="Chapter&nbsp;38.&nbsp;&#38598;&#32676;">Chapter&nbsp;38, <i>&#38598;&#32676;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8999"></a>37.5.&nbsp;&#20998;&#39029;&#36716;&#23384;&#19982;&#37325;&#22797;&#26816;&#27979;</h2></div></div><div></div></div><p>HornetQ&#22312;&#23558;&#28040;&#24687;&#36827;&#34892;&#20998;&#39029;&#36716;&#23384;&#20013;&#20063;&#20351;&#29992;&#20102;&#37325;&#22797;&#26816;&#27979;&#12290;&#24403;&#20998;&#39029;&#36716;&#23384;&#28040;&#24687;&#34987;&#20174;&#30913;&#30424;&#20013;&#35835;&#22238;&#21040;&#20869;&#23384;&#26102;&#65292;&#22914;&#26524;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#65292;
            &#37325;&#22797;&#26816;&#27979;&#21487;&#20197;&#36991;&#20813;&#22312;&#36825;&#19968;&#36807;&#31243;&#20013;&#26377;&#28040;&#24687;&#34987;&#37325;&#22797;&#35835;&#20837;&#65292;&#21363;&#36991;&#20813;&#20102;&#28040;&#24687;&#30340;&#37325;&#22797;&#20256;&#36882;&#12290;</p><p>&#20851;&#20110;&#20998;&#39029;&#36716;&#23384;&#30340;&#37197;&#32622;&#20449;&#24687;&#35831;&#21442;&#35265;<a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">Chapter&nbsp;24, <i>&#20998;&#39029;&#36716;&#23384;</i></a>&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="clusters"></a>Chapter&nbsp;38.&nbsp;&#38598;&#32676;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e9028"></a>38.1.&nbsp;&#38598;&#32676;&#27010;&#36848;</h2></div></div><div></div></div><p>HornetQ&#38598;&#32676;&#26159;&#30001;&#19968;&#32452;HornetQ&#26381;&#21153;&#22120;&#32452;&#25104;&#30340;&#38598;&#21512;&#65292;&#23427;&#20204;&#21327;&#21516;&#21512;&#20316;&#36827;&#34892;&#28040;&#24687;&#22788;&#29702;&#12290;&#38598;&#32676;&#20013;&#27599;&#20010;&#20027;&#33410;&#28857;&#23601;&#26159;&#19968;&#20010;
            HornetQ&#26381;&#21153;&#22120;&#65292;&#23427;&#31649;&#29702;&#33258;&#24049;&#30340;&#36830;&#25509;&#24182;&#22788;&#29702;&#33258;&#24049;&#30340;&#28040;&#24687;&#12290;&#35201;&#23558;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#37197;&#32622;&#20026;&#38598;&#32676;&#26381;&#21153;&#22120;&#65292;&#38656;&#35201;&#23558;&#37197;&#32622;
            &#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;<tt class="literal">clustered</tt>&#30340;&#20540;&#35774;
            &#20026;<tt class="literal">true</tt>&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#12290;</p><p>&#35201;&#32452;&#25104;&#19968;&#20010;&#38598;&#32676;&#65292;&#27599;&#20010;&#33410;&#28857;&#37117;&#35201;&#22312;&#20854;&#26680;&#24515;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>
            &#20013;&#22768;&#26126;<span class="emphasis"><em>&#38598;&#32676;&#36830;&#25509;</em></span>&#65292;&#29992;&#26469;&#24314;&#31435;&#19982;&#38598;&#32676;&#20013;&#20854;&#23427;&#33410;&#28857;&#30340;&#36890;&#36805;&#12290;&#27599;&#20004;&#20010;&#33410;&#28857;&#38388;&#37117;&#26159;&#36890;&#36807;&#20869;&#37096;&#30340;&#19968;&#20010;
            <span class="emphasis"><em>&#26680;&#24515;&#26725;</em></span>&#65288;&#21442;&#35265;<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#65289;&#36830;&#25509;&#30340;&#12290;&#36825;&#20123;&#36830;&#25509;&#30340;&#24314;&#31435;&#26159;
            &#36879;&#26126;&#30340;&#65293;&#65293;&#20320;&#19981;&#38656;&#35201;&#20026;&#27599;&#20010;&#36830;&#25509;&#26174;&#24335;&#22320;&#22768;&#26126;&#19968;&#20010;&#26725;&#12290;&#38598;&#32676;&#36830;&#25509;&#30340;&#20316;&#29992;&#26159;&#22312;&#38598;&#32676;&#30340;&#21508;&#20010;&#33410;&#28857;&#38388;&#36827;&#34892;&#36127;&#36733;&#24179;&#34913;&#12290;</p><p>HornetQ&#21487;&#20197;&#37319;&#29992;&#19981;&#21516;&#30340;&#25299;&#25169;&#32467;&#26500;&#26469;&#32452;&#25104;&#38598;&#32676;&#12290;&#26412;&#31456;&#21518;&#38754;&#23558;&#35762;&#36848;&#20960;&#31181;&#24120;&#29992;&#30340;&#25299;&#25169;&#32467;&#26500;&#12290;</p><p>&#25105;&#20204;&#36824;&#23558;&#35752;&#35770;&#23458;&#25143;&#31471;&#30340;&#36127;&#36733;&#22343;&#34913;&#65293;&#65293;&#23458;&#25143;&#31471;&#22914;&#20309;&#22343;&#34913;&#20854;&#19982;&#38598;&#32676;&#21508;&#33410;&#28857;&#30340;&#36830;&#25509;&#65292;&#20197;&#21450;&#28040;&#24687;&#30340;&#20877;&#20998;&#37197;&#65293;&#65293;&#22312;&#33410;&#28857;&#38388;&#21512;&#29702;
            &#30340;&#20998;&#37197;&#28040;&#24687;&#20197;&#36991;&#20813;&#28040;&#24687;&#21294;&#20047;&#65288;starvation&#65289;&#12290;</p><p>&#26412;&#31456;&#36824;&#28041;&#21450;&#38598;&#32676;&#30340;&#21478;&#19968;&#20010;&#37325;&#35201;&#26041;&#38754;&#65293;&#65293;<span class="emphasis"><em>&#26381;&#21153;&#22120;&#21457;&#29616;</em></span>&#65292;&#21363;&#26381;&#21153;&#22120;&#36890;&#36807;&#24191;&#25773;&#30340;&#26041;&#24335;&#23558;
            &#33258;&#24049;&#30340;&#36830;&#25509;&#20449;&#24687;&#21578;&#35785;&#23458;&#25143;&#31471;&#25110;&#20854;&#23427;&#26381;&#21153;&#22120;&#65292;&#20197;&#20351;&#23427;&#20204;&#33021;&#19982;&#20854;&#24314;&#31435;&#36830;&#25509;&#65292;&#19981;&#38656;&#35201;&#39069;&#22806;&#30340;&#37197;&#32622;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="clusters.server-discovery"></a>38.2.&nbsp;&#26381;&#21153;&#22120;&#21457;&#29616;</h2></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#21457;&#29616;&#26159;&#25351;&#26381;&#21153;&#22120;&#36890;&#36807;&#24191;&#25773;&#30340;&#26041;&#24335;&#23558;&#33258;&#24049;&#30340;&#36830;&#25509;&#35774;&#32622;&#21457;&#36865;&#21040;&#32593;&#32476;&#19978;&#30340;&#26426;&#21046;&#65292;&#23427;&#26377;&#20004;&#20010;&#30446;&#30340;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#34987;&#28040;&#24687;&#23458;&#25143;&#31471;&#21457;&#29616;&#12290;&#23458;&#25143;&#31471;&#25509;&#21040;&#24191;&#25773;&#21518;&#21487;&#20197;&#30693;&#36947;&#38598;&#32676;&#20013;&#26377;&#21738;&#20123;&#26381;&#21153;&#22120;&#22788;&#20110;&#24037;&#20316;&#29366;&#24577;&#20197;&#21450;&#22914;&#20309;&#19982;&#23427;&#20204;
                    &#24314;&#31435;&#36830;&#25509;&#12290;&#34429;&#28982;&#23458;&#25143;&#31471;<span class="emphasis"><em>&#21487;&#20197;</em></span>&#21487;&#20197;&#22312;&#21021;&#22987;&#21270;&#26102;&#25509;&#21463;&#19968;&#20010;&#38598;&#32676;&#26381;&#21153;&#22120;&#30340;&#21015;&#34920;&#65292;
                    &#20294;&#26159;&#36825;&#26679;&#20570;&#19982;&#24191;&#25773;&#26041;&#24335;&#30456;&#27604;&#19981;&#22815;&#28789;&#27963;&#12290;&#27604;&#22914;&#38598;&#32676;&#20013;&#26377;&#26381;&#21153;&#22120;&#31163;&#24320;&#25110;&#26032;&#21152;&#20837;&#26102;&#65292;&#21015;&#34920;&#30340;&#26041;&#24335;&#19981;&#33021;&#21450;&#26102;&#26356;&#26032;&#36825;&#20123;&#20449;&#24687;&#12290;</p></li><li><p>&#34987;&#20854;&#23427;&#26381;&#21153;&#22120;&#21457;&#29616;&#12290;&#36890;&#36807;&#24191;&#25773;&#65292;&#26381;&#21153;&#22120;&#20043;&#38388;&#21487;&#20197;&#33258;&#21160;&#24314;&#31435;&#24444;&#27492;&#38388;&#30340;&#36830;&#25509;&#65292;&#19981;&#38656;&#35201;&#20107;&#20808;&#30693;&#36947;&#38598;&#32676;&#20013;&#20854;&#23427;
                    &#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#12290;</p></li></ul></div><p>&#26381;&#21153;&#22120;&#21457;&#29616;&#20351;&#29992;<a href="http://en.wikipedia.org/wiki/User_Datagram_Protocol" target="_top">UDP</a>&#21327;&#35758;&#26469;&#24191;&#25773;&#36830;&#25509;&#35774;&#32622;&#12290;&#22914;&#26524;&#32593;&#32476;&#20013;UDP&#34987;&#20851;&#38381;&#65292;&#21017;&#19981;&#33021;&#20351;&#29992;&#26381;&#21153;&#22120;&#21457;&#29616;&#21151;&#33021;&#12290;&#21482;&#26377;&#29992;&#26174;&#24335;
            &#22320;&#25351;&#23450;&#26381;&#21153;&#22120;&#30340;&#26041;&#27861;&#26469;&#35774;&#32622;&#38598;&#32676;&#25110;&#38598;&#32676;&#30340;&#23458;&#25143;&#31471;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters.broadcast-groups"></a>38.2.1.&nbsp;&#24191;&#25773;&#32452;</h3></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#20197;&#24191;&#25773;&#32452;&#30340;&#26041;&#24335;&#26469;&#24191;&#25773;&#23427;&#30340;&#36830;&#25509;&#22120;&#20449;&#24687;&#12290;&#36830;&#25509;&#22120;&#23450;&#20041;&#20102;&#22914;&#20309;&#19982;&#35813;&#26381;&#21153;&#22120;&#24314;&#31435;&#36830;&#25509;&#30340;&#20449;&#24687;&#12290;&#20851;&#20110;&#36830;&#25509;&#22120;&#26356;&#22810;&#30340;
                &#35299;&#37322;&#65292;&#35831;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><p>&#24191;&#25773;&#32452;&#21253;&#25324;&#20102;&#19968;&#31995;&#21015;&#30340;&#36830;&#25509;&#22120;&#23545;&#12290;&#27599;&#20010;&#36830;&#25509;&#22120;&#23545;&#30001;&#20027;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;&#21644;&#22791;&#20221;&#65288;&#21487;&#36873;&#65289;&#26381;&#21153;&#22120;&#36830;&#25509;&#22120;&#20449;&#24687;&#32452;&#25104;&#12290;
                &#24191;&#25773;&#32452;&#36824;&#23450;&#20041;&#20102;&#25152;&#20351;&#29992;&#30340;UDP&#30340;&#22312;&#22336;&#21644;&#31471;&#21475;&#20449;&#24687;&#12290;</p><p>&#24191;&#25773;&#32452;&#30340;&#37197;&#32622;&#20013;&#26381;&#21153;&#22120;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#12290;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#21487;&#20197;&#26377;&#22810;&#20010;&#24191;&#25773;&#32452;&#12290;&#25152;&#26377;&#30340;&#24191;&#25773;&#32452;
                &#24517;&#38656;&#23450;&#20041;&#22312;<tt class="literal">broadcast-groups</tt>&#20869;&#12290;</p><p>&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#24191;&#25773;&#32452;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;broadcast-groups&gt;
   &lt;broadcast-group name="my-broadcast-group"&gt;
      &lt;local-bind-address&gt;172.16.9.3&lt;/local-bind-address&gt;
      &lt;local-bind-port&gt;54321&lt;/local-bind-port&gt;
      &lt;group-address&gt;231.7.7.7&lt;/group-address&gt;
      &lt;group-port&gt;9876&lt;/group-port&gt;
      &lt;broadcast-period&gt;2000&lt;/broadcast-period&gt;
      &lt;connector-ref connector-name="netty-connector" 
        backup-connector="backup-connector"/&gt;
   &lt;/broadcast-group&gt;
&lt;/broadcast-groups&gt;</pre><p>&#26377;&#20123;&#24191;&#25773;&#32452;&#30340;&#21442;&#25968;&#26159;&#21487;&#36873;&#30340;&#65292;&#36890;&#24120;&#24773;&#20917;&#19979;&#21487;&#20197;&#20351;&#29992;&#40664;&#35748;&#20540;&#12290;&#22312;&#19978;&#38754;&#20363;&#23376;&#20013;&#25105;&#20204;&#20026;&#20102;&#35828;&#26126;&#30446;&#30340;&#32473;&#20986;&#20102;&#36825;&#20123;&#21442;&#25968;&#12290;
                  &#19979;&#38754;&#26159;&#36825;&#20123;&#21442;&#25968;&#30340;&#35828;&#26126;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">name</tt>&#12290;&#27599;&#20010;&#24191;&#25773;&#32452;&#38656;&#35201;&#26377;&#19968;&#20010;&#21807;&#19968;&#30340;&#21517;&#23383;&#12290;</p></li><li><p><tt class="literal">local-bind-address</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#26159;&#22871;&#25509;&#23383;&#30340;&#26412;&#22320;&#32465;&#23450;&#22320;&#22336;&#12290;&#22914;&#26524;&#22312;&#26381;&#21153;&#22120;
                        &#20013;&#26377;&#22810;&#20010;&#32593;&#32476;&#25509;&#21475;&#21345;&#26102;&#65292;&#24517;&#39035;&#35201;&#25351;&#23450;&#20351;&#29992;&#30340;&#26159;&#21738;&#20010;&#25509;&#21475;&#12290;&#22914;&#26524;&#36825;&#20010;&#21442;&#25968;&#27809;&#26377;&#25351;&#23450;&#65292;&#37027;&#20040;&#23558;&#20351;&#29992;&#31995;&#32479;&#20869;&#26680;
                        &#25152;&#36873;&#23450;&#30340;IP&#22320;&#22336;&#12290;</p></li><li><p><tt class="literal">local-bind-port</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;&#22871;&#25509;&#23383;&#30340;&#26412;&#22320;&#32465;&#23450;&#31471;&#21475;&#12290;&#36890;&#24120;&#24773;&#20917;&#19979;
                        &#21487;&#20197;&#20351;&#29992;&#20854;&#40664;&#35748;&#20540;<tt class="literal">-1</tt>&#65292;&#34920;&#31034;&#20351;&#29992;&#38543;&#26426;&#30340;&#31471;&#21475;&#12290;&#36825;&#20010;&#21442;&#25968;&#24635;&#26159;&#21644;
                        <tt class="literal">local-bind-address</tt>&#19968;&#36215;&#23450;&#20041;&#12290;</p></li><li><p><tt class="literal">group-address</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#30340;&#26159;&#24191;&#25773;&#22320;&#22336;&#12290;&#23427;&#26159;&#19968;&#20010;D&#31867;&#30340;IP&#22320;&#22336;&#65292;
                        &#21462;&#20540;&#33539;&#22260;&#26159;<tt class="literal">224.0.0.0</tt>&#21040;<tt class="literal">239.255.255.255</tt>&#12290;
                        &#22320;&#22336;<tt class="literal">224.0.0.0</tt>&#26159;&#20445;&#30041;&#22320;&#22336;&#65292;&#25152;&#20197;&#19981;&#33021;&#20351;&#29992;&#12290;&#36825;&#20010;&#21442;&#25968;&#26159;&#24517;&#38656;&#25351;&#23450;&#12290;</p></li><li><p><tt class="literal">group-port</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#35774;&#23450;&#24191;&#25773;&#30340;UDP&#31471;&#21475;&#12290;
                        &#26159;&#19968;&#20010;&#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;&#12290;</p></li><li><p><tt class="literal">broadcast-period</tt>&#12290;&#25351;&#23450;&#20004;&#27425;&#24191;&#25773;&#20043;&#38388;&#30340;&#26102;&#38388;&#38388;&#38548;&#65292;&#21333;&#20301;&#27627;&#31186;&#12290;
                        &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#21442;&#25968;&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">1000</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">connector-ref</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;&#35201;&#24191;&#25773;&#30340;&#36830;&#25509;&#22120;&#20197;&#21450;&#21487;&#36873;&#30340;&#22791;&#20221;&#36830;&#25509;&#22120;&#12290;
                        &#65288;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#65289;&#12290;
                        <tt class="literal">connector-name</tt>&#23646;&#24615;&#30340;&#20540;&#26159;&#36830;&#25509;&#22120;&#30340;&#21517;&#23383;&#65292;
                        <tt class="literal">backup-connector</tt>&#23646;&#24615;&#26159;&#22791;&#20221;&#36830;&#25509;&#22120;&#30340;&#21517;&#23383;&#65292;&#26159;&#21487;&#36873;&#23646;&#24615;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters.discovery-groups"></a>38.2.2.&nbsp;&#21457;&#29616;&#32452;</h3></div></div><div></div></div><p>&#24191;&#25773;&#32452;&#35268;&#23450;&#20102;&#22914;&#20309;&#24191;&#25773;&#36830;&#25509;&#22120;&#30340;&#20449;&#24687;&#65292;&#21457;&#29616;&#32452;&#21017;&#23450;&#20041;&#30340;&#22914;&#20309;&#25509;&#25910;&#36830;&#25509;&#22120;&#30340;&#20449;&#24687;&#12290;</p><p>&#19968;&#20010;&#21457;&#29616;&#32452;&#21253;&#25324;&#20102;&#19968;&#31995;&#21015;&#30340;&#36830;&#25509;&#22120;&#23545;&#65293;&#65293;&#27599;&#20010;&#36830;&#25509;&#22120;&#23545;&#20195;&#34920;&#19968;&#20010;&#19981;&#21516;&#30340;&#26381;&#21153;&#22120;&#24191;&#25773;&#30340;&#36830;&#25509;&#22120;&#20449;&#24687;&#12290;&#27599;&#24403;&#25509;&#25910;&#19968;&#27425;&#24191;&#25773;&#65292;
                &#36825;&#20010;&#36830;&#25509;&#23545;&#30340;&#21015;&#34920;&#23601;&#34987;&#26356;&#26032;&#19968;&#27425;&#12290;</p><p>&#22914;&#26524;&#22312;&#19968;&#23450;&#26102;&#38388;&#20869;&#27809;&#26377;&#25910;&#21040;&#26576;&#20010;&#26381;&#21153;&#22120;&#30340;&#24191;&#25773;&#65292;&#21017;&#20854;&#30456;&#24212;&#30340;&#36830;&#25509;&#22120;&#23545;&#23558;&#20174;&#21015;&#34920;&#20013;&#21024;&#38500;&#12290;</p><p>&#21457;&#29616;&#32452;&#22312;HornetQ&#20013;&#26377;&#20004;&#22788;&#24212;&#29992;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22312;&#21019;&#24314;&#38598;&#32676;&#36830;&#25509;&#26102;&#29992;&#26469;&#21028;&#26029;&#38598;&#32676;&#20013;&#21738;&#20123;&#26381;&#21153;&#22120;&#26159;&#21487;&#20197;&#36830;&#25509;&#30340;&#12290;</p></li><li><p>&#23458;&#25143;&#31471;&#29992;&#26469;&#21457;&#29616;&#21738;&#20123;&#26381;&#21153;&#22120;&#21487;&#20197;&#36830;&#25509;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e9193"></a>38.2.3.&nbsp;&#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#21457;&#29616;&#32452;&#12290;</h3></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#31471;&#30340;&#21457;&#29616;&#32452;&#23450;&#20041;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#12290;&#25152;&#26377;&#30340;&#21457;&#29616;&#32452;&#37117;&#24517;&#39035;
                &#22312;<tt class="literal">discovery-groups</tt>&#20869;&#23450;&#20041;&#12290;&#21457;&#29616;&#32452;&#21487;&#20197;&#23450;&#20041;&#22810;&#20010;&#12290;&#35831;&#30475;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;discovery-groups&gt;
   &lt;discovery-group name="my-discovery-group"&gt;
      &lt;local-bind-address&gt;172.16.9.7&lt;/local-bind-address&gt;
      &lt;group-address&gt;231.7.7.7&lt;/group-address&gt;
      &lt;group-port&gt;9876&lt;/group-port&gt;
      &lt;refresh-timeout&gt;10000&lt;/refresh-timeout&gt;
   &lt;/discovery-group&gt;
&lt;/discovery-groups&gt;</pre><p>&#19979;&#38754;&#26159;&#23545;&#27599;&#20010;&#21442;&#25968;&#30340;&#35299;&#37322;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">name</tt>&#23646;&#24615;&#12290;&#27599;&#20010;&#21457;&#29616;&#32452;&#37117;&#24517;&#39035;&#26377;&#19968;&#20010;&#21807;&#19968;&#30340;&#21517;&#23383;&#12290;</p></li><li><p><tt class="literal">local-bind-address</tt>&#12290;&#22914;&#26524;&#20320;&#30340;&#20027;&#26426;&#26377;&#22810;&#20010;&#32593;&#32476;&#25509;&#21475;&#65292;&#20320;&#21487;&#33021;&#24076;&#26395;&#21457;&#29616;&#32452;&#21482;&#30417;&#21548;&#19968;&#20010;&#25351;&#23450;&#30340;
                    &#32593;&#32476;&#25509;&#21475;&#12290;&#36825;&#20010;&#21442;&#25968;&#23601;&#21487;&#20197;&#29992;&#20110;&#36825;&#20010;&#30446;&#30340;&#12290;&#23427;&#26159;&#19968;&#20010;&#21487;&#36873;&#21442;&#25968;&#12290;</p></li><li><p><tt class="literal">group-address</tt>&#12290;&#38656;&#35201;&#30417;&#21548;&#30340;&#24191;&#25773;&#22320;&#22336;&#12290;&#23427;&#38656;&#35201;&#19982;&#24191;&#25773;&#32452;&#30340;
                        <tt class="literal">group-address</tt>&#19968;&#33268;&#25165;&#21487;&#20197;&#25910;&#21040;&#24191;&#25773;&#32452;&#30340;&#20449;&#24687;&#12290;&#36825;&#26159;&#19968;&#20010;&#24517;&#35201;&#21442;&#25968;&#12290;</p></li><li><p><tt class="literal">group-port</tt>&#12290;&#38656;&#35201;&#30417;&#21548;&#30340;UDP&#31471;&#21475;&#12290;&#23427;&#38656;&#35201;&#19982;&#24191;&#25773;&#32452;&#30340;
                        <tt class="literal">group-port</tt>&#20540;&#30456;&#21516;&#25165;&#21487;&#20197;&#25910;&#21040;&#24191;&#25773;&#32452;&#30340;&#20449;&#24687;&#12290;&#36825;&#26159;&#19968;&#20010;&#24517;&#35201;&#21442;&#25968;&#12290;</p></li><li><p><tt class="literal">refresh-timeout</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102;&#22312;&#25910;&#21040;&#26576;&#20010;&#26381;&#21153;&#22120;&#30340;&#24191;&#25773;&#21518;&#65292;&#38656;&#35201;&#31561;&#24453;
                        &#22810;&#38271;&#26102;&#38388;&#19979;&#19968;&#27425;&#24191;&#25773;&#24517;&#39035;&#25910;&#21040;&#65292;&#21542;&#21017;&#23558;&#35813;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;&#23545;&#20174;&#21015;&#34920;&#20013;&#21024;&#38500;&#12290;&#36890;&#24120;&#36825;&#20010;&#21442;&#25968;&#30340;&#20540;&#24212;&#35813;&#36828;&#22823;&#20110;
                        &#24191;&#25773;&#32452;&#30340;<tt class="literal">broadcast-period</tt>&#65292;&#21542;&#21017;&#20250;&#20351;&#26381;&#21153;&#22120;&#20449;&#24687;&#30001;&#20110;&#23567;&#30340;&#26102;&#38388;&#24046;&#24322;&#32780;&#20002;&#22833;&#12290;
                        &#36825;&#20010;&#21442;&#25968;&#26159;&#21487;&#36873;&#30340;&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">10000</tt>&#27627;&#31186;&#65288;10&#31186;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters-discovery.groups.clientside"></a>38.2.4.&nbsp;&#23458;&#25143;&#31471;&#30340;&#21457;&#29616;&#32452;</h3></div></div><div></div></div><p>&#29616;&#22312;&#35752;&#35770;&#22914;&#20309;&#37197;&#32622;HornetQ&#23458;&#25143;&#31471;&#26469;&#21457;&#29616;&#21487;&#20197;&#36830;&#25509;&#30340;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;&#20351;&#29992;JMS&#26102;&#25152;&#29992;&#30340;&#26041;&#27861;&#19982;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#26102;&#25152;&#29992;&#30340;
                &#26041;&#27861;&#26377;&#25152;&#19981;&#21516;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e9251"></a>38.2.4.1.&nbsp;&#20351;&#29992;JMS&#26102;&#23458;&#25143;&#31471;&#21457;&#29616;&#30340;&#37197;&#32622;&#26041;&#27861;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#24182;&#19988;&#22312;&#26381;&#21153;&#22120;&#31471;&#30340;JMS&#36830;&#25509;&#24037;&#21378;&#26159;&#27880;&#20876;&#21040;JNDI&#30340;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#20197;&#22312;&#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;&#25991;&#20214;
                    <tt class="literal">hornetq-jms.xml</tt>&#20013;&#25351;&#23450;&#36830;&#25509;&#24037;&#21378;&#25152;&#29992;&#30340;&#21457;&#29616;&#32452;&#12290;&#22914;&#19979;&#38754;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
   &lt;discovery-group-ref discovery-group-name="my-discovery-group"/&gt;
    &lt;entries&gt;
       &lt;entry name="ConnectionFactory"/&gt;
    &lt;/entries&gt;
&lt;/connection-factory&gt;</pre><p>&#20854;&#20013;<tt class="literal">discovery-group-ref</tt>&#30340;&#20540;&#26159;&#23450;&#20041;&#22312;
                    <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;&#19968;&#20010;&#21457;&#29616;&#32452;&#12290;</p><p>&#24403;&#36830;&#25509;&#24037;&#21378;&#20174;JNDI&#19979;&#36733;&#21040;&#23458;&#25143;&#31471;&#26102;&#65292;&#20351;&#29992;&#23427;&#21019;&#24314;&#36830;&#25509;&#23601;&#20250;&#22312;&#21015;&#34920;&#20013;&#30340;&#26381;&#21153;&#22120;&#38388;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#12290;
                    &#23458;&#25143;&#31471;&#36890;&#36807;&#30417;&#21548;&#21457;&#29616;&#32452;&#20013;&#30340;&#24191;&#25773;&#22320;&#22336;&#21487;&#20197;&#19981;&#26029;&#26356;&#26032;&#36825;&#20010;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;JMS&#20294;&#26159;&#19981;&#29992;JNDI&#65292;&#32780;&#26159;&#30452;&#25509;&#23454;&#20363;&#21270;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#30340;&#35805;&#65292;&#21487;&#20197;&#29992;&#36866;&#24403;&#30340;&#26041;&#27861;&#26469;&#35774;&#32622;&#21457;&#29616;&#32452;&#30340;&#21508;&#20010;
                    &#21442;&#25968;&#12290;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">final String groupAddress = "231.7.7.7";

final int groupPort = 9876;

ConnectionFactory jmsConnectionFactory = 
        HornetQJMSClient.createConnectionFactory(groupAddress, groupPort);

Connection jmsConnection1 = jmsConnectionFactory.createConnection();

Connection jmsConnection2 = jmsConnectionFactory.createConnection();</pre><p><tt class="literal">refresh-timeout</tt>&#21442;&#25968;&#21487;&#20197;&#30452;&#25509;&#22312;&#36830;&#25509;&#24037;&#21378;&#19978;&#20351;&#29992;
                    <tt class="literal">setDiscoveryRefreshTimeout()</tt>&#26041;&#27861;&#35774;&#32622;&#12290;</p><p>&#36830;&#25509;&#24037;&#21378;&#36824;&#26377;&#19968;&#20010;&#26041;&#27861;<tt class="literal">setDiscoveryInitialWaitTimeout()</tt>&#12290;&#23427;&#21487;&#20197;&#35774;&#32622;&#36830;&#25509;&#24037;&#21378;&#30340;
                    &#21021;&#22987;&#31561;&#24453;&#26102;&#38388;&#12290;&#24403;&#19968;&#20010;&#36830;&#25509;&#24037;&#21378;&#34987;&#21019;&#24314;&#21518;&#31435;&#21363;&#36827;&#34892;&#29992;&#20110;&#21019;&#24314;&#36830;&#25509;&#30340;&#35805;&#65292;&#36830;&#25509;&#24037;&#21378;&#21487;&#33021;&#27809;&#26377;&#36275;&#22815;&#30340;&#26102;&#38388;&#26469;&#25509;&#25910;&#21508;
                    &#20010;&#26381;&#21153;&#22120;&#21457;&#20986;&#30340;&#24191;&#25773;&#20449;&#24687;&#65292;&#20063;&#23601;&#26080;&#27861;&#24314;&#31435;&#23436;&#25972;&#30340;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;&#26377;&#20102;&#36825;&#20010;&#21442;&#25968;&#65292;&#36830;&#25509;&#24037;&#21378;&#20250;&#22312;&#39318;&#27425;&#21019;&#24314;&#36830;&#25509;&#26102;
                    &#31561;&#24453;&#19968;&#23450;&#30340;&#26102;&#38388;&#65292;&#20197;&#25509;&#25910;&#24191;&#25773;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">10000</tt>&#27627;&#31186;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e9290"></a>38.2.4.2.&nbsp;&#20351;&#29992;&#26680;&#24515;API&#30340;&#23458;&#25143;&#31471;&#30340;&#37197;&#32622;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#30452;&#25509;&#21019;&#24314;<tt class="literal">ClientSessionFactory</tt>&#30340;&#23454;&#20363;&#65292;&#21487;&#20197;&#20351;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;
                    &#30452;&#25509;&#36827;&#34892;&#21442;&#25968;&#30340;&#35774;&#32622;&#65292;&#22914;&#65306;
                    </p><pre class="programlisting">
                    final String groupAddress = "231.7.7.7"; 
                    final int groupPort = 9876;
                    SessionFactory factory = HornetQClient.createClientSessionFactory(groupAddress, groupPort);
                    ClientSession session1 = factory.createClientSession(...); ClientSession
                    session2 = factory.createClientSession(...);
                
                </pre><p>
                </p><p>&#26041;&#27861;<tt class="literal">setDiscoveryRefreshTimeout()</tt>&#21487;&#20197;&#29992;&#26469;&#30452;&#25509;&#35774;&#32622;&#21442;&#25968;
                    <tt class="literal">refresh-timeout</tt>&#12290;</p><p>&#20250;&#35805;&#24037;&#21378;&#36824;&#26377;&#19968;&#20010;&#26041;&#27861;<tt class="literal">setDiscoveryInitialWaitTimeout()</tt>&#12290;&#23427;&#21487;&#20197;&#35774;&#32622;&#20250;&#35805;&#24037;&#21378;&#30340;
                    &#21021;&#22987;&#31561;&#24453;&#26102;&#38388;&#12290;&#24403;&#19968;&#20010;&#20250;&#35805;&#24037;&#21378;&#34987;&#21019;&#24314;&#21518;&#31435;&#21363;&#36827;&#34892;&#29992;&#20110;&#21019;&#24314;&#36830;&#25509;&#30340;&#35805;&#65292;&#35813;&#20250;&#35805;&#24037;&#21378;&#21487;&#33021;&#27809;&#26377;&#36275;&#22815;&#30340;&#26102;&#38388;&#26469;&#25509;&#25910;&#21508;
                    &#20010;&#26381;&#21153;&#22120;&#21457;&#20986;&#30340;&#24191;&#25773;&#20449;&#24687;&#65292;&#20063;&#23601;&#26080;&#27861;&#24314;&#31435;&#23436;&#25972;&#30340;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;&#26377;&#20102;&#36825;&#20010;&#21442;&#25968;&#65292;&#20250;&#35805;&#24037;&#21378;&#20250;&#22312;&#39318;&#27425;&#21019;&#24314;&#36830;&#25509;&#26102;
                    &#31561;&#24453;&#19968;&#23450;&#30340;&#26102;&#38388;&#65292;&#20197;&#25509;&#25910;&#24191;&#25773;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">10000</tt>&#27627;&#31186;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e9317"></a>38.3.&nbsp;&#26381;&#21153;&#22120;&#31471;&#28040;&#24687;&#30340;&#36127;&#36733;&#22343;&#34913;</h2></div></div><div></div></div><p>&#22914;&#26524;&#38598;&#32676;&#21644;&#21508;&#33410;&#28857;&#38388;&#23450;&#20041;&#20102;&#38598;&#32676;&#36830;&#25509;&#65292;HornetQ&#21487;&#20197;&#23545;&#21040;&#36798;&#19968;&#20010;&#33410;&#28857;&#30340;&#28040;&#24687;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#12290;</p><p>&#20030;&#19968;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#12290;&#19968;&#20010;&#38598;&#32676;&#26377;4&#20010;&#33410;&#28857;&#65292;&#20998;&#21035;&#31216;&#20026;&#33410;&#28857;A&#12289;B&#12289;C&#21644;&#33410;&#28857;D&#12290;&#23427;&#20204;&#32452;&#25104;&#20102;&#19968;&#20010;
                <span class="emphasis"><em>&#23545;&#31216;&#24335;&#38598;&#32676;</em></span>&#65288;&#26377;&#20851;&#23545;&#31216;&#24335;&#38598;&#32676;&#21442;&#35265;<a href="#symmetric-cluster" title="38.7.1.&nbsp;&#23545;&#31216;&#24335;&#38598;&#32676;">Section&nbsp;38.7.1, &#8220;&#23545;&#31216;&#24335;&#38598;&#32676;&#8221;</a>&#65289;&#12290;
                &#22312;&#27599;&#20010;&#33410;&#28857;&#19978;&#37096;&#32626;&#20102;&#19968;&#20010;&#21517;&#20026;<tt class="literal">OrderQueue</tt>&#30340;&#38431;&#21015;&#12290;</p><p>&#19968;&#20010;&#23458;&#25143;&#31471;Ca&#36830;&#25509;&#21040;&#33410;&#28857;A&#24182;&#21521;&#20854;&#21457;&#36865;&#35746;&#21333;&#28040;&#24687;&#12290;&#23458;&#25143;&#31471;Pa&#12289;Pb&#12289;Pc&#21644;Pd&#20998;&#21035;&#36830;&#25509;&#21040;&#33410;&#28857;A&#12289;B&#12289;C&#21644;D&#24182;&#25509;&#25910;&#22788;&#29702;
            &#36825;&#20123;&#35746;&#21333;&#28040;&#24687;&#12290;&#22914;&#26524;&#22312;&#33410;&#28857;A&#20013;&#27809;&#26377;&#23450;&#20041;&#38598;&#32676;&#36830;&#25509;&#65292;&#37027;&#20040;&#35746;&#21333;&#28040;&#24687;&#37117;&#21457;&#36865;&#21040;&#33410;&#28857;A&#20013;&#30340;&#38431;&#21015;<tt class="literal">OrderQueue</tt>
            &#20013;&#12290;&#22240;&#27492;&#21482;&#26377;&#36830;&#25509;&#21040;&#33410;&#28857;A&#30340;&#23458;&#25143;&#31471;Pa&#25165;&#33021;&#25509;&#25910;&#21040;&#35746;&#21333;&#28040;&#24687;&#12290;</p><p>&#22914;&#26524;&#22312;&#33410;&#28857;A&#23450;&#20041;&#20102;&#38598;&#32676;&#36830;&#25509;&#30340;&#35805;&#65292;&#21457;&#36865;&#21040;&#33410;&#28857;A&#30340;&#28040;&#24687;&#34987;&#36718;&#27969;&#65288;round-robin&#65289;&#20174;&#33410;&#28857;A&#20998;&#37197;&#21040;&#21508;&#20010;&#33410;&#28857;&#19978;&#30340;
            <tt class="literal">OrderQueue</tt>&#38431;&#21015;&#20013;&#12290;&#36825;&#31181;&#28040;&#24687;&#20998;&#37197;&#23436;&#20840;&#22312;&#26381;&#21153;&#22120;&#31471;&#23436;&#25104;&#65292;&#23458;&#25143;&#31471;&#21482;&#21521;&#33410;&#28857;A&#21457;&#36865;&#28040;&#24687;&#12290;</p><p>&#20363;&#22914;&#21040;&#36798;&#33410;&#28857;A&#30340;&#28040;&#24687;&#21487;&#33021;&#20197;&#19979;&#21015;&#39034;&#24207;&#36827;&#34892;&#20998;&#37197;&#65306;B&#12289;D&#12289;C&#12289;A&#12289;B&#12289;D&#12289;C&#12289;A&#12289;B&#12289;D&#12290;&#20855;&#20307;&#30340;&#39034;&#24207;&#21462;&#20915;&#20110;&#33410;&#28857;&#21551;&#21160;&#30340;
            &#20808;&#21518;&#65292;&#20294;&#26159;&#20854;&#31639;&#27861;&#26159;&#19981;&#21464;&#30340;&#65288;&#21363;round-robin&#65289;&#12290;</p><p>HornetQ&#38598;&#32676;&#36830;&#25509;&#22312;&#36827;&#34892;&#28040;&#24687;&#36127;&#36733;&#22343;&#34913;&#26102;&#65292;&#21487;&#20197;&#37197;&#32622;&#25104;&#32479;&#19968;&#36127;&#36733;&#22343;&#34913;&#27169;&#24335;&#65292;&#21363;&#19981;&#31649;&#21508;&#20010;&#33410;&#28857;&#19978;&#26377;&#26080;&#21512;&#36866;&#30340;&#25509;&#25910;&#32773;&#65292;&#19968;&#24459;&#22312;
            &#25152;&#26377;&#33410;&#28857;&#38388;&#36827;&#34892;&#28040;&#24687;&#30340;&#20998;&#37197;&#12290;&#20063;&#21487;&#20197;&#37197;&#32622;&#25104;&#20026;&#26234;&#33021;&#36127;&#36733;&#22343;&#34913;&#27169;&#24335;&#65292;&#21363;&#21482;&#23558;&#28040;&#24687;&#20998;&#37197;&#21040;&#26377;&#21512;&#36866;&#25509;&#25910;&#32773;&#30340;&#33410;&#28857;&#19978;&#12290;&#36825;&#20004;&#31181;&#27169;&#24335;&#25105;&#20204;
            &#37117;&#23558;&#20030;&#20363;&#35828;&#26126;&#12290;&#39318;&#20808;&#25105;&#20204;&#20808;&#20171;&#32461;&#19968;&#33324;&#30340;&#38598;&#32676;&#36830;&#25509;&#37197;&#32622;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters.cluster-connections"></a>38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;</h3></div></div><div></div></div><p>&#38598;&#32676;&#36830;&#25509;&#23558;&#19968;&#32452;&#26381;&#21153;&#22120;&#36830;&#25509;&#25104;&#20026;&#19968;&#20010;&#38598;&#32676;&#65292;&#28040;&#24687;&#21487;&#20197;&#22312;&#38598;&#32676;&#30340;&#33410;&#28857;&#20043;&#38388;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#12290;&#38598;&#32676;&#36830;&#25509;&#30340;&#37197;&#32622;&#22312;
                <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;
                <tt class="literal">cluster-connection</tt>&#20869;&#12290;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#21487;&#20197;&#26377;&#38646;&#20010;&#25110;&#22810;&#20010;&#38598;&#32676;&#36830;&#25509;&#12290;
                &#19979;&#38754;&#26159;&#19968;&#20010;&#20856;&#22411;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;cluster-connections&gt;
    &lt;cluster-connection name="my-cluster"&gt;
        &lt;address&gt;jms&lt;/address&gt;
        &lt;retry-interval&gt;500&lt;/retry-interval&gt;
        &lt;use-duplicate-detection&gt;true&lt;/use-duplicate-detection&gt;
        &lt;forward-when-no-consumers&gt;false&lt;/forward-when-no-consumers&gt;
        &lt;max-hops&gt;1&lt;/max-hops&gt;
        &lt;discovery-group-ref discovery-group-name="my-discovery-group"/&gt;
    &lt;/cluster-connection&gt;
&lt;/cluster-connections&gt;                
            </pre><p>&#19978;&#38754;&#32473;&#20986;&#20102;&#38598;&#32676;&#36830;&#25509;&#30340;&#25152;&#26377;&#21487;&#37197;&#32622;&#21442;&#25968;&#12290;&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#26377;&#20123;&#20320;&#21487;&#20197;&#20351;&#29992;&#40664;&#35748;&#20540;&#65292;&#19981;&#24517;&#20840;&#37096;&#32473;&#20986;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">address</tt>&#12290;&#27599;&#20010;&#38598;&#32676;&#36830;&#25509;&#21482;&#26381;&#21153;&#20110;&#21457;&#36865;&#21040;&#20197;&#36825;&#20010;&#21442;&#25968;&#30340;&#20540;&#20026;&#24320;&#22987;&#30340;
                        &#22320;&#22336;&#30340;&#28040;&#24687;&#12290;</p><p>&#26412;&#20363;&#20013;&#30340;&#38598;&#32676;&#36830;&#25509;&#21482;&#23545;&#21457;&#24448;&#20197;<tt class="literal">jms</tt>&#20026;&#24320;&#22987;&#30340;&#22320;&#22336;&#30340;&#28040;&#24687;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#30340;
                        &#22788;&#29702;&#12290;&#36825;&#20010;&#38598;&#32676;&#36830;&#25509;&#23454;&#38469;&#19978;&#33021;&#22815;&#22788;&#29702;&#25152;&#26377;JMS&#38431;&#21015;&#21644;&#35805;&#39064;&#30340;&#35746;&#38405;&#20013;&#30340;&#28040;&#24687;&#65292;&#36825;&#26159;&#22269;&#20026;&#25152;&#26377;JMS&#30340;&#38431;&#21015;
                        &#25110;&#35746;&#38405;&#37117;&#26144;&#23556;&#21040;&#20869;&#26680;&#20013;&#20197;&#8220;jms&#8220;&#24320;&#22836;&#30340;&#38431;&#21015;&#12290;</p><p>&#36825;&#20010;&#22320;&#22336;&#21487;&#20197;&#20026;&#20219;&#20309;&#20540;&#65292;&#32780;&#19988;&#21487;&#20197;&#37197;&#32622;&#22810;&#20010;&#38598;&#32676;&#36830;&#25509;&#65292;&#27599;&#20010;&#36830;&#25509;&#30340;&#22320;&#22336;&#20540;&#21487;&#20197;&#19981;&#21516;&#12290;&#36825;&#26679;HornetQ
                        &#21487;&#20197;&#21516;&#26102;&#23545;&#19981;&#21516;&#22320;&#22336;&#21516;&#26102;&#36827;&#34892;&#28040;&#24687;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;&#26377;&#30340;&#22320;&#22336;&#29978;&#33267;&#21487;&#33021;&#22312;&#20854;&#23427;&#38598;&#32676;&#30340;&#33410;&#28857;&#20013;&#12290;&#36825;&#20063;&#23601;&#24847;&#35859;&#30528;
                        &#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#21487;&#20197;&#21516;&#26102;&#21442;&#19982;&#21040;&#22810;&#20010;&#38598;&#32676;&#20013;&#12290;</p><p>&#35201;&#27880;&#24847;&#21035;&#36896;&#25104;&#22810;&#20010;&#38598;&#32676;&#36830;&#25509;&#30340;&#22320;&#22336;&#20114;&#30456;&#37325;&#22797;&#12290;&#27604;&#22914;&#65292;&#22320;&#22336;&#8220;europe&#8220;&#21644;&#8221;europe.news&#8220;&#23601;&#20114;&#30456;&#37325;&#22797;&#65292;
                        &#23601;&#20250;&#36896;&#25104;&#21516;&#19968;&#20010;&#28040;&#24687;&#20250;&#34987;&#22810;&#20010;&#38598;&#32676;&#36830;&#25509;&#36827;&#34892;&#20998;&#37197;&#65292;&#36825;&#26679;&#26377;&#21487;&#33021;&#21457;&#29983;&#37325;&#22797;&#20256;&#36882;&#12290;</p><p>&#26412;&#21442;&#25968;&#26159;&#24517;&#39035;&#25351;&#23450;&#30340;&#12290;</p></li><li><p><tt class="literal">retry-interval</tt>&#12290;&#22914;&#21069;&#25152;&#36848;&#65292;&#19968;&#20010;&#38598;&#32676;&#36830;&#25509;&#23454;&#38469;&#19978;&#22312;&#20869;&#37096;&#26159;&#29992;&#26725;&#23558;&#20004;
                        &#20010;&#33410;&#28857;&#36830;&#25509;&#36215;&#26469;&#12290;&#22914;&#26524;&#38598;&#32676;&#36830;&#25509;&#24050;&#32463;&#21019;&#24314;&#20294;&#26159;&#30446;&#30340;&#33410;&#28857;&#36824;&#26410;&#21551;&#21160;&#65292;&#25110;&#27491;&#22312;&#37325;&#21551;&#65292;&#36825;&#26102;&#38598;&#32676;&#36830;&#25509;&#23601;&#20250;&#19981;&#26029;
                        &#37325;&#35797;&#19982;&#36825;&#20010;&#33410;&#28857;&#30340;&#36830;&#25509;&#65292;&#30452;&#21040;&#33410;&#28857;&#21551;&#21160;&#23436;&#27605;&#36830;&#25509;&#25104;&#21151;&#20026;&#27490;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102;&#20004;&#27425;&#37325;&#35797;&#20043;&#38388;&#30340;&#26102;&#38388;&#38388;&#38548;&#65292;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;&#23427;&#19982;&#26725;&#30340;&#21442;&#25968;<tt class="literal">retry-interval</tt>
                        &#30340;&#21547;&#20041;&#30456;&#21516;&#65288;&#21442;&#35265;<a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">Chapter&nbsp;36, <i>&#26680;&#24515;&#26725;</i></a>&#65289;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#26159;&#21487;&#36873;&#30340;&#65292;&#40664;&#35748;&#20540;&#26159;<tt class="literal">500</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">use-duplicate-detection</tt>&#12290;&#38598;&#32676;&#36830;&#25509;&#20351;&#29992;&#26725;&#26469;&#36830;&#25509;&#21508;&#33410;&#28857;&#65292;&#32780;&#26725;&#21487;&#20197;
                        &#36890;&#36807;&#37197;&#32622;&#21521;&#27599;&#20010;&#36716;&#21457;&#30340;&#28040;&#24687;&#28155;&#21152;&#19968;&#20010;&#37325;&#22797;id&#30340;&#23646;&#24615;&#12290;&#22914;&#26524;&#30446;&#30340;&#33410;&#28857;&#23849;&#28291;&#24182;&#37325;&#21551;&#65292;&#28040;&#24687;&#21487;&#20197;&#34987;&#37325;&#26032;&#21457;&#36865;&#12290;
                        &#37325;&#22797;&#26816;&#27979;&#30340;&#21151;&#33021;&#23601;&#26159;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#23558;&#37325;&#22797;&#21457;&#36865;&#30340;&#28040;&#24687;&#36827;&#34892;&#36807;&#28388;&#24182;&#20002;&#24323;&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#19982;&#26725;&#30340;&#21442;&#25968;<tt class="literal">use-duplicate-detection</tt>&#30456;&#21516;&#12290;&#20851;&#20110;&#37325;&#22797;&#26816;&#27979;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;
                        <a href="#duplicate-detection" title="Chapter&nbsp;37.&nbsp;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;">Chapter&nbsp;37, <i>&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</i></a>&#12290;</p><p>&#36825;&#21442;&#25968;&#26159;&#21487;&#36873;&#30340;&#65292;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></li><li><p><tt class="literal">forward-when-no-consumers</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102;&#26159;&#21542;&#21521;&#27809;&#26377;&#21512;&#36866;&#25509;&#25910;&#32773;
                        &#30340;&#33410;&#28857;&#20998;&#37197;&#28040;&#24687;&#12290;&#21363;&#19981;&#31649;&#26377;&#27809;&#26377;&#21512;&#36866;&#30340;&#25509;&#25910;&#32773;&#65292;&#28040;&#24687;&#22312;&#25152;&#26377;&#30340;&#33410;&#28857;&#38388;&#36718;&#27969;&#20998;&#37197;&#12290;</p><p>&#22914;&#26524;&#36825;&#20010;&#21442;&#25968;&#35774;&#20026;<tt class="literal">true</tt>&#65292;&#21017;&#28040;&#24687;&#23601;&#20250;&#36718;&#27969;&#22312;&#27599;&#20010;&#33410;&#28857;&#38388;&#20998;&#37197;&#65292;&#19981;&#31649;&#26159;&#21542;
                        &#33410;&#28857;&#19978;&#26377;&#27809;&#26377;&#30456;&#24212;&#30340;&#25509;&#25910;&#32773;&#65288;&#25110;&#32773;&#26377;&#25509;&#25910;&#32773;&#20294;&#26159;&#20855;&#26377;&#19981;&#21305;&#37197;&#30340;&#36873;&#25321;&#22120;&#65289;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#20854;&#23427;&#33410;&#28857;&#20013;&#27809;&#26377;
                        &#19982;&#26412;&#33410;&#28857;&#21516;&#21517;&#30340;&#38431;&#21015;&#65292;HornetQ&#19981;&#20250;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#37027;&#20123;&#33410;&#28857;&#20013;&#21435;&#65292;&#19981;&#21463;&#26412;&#21442;&#25968;&#30340;&#38480;&#21046;&#12290;</p><p>&#22914;&#26524;&#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#65292; HornetQ&#20013;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#38598;&#32676;&#20013;&#37027;&#20123;&#26377;&#30528;&#36866;&#21512;&#25509;&#25910;&#32773;
                        &#30340;&#33410;&#28857;&#20013;&#12290;&#22914;&#26524;&#25509;&#25910;&#32773;&#26377;&#36873;&#25321;&#22120;&#65292;&#21017;&#33267;&#23569;&#26377;&#19968;&#20010;&#36873;&#25321;&#22120;&#19982;&#25152;&#36716;&#21457;&#30340;&#28040;&#24687;&#21305;&#37197;&#25165;&#21487;&#65292;&#21542;&#21017;&#19981;&#36716;&#21457;&#12290;</p><p>&#26412;&#21442;&#25968;&#26159;&#21487;&#36873;&#30340;&#65292;&#40664;&#35748;&#20540;&#26159;<tt class="literal">false</tt>&#12290;</p></li><li><p><tt class="literal">max-hops</tt>&#12290;&#24403;&#19968;&#20010;&#38598;&#32676;&#36830;&#25509;&#22312;&#30830;&#23450;&#36827;&#34892;&#28040;&#24687;&#36127;&#36733;&#22343;&#34913;&#30340;&#33410;&#28857;&#32452;&#26102;&#65292;&#36825;&#20123;
                        &#33410;&#28857;&#19981;&#19968;&#23450;&#26159;&#19982;&#26412;&#33410;&#28857;&#30452;&#25509;&#30456;&#36830;&#30340;&#33410;&#28857;&#12290;HornetQ&#21487;&#20197;&#36890;&#36807;&#20854;&#23427;HornetQ&#33410;&#28857;&#20316;&#20026;&#20013;&#20171;&#21521;&#37027;&#20123;&#38750;&#30452;&#25509;&#30456;
                        &#36830;&#30340;&#33410;&#28857;&#36716;&#21457;&#28040;&#24687;&#12290;</p><p>&#36825;&#26679;&#21487;&#20197;&#20351;HornetQ&#32452;&#25104;&#26356;&#21152;&#22797;&#26434;&#30340;&#25299;&#25169;&#32467;&#26500;&#24182;&#19988;&#20173;&#21487;&#25552;&#20379;&#28040;&#24687;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;&#22312;&#26412;&#31456;&#30340;&#21518;&#38754;&#25105;&#20204;&#36824;&#35201;&#20316;
                        &#36827;&#19968;&#27493;&#30340;&#35752;&#35770;&#12290;</p><p>&#26412;&#21442;&#25968;&#26159;&#21487;&#36873;&#21442;&#25968;&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159; <tt class="literal">1</tt>&#65292;&#34920;&#31034;&#28040;&#24687;&#21482;&#21521;&#30452;&#25509;&#30456;&#36830;&#30340;&#33410;&#28857;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#12290;</p></li><li><p><tt class="literal">discovery-group-ref</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#20915;&#23450;&#20102;&#20351;&#29992;&#21738;&#20010;&#21457;&#29616;&#32452;&#26469;&#33719;&#24471;&#38598;&#32676;&#26381;&#21153;&#22120;&#30340;&#21015;&#34920;&#12290;
                        &#38598;&#32676;&#36830;&#25509;&#19982;&#21015;&#34920;&#20013;&#30340;&#26381;&#21153;&#22120;&#24314;&#31435;&#36830;&#25509;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters.clusteruser"></a>38.3.2.&nbsp;&#38598;&#32676;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;</h3></div></div><div></div></div><p>&#24403;&#38598;&#32676;&#20013;&#20004;&#20010;&#33410;&#28857;&#24314;&#31435;&#36830;&#25509;&#26102;&#65292;HornetQ&#20351;&#29992;&#19968;&#20010;&#38598;&#32676;&#29992;&#25143;&#21644;&#38598;&#32676;&#23494;&#30721;&#12290;&#23427;&#20204;&#23450;&#20041;&#22312;
                  <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#65306;</p><pre class="programlisting">
                &lt;cluster-user&gt;HORNETQ.CLUSTER.ADMIN.USER&lt;/cluster-user&gt;
                &lt;cluster-password&gt;CHANGE ME!!&lt;/cluster-password&gt;
            </pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>&#24378;&#28872;&#24314;&#35758;&#22312;&#23454;&#38469;&#24212;&#29992;&#20013;&#19981;&#35201;&#20351;&#29992;&#40664;&#35748;&#30340;&#20540;&#65292;&#21542;&#21017;&#20219;&#24847;&#36828;&#31243;&#23458;&#25143;&#31471;&#20250;&#20351;&#29992;&#36825;&#20123;&#40664;&#35748;&#20540;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#19978;&#12290;&#24403;&#20351;&#29992;&#40664;&#35748;&#20540;&#26102;&#65292;
                HornetQ&#20250;&#26816;&#27979;&#21040;&#24182;&#22312;&#27599;&#27425;&#21551;&#21160;&#30340;&#26102;&#20505;&#32473;&#20986;&#35686;&#21578;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="clusters.client.loadbalancing"></a>38.4.&nbsp;&#23458;&#25143;&#31471;&#36127;&#36733;&#22343;&#34913;</h2></div></div><div></div></div><p>HornetQ&#30340;&#23458;&#25143;&#31471;&#36127;&#36733;&#22343;&#34913;&#20351;&#21516;&#19968;&#20010;&#20250;&#35805;&#24037;&#21378;&#27599;&#27425;&#21019;&#24314;&#19968;&#20010;&#20250;&#35805;&#26102;&#65292;&#37117;&#36830;&#25509;&#21040;&#38598;&#32676;&#19981;&#21516;&#30340;&#33410;&#28857;&#19978;&#12290;&#36825;&#26679;&#21487;&#20197;&#20351;&#25152;&#30340;&#26377;&#20250;&#35805;
            &#22343;&#21248;&#20998;&#24067;&#22312;&#38598;&#32676;&#30340;&#21508;&#20010;&#33410;&#28857;&#19978;&#65292;&#32780;&#19981;&#20250;&#8216;&#25317;&#25380;&#8217;&#21040;&#26576;&#19968;&#20010;&#33410;&#28857;&#19978;&#12290;</p><p>&#23458;&#25143;&#31471;&#36127;&#36733;&#22343;&#34913;&#30340;&#31574;&#30053;&#26159;&#21487;&#37197;&#32622;&#30340;&#12290;HornetQ&#25552;&#20379;&#20004;&#31181;&#29616;&#25104;&#30340;&#36127;&#36733;&#22343;&#34913;&#31574;&#30053;&#12290;&#20320;&#20063;&#21487;&#20197;&#23454;&#29616;&#33258;&#24049;&#30340;&#31574;&#30053;&#12290;</p><p>&#20004;&#31181;&#29616;&#25104;&#30340;&#31574;&#30053;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#36718;&#27969;&#31574;&#30053;&#65288;Round Robin&#65289;&#12290;&#36825;&#20010;&#31574;&#30053;&#26159;&#20808;&#38543;&#26426;&#36873;&#25321;&#19968;&#20010;&#33410;&#28857;&#20316;&#20026;&#31532;&#19968;&#20010;&#33410;&#28857;&#65292;&#28982;&#21518;&#20381;&#27425;&#36873;&#25321;&#21508;&#20010;&#33410;&#28857;&#12290;</p><p>&#20363;&#22914;&#19968;&#20010;&#39034;&#24207;&#21487;&#33021;&#26159; B, C, D, A, B, C, D, A, B&#65292;&#21478;&#19968;&#20010;&#20063;&#21487;&#33021;&#26159; D,
                    A, B, C, D&#65292;A, B, C, D, A &#25110;&#32773; C, D, A, B, C, D, A, B, C, D, A&#31561;&#31561;&#12290;</p></li><li><p>&#38543;&#26426;&#31574;&#30053;&#12290;&#27599;&#27425;&#37117;&#26159;&#38543;&#26426;&#36873;&#25321;&#19968;&#20010;&#33410;&#28857;&#26469;&#24314;&#31435;&#20250;&#35805;&#12290;</p></li></ul></div><p>&#20320;&#21487;&#20197;&#23454;&#29616;&#33258;&#24049;&#30340;&#31574;&#30053;&#12290;&#21482;&#38656;&#35201;&#23454;&#29616;&#25509;&#21475;<tt class="literal">org.hornetq.api.core.client.loadbalance.ConnectionLoadBalancingPolicy</tt>&#21363;&#21487;&#12290;</p><p>&#26681;&#25454;&#20320;&#20351;&#29992;&#30340;&#26159;JMS&#36824;&#26159;&#26680;&#24515;&#25509;&#21475;&#65292;&#25351;&#23450;&#36127;&#36733;&#22343;&#34913;&#30340;&#26041;&#27861;&#26159;&#26377;&#25152;&#19981;&#21516;&#30340;&#12290;&#22914;&#26524;&#20320;&#19981;&#25351;&#23450;&#31574;&#30053;&#65292;&#40664;&#35748;&#30340;&#31574;&#30053;&#26159;<tt class="literal">org.hornetq.api.core.client.loadbalance.RoundRobinConnectionLoadBalancingPolicy</tt>.</p><p>&#22914;&#26524;&#20351;&#29992;&#30340;&#26159;JMS&#65292;&#24182;&#19988;JMS&#36830;&#25509;&#24037;&#21378;&#27880;&#20876;&#21040;JNDI&#65292;&#21017;&#20320;&#38656;&#35201;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#31574;&#30053;&#65292;&#22914;&#65306;
            </p><pre class="programlisting">
&lt;connection-factory name="ConnectionFactory"&gt;
    &lt;discovery-group-ref discovery-group-name="my-discovery-group"/&gt;
    &lt;entries&gt;
        &lt;entry name="ConnectionFactory"/&gt;
    &lt;/entries&gt;
    &lt;connection-load-balancing-policy-class-name&gt;
    org.hornetq.api.core.client.loadbalance.RandomConnectionLoadBalancingPolicy
    &lt;/connection-load-balancing-policy-class-name&gt;
&lt;/connection-factory&gt;            
        </pre><p>&#19978;&#38754;&#30340;&#37197;&#32622;&#23558;&#37096;&#32626;&#19968;&#20010;&#36830;&#25509;&#24037;&#21378;&#65292;&#23427;&#30340;&#36830;&#25509;&#36127;&#36733;&#22343;&#34913;&#31574;&#30053;&#26159;&#38543;&#26426;&#31574;&#30053;&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#20294;&#26159;&#20320;&#22312;&#23458;&#25143;&#31471;&#26159;&#30452;&#25509;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#30340;&#23454;&#20363;&#65292;&#37027;&#20040;&#20320;&#38656;&#35201;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;&#22312;<tt class="literal">HornetQConnectionFactory</tt>&#19978;&#30452;&#25509;&#35774;&#32622;&#65306;
            </p><pre class="programlisting">
ConnectionFactory jmsConnectionFactory = HornetQJMSClient.createConnectionFactory(...);
jmsConnectionFactory.setLoadBalancingPolicyClassName("com.acme.MyLoadBalancingPolicy");
        </pre><p>&#22914;&#26524;&#20320;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#30340;&#35805;&#65292;&#20320;&#35201;&#30452;&#25509;&#22312;<tt class="literal">ClientSessionFactory</tt>&#19978;&#35774;&#32622;&#31574;&#30053;&#65306;
            </p><pre class="programlisting">
ClientSessionFactory factory = HornetQClient.createClientSessionFactory(...);
factory.setLoadBalancingPolicyClassName("com.acme.MyLoadBalancingPolicy");
            </pre><p>&#36830;&#25509;&#24037;&#21378;&#36827;&#34892;&#36127;&#36733;&#22343;&#34913;&#30340;&#26381;&#21153;&#22120;&#32452;&#21487;&#20197;&#26377;&#20004;&#31181;&#26041;&#27861;&#26469;&#30830;&#23450;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#26174;&#24335;&#25351;&#23450;&#26381;&#21153;&#22120;</p></li><li><p>&#20351;&#29992;&#21457;&#29616;&#32452;&#21151;&#33021;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e9521"></a>38.5.&nbsp;&#26174;&#24335;&#25351;&#23450;&#38598;&#32676;&#26381;&#21153;&#22120;</h2></div></div><div></div></div><p>&#26377;&#30340;&#32593;&#32476;&#24182;&#19981;&#24320;&#25918;UDP&#65292;&#25152;&#20197;&#23601;&#19981;&#33021;&#20351;&#29992;&#26381;&#21153;&#22120;&#21457;&#29616;&#21151;&#33021;&#26469;&#33719;&#21462;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;</p><p>&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#65292;&#21487;&#20197;&#26174;&#24335;&#22320;&#22312;&#27599;&#20010;&#33410;&#28857;&#25110;&#23458;&#25143;&#31471;&#25351;&#23450;&#26381;&#21153;&#22120;&#30340;&#21015;&#34920;&#12290;&#19979;&#38754;&#20171;&#32461;&#22914;&#20309;&#20570;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e9528"></a>38.5.1.&nbsp;&#22312;&#23458;&#25143;&#31471;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</h3></div></div><div></div></div><p>&#26681;&#25454;&#20351;&#29992;&#30340;&#26159;JMS&#36824;&#26159;&#26680;&#24515;&#25509;&#21475;&#65292;&#25152;&#29992;&#30340;&#26041;&#27861;&#20063;&#19981;&#21516;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e9533"></a>38.5.1.1.&nbsp;&#20351;&#29992;JMS&#26102;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#24182;&#19988;JMS&#36830;&#25509;&#24037;&#21378;&#26159;&#27880;&#20876;&#21040;JNDI&#30340;&#35805;&#65292;&#20320;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;&#25991;&#20214;
                    <tt class="literal">hornetq-jms.xml</tt>&#20013;&#26469;&#25351;&#23450;&#65292;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
   &lt;connectors&gt;
      &lt;connector-ref connector-name="my-connector1" 
           backup-connector-name="my-backup-connector1"/&gt;
      &lt;connector-ref connector-name="my-connector2" 
           backup-connector-name="my-backup-connector2"/&gt;
      &lt;connector-ref connector-name="my-connector3" 
           backup-connector-name="my-backup-connector3"/&gt;
   &lt;/connectors&gt;
   &lt;entries&gt;
      &lt;entry name="ConnectionFactory"/&gt;
   &lt;/entries&gt;
&lt;/connection-factory&gt;</pre><p>&#20854;&#20013;&#30340;<tt class="literal">connection-factory</tt>&#20869;&#21487;&#20197;&#21253;&#21547;&#38646;&#25110;&#22810;&#20010;
                        <tt class="literal">connector-ref</tt>&#12290;&#27599;&#20010;<tt class="literal">connector-ref</tt>
                        &#37117;&#25317;&#26377;<tt class="literal">connector-name</tt>&#23646;&#24615;&#21644;&#19968;&#20010;&#21487;&#36873;&#30340;<tt class="literal">backup-connector-name</tt>&#23646;&#24615;&#12290;<tt class="literal">connector-name</tt> &#23646;&#24615;&#25351;&#21521;&#30340;&#26159;&#19968;&#20010;&#22312;<tt class="literal">hornetq-configuration.xml</tt>
                        &#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#36830;&#25509;&#22120;&#12290;&#32780;<tt class="literal">backup-connector-name</tt>&#23646;&#24615;&#20063;&#26159;&#25351;&#21521;&#22312;
                        <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#19968;&#20010;&#36830;&#25509;&#22120;&#12290;
                        &#26377;&#20851;&#36830;&#25509;&#22120;&#26356;&#22810;&#30340;&#20449;&#24687;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><p>&#36830;&#25509;&#24037;&#21378;&#36825;&#26679;&#23601;&#20445;&#23384;&#26377;&#19968;&#32452;[&#36830;&#25509;&#22120;, &#22791;&#20221;&#36830;&#25509;&#22120;]&#23545;&#65292;&#29992;&#20110;&#23458;&#25143;&#31471;&#22312;&#21019;&#24314;&#36830;&#25509;&#26102;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;</p><p>&#22914;&#26524;&#20320;&#20351;&#29992;JMS&#65292;&#20294;&#19981;&#20351;&#29992;JNDI&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#21019;&#24314;<tt class="literal">HornetQConnectionFactory</tt>
                    &#30340;&#23454;&#20363;&#65292;&#28982;&#21518;&#29992;&#30456;&#24212;&#30340;&#26041;&#27861;&#26469;&#35774;&#23450;&#36830;&#25509;&#22120;&#23545;&#21015;&#34920;&#65292;&#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">List&lt;Pair&lt;TransportConfiguration, TransportConfiguration&gt;&gt; serverList = 
        new ArrayList&lt;Pair&lt;TransportConfiguration, TransportConfiguration&gt;&gt;();

serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC0, backupTC0));
serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC1, backupTC1));
serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC2, backupTC2));

ConnectionFactory jmsConnectionFactory = HornetQJMSClient.createConnectionFactory(serverList);

Connection jmsConnection1 = jmsConnectionFactory.createConnection();

Connection jmsConnection2 = jmsConnectionFactory.createConnection();</pre><p>&#19978;&#38754;&#30340;&#20195;&#30721;&#20013;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#32452;<tt class="literal">TransportConfiguration</tt>&#23545;&#35937;&#12290;&#27599;&#20010;
                    <tt class="literal">TransportConfiguration</tt>&#23545;&#35937;&#21253;&#25324;&#20102;&#22914;&#20309;&#36830;&#25509;&#26576;&#20010;&#29305;&#23450;&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#12290;</p><p>&#28982;&#21518;&#65292;&#20351;&#29992;&#36825;&#20010;&#26381;&#21153;&#22120;&#21015;&#34920;&#21019;&#24314;&#20102;&#19968;&#20010;<tt class="literal">HornetQConnectionFactory</tt>&#23454;&#20363;&#12290;
                    &#36825;&#26679;&#36890;&#36807;&#36825;&#20010;&#24037;&#21378;&#21019;&#24314;&#30340;&#36830;&#25509;&#23601;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#21015;&#34920;&#65292;&#30001;&#25152;&#29992;&#30340;&#23458;&#25143;&#36830;&#25509;&#36127;&#36733;&#22343;&#34913;&#31574;&#30053;&#26469;&#36827;&#34892;&#36830;&#25509;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e9596"></a>38.5.1.2.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;&#20320;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#19978;&#35774;&#32622;&#26381;&#21153;&#22120;&#21015;&#34920;&#12290;
                    &#22914;&#19979;&#20363;&#65306;</p><pre class="programlisting">List&lt;Pair&lt;TransportConfiguration, TransportConfiguration&gt;&gt; serverList = 
        new ArrayList&lt;Pair&lt;TransportConfiguration, TransportConfiguration&gt;&gt;();

serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC0, backupTC0));
serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC1, backupTC1));
serverList.add(new Pair&lt;TransportConfiguration, 
        TransportConfiguration&gt;(liveTC2, backupTC2));

ClientSessionFactory factory = HornetQClient.createClientSessionFactory(serverList);

ClientSession sesison1 = factory.createClientSession(...);

ClientSession session2 = factory.createClientSession(...);</pre><p>&#22312;&#19978;&#38754;&#30340;&#20195;&#30721;&#20013;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#32452;<tt class="literal">ClientSessionFactoryImpl</tt>&#23545;&#35937;&#12290;&#27599;&#20010;
                    <tt class="literal">TransportConfiguration</tt>&#23545;&#35937;&#21253;&#25324;&#20102;&#22914;&#20309;&#36830;&#25509;&#26576;&#20010;&#29305;&#23450;&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#12290;
                    &#26377;&#20851;&#20449;&#24687;&#35831;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><p>&#28982;&#21518;&#65292;&#20351;&#29992;&#36825;&#20010;&#26381;&#21153;&#22120;&#21015;&#34920;&#21019;&#24314;&#20102;&#19968;&#20010;<tt class="literal">HornetQConnectionFactory</tt>&#23454;&#20363;&#12290;
                    &#36825;&#26679;&#36890;&#36807;&#36825;&#20010;&#24037;&#21378;&#21019;&#24314;&#30340;&#20250;&#35805;&#23601;&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#21015;&#34920;&#65292;&#30001;&#25152;&#29992;&#30340;&#23458;&#25143;&#36830;&#25509;&#36127;&#36733;&#22343;&#34913;&#31574;&#30053;&#26469;&#36827;&#34892;&#36830;&#25509;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="clusters.static.servers"></a>38.5.2.&nbsp;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;</h3></div></div><div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#32771;&#34385;&#19968;&#20010;&#23545;&#31216;&#38598;&#32676;&#30340;&#20363;&#23376;&#65292;&#25105;&#20204;&#37197;&#32622;&#20102;&#27599;&#20010;&#38598;&#32676;&#36830;&#25509;&#65292;&#20294;&#26159;&#19981;&#20351;&#29992;&#21457;&#29616;&#21151;&#33021;&#26469;&#33719;&#24471;&#26381;&#21153;&#22120;&#20449;&#24687;&#12290;&#25105;&#20204;
                &#37319;&#29992;&#37197;&#32622;&#30340;&#26041;&#27861;&#26469;&#26174;&#24335;&#25351;&#23450;&#38598;&#32676;&#30340;&#25152;&#26377;&#25104;&#21592;&#12290;</p><p>&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#38598;&#32676;&#36830;&#25509;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;cluster-connections&gt;
    &lt;cluster-connection name="my-explicit-cluster"&gt;
        &lt;address&gt;jms&lt;/address&gt;
        &lt;connector-ref connector-name="my-connector1" 
            backup-connector-name="my-backup-connector1"/&gt;
        &lt;connector-ref connector-name="my-connector2" 
            backup-connector-name="my-backup-connector2"/&gt;
        &lt;connector-ref connector-name="my-connector3" 
            backup-connector-name="my-backup-connector3"/&gt;
    &lt;/cluster-connection&gt;
&lt;/cluster-connections&gt;</pre><p><tt class="literal">cluster-connection</tt>&#20013;&#21487;&#20197;&#21253;&#25324;&#38646;&#25110;&#22810;&#20010;<tt class="literal">connector-ref</tt>,
                    &#27599;&#20010;<tt class="literal">connector-ref</tt>&#37117;&#26377;&#19968;&#20010;<tt class="literal">connector-name</tt>&#23646;&#24615;&#21644;
                    &#19968;&#20010;&#21487;&#36873;&#30340;<tt class="literal">backup-connector-name</tt>&#23646;&#24615;&#12290;<tt class="literal">connector-name</tt>&#23646;&#24615;&#25351;&#21521;&#19968;&#20010;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#19968;&#20010;&#36830;&#25509;&#22120;&#65292;&#23427;&#26159;&#20027;&#36830;&#25509;&#22120;&#12290;&#21487;&#36873;&#30340;
                    <tt class="literal">backup-connector-name</tt>&#25351;&#21521;&#30340;&#20063;&#26159;&#22312;
                    <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;&#19968;&#20010;&#36830;&#25509;&#22120;&#12290;
                    &#26377;&#20851;&#36830;&#25509;&#22120;&#30340;&#35814;&#32454;&#20449;&#24687;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#30001;&#20110;HornetQ 2.0.0&#30340;&#38480;&#21046;&#65292;&#20351;&#29992;&#38745;&#24577;&#33410;&#28857;&#21015;&#34920;&#30340;&#38598;&#32676;&#19981;&#25903;&#25345;&#22833;&#25928;&#22791;&#25588;&#65288;failover&#65289;&#12290;&#35201;&#24819;&#25903;&#25345;&#22833;&#25928;&#22791;&#25588;&#65292;
                  &#23601;&#24517;&#39035;&#20351;&#29992;&#21457;&#29616;&#32452;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="clusters.message-redistribution"></a>38.6.&nbsp;&#28040;&#24687;&#20877;&#20998;&#37197;</h2></div></div><div></div></div><p>&#38598;&#32676;&#30340;&#21478;&#19968;&#20010;&#37325;&#35201;&#21151;&#33021;&#26159;&#28040;&#24687;&#30340;&#20877;&#20998;&#37197;&#12290;&#21069;&#38754;&#25105;&#20204;&#30693;&#36947;&#22312;&#26381;&#21153;&#22120;&#31471;&#21487;&#20197;&#23545;&#28040;&#24687;&#22823;&#38598;&#32676;&#33410;&#28857;&#38388;&#36827;&#34892;&#36718;&#27969;&#26041;&#24335;&#30340;&#36127;&#36733;&#22343;&#34913;&#12290;&#22914;&#26524;
            <tt class="literal">forward-when-no-consumers</tt>&#21442;&#25968;&#20026;false&#65292;&#28040;&#24687;&#23558;&#19981;&#20250;&#36716;&#21457;&#21040;&#37027;&#20123;&#27809;&#26377;&#30456;&#24212;&#25509;&#25910;&#32773;&#30340;&#33410;&#28857;&#20013;&#12290;
            &#36825;&#26679;&#21487;&#20197;&#26377;&#25928;&#36991;&#20813;&#20102;&#28040;&#24687;&#34987;&#36865;&#21040;&#19968;&#20010;&#19981;&#21487;&#33021;&#34987;&#25509;&#25910;&#30340;&#33410;&#28857;&#19978;&#12290;&#20294;&#20173;&#28982;&#26377;&#19968;&#20010;&#38382;&#39064;&#26080;&#27861;&#35299;&#20915;&#65306;&#23601;&#26159;&#22914;&#26524;&#22312;&#28040;&#24687;&#21457;&#21040;&#19968;&#20010;&#33410;&#28857;&#21518;&#65292;
            &#23427;&#30340;&#25509;&#25910;&#32773;&#34987;&#20851;&#38381;&#65292;&#37027;&#20040;&#36825;&#20123;&#28040;&#24687;&#20173;&#28982;&#19981;&#33021;&#34987;&#25509;&#25910;&#20102;&#65292;&#36896;&#25104;&#20102;&#19968;&#31181;&#28040;&#24687;<span class="emphasis"><em>&#21294;&#20047;</em></span>&#24773;&#24418;&#12290;
            &#36825;&#31181;&#24773;&#20917;&#19979;&#22914;&#20309;&#22788;&#29702;&#65311;</p><p>&#36825;&#37324;&#23601;&#38656;&#35201;&#28040;&#24687;&#20877;&#20998;&#37197;&#21151;&#33021;&#12290;&#36890;&#36807;&#37197;&#32622;&#65292;HornetQ&#21487;&#20197;&#23558;&#27809;&#26377;&#25509;&#25910;&#32773;&#30340;&#38431;&#21015;&#20013;&#30340;&#28040;&#24687;<span class="emphasis"><em>&#20877;&#27425;&#20998;&#37197;</em></span>
            &#21040;&#26377;&#25509;&#25910;&#32773;&#30340;&#33410;&#28857;&#19978;&#21435;&#12290;</p><p>&#36890;&#36807;&#37197;&#32622;&#65292;&#28040;&#24687;&#21487;&#20197;&#22312;&#38431;&#21015;&#26368;&#21518;&#19968;&#20010;&#25509;&#25910;&#32773;&#20851;&#38381;&#26102;&#31435;&#21363;&#36827;&#34892;&#65292;&#20063;&#21487;&#20197;&#37197;&#32622;&#25104;&#31561;&#24453;&#19968;&#27573;&#26102;&#38388;&#20877;&#36827;&#34892;&#12290;&#40664;&#35748;&#28040;&#24687;&#20877;&#20998;&#37197;&#21151;&#33021;&#26159;
            &#20851;&#38381;&#30340;&#12290;</p><p>&#28040;&#24687;&#20877;&#20998;&#37197;&#21151;&#33021;&#21487;&#20197;&#22522;&#20110;&#22320;&#22336;&#36827;&#34892;&#37197;&#32622;&#65292;&#21363;&#22312;&#22320;&#22336;&#35774;&#32622;&#20013;&#25351;&#23450;&#20877;&#20998;&#37197;&#30340;&#24310;&#26102;&#12290;&#20851;&#20110;&#22320;&#22336;&#35774;&#32622;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;
            <a href="#queue-attributes" title="Chapter&nbsp;25.&nbsp;&#38431;&#21015;&#23646;&#24615;">Chapter&nbsp;25, <i>&#38431;&#21015;&#23646;&#24615;</i></a>&#12290;</p><p>&#19979;&#38754;&#26159;&#20174;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#25552;&#21462;&#30340;&#28040;&#24687;&#20877;&#20998;&#37197;&#30340;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;address-settings&gt;     
   &lt;address-setting match="jms.#"&gt;
      &lt;redistribution-delay&gt;0&lt;/redistribution-delay&gt;
   &lt;/address-setting&gt;
 &lt;/address-settings&gt;</pre><p>&#19978;&#38754;<tt class="literal">address-settings</tt>&#20013;&#35774;&#32622;&#30340;<tt class="literal">redistribution-delay</tt>&#20540;&#20026;<tt class="literal">0</tt>&#12290;&#23427;&#36866;&#29992;&#20110;&#25152;&#26377;&#20197;&#8220;jms&#8220;&#24320;&#22836;&#30340;
            &#22320;&#22336;&#12290;&#30001;&#20110;&#25152;&#26377;JMS&#38431;&#21015;&#19982;&#35805;&#39064;&#35746;&#38405;&#37117;&#32465;&#23450;&#21040;&#20197;&#8221;jms&#8220;&#20026;&#24320;&#22836;&#30340;&#22320;&#22336;&#65292;&#25152;&#20197;&#19978;&#36848;&#37197;&#32622;&#30340;&#31435;&#21363;&#26041;&#24335;&#65288;&#27809;&#26377;&#24310;&#36831;&#65289;&#28040;&#24687;
            &#20877;&#20998;&#37197;&#36866;&#29992;&#20110;&#25152;&#26377;&#30340;JMS&#38431;&#21015;&#21644;&#35805;&#39064;&#35746;&#38405;&#12290;</p><p><tt class="literal">match</tt>&#23646;&#24615;&#21487;&#20197;&#26159;&#31934;&#30830;&#21305;&#37197;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#12290;&#36890;&#37197;&#31526;&#35201;&#31526;&#21512;HornetQ&#30340;&#36890;&#37197;&#31526;
            &#35821;&#27861;&#65288;&#22312;<a href="#wildcard-syntax" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#20013;&#25551;&#36848;&#65289;&#12290;</p><p><tt class="literal">redistribution-delay</tt>&#23450;&#20041;&#20102;&#38431;&#21015;&#26368;&#21518;&#19968;&#20010;&#25509;&#25910;&#32773;&#20851;&#38381;&#21518;&#22312;&#36827;&#34892;&#28040;&#24687;&#20877;&#20998;&#37197;&#21069;&#25152;&#31561;&#24453;&#30340;
            &#26102;&#38388;&#65292;&#21333;&#20301;&#27627;&#31186;&#12290;&#22914;&#26524;&#20854;&#20540;&#26159;0&#65292;&#34920;&#31034;&#31435;&#21363;&#36827;&#34892;&#28040;&#24687;&#20877;&#20998;&#37197;&#12290;<tt class="literal">-1</tt>&#34920;&#31034;&#19981;&#20250;&#36827;&#34892;&#28040;&#24687;&#20877;&#20998;&#37197;&#12290;
            &#40664;&#35748;&#20540;&#26159;<tt class="literal">-1</tt>&#12290;</p><p>&#36890;&#24120;&#20026;&#28040;&#24687;&#20998;&#37197;&#23450;&#20041;&#19968;&#20010;&#24310;&#36831;&#26159;&#26377;&#23454;&#38469;&#24847;&#20041;&#30340;&#12290;&#24456;&#22810;&#26102;&#20505;&#24403;&#19968;&#20010;&#25509;&#25910;&#32773;&#34987;&#20851;&#38381;&#26102;&#65292;&#24456;&#24555;&#23601;&#20250;&#26377;&#19968;&#20010;&#26032;&#30340;&#25509;&#25910;&#32773;&#34987;&#21019;&#24314;&#12290;
            &#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#21152;&#19968;&#24310;&#36831;&#21487;&#20197;&#20351;&#28040;&#24687;&#32487;&#32493;&#22312;&#26412;&#22320;&#36827;&#34892;&#25509;&#25910;&#65292;&#32780;&#19981;&#20250;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#21035;&#22788;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e9721"></a>38.7.&nbsp;&#38598;&#32676;&#25299;&#25169;&#32467;&#26500;</h2></div></div><div></div></div><p>HornetQ&#38598;&#32676;&#21487;&#20197;&#26377;&#22810;&#31181;&#25299;&#25169;&#32467;&#26500;&#12290;&#25105;&#20204;&#26469;&#30475;&#20004;&#20010;&#26368;&#24120;&#35265;&#30340;&#32467;&#26500;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="symmetric-cluster"></a>38.7.1.&nbsp;&#23545;&#31216;&#24335;&#38598;&#32676;</h3></div></div><div></div></div><p>&#23545;&#31216;&#24335;&#38598;&#32676;&#21487;&#33021;&#26159;&#26368;&#24120;&#35265;&#30340;&#38598;&#32676;&#26041;&#24335;&#20102;&#12290;&#22914;&#26524;&#20320;&#25509;&#35302;&#36807;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#32676;&#65292;&#20320;&#23601;&#23545;&#36825;&#31181;&#26041;&#24335;&#24456;&#29087;&#24713;&#12290;</p><p>&#22312;&#19968;&#20010;&#23545;&#31216;&#38598;&#32676;&#20013;&#65292;&#27599;&#19968;&#20010;&#33410;&#28857;&#37117;&#19982;&#38598;&#32676;&#20013;&#20854;&#23427;&#20219;&#19968;&#33410;&#28857;&#30456;&#36830;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#38598;&#32676;&#20013;&#20219;&#24847;&#20004;&#20010;&#33410;&#28857;&#30340;&#36830;&#25509;&#37117;
                &#21482;&#26377;&#19968;&#36339;&#65288;hop&#65289;&#12290;</p><p>&#35201;&#32452;&#25104;&#19968;&#20010;&#23545;&#31216;&#24335;&#30340;&#38598;&#32676;&#65292;&#27599;&#20010;&#33410;&#28857;&#22312;&#23450;&#20041;&#38598;&#32676;&#36830;&#25509;&#26102;&#35201;&#23558;&#23646;&#24615;<tt class="literal">max-hops</tt>
                &#35774;&#20026;<tt class="literal">1</tt>&#12290;&#36890;&#24120;&#38598;&#32676;&#36830;&#25509;&#23558;&#20351;&#29992;&#26381;&#21153;&#22120;&#21457;&#29616;&#30340;&#21151;&#33021;&#26469;&#33719;&#24471;&#38598;&#32676;&#20013;&#20854;&#23427;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;
                &#20449;&#24687;&#12290;&#24403;&#28982;&#22312;UDP&#19981;&#21487;&#29992;&#30340;&#26102;&#20505;&#65292;&#20063;&#21487;&#20197;&#36890;&#36807;&#26174;&#24335;&#26041;&#24335;&#20026;&#38598;&#32676;&#36830;&#25509;&#25351;&#23450;&#26381;&#21153;&#22120;&#12290;</p><p>&#22312;&#23545;&#31216;&#38598;&#32676;&#20013;&#65292;&#27599;&#20010;&#26381;&#21153;&#22120;&#37117;&#30693;&#36947;&#38598;&#32676;&#20013;&#20854;&#23427;&#26381;&#21153;&#22120;&#20013;&#30340;&#25152;&#26377;&#38431;&#21015;&#20449;&#24687;&#65292;&#20197;&#21450;&#23427;&#20204;&#30340;&#25509;&#25910;&#32773;&#20449;&#24687;&#12290;&#21033;&#29992;&#36825;&#20123;
                &#20449;&#24687;&#23427;&#21487;&#20197;&#20915;&#23450;&#22914;&#20309;&#36827;&#34892;&#28040;&#24687;&#30340;&#36127;&#36733;&#22343;&#34913;&#21450;&#28040;&#24687;&#20877;&#20998;&#37197;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e9743"></a>38.7.2.&nbsp;&#38142;&#24335;&#38598;&#32676;</h3></div></div><div></div></div><p>&#22312;&#38142;&#24335;&#38598;&#32676;&#20013;&#65292;&#24182;&#19981;&#26159;&#27599;&#20010;&#33410;&#28857;&#37117;&#19982;&#20854;&#23427;&#20219;&#20309;&#33410;&#28857;&#30452;&#25509;&#30456;&#36830;&#65292;&#32780;&#26159;&#30001;&#20004;&#20010;&#33410;&#28857;&#32452;&#25104;&#22836;&#21644;&#23614;&#65292;&#20854;&#20313;&#33410;&#28857;&#22312;&#20013;&#38388;&#36830;&#25509;
                &#25104;&#20026;&#19968;&#20010;&#38142;&#30340;&#32467;&#26500;&#12290;</p><p>&#27604;&#22914;&#26377;&#19977;&#20010;&#33410;&#28857;A&#12289;B&#21644;C&#12290;&#33410;&#28857;A&#22312;&#19968;&#20010;&#32593;&#32476;&#20013;&#65292;&#23427;&#26377;&#35768;&#22810;&#28040;&#24687;&#30340;&#21457;&#36865;&#32773;&#21521;&#23427;&#21457;&#36865;&#35746;&#21333;&#28040;&#24687;&#12290;&#30001;&#20110;&#20844;&#21496;&#30340;&#25919;&#31574;&#65292;&#35746;&#21333;
                &#30340;&#25509;&#25910;&#32773;&#38656;&#35201;&#22312;&#21478;&#19968;&#20010;&#32593;&#32476;&#20013;&#25509;&#25910;&#28040;&#24687;&#65292;&#24182;&#19988;&#36825;&#20010;&#32593;&#32476;&#38656;&#35201;&#32463;&#36807;&#20854;&#23427;&#31532;&#19977;&#20010;&#32593;&#32476;&#25165;&#21487;&#20197;&#35775;&#38382;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#25105;&#20204;&#23558;&#33410;&#28857;
                B&#37096;&#32626;&#21040;&#31532;&#19977;&#20010;&#32593;&#32476;&#20013;&#65292;&#20316;&#20026;&#33410;&#28857;A&#19982;&#33410;&#28857;C&#30340;&#20013;&#38388;&#33410;&#28857;&#23558;&#20004;&#20010;&#33410;&#28857;&#36830;&#25509;&#36215;&#26469;&#12290;&#24403;&#28040;&#24687;&#21040;&#36798;&#33410;&#28857;A&#26102;&#65292;&#34987;&#36716;&#21457;&#21040;&#33410;&#28857;B&#65292;
                &#28982;&#21518;&#21448;&#34987;&#36716;&#21457;&#21040;&#33410;&#28857;C&#19978;&#65292;&#36825;&#26679;&#28040;&#24687;&#23601;&#34987;C&#19978;&#30340;&#25509;&#25910;&#32773;&#25152;&#25509;&#25910;&#12290;&#33410;&#28857;A&#19981;&#38656;&#35201;&#30452;&#25509;&#19982;&#33410;&#28857;C&#36830;&#25509;&#65292;&#20294;&#26159;&#25152;&#26377;&#19977;&#20010;&#33410;&#28857;&#20173;&#28982;
                &#32452;&#25104;&#20102;&#19968;&#20010;&#38598;&#32676;&#12290;</p><p>&#35201;&#24819;&#32452;&#25104;&#19968;&#20010;&#36825;&#26679;&#30340;&#38598;&#32676;&#65292;&#33410;&#28857;A&#30340;&#38598;&#32676;&#36830;&#25509;&#35201;&#25351;&#21521;&#33410;&#28857;B&#65292;&#33410;&#28857;B&#30340;&#38598;&#32676;&#36830;&#25509;&#35201;&#25351;&#21521;C&#12290;&#26412;&#20363;&#25105;&#20204;&#21482;&#24819;&#32452;&#25104;&#19968;&#20010;&#21333;&#21521;
                &#30340;&#38142;&#24335;&#38598;&#32676;&#65292;&#21363;&#25105;&#20204;&#21482;&#23558;&#28040;&#24687;&#25353;&#33410;&#28857;A-&gt;B-&gt;C&#30340;&#26041;&#21521;&#27969;&#21160;&#65292;&#32780;&#19981;&#35201;&#21521; C-&gt;B-&gt;A&#26041;&#21521;&#27969;&#21160;&#12290;</p><p>&#23545;&#20110;&#36825;&#31181;&#38598;&#32676;&#25299;&#25169;&#65292;&#25105;&#20204;&#38656;&#35201;&#23558;<tt class="literal">max-hops</tt>&#35774;&#20026;<tt class="literal">2</tt>. &#36825;&#20010;&#20540;&#21487;&#20197;&#20351;&#33410;&#28857;C&#19978;&#38431;&#21015;&#30340;&#20449;&#24687;&#20256;&#36865;&#21040;&#33410;&#28857;B&#65292;&#20877;&#20256;&#36865;&#21040;&#33410;&#28857;A&#12290;&#22240;&#27492;&#33410;&#28857;A&#23601;&#30693;&#36947;&#28040;&#24687;&#21040;&#36798;&#26102;&#21363;&#23558;
                &#20854;&#36716;&#21457;&#32473;&#33410;&#28857;B&#12290;&#23613;&#31649;&#33410;&#28857;B&#21487;&#33021;&#27809;&#26377;&#25509;&#25910;&#32773;&#65292;&#21487;&#23427;&#30693;&#36947;&#20877;&#32463;&#36807;&#19968;&#36339;&#23601;&#21487;&#20197;&#23558;&#28040;&#24687;&#36716;&#21040;&#33410;&#28857;C&#65292;&#37027;&#37324;&#23601;&#26377;&#25509;&#25910;&#32773;&#20102;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="ha"></a>Chapter&nbsp;39.&nbsp;&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;High Availability&#65289;&#21644;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;</h2></div></div><div></div></div><p>&#39640;&#21487;&#33719;&#24471;&#24615;&#26159;&#25351;<span class="emphasis"><em>&#24403;&#31995;&#32479;&#20013;&#26377;&#19968;&#21488;&#29978;&#33267;&#22810;&#21488;&#26381;&#21153;&#22120;&#21457;&#29983;&#25925;&#38556;&#26102;&#36824;&#33021;&#32487;&#32493;&#36816;&#36716;&#30340;&#33021;&#21147;</em></span>&#12290;</p><p>&#20316;&#20026;&#39640;&#21487;&#33719;&#24471;&#24615;&#30340;&#19968;&#37096;&#20998;&#65292;<span class="emphasis"><em>&#22833;&#25928;&#22791;&#25588;</em></span>&#30340;&#21547;&#24847;&#26159;
            <span class="emphasis"><em>&#24403;&#23458;&#25143;&#31471;&#24403;&#21069;&#36830;&#25509;&#30340;&#26381;&#21153;&#22120;&#21457;&#25925;&#38556;&#26102;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#23558;&#36830;&#25509;&#36716;&#21040;&#21478;&#19968;&#21488;&#27491;&#24120;&#30340;&#26381;&#21153;&#22120;&#65292;&#20174;&#32780;&#33021;&#22815;&#32487;&#32493;&#24037;&#20316;</em></span>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e9793"></a>39.1.&nbsp;&#20027;&#35201;&#65293;&#22791;&#20221;&#23545;</h2></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#23558;&#20004;&#20010;&#26381;&#21153;&#22120;&#20197;<span class="emphasis"><em>&#20027;&#35201;&#65293;&#22791;&#20221;&#23545;</em></span>&#30340;&#24418;&#24335;&#36830;&#25509;&#22312;&#19968;&#36215;&#12290;&#30446;&#21069;HornetQ&#20801;&#35768;&#19968;&#20010;
            &#20027;&#35201;&#26381;&#21153;&#22120;&#26377;&#19968;&#20010;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#19968;&#20010;&#22791;&#20221;&#26381;&#21153;&#22120;&#21482;&#26377;&#19968;&#20010;&#20027;&#35201;&#26381;&#21153;&#22120;&#12290;&#22312;&#27491;&#24120;&#24773;&#20917;&#19979;&#20027;&#35201;&#26381;&#21153;&#22120;&#24037;&#20316;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#21482;&#26377;&#24403;
            &#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#21457;&#29983;&#26102;&#24037;&#20316;&#12290;</p><p>&#27809;&#26377;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#26102;&#65292;&#20027;&#35201;&#26381;&#21153;&#22120;&#20026;&#23458;&#25143;&#31471;&#25552;&#20379;&#26381;&#21153;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#22788;&#20110;&#24453;&#26426;&#29366;&#24577;&#12290;&#24403;&#23458;&#25143;&#31471;&#22312;&#22833;&#25928;&#22791;&#25588;&#21518;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;
            &#22120;&#26102;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#24320;&#22987;&#28608;&#27963;&#24182;&#24320;&#22987;&#24037;&#20316;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ha.mode"></a>39.1.1.&nbsp;&#39640;&#21487;&#33719;&#24471;&#24615;&#65288;HA&#65289;&#30340;&#27169;&#24335;</h3></div></div><div></div></div><p>HornetQ&#30340;&#39640;&#21487;&#33719;&#24471;&#24615;&#26377;&#20004;&#31181;&#27169;&#24335;&#65306;&#19968;&#31181;&#27169;&#24335;&#36890;&#36807;&#30001;&#20027;&#26381;&#21153;&#22120;&#26085;&#24535;&#21521;&#22791;&#20221;&#26381;&#21153;&#22120;&#26085;&#24535;
                <span class="emphasis"><em>&#22797;&#21046;&#25968;&#25454;</em></span>&#12290;&#21478;&#19968;&#31181;&#27169;&#24335;&#21017;&#26159;&#20027;&#26381;&#21153;&#22120;&#19982;&#22791;&#20221;&#26381;&#21153;&#22120;&#38388;<span class="emphasis"><em>&#23384;&#36142;&#20849;&#20139;</em></span>&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#21482;&#26377;&#25345;&#20037;&#28040;&#24687;&#25165;&#21487;&#20197;&#22312;&#22833;&#25928;&#22791;&#25588;&#26102;&#19981;&#20002;&#22833;&#12290;&#25152;&#26377;&#38750;&#25345;&#20037;&#28040;&#24687;&#21017;&#20250;&#20002;&#22833;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.mode.replicated"></a>39.1.1.1.&nbsp;&#25968;&#25454;&#22797;&#21046;</h4></div></div><div></div></div><p>&#22312;&#36825;&#31181;&#27169;&#24335;&#19979;&#65292;&#20445;&#23384;&#22312;HornetQ&#20027;&#26381;&#21153;&#22120;&#20013;&#26085;&#24535;&#20013;&#30340;&#25968;&#25454;&#34987;&#22797;&#21046;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#26085;&#24535;&#20013;&#12290;&#27880;&#24847;&#25105;&#20204;&#24182;&#19981;&#22797;&#21046;
                    &#26381;&#21153;&#22120;&#30340;&#20840;&#37096;&#29366;&#24577;&#65292;&#32780;&#26159;&#21482;&#22797;&#21046;&#26085;&#24535;&#21644;&#20854;&#23427;&#30340;&#25345;&#20037;&#24615;&#36136;&#30340;&#25805;&#20316;&#12290;</p><p>&#22797;&#21046;&#30340;&#25805;&#20316;&#26159;&#24322;&#27493;&#36827;&#34892;&#30340;&#12290;&#25968;&#25454;&#36890;&#36807;&#27969;&#30340;&#26041;&#24335;&#22797;&#21046;&#65292;&#22797;&#21046;&#30340;&#32080;&#26524;&#21017;&#36890;&#36807;&#21478;&#19968;&#20010;&#27969;&#26469;&#36820;&#22238;&#12290;&#36890;&#36807;&#36825;&#26679;&#30340;&#24322;&#27493;&#26041;&#24335;
                    &#25105;&#20204;&#21487;&#20197;&#33719;&#24471;&#27604;&#21516;&#27493;&#26041;&#24335;&#26356;&#22823;&#30340;&#21585;&#21520;&#37327;&#12290;</p><p>&#24403;&#29992;&#25143;&#24471;&#21040;&#30830;&#35748;&#20449;&#24687;&#22914;&#19968;&#20010;&#20107;&#21153;&#24050;&#32463;&#25552;&#20132;&#12289;&#20934;&#22791;&#25110;&#21152;&#28378;&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#25345;&#20037;&#28040;&#24687;&#34987;&#21457;&#36865;&#26102;&#65292;HornetQ&#30830;&#20445;&#36825;&#20123;&#29366;&#24577;
                    &#24050;&#32463;&#22797;&#21046;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#19978;&#24182;&#34987;&#25345;&#20037;&#21270;&#12290;</p><p>&#25968;&#25454;&#22797;&#21046;&#36825;&#31181;&#26041;&#24335;&#19981;&#21487;&#36991;&#20813;&#22320;&#24433;&#21709;&#24615;&#33021;&#65292;&#20294;&#26159;&#21478;&#19968;&#26041;&#38754;&#23427;&#19981;&#20381;&#36182;&#20110;&#26114;&#36149;&#30340;&#25991;&#20214;&#20849;&#20139;&#35774;&#22791;&#65288;&#22914;SAN&#65289;&#12290;&#23427;&#23454;&#38469;&#19978;&#26159;
                    &#19968;&#31181;<span class="italic">&#26080;&#20849;&#20139;</span>&#30340;HA&#26041;&#24335;&#12290;</p><p>&#37319;&#29992;&#25968;&#25454;&#22797;&#21046;&#30340;&#22833;&#25928;&#22791;&#25588;&#27604;&#37319;&#29992;&#20849;&#20139;&#23384;&#20648;&#30340;&#22833;&#25928;&#22791;&#25588;&#35201;&#24555;&#65292;&#36825;&#26159;&#22240;&#20026;&#22791;&#20221;&#26381;&#21153;&#22120;&#22312;&#22833;&#25928;&#22791;&#25588;&#26102;&#19981;&#29992;&#37325;&#26032;&#35013;&#36733;&#26085;&#24535;&#12290;</p><div align="center"><img src="images/ha-replicated-store.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="configuring.live.backup"></a>39.1.1.1.1.&nbsp;&#37197;&#32622;</h5></div></div><div></div></div><p>&#39318;&#20808;&#22312;&#20027;&#26381;&#21153;&#22120;&#30340; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#37197;&#32622;&#22791;&#20221;&#26381;&#21153;&#22120;&#12290;
                        &#37197;&#32622;&#30340;&#21442;&#25968;&#26159;<tt class="literal">backup-connector-ref</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#21521;&#19968;&#20010;&#36830;&#25509;&#22120;&#12290;&#36825;&#20010;&#36830;&#25509;&#22120;
                        &#20063;&#22312;&#20027;&#26381;&#21153;&#22120;&#19978;&#37197;&#32622;&#12290;&#23427;&#23450;&#20041;&#20102;&#22914;&#20309;&#19982;&#22791;&#20221;&#26381;&#21153;&#22120;&#24314;&#31435;&#36830;&#25509;&#12290;</p><p>&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">
  &lt;backup-connector-ref connector-name="backup-connector"/&gt;

  &lt;connectors&gt;
     &lt;!-- &#36825;&#20010;&#36830;&#25509;&#22120;&#29992;&#20110;&#36830;&#25509;&#22791;&#20221;&#26381;&#21153;&#21917;&#21654;&#21857;    --&gt;
     &lt;!-- &#22791;&#20221;&#26381;&#21153;&#22120;&#22312;&#20027;&#26426;"192.168.0.11"&#19978;&#65292;&#31471;&#21475;"5445" --&gt;
     &lt;connector name="backup-connector"&gt;
       &lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory&lt;/factory-class&gt;
       &lt;param key="host" value="192.168.0.11"/&gt;
       &lt;param key="port" value="5445"/&gt;
     &lt;/connector&gt;
  &lt;/connectors&gt;</pre><p>&#20854;&#27425;&#22312;&#22791;&#20221;&#26381;&#21153;&#22120;&#19978;&#65292;&#25105;&#20204;&#35774;&#32622;&#20102;&#22791;&#20221;&#26381;&#21153;&#22120;&#30340;&#26631;&#24535;&#65292;&#24182;&#19988;&#37197;&#32622;&#20102;&#30456;&#24212;&#30340;&#25509;&#21463;&#22120;&#20197;&#20415;&#20027;&#26381;&#21153;&#22120;&#33021;&#22815;&#24314;&#31435;
                        &#36830;&#25509;&#12290;&#21516;&#26102;&#25105;&#20204;&#23558;shared-store&#21442;&#25968;&#35774;&#20026;false&#12290;</p><pre class="programlisting">
  &lt;backup&gt;true&lt;/backup&gt;
  
  &lt;shared-store&gt;false&lt;shared-store&gt;
  
  &lt;acceptors&gt;
     &lt;acceptor name="acceptor"&gt;
        &lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyConnectorFactory&lt;/factory-class&gt;
        &lt;param key="host" value="192.168.0.11"/&gt;
        &lt;param key="port" value="5445"/&gt;
     &lt;/acceptor&gt;
  &lt;/acceptors&gt;               
              </pre><p>&#20026;&#20102;&#20351;&#22791;&#20221;&#26381;&#21153;&#22120;&#27491;&#24120;&#24037;&#20316;&#65292;&#19968;&#23450;&#35201;&#20445;&#35777;&#23427;&#19982;&#20027;&#26381;&#21153;&#22120;&#26377;&#30528;&#21516;&#26679;&#30340;&#26725;&#12289;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;&#12289;&#38598;&#32676;&#36830;&#25509;&#12289;
                        &#24191;&#25773;&#32452;&#21644;&#21457;&#29616;&#32452;&#12290;&#26368;&#31616;&#21333;&#30340;&#20316;&#27861;&#26159;&#25335;&#36125;&#20027;&#26381;&#21153;&#22120;&#30340;&#20840;&#37096;&#37197;&#32622;&#28982;&#21518;&#20877;&#36827;&#34892;&#19978;&#36848;&#30340;&#20462;&#25913;&#12290; </p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e9858"></a>39.1.1.1.2.&nbsp;&#22791;&#20221;&#26381;&#21153;&#22120;&#19982;&#20027;&#26381;&#21153;&#22120;&#38388;&#30340;&#21516;&#27493;</h5></div></div><div></div></div><p>&#20026;&#20102;&#33021;&#27491;&#24120;&#24037;&#20316;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#19982;&#20027;&#26381;&#21153;&#22120;&#24517;&#39035;&#21516;&#27493;&#12290;&#36825;&#24847;&#35859;&#30528;&#22791;&#20221;&#26381;&#21153;&#22120;&#19981;&#33021;&#26159;&#24403;&#21069;&#20219;&#24847;&#19968;&#20010;&#22791;&#20221;&#26381;
                        &#21153;&#22120;&#12290;&#22914;&#26524;&#20320;&#36825;&#26679;&#20570;&#65292;&#20027;&#26381;&#21153;&#22120;&#23558;&#19981;&#33021;&#25104;&#21151;&#21551;&#21160;&#65292;&#22312;&#26085;&#24535;&#20013;&#20250;&#20986;&#29616;&#24322;&#24120;&#12290;</p><p>&#35201;&#24819;&#23558;&#19968;&#20010;&#29616;&#26377;&#30340;&#26381;&#21153;&#22120;&#37197;&#32622;&#25104;&#19968;&#20010;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#20320;&#38656;&#35201;&#23558;&#20027;&#26381;&#21153;&#22120;&#30340;<tt class="literal">data</tt>
                        &#25991;&#20214;&#22841;&#25335;&#36125;&#21040;&#24182;&#35206;&#30422;&#36825;&#20010;&#22791;&#20221;
                        &#26381;&#21153;&#22120;&#30340;&#30456;&#21516;&#25991;&#20214;&#22841;&#65292;&#36825;&#26679;&#20570;&#20445;&#35777;&#20102;&#22791;&#20221;&#26381;&#21153;&#22120;&#19982;&#20027;&#26381;&#21153;&#22120;&#30340;&#25345;&#20037;&#21270;&#25968;&#25454;&#23436;&#20840;&#19968;&#33268;&#12290;</p><p>&#24403;&#22833;&#25928;&#22791;&#25588;&#21457;&#29983;&#21518;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#20195;&#26367;&#20027;&#26381;&#21153;&#22120;&#24037;&#20316;&#65292;&#21407;&#26469;&#30340;&#20027;&#26381;&#21153;&#22120;&#22833;&#25928;&#12290;&#36825;&#26102;&#31616;&#21333;&#30340;&#37325;&#21551;&#20027;&#26381;&#21153;
                        &#22120;&#26159;&#19981;&#34892;&#30340;&#12290;&#35201;&#24819;&#23558;&#20027;&#26381;&#21153;&#22120;&#19982;&#22791;&#20221;&#37325;&#26032;&#36827;&#34892;&#21516;&#27493;&#65292;&#23601;&#24517;&#39035;&#20808;&#23558;&#20027;&#26381;&#21153;&#22120;&#21644;&#22791;&#20221;&#26381;&#21153;&#22120;&#21516;&#26102;&#20572;&#27490;&#65292;&#20877;&#23558;
                        &#20027;&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#25335;&#36125;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#28982;&#21518;&#20877;&#21551;&#21160;&#12290;</p><p>HornetQ&#20197;&#21518;&#23558;&#25903;&#25345;&#22791;&#20221;&#19982;&#20027;&#26381;&#21153;&#22120;&#38388;&#30340;&#33258;&#21160;&#21516;&#27493;&#65292;&#26080;&#38656;&#20572;&#27490;&#20027;&#26381;&#21153;&#22120;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.mode.shared"></a>39.1.1.2.&nbsp;&#23384;&#36142;&#20849;&#20139;</h4></div></div><div></div></div><p>&#20351;&#29992;&#23384;&#36142;&#20849;&#20139;&#65292;&#20027;&#26381;&#21153;&#22120;&#19982;&#22791;&#20221;&#26381;&#21153;&#22120;&#20849;&#29992;<span class="emphasis"><em>&#30456;&#21516;</em></span>&#30446;&#24405;&#30340;&#26085;&#24535;&#25968;&#25454;&#65292;&#36890;&#24120;&#26159;&#19968;&#20010;&#20849;&#20139;&#30340;
                      &#25991;&#20214;&#31995;&#32479;&#12290;&#36825;&#21253;&#25324;&#36716;&#23384;&#30446;&#24405;&#65292;&#26085;&#24535;&#30446;&#24405;&#65292;&#22823;&#28040;&#24687;&#21450;&#32465;&#23450;&#26085;&#24535;&#12290;</p><p>&#24403;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#26102;&#65292;&#24037;&#20316;&#30001;&#22791;&#20221;&#26381;&#21153;&#22120;&#25509;&#31649;&#12290;&#23427;&#39318;&#20808;&#20174;&#20849;&#20139;&#30340;&#25991;&#20214;&#31995;&#32479;&#20013;&#35835;&#21462;&#20027;&#26381;&#21153;&#22120;&#30340;&#25345;&#20037;&#25968;&#25454;&#65292;&#28982;&#21518;
                    &#25165;&#33021;&#25509;&#21463;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;</p><p>&#19982;&#25968;&#25454;&#22797;&#21046;&#26041;&#24335;&#19981;&#21516;&#30340;&#26159;&#36825;&#31181;&#26041;&#24335;&#38656;&#35201;&#19968;&#20010;&#20849;&#20139;&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#20027;&#26381;&#21153;&#22120;&#19982;&#22791;&#20221;&#26381;&#21153;&#22120;&#37117;&#21487;&#20197;&#35775;&#38382;&#12290;&#20856;&#22411;&#30340;
                    &#39640;&#24615;&#33021;&#30340;&#20849;&#20139;&#31995;&#32479;&#26159;&#23384;&#36142;&#21306;&#22495;&#32593;&#32476;&#65288;SAN&#65289;&#31995;&#32479;&#12290;&#25105;&#20204;&#19981;&#24314;&#35758;&#20351;&#29992;&#32593;&#32476;&#38468;&#21152;&#23384;&#36142;&#65288;NAS&#65289;&#65292;&#22914;NFS&#65292;&#26469;&#23384;&#36142;&#20849;&#20139;
                    &#26085;&#24535;&#65288;&#20027;&#35201;&#30340;&#21407;&#22240;&#26159;&#23427;&#20204;&#27604;&#36739;&#24930;&#65289;&#12290;</p><p>&#20849;&#20139;&#23384;&#36142;&#30340;&#20248;&#28857;&#26159;&#19981;&#38656;&#35201;&#22312;&#20027;&#26381;&#21153;&#22120;&#19982;&#22791;&#20221;&#26381;&#21153;&#22120;&#20043;&#38388;&#36827;&#34892;&#25968;&#25454;&#22797;&#21046;&#65292;&#22240;&#27492;&#23545;&#24615;&#33021;&#19981;&#20250;&#36896;&#25104;&#24433;&#21709;&#12290;</p><p>&#20849;&#20139;&#23384;&#36142;&#30340;&#32570;&#28857;&#26159;&#23427;&#38656;&#35201;&#19968;&#20010;&#20849;&#20139;&#25991;&#20214;&#31995;&#32479;&#12290;&#21516;&#26102;&#65292;&#24403;&#22791;&#20221;&#26381;&#21153;&#22120;&#28608;&#27963;&#26102;&#23427;&#38656;&#35201;&#39318;&#20808;&#20174;&#20849;&#20139;&#26085;&#24535;&#20013;&#35835;&#21462;&#30456;&#24212;
                    &#30340;&#20449;&#24687;&#65292;&#20174;&#32780;&#21344;&#29992;&#19968;&#23450;&#30340;&#26102;&#38388;&#12290;</p><p>&#22914;&#26524;&#20320;&#38656;&#35201;&#22312;&#19968;&#33324;&#24037;&#20316;&#24773;&#20917;&#19979;&#20445;&#25345;&#39640;&#24615;&#33021;&#65292;&#24182;&#19988;&#25317;&#26377;&#19968;&#20010;&#24555;&#36895;&#30340;SAN&#31995;&#32479;&#65292;&#21516;&#26102;&#33021;&#22815;&#23481;&#24525;&#36739;&#24930;&#30340;&#22833;&#25928;&#22791;&#25588;
                    &#36807;&#31243;&#65288;&#21462;&#20915;&#20110;&#25968;&#25454;&#37327;&#22312;&#22810;&#23569;&#65289;&#65292;&#25105;&#20204;&#24314;&#35758;&#20320;&#37319;&#29992;&#23384;&#36142;&#20849;&#20139;&#26041;&#24335;&#30340;&#39640;&#21487;&#33719;&#24471;&#24615;&#12290;</p><div align="center"><img src="images/ha-shared-store.png" align="middle"></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="ha/mode.shared.configuration"></a>39.1.1.2.1.&nbsp;&#37197;&#32622;</h5></div></div><div></div></div><p>&#35201;&#20351;&#29992;&#23384;&#36142;&#20849;&#20139;&#27169;&#24335;&#65292;&#22312;&#20004;&#20010;&#26381;&#21153;&#22120;&#30340;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>
                        &#20013;&#23558;&#20316;&#22914;&#19979;&#35774;&#32622;&#65306;</p><pre class="programlisting">
                   &lt;shared-store&gt;true&lt;shared-store&gt;
                </pre><p>&#27492;&#22806;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#24517;&#39035;&#26174;&#24335;&#22320;&#25351;&#23450;&#65306;</p><pre class="programlisting">
                   &lt;backup&gt;true&lt;/backup&gt;
                     </pre><p>&#21478;&#22806;&#65292;&#38656;&#35201;&#23558;&#20027;&#26381;&#21153;&#22120;&#21644;&#22791;&#20221;&#26381;&#21153;&#22120;&#30340;&#26085;&#24535;&#25991;&#20214;&#20301;&#32622;&#25351;&#21521;<span class="emphasis"><em>&#21516;&#19968;&#20010;&#20849;&#20139;&#20301;&#32622;</em></span>&#12290;
                        &#65288;&#21442;&#35265;<a href="#configuring.message.journal" title="15.3.&nbsp;&#37197;&#32622;&#28040;&#24687;&#26085;&#24535;">Section&nbsp;15.3, &#8220;&#37197;&#32622;&#28040;&#24687;&#26085;&#24535;&#8221;</a>&#65289;</p><p>&#22914;&#26524;&#23458;&#25143;&#31471;&#20351;&#29992;JMS&#33258;&#21160;&#22833;&#25928;&#22791;&#25588;&#65292;&#20027;&#26381;&#21153;&#22120;&#38500;&#20102;&#35201;&#37197;&#32622;&#19968;&#20010;&#36830;&#25509;&#22120;&#20197;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#22806;&#65292;&#36824;&#35201;&#22312;
                        &#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#25351;&#21521;&#36825;&#20010;&#36830;&#25509;&#22120;&#65292;&#22914;
                        <a href="#ha.automatic.failover" title="39.2.1.&nbsp;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;">Section&nbsp;39.2.1, &#8220;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;&#8221;</a>&#20013;&#25152;&#35299;&#37322;&#30340;&#37027;&#26679;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h5 class="title"><a name="d0e9919"></a>39.1.1.2.2.&nbsp;&#22791;&#20221;&#26381;&#21153;&#22120;&#19982;&#20027;&#26381;&#21153;&#22120;&#38388;&#30340;&#21516;&#27493;&#12290;</h5></div></div><div></div></div><p>&#30001;&#20110;&#20027;&#22791;&#26381;&#21153;&#22120;&#20043;&#38388;&#20849;&#20139;&#23384;&#36142;&#65292;&#25152;&#20197;&#23427;&#20204;&#19981;&#38656;&#35201;&#36827;&#34892;&#21516;&#27493;&#12290;&#20294;&#26159;&#23427;&#38656;&#35201;&#20027;&#22791;&#26381;&#21153;&#22120;&#21516;&#26102;&#24037;&#20316;&#20197;&#25552;&#20379;
                        &#39640;&#21487;&#33719;&#24471;&#24615;&#12290;&#22914;&#26524;&#19968;&#37327;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#21518;&#65292;&#23601;&#38656;&#35201;&#22312;&#23613;&#21487;&#33021;&#26089;&#30340;&#26102;&#38388;&#20869;&#23558;&#22791;&#20221;&#26381;&#21153;&#22120;&#65288;&#22788;&#20110;&#24037;&#20316;&#29366;&#24577;&#65289;&#20572;&#19979;&#26469;&#65292;
                        &#28982;&#21518;&#20877;&#21551;&#21160;&#20027;&#26381;&#21153;&#22120;&#21644;&#22791;&#20221;&#26381;&#21153;&#22120;&#12290;</p><p>HornetQ&#20197;&#21518;&#23558;&#25903;&#25345;&#33258;&#21160;&#21516;&#27493;&#21151;&#33021;&#65292;&#19981;&#38656;&#35201;&#20808;&#20572;&#27490;&#26381;&#21153;&#22120;&#12290;</p></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="failover"></a>39.2.&nbsp;&#22833;&#25928;&#22791;&#25588;&#30340;&#27169;&#24335;</h2></div></div><div></div></div><p>HornetQ&#23450;&#20041;&#20102;&#20004;&#31181;&#23458;&#25143;&#31471;&#30340;&#22833;&#25928;&#22791;&#25588;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;</p></li><li><p>&#24212;&#29992;&#23618;&#30340;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;</p></li></ul></div><p>HornetQ&#36824;&#25903;&#25345;100&#65285;&#36879;&#26126;&#30340;&#21516;&#19968;&#20010;&#26381;&#21153;&#22120;&#30340;&#33258;&#21160;&#36830;&#25509;&#24674;&#22797;&#65288;&#36866;&#29992;&#20110;&#32593;&#32476;&#30340;&#20020;&#26102;&#24615;&#25925;&#38556;&#65289;&#12290;&#36825;&#19982;&#22833;&#25928;&#22791;&#25588;&#24456;&#30456;&#20284;&#65292;
            &#21482;&#19981;&#36807;&#36830;&#25509;&#30340;&#26159;&#21516;&#19968;&#20010;&#26381;&#21153;&#22120;&#65292;&#21442;&#35265;<a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">Chapter&nbsp;34, <i>&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</i></a>&#12290;</p><p>&#22312;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#26102;&#65292;&#22914;&#26524;&#23458;&#25143;&#31471;&#26377;&#38750;&#25345;&#20037;&#25110;&#20020;&#26102;&#38431;&#21015;&#30340;&#25509;&#25910;&#32773;&#26102;&#65292;&#36825;&#20123;&#38431;&#21015;&#20250;&#33258;&#21160;&#22312;&#22791;&#20221;&#26381;&#21153;&#22120;&#19978;&#37325;&#26032;&#21019;&#24314;&#12290;&#23545;&#20110;
            &#38750;&#25345;&#20037;&#24615;&#30340;&#38431;&#21015;&#65292;&#22791;&#20221;&#26381;&#21153;&#22120;&#20107;&#20808;&#26159;&#27809;&#26377;&#23427;&#20204;&#30340;&#20449;&#24687;&#30340;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="ha.automatic.failover"></a>39.2.1.&nbsp;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;</h3></div></div><div></div></div><p>HornetQ&#30340;&#23458;&#25143;&#31471;&#21487;&#20197;&#37197;&#32622;&#20027;&#65295;&#22791;&#20221;&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#65292;&#24403;&#23458;&#25143;&#31471;&#19982;&#20027;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#21457;&#29983;&#25925;&#38556;&#26102;&#65292;&#21487;&#20197;&#33258;&#21160;&#26816;&#27979;&#21040;&#25925;&#38556;&#24182;
                &#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#22788;&#29702;&#65292;&#35753;&#23458;&#25143;&#31471;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#19978;&#12290;&#22791;&#20221;&#26381;&#21153;&#22120;&#21487;&#20197;&#33258;&#21160;&#37325;&#26032;&#21019;&#24314;&#25152;&#26377;&#22312;&#22833;&#25928;&#22791;&#25588;&#20043;&#21069;&#23384;&#22312;&#30340;&#20250;&#35805;&#19982;&#25509;&#25910;
                &#32773;&#12290;&#23458;&#25143;&#31471;&#19981;&#38656;&#35201;&#36827;&#34892;&#20154;&#24037;&#30340;&#36830;&#25509;&#24674;&#22797;&#24037;&#20316;&#65292;&#20174;&#32780;&#33410;&#30465;&#20102;&#23458;&#25143;&#31471;&#30340;&#24320;&#21457;&#24037;&#20316;&#12290;</p><p>HornetQ&#30340;&#23458;&#25143;&#31471;&#22312;&#21442;&#25968;<tt class="literal">client-failure-check-period</tt>&#65288;&#22312;
                <a href="#connection-ttl" title="Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;">Chapter&nbsp;17, <i>&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;</i></a>&#20013;&#36827;&#34892;&#20102;&#35299;&#37322;&#65289;&#35268;&#23450;&#30340;&#26102;&#38388;&#20869;&#22914;&#26524;&#27809;&#26377;&#25910;&#21040;&#25968;&#25454;&#21253;&#65292;&#21017;&#35748;&#20026;&#36830;&#25509;&#21457;&#29983;&#25925;&#38556;&#12290;
                &#24403;&#23458;&#25143;&#31471;&#35748;&#20026;&#36830;&#25509;&#25925;&#38556;&#26102;&#65292;&#23427;&#23601;&#20250;&#23581;&#35797;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#12290;</p><p>HornetQ&#26377;&#20960;&#31181;&#26041;&#27861;&#26469;&#20026;&#23458;&#25143;&#31471;&#37197;&#32622;&#20027;&#65295;&#22791;&#26381;&#21153;&#22120;&#23545;&#30340;&#21015;&#34920;&#12290;&#21487;&#20197;&#37319;&#29992;&#26174;&#24335;&#25351;&#23450;&#30340;&#26041;&#27861;&#65292;&#25110;&#32773;&#37319;&#29992;&#26356;&#20026;&#24120;&#29992;&#30340;
                <span class="emphasis"><em>&#26381;&#21153;&#22120;&#21457;&#29616;</em></span>&#30340;&#26041;&#27861;&#12290;&#26377;&#20851;&#22914;&#20309;&#37197;&#32622;&#26381;&#21153;&#22120;&#21457;&#29616;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;
                <a href="#clusters.server-discovery" title="38.2.&nbsp;&#26381;&#21153;&#22120;&#21457;&#29616;">Section&nbsp;38.2, &#8220;&#26381;&#21153;&#22120;&#21457;&#29616;&#8221;</a>&#12290;
                &#20851;&#20110;&#22914;&#20309;&#26174;&#24335;&#25351;&#23450;&#20027;&#65295;&#22791;&#26381;&#21153;&#22120;&#23545;&#30340;&#26041;&#27861;&#65292;&#35831;&#21442;&#35265;<a href="#clusters.static.servers" title="38.5.2.&nbsp;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;">Section&nbsp;38.5.2, &#8220;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;&#8221;</a>&#20013;&#30340;&#35299;&#37322;&#12290;</p><p>&#35201;&#20351;&#23458;&#25143;&#31471;&#20855;&#22791;&#33258;&#21160;&#22833;&#25928;&#22791;&#25588;&#65292;&#22312;&#23458;&#25143;&#31471;&#30340;&#37197;&#32622;&#20013;&#24517;&#39035;&#35201;&#25351;&#23450;&#37325;&#35797;&#30340;&#27425;&#25968;&#35201;&#22823;&#20110;&#38646;&#65288;&#21442;&#35265;
                <a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">Chapter&nbsp;34, <i>&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;</i></a>&#20013;&#30340;&#35299;&#37322;&#65289;&#12290;</p><p>&#26377;&#26102;&#20320;&#38656;&#35201;&#22312;&#20027;&#26381;&#21153;&#22120;&#27491;&#24120;&#20851;&#26426;&#30340;&#24773;&#20917;&#19979;&#20173;&#28982;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#12290;&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#20320;&#38656;&#35201;&#23558;<tt class="literal">HornetQConnectionFactory</tt>&#30340;<tt class="literal">FailoverOnServerShutdown</tt>&#23646;&#24615;&#35774;&#20026;true&#65292;&#25110;&#32773;&#26159;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#65288;&#21442;&#25968;&#20026;failover-on-server-shutdown&#65289;&#25991;&#20214;&#20013;&#36827;&#34892;&#30456;&#24212;&#30340;&#37197;&#32622;&#12290;&#22914;&#26524;&#20351;&#29992;&#30340;&#26159;&#26680;&#24515;&#25509;&#21475;&#65292;&#21487;&#20197;&#22312;&#21019;&#24314;
                    <tt class="literal">ClientSessionFactoryImpl</tt>&#23454;&#20363;&#26102;&#23558;&#19978;&#36848;&#21516;&#21517;&#23646;&#24615;&#35774;&#32622;&#20026;true&#12290;
                &#36825;&#20010;&#23646;&#24615;&#30340;&#40664;&#35748;&#20540;&#26159;false&#12290;&#36825;&#34920;&#31034;&#22914;&#26524;&#20027;&#26381;&#21153;&#22120;&#26159;&#27491;&#24120;&#20851;&#26426;&#65292;<span class="emphasis"><em>&#23458;&#25143;&#31471;&#23558;&#19981;&#20250;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;</em></span>&#12290;</p><p>
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#40664;&#35748;&#27491;&#24120;&#20851;&#26426;<span class="bold"><b>&#19981;&#20250;</b></span>&#19981;&#20250;&#23548;&#33268;&#22833;&#25928;&#22791;&#25588;&#12290;</p><p>&#20351;&#29992;CTRL-C&#26469;&#20851;&#38381;HornetQ&#26381;&#21153;&#22120;&#25110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#23646;&#20110;&#27491;&#24120;&#20851;&#26426;&#65292;&#25152;&#20197;&#19981;&#20250;&#35302;&#21457;&#23458;&#25143;&#31471;&#30340;&#22833;&#25928;
                        &#22791;&#25588;&#12290;</p><p>&#35201;&#24819;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#24517;&#39035;&#23558;&#23646;&#24615;<tt class="literal">FailoverOnServerShutdown</tt>
                        &#35774;&#20026;true&#12290;</p></div><p>
            </p><p>&#40664;&#35748;&#24773;&#20917;&#19979;&#33267;&#23569;&#21019;&#24314;&#20102;&#19968;&#20010;&#19982;&#20027;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#21518;&#22833;&#25928;&#22791;&#25588;&#25165;&#20250;&#21457;&#29983;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#22914;&#26524;&#23458;&#25143;&#31471;&#27599;&#19968;&#27425;&#21019;&#24314;&#19982;
                &#20027;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22833;&#36133;&#65292;&#23427;&#20250;&#26681;&#25454;&#21442;&#25968;reconnection-attempts&#30340;&#35774;&#32622;&#36827;&#34892;&#36830;&#25509;&#37325;&#35797;&#65292;&#32780;&#19981;&#26159;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;&#12290;
                &#22914;&#26524;&#37325;&#35797;&#27425;&#25968;&#36229;&#36807;&#30340;&#35813;&#21442;&#25968;&#30340;&#20540;&#65292;&#21017;&#36830;&#25509;&#22833;&#36133;&#12290;</p><p>&#22312;&#26377;&#20123;&#24773;&#20917;&#19979;&#65292;&#20320;&#21487;&#33021;&#24076;&#26395;&#22312;&#21021;&#22987;&#36830;&#25509;&#22833;&#36133;&#21644;&#24773;&#20917;&#19979;&#33258;&#21160;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;&#65292;&#37027;&#20040;&#20320;&#21487;&#20197;&#30452;&#25509;&#22312;
                <tt class="literal">ClientSessionFactoryImpl</tt>&#25110;<tt class="literal">HornetQConnectionFactory</tt>&#19978;&#35774;&#32622;<tt class="literal">FailoverOnInitialConnection</tt>
                &#21442;&#25968;&#65292;&#25110;&#32773;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#35774;&#32622;<tt class="literal">failover-on-initial-connection</tt>&#12290;&#40664;&#35748;&#30340;&#20540;&#26159;<tt class="literal">false</tt>&#12290;</p><p>&#26377;&#20851;&#20107;&#21153;&#24615;&#21450;&#38750;&#20107;&#21153;&#24615;JMS&#20250;&#35805;&#30340;&#33258;&#21160;&#22833;&#25928;&#22791;&#25588;&#30340;&#20363;&#23376;&#65292;&#35831;&#21442;&#35265;
                    <a href="#examples.transaction-failover" title="11.1.57.&nbsp;&#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;">Section&nbsp;11.1.57, &#8220;&#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;&#8221;</a>&#21450;<a href="#examples.non-transaction-failover" title="11.1.33.&nbsp;&#24102;&#26377;&#26381;&#21153;&#22120;&#25968;&#25454;&#22797;&#21046;&#30340;&#38750;&#20107;&#21153;&#22833;&#25928;&#22791;&#25588;">Section&nbsp;11.1.33, &#8220;&#24102;&#26377;&#26381;&#21153;&#22120;&#25968;&#25454;&#22797;&#21046;&#30340;&#38750;&#20107;&#21153;&#22833;&#25928;&#22791;&#25588;&#8221;</a>&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.automatic.failover.noteonreplication"></a>39.2.1.1.&nbsp;&#20851;&#20110;&#26381;&#21153;&#22120;&#30340;&#22797;&#21046;</h4></div></div><div></div></div><p>HornetQ&#22312;&#20027;&#26381;&#21153;&#22120;&#21521;&#22791;&#20221;&#26381;&#21153;&#22120;&#22797;&#21046;&#26102;&#65292;&#24182;&#19981;&#22797;&#21046;&#26381;&#21153;&#22120;&#30340;&#20840;&#37096;&#29366;&#24577;&#12290;&#25152;&#20197;&#24403;&#19968;&#20010;&#20250;&#35805;&#22312;&#22791;&#20221;&#26381;&#21153;&#22120;
                    &#20013;&#37325;&#26032;&#21019;&#24314;&#21518;&#65292;&#23427;&#24182;&#19981;&#30693;&#36947;&#21457;&#36865;&#36807;&#30340;&#28040;&#24687;&#25110;&#36890;&#30693;&#36807;&#30340;&#28040;&#24687;&#12290;&#22312;&#22833;&#25928;&#22791;&#25588;&#30340;&#36807;&#31243;&#20013;&#21457;&#29983;&#30340;&#28040;&#24687;&#21457;&#36865;&#25110;&#36890;&#30693;&#20063;&#21487;
                    &#33021;&#20002;&#22833;&#12290;</p><p>&#29702;&#35770;&#19978;&#22914;&#26524;&#36827;&#34892;&#20840;&#37096;&#29366;&#24577;&#30340;&#22797;&#21046;&#65292;&#25105;&#20204;&#21487;&#20197;&#25552;&#20379;100&#65285;&#30340;&#36879;&#26126;&#30340;&#22833;&#25928;&#22791;&#25588;&#65292;&#19981;&#20250;&#22833;&#21435;&#20219;&#20309;&#30340;&#28040;&#24687;&#25110;&#36890;&#30693;&#12290;
                    &#20294;&#26159;&#36825;&#26679;&#20570;&#35201;&#20184;&#20986;&#24456;&#22823;&#30340;&#20195;&#20215;&#65306;&#21363;&#25152;&#26377;&#20449;&#24687;&#37117;&#35201;&#36827;&#34892;&#22797;&#21046;&#65288;&#21253;&#25324;&#38431;&#21015;&#65292;&#20250;&#35805;&#31561;&#31561;&#65289;&#12290;&#20063;&#23601;&#26159;&#35201;&#27714;&#22797;&#21046;&#26381;&#21153;
                    &#22120;&#30340;&#27599;&#20010;&#29366;&#24577;&#20449;&#24687;&#65292;&#20027;&#26381;&#21153;&#22120;&#30340;&#27599;&#19968;&#27493;&#25805;&#20316;&#37117;&#23558;&#21521;&#20854;&#22791;&#20221;&#36827;&#34892;&#22797;&#21046;&#65292;&#24182;&#19988;&#35201;&#22312;&#20840;&#23616;&#20869;&#20445;&#25345;&#39034;&#24207;&#30340;&#19968;&#33268;&#12290;&#36825;&#26679;
                    &#20570;&#23601;&#26497;&#38590;&#20445;&#35777;&#39640;&#24615;&#33021;&#21644;&#21487;&#25193;&#23637;&#24615;&#65292;&#29305;&#21035;&#26159;&#32771;&#34385;&#21040;&#22810;&#32447;&#31243;&#21516;&#26102;&#25913;&#21464;&#20027;&#26381;&#21153;&#22120;&#30340;&#29366;&#24577;&#30340;&#24773;&#20917;&#65292;&#35201;&#36827;&#34892;&#20840;&#29366;&#24577;&#22797;&#21046;
                    &#23601;&#26356;&#21152;&#22256;&#38590;&#12290;</p><p>&#19968;&#20123;&#25216;&#26415;&#21487;&#20197;&#29992;&#26469;&#23454;&#29616;&#20840;&#29366;&#24577;&#22797;&#21046;&#65292;&#22914;<span class="italic">&#34394;&#25311;&#21516;&#27493;&#25216;&#26415;
                    &#65288;virtual synchrony&#65289;</span>&#12290;&#20294;&#26159;&#36825;&#20123;&#25216;&#26415;&#24448;&#24448;&#27809;&#26377;&#24456;&#22909;&#30340;&#21487;&#25193;&#23637;&#24615;&#65292;&#24182;&#19988;&#23558;&#25152;&#26377;&#25805;&#20316;&#37117;
                    &#36827;&#34892;&#24207;&#21015;&#21270;&#65292;&#30001;&#21333;&#19968;&#32447;&#31243;&#36827;&#34892;&#22788;&#29702;&#65292;&#36825;&#26679;&#26126;&#26174;&#22320;&#23558;&#24213;&#20102;&#24182;&#34892;&#22788;&#29702;&#33021;&#21147;&#12290;</p><p>&#21478;&#22806;&#36824;&#26377;&#20854;&#23427;&#19968;&#20123;&#22810;&#32447;&#31243;&#20027;&#21160;&#22797;&#21046;&#25216;&#26415;&#65292;&#27604;&#22914;&#22797;&#21046;&#38145;&#29366;&#24577;&#25110;&#22797;&#21046;&#32447;&#31243;&#35843;&#24230;&#31561;&#12290;&#36825;&#20123;&#25216;&#26415;&#20351;&#29992;Java&#35821;&#35328;&#38750;&#24120;
                    &#38590;&#20110;&#23454;&#29616;&#12290;</p><p>&#22240;&#27492;&#24471;&#20986;&#32467;&#35770;&#65292;&#37319;&#29992;&#22823;&#37327;&#29306;&#29298;&#24615;&#33021;&#26469;&#25442;&#21462;100&#65285;&#36879;&#26126;&#30340;&#22833;&#25928;&#22791;&#25588;&#26159;&#24471;&#19981;&#20607;&#22833;&#30340;&#12290;&#27809;&#26377;100&#65285;&#36879;&#26126;&#30340;&#22833;&#25928;
                    &#22791;&#25588;&#25105;&#20204;&#20173;&#28982;&#21487;&#20197;&#36731;&#26131;&#22320;&#20445;&#35777;&#19968;&#27425;&#19988;&#21482;&#26377;&#19968;&#27425;&#30340;&#20256;&#36882;&#12290;&#36825;&#26159;&#36890;&#36807;&#22312;&#21457;&#29983;&#25925;&#38556;&#26102;&#37319;&#29992;&#37325;&#22797;&#26816;&#27979;&#32467;&#21512;&#20107;&#21153;&#37325;&#35797;
                    &#26469;&#23454;&#29616;&#30340;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.automatic.failover.blockingcalls"></a>39.2.1.2.&nbsp;&#22833;&#25928;&#22791;&#25588;&#26102;&#38459;&#22622;&#35843;&#29992;&#30340;&#22788;&#29702;</h4></div></div><div></div></div><p>&#22914;&#26524;&#24403;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#26102;&#23458;&#25143;&#31471;&#27491;&#38754;&#36827;&#34892;&#19968;&#20010;&#38459;&#22622;&#35843;&#29992;&#24182;&#31561;&#24453;&#26381;&#21153;&#22120;&#30340;&#36820;&#22238;&#65292;&#26032;&#21019;&#24314;&#30340;&#20250;&#35805;&#19981;&#20250;&#30693;&#36947;&#36825;&#20010;&#35843;&#29992;&#65292;
                    &#22240;&#27492;&#23458;&#25143;&#31471;&#21487;&#33021;&#27704;&#36828;&#20063;&#19981;&#20250;&#24471;&#21040;&#21709;&#24212;&#65292;&#20063;&#23601;&#21487;&#33021;&#19968;&#30452;&#38459;&#22622;&#22312;&#37027;&#37324;&#12290;</p><p>&#20026;&#20102;&#38450;&#27490;&#36825;&#31181;&#24773;&#20917;&#30340;&#21457;&#29983;&#65292;HornetQ&#22312;&#22833;&#25928;&#22791;&#25588;&#26102;&#20250;&#35299;&#38500;&#25152;&#26377;&#30340;&#38459;&#22622;&#35843;&#29992;&#65292;&#21516;&#26102;&#25243;&#20986;&#19968;&#20010;
                    <tt class="literal">javax.jms.JMSException</tt>&#24322;&#24120;&#65288;&#22914;&#26524;&#26159;JMS&#65289;&#25110;<tt class="literal">HornetQException</tt>&#24322;&#24120;&#12290;&#24322;&#24120;&#30340;&#38169;&#35823;&#20195;&#30721;&#26159;<tt class="literal">HornetQException.UNBLOCKED</tt>&#12290;&#23458;&#25143;&#31471;&#38656;&#35201;&#33258;&#34892;&#22788;&#29702;&#36825;&#20010;&#24322;&#24120;&#65292;&#24182;&#19988;&#36827;&#34892;
                    &#24517;&#35201;&#30340;&#25805;&#20316;&#37325;&#35797;&#12290;</p><p>&#22914;&#26524;&#34987;&#35299;&#38500;&#38459;&#22622;&#30340;&#35843;&#29992;&#26159;commit()&#25110;&#32773;prepare()&#65292;&#37027;&#20040;&#36825;&#20010;&#20107;&#21153;&#20250;&#34987;&#33258;&#21160;&#22320;&#22238;&#28378;&#65292;&#24182;&#19988;HornetQ
                    &#20250;&#25243;&#20986;&#19968;&#20010;<tt class="literal">javax.jms.TransactionRolledBackException</tt>&#65288;&#22914;&#26524;&#26159;JMS&#65289;
                    &#25110;&#37117;&#26159;&#19968;&#20010;<tt class="literal">HornetQException</tt>&#65292;&#38169;&#35823;&#20195;&#30721;&#20026; <tt class="literal">HornetQException.TRANSACTION_ROLLED_BACK</tt>&#65288;&#22914;&#26524;&#26159;&#26680;&#24515;&#25509;&#21475;&#65289;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.automatic.failover.transactions"></a>39.2.1.3.&nbsp;&#20107;&#21153;&#30340;&#22833;&#25928;&#22791;&#25588;&#22788;&#29702;</h4></div></div><div></div></div><p>&#22914;&#26524;&#22312;&#19968;&#20010;&#20107;&#21153;&#24615;&#20250;&#35805;&#20013;&#65292;&#22312;&#24403;&#21069;&#20107;&#21153;&#20013;&#28040;&#24687;&#24050;&#32463;&#21457;&#20986;&#25110;&#36890;&#30693;&#65292;&#21017;&#26381;&#21153;&#22120;&#22312;&#36825;&#26102;&#22914;&#26524;&#21457;&#29983;&#22833;&#25928;&#22791;&#25588;&#65292;&#23427;&#19981;
                    &#33021;&#20445;&#35777;&#21457;&#20986;&#30340;&#28040;&#24687;&#25110;&#36890;&#30693;&#27809;&#26377;&#20002;&#22833;&#12290;</p><p>&#22240;&#27492;&#36825;&#20010;&#20107;&#21153;&#23601;&#20250;&#34987;&#26631;&#35760;&#20026;&#21482;&#22238;&#28378;&#65292;&#20219;&#20309;&#23581;&#35797;&#25552;&#20132;&#30340;&#25805;&#20316;&#37117;&#20250;&#25243;&#20986;&#19968;&#20010;<tt class="literal">javax.jms.TransactionRolledBackException</tt>&#24322;&#24120;&#65288;&#22914;&#26524;&#26159;JMS&#65289;&#65292;&#25110;&#32773;&#26159;&#19968;
                        &#20010;<tt class="literal">HornetQException</tt>&#30340;&#24322;&#24120;&#65292;&#38169;&#35823;&#20195;&#30721;&#20026;<tt class="literal">HornetQException.TRANSACTION_ROLLED_BACK</tt>&#65288;&#22914;&#26524;&#26159;&#26680;&#24515;&#25509;&#21475;&#65289;&#12290;</p><p>&#23458;&#25143;&#31471;&#38656;&#35201;&#33258;&#34892;&#22788;&#29702;&#36825;&#20123;&#24322;&#24120;&#65292;&#36827;&#34892;&#24517;&#35201;&#30340;&#22238;&#28378;&#22788;&#29702;&#12290;&#27880;&#24847;&#36825;&#37324;&#19981;&#38656;&#35201;&#20154;&#24037;&#23558;&#20250;&#35805;&#36827;&#34892;&#22238;&#28378;&#65293;&#27492;&#26102;&#23427;&#24050;&#32463;
                      &#34987;&#22238;&#28378;&#20102;&#12290;&#29992;&#25143;&#21487;&#20197;&#36890;&#36807;&#21516;&#19968;&#20010;&#20250;&#35805;&#37325;&#35797;&#35813;&#20107;&#21153;&#25805;&#20316;&#12290;</p><p>HornetQ&#21457;&#24067;&#21253;&#20013;&#21253;&#25324;&#20102;&#19968;&#20010;&#23436;&#25972;&#30340;&#20363;&#23376;&#26469;&#23637;&#31034;&#22914;&#20309;&#22788;&#29702;&#36825;&#31181;&#24773;&#20917;&#12290;&#21442;&#35265;
                     <a href="#examples.transaction-failover" title="11.1.57.&nbsp;&#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;">Section&nbsp;11.1.57, &#8220;&#24102;&#26377;&#25968;&#25454;&#22797;&#21046;&#30340;&#20107;&#21153;&#24615;&#22833;&#25928;&#22791;&#25588;&#8221;</a></p><p>&#22914;&#26524;&#26159;&#22312;&#25552;&#20132;&#36807;&#31243;&#20013;&#21457;&#29983;&#20102;&#22833;&#25928;&#22791;&#25588;&#65292;&#26381;&#21153;&#22120;&#23558;&#36825;&#20010;&#38459;&#22622;&#35843;&#29992;&#35299;&#38500;&#12290;&#36825;&#31181;&#24773;&#20917;&#19979;&#23458;&#25143;&#31471;&#24456;&#38590;&#30830;&#23450;&#22312;&#20107;&#25925;&#21457;&#29983;
                    &#20043;&#21069;&#20107;&#21153;&#26159;&#21542;&#22312;&#20027;&#26381;&#21153;&#22120;&#20013;&#24471;&#21040;&#20102;&#22788;&#29702;&#12290;</p><p>&#20026;&#20102;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#65292;&#23458;&#25143;&#31471;&#21487;&#20197;&#22312;&#20107;&#21153;&#20013;&#20351;&#29992;&#37325;&#22797;&#26816;&#27979;&#65288;<a href="#duplicate-detection" title="Chapter&nbsp;37.&nbsp;&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;">Chapter&nbsp;37, <i>&#37325;&#22797;&#28040;&#24687;&#26816;&#27979;</i></a>&#65289;
                    &#65292;&#24182;&#19988;&#22312;&#25552;&#20132;&#30340;&#35843;&#29992;&#34987;&#35299;&#38500;&#21518;&#37325;&#26032;&#23581;&#35797;&#20107;&#21153;&#25805;&#20316;&#12290;&#22914;&#26524;&#22312;&#22833;&#25928;&#22791;&#25588;&#21069;&#20107;&#21153;&#30830;&#23454;&#22312;&#20027;&#26381;&#21153;&#22120;&#19978;&#24050;&#32463;&#23436;&#25104;&#25552;&#20132;&#65292;&#37027;&#20040;
                    &#24403;&#20107;&#21153;&#36827;&#34892;&#37325;&#35797;&#26102;&#65292;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#21487;&#20197;&#20445;&#35777;&#37325;&#22797;&#21457;&#36865;&#30340;&#28040;&#24687;&#34987;&#20002;&#24323;&#65292;&#36825;&#26679;&#36991;&#20813;&#20102;&#28040;&#24687;&#30340;&#37325;&#22797;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#36890;&#36807;&#22788;&#29702;&#24322;&#24120;&#21644;&#37325;&#35797;&#65292;&#36866;&#24403;&#22788;&#29702;&#34987;&#35299;&#38500;&#30340;&#38459;&#22622;&#35843;&#29992;&#24182;&#37197;&#21512;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#65292;HornetQ&#21487;&#20197;&#22312;&#25925;&#38556;&#26465;&#20214;&#19979;&#20445;&#35777;
                        &#19968;&#27425;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;&#30340;&#28040;&#24687;&#20256;&#36882;&#65292;&#27809;&#26377;&#28040;&#24687;&#20002;&#22833;&#21644;&#28040;&#24687;&#37325;&#22797;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="ha.automatic.failover.nontransactional"></a>39.2.1.4.&nbsp;&#38750;&#20107;&#21153;&#20250;&#35805;&#30340;&#22833;&#25928;&#22791;&#25588;&#22788;&#29702;</h4></div></div><div></div></div><p>&#22914;&#26524;&#20250;&#35805;&#26159;&#38750;&#20107;&#21153;&#24615;&#30340;&#65292;&#37027;&#20040;&#36890;&#36807;&#23427;&#30340;&#28040;&#24687;&#25110;&#36890;&#30693;&#22312;&#25925;&#38556;&#26102;&#21487;&#33021;&#20250;&#20002;&#22833;&#12290;</p><p>&#22914;&#26524;&#20320;&#22312;&#38750;&#20107;&#21153;&#20250;&#35805;&#20013;&#35201;&#20445;&#35777;<span class="italic">&#19968;&#27425;&#24182;&#19988;&#21482;&#26377;&#19968;&#27425;</span>
                    &#30340;&#28040;&#24687;&#20256;&#36882;&#65292;&#20320;&#38656;&#35201;&#20351;&#29992;&#37325;&#22797;&#26816;&#27979;&#21151;&#33021;&#65292;&#24182;&#36866;&#24403;&#22788;&#29702;&#34987;&#35299;&#38500;&#30340;&#38459;&#22622;&#35843;&#29992;&#12290;&#21442;&#35265; <a href="#ha.automatic.failover.blockingcalls" title="39.2.1.2.&nbsp;&#22833;&#25928;&#22791;&#25588;&#26102;&#38459;&#22622;&#35843;&#29992;&#30340;&#22788;&#29702;">Section&nbsp;39.2.1.2, &#8220;&#22833;&#25928;&#22791;&#25588;&#26102;&#38459;&#22622;&#35843;&#29992;&#30340;&#22788;&#29702;&#8221;</a>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10112"></a>39.2.2.&nbsp;&#36830;&#25509;&#25925;&#38556;&#30340;&#36890;&#30693;</h3></div></div><div></div></div><p>JMS&#25552;&#20379;&#20102;&#26631;&#20934;&#30340;&#24322;&#27493;&#25509;&#25910;&#36830;&#25509;&#25925;&#38556;&#36890;&#30693;&#30340;&#26426;&#21046;&#65306;<tt class="literal">java.jms.ExceptionListener</tt>&#12290;
                &#35831;&#21442;&#32771;JMS&#30340;javadoc&#25110;&#32773;&#20854;&#23427;JMS&#25945;&#31243;&#26469;&#36827;&#19968;&#27493;&#20102;&#35299;&#24590;&#26679;&#20351;&#29992;&#36825;&#20010;&#25509;&#21475;&#12290;</p><p>HornetQ&#30340;&#26680;&#24515;&#25509;&#21475;&#20063;&#25552;&#20379;&#20102;&#19968;&#20010;&#30456;&#20284;&#30340;&#25509;&#21475;
                   <tt class="literal">org.hornet.core.client.SessionFailureListener</tt>&#12290;</p><p>&#20219;&#20309;ExceptionListener&#25110;SessionFailureListener&#30340;&#23454;&#20363;&#65292;&#22312;&#21457;&#29983;&#36830;&#25509;&#25925;&#38556;&#26102;&#65292;&#37117;&#20250;&#34987;HornetQ
                &#35843;&#29992;&#65292;<span class="bold"><b>&#19981;&#31649;</b></span>&#35813;&#36830;&#25509;&#26159;&#21542;&#24471;&#21040;&#20102;&#22833;&#25928;&#22791;&#25588;&#12289;&#37325;&#26032;&#36830;&#25509;&#36824;&#26159;&#24471;&#21040;&#20102;&#24674;&#22797;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10130"></a>39.2.3.&nbsp;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;</h3></div></div><div></div></div><p>&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#20320;&#21487;&#33021;&#19981;&#38656;&#35201;&#33258;&#21160;&#30340;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;&#65292;&#24076;&#26395;&#33258;&#24049;&#26469;&#22788;&#29702;&#36830;&#25509;&#25925;&#38556;&#65292;&#20351;&#29992;&#33258;&#24049;&#30340;&#37325;&#26032;&#36830;&#25509;&#26041;&#26696;&#31561;&#12290;
                &#25105;&#20204;&#25226;&#23427;&#31216;&#20043;&#20026;<span class="emphasis"><em>&#24212;&#29992;&#23618;</em></span>&#22833;&#25928;&#22791;&#25588;&#65292;&#22240;&#20026;&#23427;&#26159;&#21457;&#29983;&#22312;&#24212;&#29992;&#23618;&#30340;&#31243;&#24207;&#20013;&#12290;</p><p>&#20026;&#20102;&#23454;&#29616;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;&#30417;&#21548;&#22120;&#65288;listener&#65289;&#30340;&#26041;&#24335;&#12290;&#22914;&#26524;&#20351;&#29992;&#30340;&#26159;JMS&#65292;&#20320;&#38656;&#35201;&#22312;JMS&#36830;&#25509;&#19978;
                &#35774;&#32622;&#19968;&#20010;<tt class="literal">ExceptionListener</tt>&#31867;&#12290;&#36825;&#20010;&#31867;&#22312;&#36830;&#25509;&#21457;&#29983;&#25925;&#38556;&#26102;&#30001;HornetQ&#35843;&#29992;&#12290;&#22312;&#36825;&#20010;&#31867;
                &#20013;&#20320;&#21487;&#20197;&#23558;&#26087;&#30340;&#36830;&#25509;&#20851;&#38381;&#65292;&#20351;&#29992;JNDI&#26597;&#25214;&#26032;&#30340;&#36830;&#25509;&#24037;&#21378;&#24182;&#21019;&#24314;&#26032;&#30340;&#36830;&#25509;&#12290;&#36825;&#37324;&#20320;&#21487;&#20197;&#20351;&#29992;
                <a href="http://www.jboss.org/community/wiki/JBossHAJNDIImpl" target="_top">HA-JNDI</a>
                &#26469;&#20445;&#35777;&#26032;&#30340;&#36830;&#25509;&#24037;&#21378;&#26469;&#33258;&#20110;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#12290;</p><p>&#35831;&#21442;&#35265;<a href="#application-level-failover" title="11.1.1.&nbsp;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;">Section&nbsp;11.1.1, &#8220;&#24212;&#29992;&#23618;&#30340;&#22833;&#25928;&#22791;&#25588;&#65288;Failover&#65289;&#8221;</a>&#12290;&#36825;&#26159;&#19968;&#20010;&#23436;&#25972;&#30340;&#24212;&#29992;&#23618;&#22833;&#25928;&#22791;&#25588;&#30340;&#20363;&#23376;&#12290;</p><p>&#22914;&#26524;&#20320;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;&#21017;&#36807;&#31243;&#20063;&#26159;&#24456;&#30456;&#20284;&#30340;&#65306;&#20320;&#22312;&#26680;&#24515;&#30340;<tt class="literal">ClientSession</tt>&#23454;&#20363;&#19978;&#35774;&#32622;&#19968;&#20010;
                <tt class="literal">FailureListener</tt>&#65292;&#28982;&#21518;&#22312;&#36825;&#20010;&#31867;&#20013;&#36827;&#34892;&#30456;&#24212;&#30340;&#22788;&#29702;&#21363;&#21487;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="libaio"></a>Chapter&nbsp;40.&nbsp;Libaio&#24179;&#21488;&#19987;&#26377;&#24211;</h2></div></div><div></div></div><p>HornetQ&#21457;&#24067;&#21253;&#20013;&#21253;&#25324;&#19968;&#20010;&#24179;&#21488;&#19987;&#26377;&#30340;&#24211;&#65292;&#23427;&#21487;&#20197;&#20351;HornetQ&#20351;&#29992;Linux&#25805;&#20316;&#31995;&#32479;&#30340;libaio&#12290;</p><p><tt class="literal">libaio</tt>&#26159;Linux&#39033;&#30446;&#30340;&#19968;&#20010;&#24211;&#12290;&#23427;&#23558;&#29992;&#25143;&#25552;&#20132;&#30340;&#20889;&#25805;&#20316;&#29992;&#24322;&#27493;&#30340;&#26041;&#24335;&#25191;&#34892;&#12290;&#36890;&#36807;
        &#22238;&#35843;&#29992;&#25143;&#30340;&#20195;&#30721;&#26469;&#36890;&#30693;&#20889;&#25805;&#20316;&#30340;&#23436;&#25104;&#12290;</p><p>&#36890;&#36807;&#37197;&#32622;&#65292;HornetQ&#21487;&#20197;&#20351;&#29992;&#36825;&#20010;&#24211;&#26469;&#35775;&#38382;&#39640;&#24615;&#33021;&#30340;&#26085;&#24535;&#65292;&#20855;&#20307;&#35831;&#21442;&#35265; <a href="#persistence" title="Chapter&nbsp;15.&nbsp;&#25345;&#20037;&#21270;">Chapter&nbsp;15, <i>&#25345;&#20037;&#21270;</i></a>&#12290;</p><p>&#19979;&#38754;&#21015;&#20986;&#20102;HornetQ&#25152;&#24102;&#30340;&#24179;&#21488;&#19987;&#26377;&#24211;&#25991;&#20214;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>libHornetQAIO32.so - x86 32 &#20301;&#24179;&#21488;</p></li><li><p>libHornetQAIO64.so - x86 64 &#20301;&#24179;&#21488;</p></li></ul></div><p>&#24403;&#20351;&#29992;libaio&#26102;&#65292;HornetQ&#20250;&#22312;<a href="#using-server.library.path" title="6.4.&nbsp;Library Path">&#24211;&#36335;&#24452;</a>&#20013;&#23547;&#25214;&#24182;&#35013;
           &#36733;&#36825;&#20123;&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10202"></a>40.1.&nbsp;&#24211;&#25991;&#20214;&#30340;&#32534;&#35793;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#30340;Linux&#24179;&#21488;&#19981;&#26159;x86_32&#25110;x86_64&#65288;&#27604;&#22914;Itanium 64&#25110;IBM Power&#65289;&#65292;&#20320;&#38656;&#35201;&#33258;&#24049;&#32534;&#35793;&#30456;&#24212;&#30340;&#24211;&#25991;&#20214;&#65292;
            &#22240;&#20026;HornetQ&#19981;&#25552;&#20379;&#36825;&#20123;&#24179;&#21488;&#30340;&#24211;&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10207"></a>40.1.1.&nbsp;&#23433;&#35013;&#35201;&#27714;</h3></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#30446;&#21069;libaio&#21482;&#22312;Linux&#19978;&#26377;&#12290;&#25152;&#20197;&#23427;&#19981;&#21487;&#33021;&#22312;&#20854;&#23427;&#25805;&#20316;&#31995;&#32479;&#19978;&#32534;&#35793;&#12290;</p></div><p>&#32534;&#35793;&#38656;&#35201;<a href="http://en.wikipedia.org/wiki/Autoconf" target="_top">autoconf</a>&#24037;&#20855;&#65292;&#23427;&#29992;&#26469;&#31616;&#21270;&#32534;&#35793;&#36807;&#31243;&#12290;&#38500;&#27492;&#20043;&#22806;&#36824;&#38656;&#35201;&#19968;&#20123;&#23433;&#35013;&#21253;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>gcc - C &#32534;&#35793;&#22120;</p></li><li><p>gcc-c++ or g++ - gcc&#30340;c++&#32534;&#35793;&#24037;&#20855;&#25193;&#23637;</p></li><li><p>autoconf - &#33258;&#21160;&#32534;&#35793;&#24037;&#20855;</p></li><li><p>make - make &#24037;&#20855;</p></li><li><p>automake - make&#25991;&#20214;&#33258;&#21160;&#29983;&#25104;&#24037;&#20855;</p></li><li><p>libtool - &#24211;&#36830;&#25509;&#24037;&#20855;</p></li><li><p>libaio - &#30913;&#30424;&#24322;&#27493;IO&#24211;</p></li><li><p>libaio-dev - libaio&#30340;&#32534;&#35793;&#25903;&#25345;</p></li><li><p>&#23436;&#25972;&#30340;JDK&#65292;JAVA_HOME&#35201;&#25351;&#21521;&#27491;&#30830;&#30340;&#20301;&#32622;</p></li></ul></div><p>&#22914;&#26524;&#22312;RHEL&#25110;Fedora&#19978;&#36827;&#34892;&#23433;&#35013;&#65292;&#36755;&#20837;&#20197;&#19979;&#21629;&#20196;&#65306;</p><pre class="programlisting">sudo yum install automake libtool autoconf gcc-g++ gcc libaio libaio-dev make</pre><p>&#22914;&#26524;&#26159; debian&#31995;&#32479;&#65292;&#21017;&#65306;</p><pre class="programlisting">sudo apt-get install automake libtool autoconf gcc-g++ gcc libaio libaio-dev make</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22312;&#26377;&#20123;Linux&#30340;&#29256;&#26412;&#20013;&#19978;&#36848;&#30340;&#23433;&#35013;&#21253;&#21517;&#21487;&#33021;&#26377;&#19968;&#20123;&#24046;&#21035;&#12290;&#65288;&#20363;&#22914;Fedora&#20013;&#30340;gcc-c++&#22312;Debian&#31995;&#32479;&#20013;
                    &#30340;&#21517;&#31216;&#20026;g++&#65289;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10257"></a>40.1.2.&nbsp;&#24320;&#22987;&#32534;&#35793;</h3></div></div><div></div></div><p>&#22312;HornetQ&#21457;&#24067;&#21253;&#30340;<tt class="literal">native-src</tt>&#30446;&#24405;&#19979;&#65292;&#25191;&#34892;shell&#33050;&#26412;
                <tt class="literal">bootstrap</tt>&#12290;&#36825;&#20010;&#33050;&#26412;&#20250;&#35843;&#29992; <tt class="literal">automake</tt>&#20197;&#21450;<tt class="literal">make</tt>&#26469;&#21019;&#24314;&#25152;&#26377;&#30340;make&#25991;&#20214;&#21644;&#19987;&#26377;&#24211;&#12290;</p><pre class="programlisting">someUser@someBox:/messaging-distribution/native-src$ ./bootstrap 
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p

...

configure: creating ./config.status
config.status: creating Makefile
config.status: creating ./src/Makefile
config.status: creating config.h
config.status: config.h is unchanged
config.status: executing depfiles commands
config.status: executing libtool commands

...</pre><p>&#32534;&#35793;&#22909;&#30340;&#24211;&#25991;&#20214;&#22312;<tt class="literal">./native-src/src/.libs/libHornetQAIO.so</tt>&#12290;&#23558;&#35813;&#25991;&#20214;&#31227;&#21040;&#21457;&#24067;&#21253;&#30340;
                    <tt class="literal">bin</tt>&#30446;&#24405;&#19979;&#65292;&#25110;&#32773;&#20320;&#30340;<a href="#using-server.library.path" title="6.4.&nbsp;Library Path">&#24211;&#30446;&#24405;</a>
                    &#25152;&#25351;&#21521;&#30340;&#30446;&#24405;&#21363;&#21487;&#12290;</p><p>&#22914;&#26524;&#20320;&#20462;&#25913;&#20102;HornetQ&#30340;libaio&#20195;&#30721;&#65292;&#21482;&#38656;&#35201;&#22312;<tt class="literal">native-src</tt>&#30446;&#24405;&#19979;&#30452;&#25346;&#36816;&#34892;make&#21363;&#21487;&#23436;&#25104;&#32534;&#35793;&#12290;</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="thread-pooling"></a>Chapter&nbsp;41.&nbsp;&#32447;&#31243;&#31649;&#29702;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35762;&#36848;HornetQ&#22914;&#20309;&#20351;&#29992;&#32447;&#31243;&#27744;&#20197;&#21450;&#22914;&#20309;&#31649;&#29702;&#32447;&#31243;&#12290;</p><p>&#39318;&#20808;&#25105;&#20204;&#35752;&#35770;&#22312;&#26381;&#21153;&#22120;&#31471;&#32447;&#31243;&#26159;&#22914;&#20309;&#34987;&#31649;&#29702;&#30340;&#65292;&#28982;&#21518;&#25105;&#20204;&#20877;&#35752;&#35770;&#23458;&#25143;&#31471;&#30340;&#24773;&#20917;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10316"></a>41.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#32447;&#31243;&#30340;&#31649;&#29702;</h2></div></div><div></div></div><p>&#27599;&#20010;HornetQ&#26381;&#21153;&#22120;&#37117;&#26377;&#19968;&#20010;&#32447;&#31243;&#27744;&#20316;&#20026;&#19968;&#33324;&#32447;&#31243;&#20351;&#29992;&#65292;&#21478;&#22806;&#36824;&#26377;&#19968;&#20010;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;&#12290;Java&#30340;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;&#19981;&#33021;&#20316;&#20026;
            &#26631;&#20934;&#30340;&#32447;&#31243;&#27744;&#20351;&#29992;&#65292;&#22240;&#27492;&#25105;&#20204;&#37319;&#29992;&#20102;&#20004;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#27744;&#12290;</p><p>&#24403;&#20351;&#29992;&#26087;&#30340;&#65288;&#38459;&#22622;&#65289;IO&#26102;&#65292;&#20351;&#29992;&#20102;&#19968;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#27744;&#26469;&#22788;&#29702;&#36830;&#25509;&#12290;&#20294;&#26159;&#26087;&#30340;IO&#35201;&#27714;&#19968;&#20010;&#32447;&#31243;&#37197;&#19968;&#20010;&#36830;&#25509;&#65292;&#25152;&#20197;&#22914;&#26524;&#20320;
            &#30340;&#24212;&#29992;&#26377;&#24456;&#22810;&#24182;&#21457;&#30340;&#36830;&#25509;&#65292;&#36825;&#20010;&#32447;&#31243;&#27744;&#20250;&#24456;&#24555;&#29992;&#20809;&#25152;&#26377;&#30340;&#32447;&#31243;&#65292;&#36896;&#25104;&#26381;&#21153;&#22120;&#20986;&#29616;&#8220;&#25346;&#36215;&#8221;&#29616;&#35937;&#12290;&#22240;&#27492;&#65292;&#23545;&#20110;&#22823;&#37327;&#24182;&#21457;&#36830;&#25509;
            &#30340;&#24212;&#29992;&#65292;&#19968;&#23450;&#35201;&#20351;&#29992;NIO&#12290;</p><p>&#22914;&#26524;&#20351;&#29992;NIO&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#20250;&#20351;&#29992;&#31995;&#32479;&#20013;&#22788;&#29702;&#22120;&#20869;&#26680;&#65288;&#25110;&#36229;&#32447;&#31243;&#65289;&#25968;&#37327;&#19977;&#20493;&#30340;&#32447;&#31243;&#26469;&#22788;&#29702;&#25509;&#25910;&#30340;&#25968;&#25454;&#21253;&#12290;
            &#20869;&#26680;&#30340;&#25968;&#37327;&#26159;&#36890;&#36807;&#35843;&#29992;<tt class="literal">Runtime.getRuntime().availableProcessors()</tt>&#26469;&#24471;&#21040;
            &#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#36825;&#20010;&#25968;&#37327;&#65292;&#21487;&#20197;&#35774;&#32622;&#20256;&#36755;&#23618;&#37197;&#32622;&#21442;&#25968;<tt class="literal">nio-remoting-threads</tt>&#12290;
            &#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p><p>&#21478;&#22806;&#22312;&#20854;&#23427;&#19968;&#20123;&#22320;&#26041;&#30452;&#25509;&#20351;&#29992;&#20102;&#32447;&#31243;&#65292;&#27809;&#26377;&#29992;&#32447;&#31243;&#27744;&#12290;&#25105;&#20204;&#23558;&#23545;&#36825;&#20123;&#32447;&#31243;&#20316;&#20986;&#35299;&#37322;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="server.scheduled.thread.pool"></a>41.1.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;</h3></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;&#21487;&#20197;&#23450;&#26399;&#22320;&#25110;&#24310;&#36831;&#22320;&#25191;&#34892;&#25152;&#20132;&#32473;&#30340;&#20219;&#21153;&#65292;&#23427;&#29992;&#26469;&#23436;&#25104;HornetQ&#20013;&#32477;&#22823;&#37096;&#20998;&#36825;&#26679;&#30340;&#20219;&#21153;&#12290;
                  &#23427;&#20869;&#37096;&#20351;&#29992;&#30340;&#26159;&#19968;&#20010; <tt class="literal">java.util.concurrent.ScheduledThreadPoolExecutor</tt>&#23454;&#20363;&#12290;</p><p>&#26368;&#22823;&#32447;&#31243;&#25968;&#21487;&#20197;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#65292;&#21442;&#25968;&#21517;&#26159;<tt class="literal">scheduled-thread-pool-max-size</tt>&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">5</tt>&#12290;
                    &#36890;&#24120;&#36825;&#20010;&#32447;&#31243;&#27744;&#19981;&#38656;&#35201;&#24456;&#22823;&#25968;&#37327;&#30340;&#32447;&#31243;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10354"></a>41.1.2.&nbsp;&#26381;&#21153;&#22120;&#36890;&#29992;&#32447;&#31243;&#27744;</h3></div></div><div></div></div><p>&#26381;&#21153;&#22120;&#31471;&#32477;&#22823;&#37096;&#20998;&#30340;&#24322;&#27493;&#25805;&#20316;&#37117;&#26159;&#30001;&#36825;&#20010;&#32447;&#31243;&#27744;&#26469;&#23436;&#25104;&#30340;&#12290;&#22312;&#23427;&#30340;&#20869;&#37096;&#20351;&#29992;&#20102;&#19968;&#20010;<tt class="literal">java.util.concurrent.ThreadPoolExecutor</tt>&#30340;&#23454;&#20363;&#12290;</p><p>&#36825;&#20010;&#32447;&#31243;&#27744;&#30340;&#26368;&#22823;&#32447;&#31243;&#25968;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#37197;&#32622;&#65292;&#30456;&#24212;&#30340;&#21442;&#25968;&#21517;&#20026;<tt class="literal">thread-pool-max-size</tt>&#12290;</p><p>&#22914;&#26524;&#23558;&#21442;&#25968;&#35774;&#20026;<tt class="literal">-1</tt>&#21017;&#34920;&#31034;&#35813;&#32447;&#31243;&#27744;&#27809;&#26377;&#32447;&#31243;&#38480;&#21046;&#12290;&#20063;&#23601;&#26159;&#35828;&#24403;&#32447;&#31243;&#19981;&#22815;&#29992;&#26102;&#65292;&#32447;&#31243;&#27744;&#23601;
                &#20250;&#21019;&#24314;&#26032;&#30340;&#32447;&#31243;&#12290;&#24403;&#20219;&#21153;&#19981;&#22810;&#26102;&#65292;&#31354;&#38386;&#30340;&#32447;&#31243;&#23558;&#20250;&#36229;&#26102;&#24182;&#34987;&#20851;&#38381;&#12290;</p><p>&#22914;&#26524;&#36825;&#20010;&#21442;&#25968;&#30340;&#20540;&#26159;&#19968;&#20010;&#22823;&#20110;&#38646;&#30340;&#25972;&#25968;<tt class="literal">n</tt>&#65292;&#21017;&#35813;&#32447;&#31243;&#27744;&#30340;&#32447;&#31243;&#25968;&#26159;&#26377;&#38480;&#30340;&#12290;&#24403;&#25152;&#26377;&#32447;&#31243;&#37117;
                &#22788;&#20110;&#24537;&#30340;&#29366;&#24577;&#24182;&#19988;&#32447;&#31243;&#25968;&#24050;&#32463;&#36798;&#21040;n&#26102;&#65292;&#20219;&#20309;&#26032;&#30340;&#35831;&#27714;&#37117;&#23558;&#34987;&#38459;&#22622;&#30452;&#21040;&#26377;&#32447;&#31243;&#31354;&#38386;&#20026;&#27490;&#12290;&#22312;&#35774;&#32622;&#32447;&#31243;&#19978;&#38480;&#26102;&#65292;&#25105;&#20204;&#24314;&#35758;
                &#35201;&#38750;&#24120;&#35880;&#24910;&#12290;&#22240;&#20026;&#22914;&#20309;&#32447;&#31243;&#25968;&#37327;&#36807;&#20302;&#20250;&#36896;&#25104;&#27515;&#38145;&#24773;&#20917;&#30340;&#21457;&#29983;&#12290;</p><p><tt class="literal">thread-pool-max-size</tt>&#30340;&#40664;&#35748;&#20540;&#26159;<tt class="literal">30</tt>&#12290;</p><p>&#21442;&#35265;<a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html" target="_top">J2SE javadoc</a>&#26377;&#20851;&#26080;&#36793;&#30028;&#65288;&#32531;&#23384;&#65289;&#21644;&#26377;&#36793;&#30028;&#65288;&#22266;&#23450;&#65289;&#32447;&#31243;&#27744;&#30340;&#35299;&#37322;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10392"></a>41.1.3.&nbsp;&#36807;&#26399;&#22238;&#25910;&#32447;&#31243;</h3></div></div><div></div></div><p>HornetQ&#20351;&#29992;&#19968;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#26469;&#25195;&#25551;&#38431;&#21015;&#20013;&#36807;&#26399;&#30340;&#28040;&#24687;&#12290;&#30001;&#20110;&#36825;&#20010;&#32447;&#31243;&#38656;&#35201;&#33258;&#24049;&#30340;&#20248;&#20808;&#32423;&#37197;&#32622;&#65292;&#25152;&#20197;&#19981;&#33021;&#20351;&#29992;&#19978;&#36848;&#30340;
                &#20219;&#20309;&#19968;&#20010;&#32447;&#31243;&#27744;&#12290;</p><p>&#20851;&#20110;&#22238;&#25910;&#32447;&#31243;&#30340;&#37197;&#32622;&#35831;&#21442;&#38405;<a href="#message-expiry" title="Chapter&nbsp;22.&nbsp;&#36807;&#26399;&#30340;&#28040;&#24687;">Chapter&nbsp;22, <i>&#36807;&#26399;&#30340;&#28040;&#24687;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10401"></a>41.1.4.&nbsp;&#24322;&#27493;IO</h3></div></div><div></div></div><p>HornetQ&#20351;&#29992;&#19968;&#20010;&#32447;&#31243;&#27744;&#26469;&#36827;&#34892;&#24322;&#27493;IO&#30340;&#25805;&#20316;&#65292;&#21253;&#25324;&#20107;&#20214;&#30340;&#25509;&#25910;&#21644;&#21457;&#36865;&#12290;&#36825;&#20123;&#32447;&#31243;&#30340;&#21517;&#23383;&#37117;&#26159;&#20197;
                HornetQ-AIO-poller-pool&#20026;&#24320;&#22836;&#12290;&#27599;&#20010;&#25171;&#24320;&#30340;&#26085;&#24535;&#25991;&#20214;&#37117;&#23545;&#24212;&#26377;&#19968;&#20010;&#32447;&#31243;&#20026;&#20854;&#26381;&#21153;&#65288;&#36890;&#24120;&#21482;&#26377;
                &#19968;&#20010;&#65289;&#12290;</p><p>&#36824;&#26377;&#19968;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#29992;&#20110;&#21521;libaio&#21457;&#36865;&#20889;&#35831;&#27714;&#12290;&#36825;&#26679;&#20570;&#26159;&#20026;&#20102;&#36991;&#20813;&#19978;&#19979;&#25991;&#36716;&#25442;&#24102;&#26469;&#30340;&#24615;&#33021;&#19979;&#38477;&#12290;&#35813;
                &#32447;&#31243;&#30340;&#21517;&#23383;&#20197;HornetQ-AIO-writer-pool&#24320;&#22836;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="thread-pooling.client.side"></a>41.2.&nbsp;&#23458;&#25143;&#31471;&#32447;&#31243;&#31649;&#29702;</h2></div></div><div></div></div><p>&#22312;&#23458;&#25143;&#31471;HornetQ&#26377;&#19968;&#20010;&#38745;&#24577;&#30340;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;&#21644;&#19968;&#20010;&#38745;&#24577;&#30340;&#36890;&#29992;&#32447;&#31243;&#27744;&#65292;&#23427;&#20204;&#22312;&#19968;&#20010;JVM&#20013;&#30001;&#21516;&#19968;&#20010;classloader&#35013;&#36733;&#30340;&#25152;&#26377;&#23458;&#25143;&#31471;
            &#20849;&#21516;&#20351;&#29992;&#12290;</p><p>&#38745;&#24577;&#30340;&#21487;&#35745;&#21010;&#30340;&#32447;&#31243;&#27744;&#30340;&#26368;&#22823;&#32447;&#31243;&#25968;&#20026; <tt class="literal">5</tt>&#65292;&#36890;&#29992;&#32447;&#31243;&#27744;&#21017;&#27809;&#26377;&#32447;&#31243;&#25968;&#38480;&#21046;&#12290;</p><p>&#22914;&#26524;&#38656;&#35201;&#36824;&#21487;&#20197;&#37197;&#32622;&#19968;&#20010;<tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#20197;&#20351;&#23427;&#25317;&#26377;&#33258;&#24049;&#30340;&#21487;&#35745;&#21010;&#19982;&#36890;&#29992;&#32447;&#31243;&#27744;&#12290;&#36890;&#36807;&#36825;&#20010;&#24037;&#21378;&#21019;&#24314;&#30340;&#20250;&#35805;&#37117;
            &#23558;&#20351;&#29992;&#36825;&#20123;&#32447;&#31243;&#27744;&#12290;</p><p>&#35201;&#24819;&#37197;&#32622;<tt class="literal">ClientSessionFactory</tt>&#20351;&#29992;&#33258;&#24049;&#30340;&#32447;&#31243;&#27744;&#65292;&#21482;&#35201;&#35843;&#29992;&#23427;&#30456;&#24212;&#30340;&#26041;&#27861;&#21462;&#20986;&#21487;&#65292;&#22914;&#65306;</p><pre class="programlisting">ClientSessionFactory myFactory = HornetQClient.createClientSessionFactory(...);
myFactory.setUseGlobalPools(false);
myFactory.setScheduledThreadPoolMaxSize(10);
myFactory.setThreadPoolMaxSize(-1);   </pre><p>&#22914;&#26524;&#20351;&#29992;JMS&#65292;&#20320;&#21487;&#20197;&#20808;&#29992;&#21516;&#26679;&#30340;&#21442;&#25968;&#35774;&#32622;ClientSessionFactory&#65292;&#28982;&#21518;&#20877;&#29992;&#36825;&#26679;&#24037;&#21378;&#21019;&#24314;<tt class="literal">ConnectionFactory</tt>&#30340;&#23454;&#20363;&#12290;&#22914;&#65306;</p><pre class="programlisting">ConnectionFactory myConnectionFactory = HornetQJMSClient.createConnectionFactory(myFactory);     </pre><p>&#22914;&#26524;&#20320;&#20351;&#29992;JNDI&#26469;&#21019;&#24314;<tt class="literal">HornetQConnectionFactory</tt>
            &#23454;&#20363;&#65292;&#20320;&#36824;&#21487;&#20197;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#36827;&#34892;&#37197;&#32622;&#12290;&#22914;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
    &lt;connectors&gt;
       &lt;connector-ref connector-name="netty"/&gt;
    &lt;/connectors&gt;
    &lt;entries&gt;
        &lt;entry name="ConnectionFactory"/&gt;
        &lt;entry name="XAConnectionFactory"/&gt;
    &lt;/entries&gt;
    &lt;use-global-pools&gt;false&lt;/use-global-pools&gt;
    &lt;scheduled-thread-pool-max-size&gt;10&lt;/scheduled-thread-pool-max-size&gt;
    &lt;thread-pool-max-size&gt;-1&lt;/thread-pool-max-size&gt;
&lt;/connection-factory&gt;</pre></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="logging"></a>Chapter&nbsp;42.&nbsp;&#26085;&#24535;&#65288;Logging&#65289;</h2></div></div><div></div></div><p>HornetQ&#26377;&#33258;&#24049;&#30340;&#29420;&#31435;&#30340;&#26085;&#24535;&#31995;&#32479;&#65292;&#19981;&#20381;&#36182;&#20110;&#20219;&#20309;&#20854;&#23427;&#30340;&#26085;&#24535;&#26694;&#26550;&#12290;&#22312;&#40664;&#35748;&#24773;&#20917;&#19979;&#25152;&#26377;HornetQ&#30340;&#26085;&#24535;&#23558;&#36755;&#20837;&#21040;
        &#26631;&#20934;&#30340;<a href="http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/" target="_top">JDK&#26085;&#24535;&#31995;&#32479;</a>&#65292;
        &#65288;&#21363;JUL&#65293;Java Util Logging&#65289;&#12290;&#26381;&#21153;&#22120;&#22312;&#40664;&#35748;&#26465;&#20214;&#19979;&#35835;&#21462;config&#30446;&#24405;&#19979;&#30340;
        <tt class="literal">logging.properties</tt>&#25991;&#20214;&#20570;&#20026;JUL&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;&#23427;&#37197;&#32622;&#20102;&#20351;&#29992;HornetQ&#33258;&#24049;&#30340;&#26684;&#24335;&#21270;
        &#26041;&#27861;&#65292;&#23558;&#26085;&#24535;&#36755;&#20986;&#21040;&#23631;&#24149;&#32456;&#31471;&#65288;Console&#65289;&#21450;&#25991;&#20214;&#20013;&#12290;&#35831;&#35775;&#38382;Sun&#20844;&#21496;&#30340;&#30456;&#20851;&#32593;&#22336;&#26469;&#36827;&#19968;&#27493;&#20102;&#35299;&#22914;&#20309;&#37197;&#32622;&#20351;&#29992;JUL&#12290;</p><p>&#20320;&#21487;&#20197;&#36890;&#36807;&#32534;&#31243;&#25110;&#23450;&#20041;&#31995;&#32479;&#21464;&#37327;&#30340;&#26041;&#27861;&#26469;&#37197;&#32622;&#19981;&#21516;&#30340;&#26085;&#24535;&#20195;&#29702;&#65288;Logging Delegate&#65289;&#12290;</p><p>&#37319;&#29992;&#32534;&#31243;&#26041;&#27861;&#65292;&#21482;&#38656;&#35201;&#35843;&#29992;&#26041;&#27861;&#65306;
        </p><pre class="programlisting">org.hornetq.core.logging.Logger.setDelegateFactory(new Log4jLogDelegateFactory())</pre><p>&#20854;&#20013;<tt class="literal">Log4jLogDelegateFactory</tt>&#23454;&#29616;&#20102;<tt class="literal">org.hornetq.spi.core.logging.LogDelegateFactory </tt>&#25509;&#21475;&#12290;</p><p>&#22914;&#26524;&#35201;&#20351;&#29992;&#31995;&#32479;&#21464;&#37327;&#26041;&#27861;&#65292;&#21017;&#38656;&#35201;&#35774;&#32622;&#21464;&#37327;<tt class="literal">org.hornetq.logger-delegate-factory-class-name</tt>&#20026;&#30456;&#24212;&#30340;&#20195;&#29702;&#24037;&#21378;&#65292;&#21363;
        </p><pre class="programlisting">-Dorg.hornetq.logger-delegate-factory-class-name=org.hornetq.integration.logging.Log4jLogDelegateFactory</pre><p>&#19978;&#38754;&#30340;&#20363;&#23376;&#21487;&#20197;&#30475;&#20986;HornetQ&#25552;&#20379;&#20102;&#19968;&#20123;&#20195;&#29702;&#24037;&#21378;&#20197;&#26041;&#20415;&#29992;&#25143;&#20351;&#29992;&#65292;&#23427;&#20204;&#26159;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>org.hornetq.core.logging.impl.JULLogDelegateFactory - &#40664;&#35748;&#30340;JUL&#26085;&#24535;&#20195;&#29702;&#24037;&#21378;&#12290;</p></li><li><p>org.hornetq.integration.logging.Log4jLogDelegateFactory
                    - Log4J&#30340;&#26085;&#24535;&#20195;&#29702;&#24037;&#21378;&#12290;</p></li></ol></div><p>&#22914;&#26524;&#22312;&#23458;&#25143;&#31471;&#20351;&#29992;JUL&#20195;&#29702;&#65292;&#27880;&#24847;&#35201;&#25552;&#20379;<tt class="literal">logging.properties</tt>&#25991;&#20214;&#65292;&#24182;&#19988;&#22312;&#23458;&#25143;&#31471;&#21551;&#21160;&#20043;&#21069;&#35774;&#32622;<tt class="literal">java.util.logging.config.file</tt>&#23646;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10513"></a>42.1.&nbsp;&#19982;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#26085;&#24535;&#30340;&#20851;&#31995;</h2></div></div><div></div></div><p>&#24403;HornetQ&#37096;&#32626;&#21040;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#29256;&#26412;5.x&#25110;&#20197;&#19978;&#26102;&#65292;&#34429;&#28982;HornetQ&#20173;&#28982;&#20351;&#29992;JUL&#65292;&#20294;&#26159;&#25152;&#26377;&#30340;&#26085;&#24535;&#36755;&#20986;&#34987;&#37325;&#23450;&#21521;&#21040;
            JBoss logger&#12290;&#35831;&#21442;&#38405;&#30456;&#20851;&#30340;JBoss&#25991;&#26723;&#26469;&#20102;&#35299;&#26356;&#22810;&#30340;&#20449;&#24687;&#12290;&#22914;&#26524;&#26159;&#20197;&#21069;&#29256;&#26412;&#30340;JBoss&#65292;&#21017;&#24517;&#38656;&#25351;&#23450;&#20320;&#25152;&#38656;&#35201;&#30340;&#26085;&#24535;&#20195;&#29702;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="embedding-hornetq"></a>Chapter&nbsp;43.&nbsp;&#23884;&#20837;&#24335;HornetQ</h2></div></div><div></div></div><p>HornetQ&#26159;&#30001;&#31616;&#21333;&#20256;&#32479;Java&#23545;&#35937;&#65288;POJO&#65289;&#23454;&#29616;&#65292;&#22240;&#27492;&#23427;&#21487;&#20197;&#22312;&#20219;&#20309;&#20381;&#36182;&#27880;&#20837;&#30340;&#26694;&#26550;&#20013;&#36816;&#34892;&#65292;&#27604;&#22914;JBoss
        Microcontainer&#65292;Sprint&#25110;Google Guice&#12290;&#21478;&#22806;&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20869;&#37096;&#38656;&#35201;&#28040;&#24687;&#21151;&#33021;&#65292;&#20320;&#21487;&#20197;&#22312;&#31243;&#24207;&#20013;
        <span class="emphasis"><em>&#30452;&#25509;&#23454;&#20363;&#21270;</em></span>HornetQ&#30340;&#23458;&#25143;&#31471;&#25110;&#26381;&#21153;&#22120;&#31471;&#12290;&#25105;&#20204;&#31216;&#20043;&#20026;<span class="emphasis"><em>&#23884;&#20837;&#24335;</em></span>
        HornetQ&#12290;</p><p>&#26377;&#20123;&#24212;&#29992;&#38656;&#35201;&#39640;&#24615;&#33021;&#12289;&#20107;&#21153;&#24615;&#21450;&#25345;&#20037;&#21270;&#30340;&#28040;&#24687;&#26381;&#21153;&#65292;&#20294;&#26159;&#21448;&#19981;&#24076;&#26395;&#33258;&#24049;&#21435;&#36153;&#26102;&#36153;&#21147;&#23454;&#29616;&#23427;&#12290;&#20110;&#26159;&#23884;&#20837;&#24335;HornetQ&#23601;
        &#25104;&#20026;&#20102;&#19968;&#20010;&#24456;&#36866;&#24403;&#30340;&#36873;&#25321;&#12290;</p><p>&#35201;&#20351;&#29992;&#23884;&#20837;&#24335;HornetQ&#21482;&#38656;&#35201;&#20960;&#20010;&#31616;&#21333;&#30340;&#27493;&#39588;&#12290;&#39318;&#20808;&#21021;&#22987;&#21270;&#37197;&#32622;&#23545;&#35937;&#65292;&#20877;&#21021;&#22987;&#21270;&#26381;&#21153;&#22120;&#24182;&#21551;&#21160;&#23427;&#65292;&#22312;&#20320;&#30340;&#34394;&#25311;&#26426;
        &#20013;&#23601;&#36816;&#34892;&#36234;&#26469;&#20102;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#12290;&#23601;&#26159;&#36825;&#20040;&#31616;&#21333;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10550"></a>43.1.&nbsp;POJO&#30340;&#21021;&#22987;&#21270;</h2></div></div><div></div></div><p>&#25353;&#29031;&#20197;&#19979;&#27493;&#39588;&#21435;&#20570;&#65306;</p><p>&#21019;&#24314;&#37197;&#32622;&#23545;&#35937;&#65293;&#65293;&#36825;&#20010;&#23545;&#35937;&#21253;&#35013;&#20102;HornetQ&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;&#22914;&#26524;&#20320;&#24819;&#20351;&#29992;&#37197;&#32622;&#25991;&#20214;&#65292;&#21017;&#20351;&#29992;<tt class="literal">FileConfigurationImpl</tt>&#12290;</p><pre class="programlisting">import org.hornetq.core.config.Configuration;
import org.hornetq.core.config.impl.FileConfiguration;

...


Configuration config = new FileConfiguration();
config.setConfigurationUrl(urlToYourconfigfile);
config.start();</pre><p>&#22914;&#26524;&#19981;&#38656;&#35201;&#37197;&#32622;&#25991;&#20214;&#65292;&#21487;&#20197;&#29992;<tt class="literal">ConfigurationImpl</tt>&#65292;&#21482;&#35201;&#23558;&#20854;&#20013;&#30340;&#21508;&#31181;&#37197;&#32622;&#21442;&#25968;&#35774;&#32622;&#22909;
            &#21363;&#21487;&#12290;&#22914;&#28155;&#21152;&#36866;&#24403;&#30340;&#25509;&#25910;&#22120;&#12290;</p><p><tt class="literal">ConfigurationImpl</tt>&#29992;&#26469;&#37197;&#32622;&#25509;&#25910;&#22120;&#12290;&#21644;&#20027;&#35201;&#37197;&#32622;&#25991;&#20214;&#30456;&#20284;&#65292;&#21482;&#38656;&#35201;&#28155;&#21152;
            <tt class="literal">NettyAcceptorFactory</tt>&#21363;&#21487;&#12290;</p><pre class="programlisting">import org.hornetq.core.config.Configuration;
import org.hornetq.core.config.impl.ConfigurationImpl;

...

Configuration config = new ConfigurationImpl();
HashSet&lt;TransportConfiguration&gt; transports = new HashSet&lt;TransportConfiguration&gt;();
      
transports.add(new TransportConfiguration(NettyAcceptorFactory.class.getName()));
transports.add(new TransportConfiguration(InVMAcceptorFactory.class.getName()));

config.setAcceptorConfigurations(transports);</pre><p>&#25509;&#30528;&#23601;&#38656;&#35201;&#21021;&#22987;&#21270;&#24182;&#21551;&#21160;HornetQ&#26381;&#21153;&#12290;<tt class="literal">org.hornetq.api.core.server.HornetQ</tt>&#31867;&#26377;&#19968;&#20123;&#38745;&#24577;&#26041;&#27861;&#21487;&#29992;&#26469;&#21019;&#24314;HornetQ&#26381;&#21153;&#22120;&#12290;</p><pre class="programlisting">import org.hornetq.api.core.server.HornetQ;
import org.hornetq.core.server.HornetQServer;

...

HornetQServer server = HornetQ.newHornetQServer(config);

server.start();</pre><p>&#20320;&#36824;&#21487;&#20197;&#30452;&#25509;&#23454;&#20363;&#21270;<tt class="literal">HornetQServerImpl</tt>&#65306;</p><pre class="programlisting">HornetQServer server = 
        new HornetQServerImpl(config);
server.start();</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10590"></a>43.2.&nbsp;&#20351;&#29992;&#20381;&#36182;&#27880;&#20837;&#26694;&#26550;</h2></div></div><div></div></div><p>&#20320;&#36824;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#20381;&#36182;&#27880;&#20837;&#26694;&#26550;&#26469;&#21551;&#21160;HornetQ&#65292;&#27604;&#22914;<span class="trademark">JBoss
                Microcontainer</span>&#8482;&#25110;<span class="trademark">Spring&#26694;&#26550;</span>&#8482;&#12290;</p><p>HornetQ&#29420;&#31435;&#26381;&#21153;&#22120;&#20351;&#29992;&#30340;&#26159;JBoss Microcontainer&#20316;&#20026;&#20854;&#26694;&#26550;&#12290;&#22312;HornetQ&#30340;&#21457;&#24067;&#20013;&#21253;&#25324;&#30340;<tt class="literal">HornetQBootstrapServer</tt>&#21644;<tt class="literal">hornetq-beans.xml</tt>&#25991;&#20214;&#20849;&#21516;&#23454;&#29616;&#20102;
                &#22312;JBoss Microcontainer&#20013;&#23545;HornetQ&#26381;&#21153;&#22120;&#30340;&#24341;&#23548;&#12290;</p><p>&#35201;&#20351;&#29992;JBoss Microcontainer&#65292;&#38656;&#35201;&#22312;xml&#25991;&#20214;&#20013;&#22768;&#26126;<tt class="literal">HornetQServer</tt>
            &#21644;<tt class="literal">Configuration</tt>&#23545;&#35937;&#12290;&#21478;&#22806;&#36824;&#21487;&#20197;&#27880;&#20837;&#19968;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#21644;&#19968;&#20010;MBean&#26381;&#21153;&#22120;&#12290;&#20294;&#26159;&#36825;&#20123;
            &#27880;&#20837;&#26159;&#21487;&#36873;&#30340;&#12290;</p><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#22522;&#26412;&#30340;JBoss Microcontainer&#30340;XML Bean&#30340;&#22768;&#26126;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;deployment xmlns="urn:jboss:bean-deployer:2.0"&gt;
   
   &lt;!-- The core configuration --&gt;
   &lt;bean name="Configuration" 
         class="org.hornetq.core.config.impl.FileConfiguration"&gt;
   &lt;/bean&gt;

   	&lt;!-- The core server --&gt;
   &lt;bean name="HornetQServer" 
         class="org.hornetq.core.server.impl.HornetQServerImpl"&gt;      
      &lt;constructor&gt;
         &lt;parameter&gt;
            &lt;inject bean="Configuration"/&gt;
         &lt;/parameter&gt;            
      &lt;/constructor&gt;         
   &lt;/bean&gt;
   &lt;/deployment&gt;</pre><p><tt class="literal">HornetQBootstrapServer</tt>&#23454;&#29616;&#20102;JBoss Microcontainer&#30340;&#31616;&#21333;&#23553;&#35013;&#12290;</p><pre class="programlisting">HornetQBootstrapServer bootStrap = 
        new HornetQBootstrapServer(new String[] {"hornetq-beans.xml"});
        bootStrap.run();</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10627"></a>43.3.&nbsp;&#36830;&#25509;&#23884;&#20837;&#24335;HornetQ</h2></div></div><div></div></div><p>&#23884;&#20837;&#24335;HornetQ&#30340;&#36830;&#25509;&#21644;&#26222;&#36890;&#30340;&#36830;&#25509;&#19968;&#26679;&#35201;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10632"></a>43.3.1.&nbsp;&#26680;&#24515;&#25509;&#21475;</h3></div></div><div></div></div><p>&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;&#38656;&#35201;&#21019;&#24314;&#19968;&#20010;<tt class="literal">ClientSessionFactory</tt>&#28982;&#21518;&#27491;&#24120;&#24314;&#31435;&#36830;&#25509;&#12290;</p><pre class="programlisting">ClientSessionFactory nettyFactory =  HornetQClient.createClientSessionFactory(
                                        new TransportConfiguration(
                                           InVMConnectorFactory.class.getName()));

ClientSession session = factory.createSession();

session.createQueue("example", "example", true);

ClientProducer producer = session.createProducer("example");

ClientMessage message = session.createMessage(true);

message.getBody().writeString("Hello");

producer.send(message);

session.start();

ClientConsumer consumer = session.createConsumer("example");

ClientMessage msgReceived = consumer.receive();

System.out.println("message = " + msgReceived.getBody().readString());

session.close();</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10642"></a>43.3.2.&nbsp;JMS&#25509;&#21475;</h3></div></div><div></div></div><p>&#20351;&#29992;JMS&#25509;&#21475;&#36830;&#25509;&#23884;&#20837;HornetQ&#21516;&#26679;&#31616;&#21333;&#12290;&#21482;&#38656;&#35201;&#30452;&#25509;&#23454;&#20363;&#21270;
                    <tt class="literal">ConnectionFactory</tt>&#21363;&#21487;&#12290;&#22914;&#19979;&#38754;&#20363;&#23376;&#25152;&#31034;&#65306;</p><pre class="programlisting">ConnectionFactory cf =
    HornetQJMSClient.createConnectionFactory(
       new TransportConfiguration(InVMConnectorFactory.class.getName()));

Connection conn = cf.createConnection();

conn.start();

Session sess = conn.createSession(true, Session.SESSION_TRANSACTED);

MessageProducer prod = sess.createProducer(queue);

TextMessage msg = sess.createTextMessage("Hello!");

prod.send(msg);

sess.commit();

MessageConsumer consumer = sess.createConsumer(queue);

TextMessage txtmsg = (TextMessage)consumer.receive();

System.out.println("Msg = " + txtmsg.getText());

sess.commit();

conn.close();</pre></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10652"></a>43.4.&nbsp;JMS&#23884;&#20837;&#24335;HornetQ&#30340;&#20363;&#23376;</h2></div></div><div></div></div><p>&#26377;&#20851;&#22914;&#20309;&#35774;&#32622;&#19982;&#36816;&#34892;JMS&#23884;&#20837;&#24335;HornetQ&#30340;&#20363;&#23376;&#35831;&#21442;&#35265;<a href="#examples.embedded" title="11.2.1.&nbsp;&#23884;&#20837;&#24335;">Section&nbsp;11.2.1, &#8220;&#23884;&#20837;&#24335;&#8221;</a>&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="intercepting-operations"></a>Chapter&nbsp;44.&nbsp;&#25318;&#25130;&#25805;&#20316;</h2></div></div><div></div></div><p>HornetQ&#25903;&#25345;<span class="emphasis"><em>&#25318;&#25130;&#22120;</em></span>&#12290;&#25318;&#25130;&#22120;&#21487;&#20197;&#25318;&#25130;&#36827;&#20837;&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#21253;&#12290;&#27599;&#36827;&#20837;&#26381;&#21153;&#22120;
       &#19968;&#20010;&#25968;&#25454;&#21253;&#65292;&#25318;&#25130;&#22120;&#23601;&#34987;&#35843;&#29992;&#19968;&#27425;&#65292;&#20801;&#35768;&#19968;&#20123;&#29305;&#27530;&#21644;&#22788;&#29702;&#65292;&#20363;&#22914;&#23545;&#21253;&#30340;&#23457;&#35745;&#12289;&#36807;&#28388;&#31561;&#12290;&#25318;&#25130;&#22120;&#21487;&#20197;&#23545;&#25968;&#25454;&#21253;
       &#36827;&#34892;&#25913;&#21160;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10684"></a>44.1.&nbsp;&#23454;&#29616;&#25318;&#25130;&#22120;</h2></div></div><div></div></div><p>&#25318;&#25130;&#22120;&#24517;&#39035;&#35201;&#23454;&#29616;<tt class="literal">Interceptor&#25509;&#21475;</tt>&#65306;</p><pre class="programlisting">
package org.hornetq.api.core.interceptor;

public interface Interceptor
{   
   boolean intercept(Packet packet, RemotingConnection connection) 
                throws HornetQException;
}
         </pre><p>&#23427;&#30340;&#26041;&#27861;&#30340;&#36820;&#22238;&#20540;&#26159;&#24456;&#37325;&#35201;&#30340;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22914;&#26524;&#36820;&#22238;<tt class="literal">true</tt>&#65292;&#22788;&#29702;&#27491;&#24120;&#36827;&#34892;&#19979;&#21435;&#12290;</p></li><li><p>&#22914;&#26524;&#36820;&#22238;<tt class="literal">false</tt>&#65292;&#21017;&#22788;&#29702;&#34987;&#20013;&#26029;&#65292;&#20854;&#23427;&#30340;&#25318;&#25130;&#22120;&#23558;&#19981;&#20250;&#34987;&#35843;&#29992;&#65292;&#25968;&#25454;&#21253;&#23558;&#19981;&#20250;
               &#34987;&#26381;&#21153;&#22120;&#25152;&#22788;&#29702;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10709"></a>44.2.&nbsp;&#37197;&#32622;&#25318;&#25130;&#22120;</h2></div></div><div></div></div><p>&#25318;&#25130;&#22120;&#30340;&#37197;&#32622;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#65306;</p><pre class="programlisting">
&lt;remoting-interceptors&gt;
   &lt;class-name&gt;org.hornetq.jms.example.LoginInterceptor&lt;/class-name&gt;
   &lt;class-name&gt;org.hornetq.jms.example.AdditionalPropertyInterceptor&lt;/class-name&gt;
&lt;/remoting-interceptors&gt;
         </pre><p>&#25318;&#25130;&#22120;&#30340;&#31867;&#65288;&#20197;&#21450;&#23427;&#20204;&#20381;&#36182;&#30340;&#31867;&#65289;&#24517;&#39035;&#35201;&#22312;&#26381;&#21153;&#22120;&#30340;classpath&#20013;&#65292;&#21542;&#21017;&#19981;&#33021;&#34987;&#27491;&#24120;&#21021;&#22987;&#21270;&#21450;&#35843;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10721"></a>44.3.&nbsp;&#23458;&#25143;&#31471;&#25318;&#25130;&#22120;</h2></div></div><div></div></div><p>&#22312;&#23458;&#25143;&#31471;&#20063;&#21487;&#20197;&#26377;&#25318;&#25130;&#22120;&#26469;&#25318;&#25130;<span class="emphasis"><em>&#26469;&#33258;&#26381;&#21153;&#22120;</em></span>&#30340;&#25968;&#25454;&#21253;&#12290;<tt class="code">ClientSessionFactory</tt>
         &#30340;<tt class="code">addInterceptor()</tt>&#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#28155;&#21152;&#25318;&#25130;&#22120;&#12290;</p><p>&#21516;&#26679;&#25318;&#25130;&#22120;&#30340;&#31867;&#65288;&#20197;&#21450;&#23427;&#20204;&#20381;&#36182;&#30340;&#31867;&#65289;&#24517;&#39035;&#35201;&#22312;&#23458;&#25143;&#31471;&#30340;classpath&#20013;&#65292;&#21542;&#21017;&#23427;&#20204;&#19981;&#33021;&#34987;&#27491;&#24120;&#21021;&#22987;&#21270;&#21450;&#35843;&#29992;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10737"></a>44.4.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="#examples.interceptor" title="11.1.18.&nbsp;&#25318;&#25130;&#22120;&#65288;Interceptor&#65289;">Section&nbsp;11.1.18, &#8220;&#25318;&#25130;&#22120;&#65288;Interceptor&#65289;&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#20013;&#23637;&#31034;&#20102;&#22914;&#20309;&#20351;&#29992;&#25318;&#25130;&#22120;&#21521;&#21457;&#24448;&#26381;&#21153;&#22120;&#30340;&#28040;&#24687;&#20013;
         &#28155;&#21152;&#23646;&#24615;&#12290;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="interoperability"></a>Chapter&nbsp;45.&nbsp;&#20114;&#25805;&#20316;&#24615;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp"></a>45.1.&nbsp;Stomp</h2></div></div><div></div></div><p><a href="http://stomp.codehaus.org/" target="_top">Stomp</a>&#26159;&#19968;&#20010;&#22522;&#20110;&#25991;&#26412;&#30340;&#21327;&#35758;&#12290;&#20351;&#29992;Stomp&#21327;&#35758;&#30340;
            &#23458;&#25143;&#31471;&#21487;&#20197;&#19982;Stomp&#30340;&#20195;&#29702;&#65288;broker&#65289;&#36827;&#34892;&#36890;&#36805;&#12290;</p><p><a href="http://stomp.codehaus.org/Clients" target="_top">Stomp&#23458;&#25143;&#31471;</a>&#25903;&#25345;&#22810;&#31181;&#35821;&#35328;&#21644;&#24179;&#21488;&#65292;&#22240;&#27492;
        &#23427;&#26377;&#30528;&#24456;&#22909;&#30340;&#20114;&#25805;&#20316;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stomp.native"></a>45.1.1.&nbsp;&#20869;&#24314;Stomp&#25903;&#25345;</h3></div></div><div></div></div><p>HornetQ&#20869;&#24314;&#25903;&#25345;Stomp&#21151;&#33021;&#12290;&#35201;&#20351;&#29992;Stomp&#21457;&#36865;&#19982;&#25509;&#25910;&#28040;&#24687;&#65292;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;<tt class="literal">NettyAcceptor</tt>&#65292;
            &#20854;&#20013;&#30340;<tt class="literal">protocol</tt>&#21442;&#25968;&#20540;&#24212;&#35774;&#20026;<tt class="literal">stomp</tt>&#65306;</p><pre class="programlisting">
	&lt;acceptor name="stomp-acceptor"&gt;
		&lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;		&lt;param key="protocol"  value="stomp"/&gt;
		&lt;param key="port"  value="61613"/&gt;
	&lt;/acceptor&gt;
</pre><p>&#26377;&#20102;&#19978;&#36848;&#30340;&#37197;&#32622;&#65292;HornetQ&#23601;&#21487;&#20197;&#22312;&#31471;&#21475;<tt class="literal">61613</tt>&#65288;&#36825;&#26159;Stomp&#20195;&#29702;&#30340;&#40664;&#35748;&#31471;&#21475;&#65289;&#25509;&#21463;Stomp&#36830;&#25509;&#20102;&#12290;</p><p><tt class="literal">stomp</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312;HornetQ&#20013;&#37197;&#32622;Stomp&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10800"></a>45.1.1.1.&nbsp;&#38480;&#21046;</h4></div></div><div></div></div><p>&#28040;&#24687;&#30340;&#36890;&#30693;&#19981;&#26159;&#20107;&#21153;&#24615;&#30340;&#12290;ACK&#20449;&#21495;&#19981;&#33021;&#20316;&#20026;&#20107;&#21153;&#30340;&#19968;&#37096;&#20998;&#26469;&#20256;&#36755;&#65288;&#22914;&#26524;&#35774;&#32622;&#20102;<tt class="literal">transaction</tt>
              &#23646;&#24615;&#65292;&#23427;&#23558;&#34987;&#24573;&#30053;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10808"></a>45.1.2.&nbsp;Stomp&#30446;&#26631;&#19982;HornetQ&#30340;&#22320;&#22336;&#21644;&#38431;&#21015;&#30340;&#26144;&#23556;</h3></div></div><div></div></div><p>Stomp&#23458;&#25143;&#31471;&#22312;&#28040;&#24687;&#21457;&#36865;&#21644;&#35746;&#38405;&#20013;&#20351;&#29992;&#30340;&#26159;<span class="emphasis"><em>&#30446;&#26631;&#65288;destination&#65289;</em></span>&#12290;&#30446;&#26631;&#21517;&#31216;&#26159;&#31616;&#21333;&#30340;&#23383;&#31526;&#20018;&#65292;&#23545;&#24212;&#30340;&#26159;&#26381;&#21153;
            &#22120;&#31471;&#30340;&#30446;&#30340;&#22320;&#12290;&#19981;&#21516;&#26381;&#21153;&#22120;&#23545;&#36825;&#31181;&#26144;&#23556;&#26377;&#30528;&#19981;&#21516;&#30340;&#23454;&#29616;&#12290;</p><p>&#22312;HornetQ&#20013;&#36825;&#20123;&#30446;&#26631;&#34987;&#26144;&#23556;&#20026;<span class="emphasis"><em>&#22320;&#22336;</em></span>&#21644;<span class="emphasis"><em>&#38431;&#21015;</em></span>&#12290;
            &#24403;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#21457;&#36865;&#19968;&#20010;&#28040;&#24687;&#65288;&#20351;&#29992;<tt class="literal">SEND</tt>&#20449;&#21495;&#65289;&#21040;&#19968;&#20010;&#30446;&#26631;&#26102;&#65292;&#36825;&#20010;&#30446;&#26631;&#34987;&#26144;&#23556;&#21040;&#19968;&#20010;&#22320;&#22336;&#12290;
            &#22914;&#26524;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#35746;&#38405;&#65288;&#25110;&#35299;&#38500;&#35746;&#38405;&#65289;&#19968;&#20010;&#30446;&#26631;&#26102;&#65288;&#20351;&#29992;<tt class="literal">SUBSCRIBE</tt>&#25110;
            <tt class="literal">UNSUBSCRIBE</tt>&#65289;&#65292;&#36825;&#20010;&#30446;&#26631;&#34987;&#26144;&#23556;&#21040;&#19968;&#20010;HornetQ&#30340;&#38431;&#21015;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10833"></a>45.1.3.&nbsp;Stomp&#19982;JMS&#30340;&#20114;&#25805;&#20316;&#24615;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10836"></a>45.1.3.1.&nbsp;&#20351;&#29992;JMS&#30446;&#26631;</h4></div></div><div></div></div><p>&#27491;&#22914;<a href="#jms-core-mapping" title="Chapter&nbsp;9.&nbsp;JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;">Chapter&nbsp;9, <i>JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;</i></a>&#35299;&#37322;&#30340;&#37027;&#26679;&#65292;JMS&#30340;&#30446;&#26631;&#21516;&#26679;&#26144;&#23556;&#21040;HornetQ&#30340;&#22320;&#22336;&#19982;&#38431;&#21015;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;
              Stomp&#21521;JMS&#30340;&#30446;&#26631;&#21457;&#36865;&#28040;&#24687;&#65292;&#37027;&#20040;Stomp&#30340;&#30446;&#26631;&#24517;&#39035;&#35201;&#36981;&#29031;&#30456;&#21516;&#30340;&#21629;&#21517;&#35268;&#21017;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22914;&#26524;&#21521;JMS<span class="emphasis"><em>&#38431;&#21015;</em></span>&#21457;&#36865;&#25968;&#25454;&#25110;&#35746;&#38405;&#23427;&#65292;&#21017;&#38431;&#21015;&#30340;&#21517;&#31216;&#21069;&#32512;&#24517;&#39035;&#26159;<tt class="literal">jms.queue.</tt>&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#21521;&#21517;&#20026;<tt class="literal">orders</tt>&#30340;JMS&#38431;&#21015;&#21457;&#36865;&#28040;&#24687;&#65292;Stomp&#23458;&#25143;&#31471;&#24517;&#39035;&#21457;&#36865;&#20197;&#19979;&#20449;&#24687;&#65306;</p><pre class="programlisting">
SEND
destination:jms.queue.orders

hello queue orders
^@
                </pre></li><li><p>&#22914;&#26524;&#21521;JMS <span class="emphasis"><em>&#35805;&#39064;&#65288;topic&#65289;</em></span>&#21457;&#36865;&#25110;&#35746;&#38405;&#28040;&#24687;&#65292;&#35805;&#39064;&#21517;&#31216;&#21069;&#32512;&#24517;&#39035;&#26159;<tt class="literal">jms.topic.</tt>&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#35746;&#38405;&#21517;&#20026; <tt class="literal">stocks</tt>&#30340;JMS&#35805;&#39064;&#65292;Stomp&#23458;&#25143;&#31471;&#24517;&#39035;&#21457;&#36865;&#20197;&#19979;&#20449;&#24687;&#65306;</p><pre class="programlisting">
  SUBSCRIBE
  destination:jms.topic.stocks
  
  ^@
                </pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10876"></a>45.1.3.2.&nbsp;&#20351;&#29992;JMS&#25110;&#26680;&#24515;&#25509;&#21475;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;</h4></div></div><div></div></div><p>Stomp&#22522;&#26412;&#19978;&#26159;&#19968;&#20010;&#22522;&#20110;&#25991;&#26412;&#30340;&#21327;&#35758;&#12290;&#20026;&#20102;&#20351;&#29992;&#26356;&#31616;&#21333;&#65292;&#25105;&#20204;&#30340;Stomp&#23454;&#29616;&#36890;&#36807;&#26816;&#26597;<tt class="literal">content-length</tt>&#30340;&#20540;
               &#26469;&#20915;&#23450;&#22914;&#20309;&#23558;&#19968;&#20010;Stomp&#28040;&#24687;&#26144;&#23556;&#25104;&#19968;&#20010;JMS&#28040;&#24687;&#25110;&#26680;&#24515;&#28040;&#24687;&#12290;
             </p><p>&#22914;&#26524;&#22312;Stomp&#28040;&#24687;&#20013;<span class="emphasis"><em>&#27809;&#26377;</em></span><tt class="literal">content-length</tt>&#22836;&#65292;&#23427;&#23558;&#34987;&#26144;&#23556;&#20026;&#19968;&#20010;JMS&#30340;
               <span class="emphasis"><em>TextMessage</em></span>&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#26680;&#24515;&#28040;&#24687;&#65292;&#20854;&#28040;&#24687;&#20307;&#30340;&#32531;&#23384;&#26159;&#19968;&#20010;SimpleString&#12290;</p><p>&#22914;&#26524;Stomp&#28040;&#24687;&#20013;<span class="emphasis"><em>&#26377;</em></span><tt class="literal">content-length</tt>&#65292;&#21017;&#23427;&#34987;&#26144;&#23556;&#20026;&#19968;&#20010;JMS&#30340;
                   <span class="emphasis"><em>BytesMessage</em></span>&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#26680;&#24515;&#28040;&#24687;&#65292;&#20854;&#28040;&#24687;&#20307;&#32531;&#23384;&#20013;&#26159;&#19968;&#20010;&#23383;&#33410;&#25968;&#32452;byte[]&#12290;</p><p>&#20174;&#19968;&#20010;JMS&#28040;&#24687;&#25110;&#26680;&#24515;&#28040;&#24687;&#26144;&#23556;&#20026;Stomp&#28040;&#24687;&#26102;&#36981;&#20174;&#21516;&#26679;&#30340;&#36923;&#36753;&#12290;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#21487;&#20197;&#36890;&#36807;&#26816;&#26597;
                   <tt class="literal">content-length</tt>&#26469;&#20915;&#23450;&#28040;&#24687;&#20307;&#30340;&#31867;&#22411;&#65288;&#23383;&#31526;&#20018;&#25110;&#23383;&#33410;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stomp.websockets"></a>45.1.4.&nbsp;&#36890;&#36807;Web Sockets&#20351;&#29992;Stomp</h3></div></div><div></div></div><p>HornetQ&#36824;&#25903;&#25345;&#36890;&#36807;<a href="http://dev.w3.org/html5/websockets/" target="_top">Web Sockets</a>&#20351;&#29992;Stomp&#12290;&#20219;&#20309;&#25903;&#25345;
            Web Socket&#30340;&#27983;&#35272;&#22120;&#20013;&#21487;&#20197;&#21033;&#29992;HornetQ&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;&#12290;</p><p>&#35201;&#20351;&#29992;&#20123;&#21151;&#33021;&#65292;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;<tt class="literal">NettyAcceptor</tt>&#65292;&#24182;&#35774;&#32622;<tt class="literal">protocol</tt>
            &#30340;&#20540;&#20026;<tt class="literal">stomp_ws</tt>&#65306;</p><pre class="programlisting">
&lt;acceptor name="stomp-ws-acceptor"&gt;
	&lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;
	&lt;param key="protocol" value="stomp_ws"/&gt;
	&lt;param key="port" value="61614"/&gt;
&lt;/acceptor&gt;
         </pre><p>&#20351;&#29992;&#19978;&#38754;&#37197;&#32622;&#65292;HornetQ&#22312;URL&#36335;&#24452;<tt class="literal">/stomp</tt>&#19979;&#31471;&#21475;<tt class="literal">61614</tt>&#25509;&#25910;Stomp&#36830;&#25509;&#12290;
            &#27983;&#35272;&#22120;&#28982;&#21518;&#23601;&#21487;&#20197;&#36830;&#25509;&#21040;<tt class="literal">ws://&lt;server&gt;:61614/stomp</tt>&#65292;&#20351;&#29992;Web Socket&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;
            Stomp&#28040;&#24687;&#20102;&#12290;</p><p>&#20026;&#20102;&#31616;&#21270;&#23458;&#25143;&#31471;&#30340;&#24320;&#21457;&#65292;&#22312;<a href="http://github.com/jmesnil/stomp-websocket" target="_top">GitHub</a>
            &#19978;&#25552;&#20379;&#20102;&#19968;&#20010;JavaScript&#24211;&#65288;&#21442;&#35265;<a href="http://jmesnil.net/stomp-websocket/doc/" target="_top">&#25991;&#26723;</a>&#65289;&#12290;</p><p><tt class="literal">stomp-websockets</tt>&#20363;&#23376;&#32473;&#20986;&#19968;&#22914;&#20309;&#37197;&#32622;HornetQ&#26381;&#21153;&#22120;&#20197;&#20351;&#27983;&#35272;&#22120;&#21644;Java&#24212;&#29992;&#31243;&#24207;&#36890;&#36807;&#19968;&#20010;JMS&#35805;&#39064;
            &#36827;&#34892;&#28040;&#24687;&#30340;&#20256;&#36882;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stompconnect"></a>45.1.5.&nbsp;StompConnect</h3></div></div><div></div></div><p><a href="http://stomp.codehaus.org/StompConnect" target="_top">StompConnect</a>&#26159;&#19968;&#20010;Stomp&#20195;&#29702;&#26381;&#21153;&#22120;&#65292;
            &#23427;&#21487;&#20197;&#23558;Stomp&#21327;&#35758;&#36716;&#25442;&#20026;&#26631;&#20934;&#30340;JMS&#25509;&#21475;&#35843;&#29992;&#12290;&#22240;&#27492;&#65292;&#36890;&#36807;StompConnect&#30340;&#20316;&#29992;HornetQ&#21487;&#20197;&#20316;&#20026;&#19968;&#20010;Stomp&#20195;&#29702;&#65292;
            &#19982;&#20219;&#20309;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#36890;&#36805;&#12290;&#36825;&#20123;&#23458;&#25143;&#31471;&#21487;&#20197;&#30001;C&#12289;C++&#12289;C#&#21450;.net&#31561;&#35821;&#35328;&#23454;&#29616;&#12290;</p><p>&#35201;&#36816;&#34892;StompConnect&#39318;&#20808;&#35201;&#21551;&#21160;HornetQ&#26381;&#21153;&#20197;&#21450;JNDI&#26381;&#21153;&#12290;</p><p>Stomp&#38656;&#35201;<tt class="literal">jndi.properties</tt>&#25991;&#20214;&#35201;&#22312;classpath&#20013;&#12290;&#35813;&#25991;&#20214;
            &#24212;&#26377;&#22914;&#19979;&#31867;&#20284;&#30340;&#20869;&#23481;&#65306;</p><pre class="programlisting">java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces</pre><p>&#35201;&#30830;&#20445;&#35813;&#25991;&#20214;&#19982;StompConnect&#30340;jar&#21253;&#20197;&#21450;HornetQ&#30340;jar&#25991;&#20214;&#37117;&#22312;classpath&#20013;&#12290;&#26368;&#21518;&#65292;&#36816;&#34892;
            <tt class="literal">java org.codehaus.stomp.jms.Main</tt>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10974"></a>45.2.&nbsp;REST</h2></div></div><div></div></div><p>HornetQ&#21363;&#23558;&#25903;&#25345;REST&#65281;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10979"></a>45.3.&nbsp;AMQP</h2></div></div><div></div></div><p>HornetQ&#21363;&#23558;&#25903;&#25345;AMQP&#65281;</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="perf-tuning"></a>Chapter&nbsp;46.&nbsp;&#24615;&#33021;&#35843;&#20248;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35762;&#36848;&#22914;&#20309;&#20248;&#21270;HornetQ&#30340;&#24615;&#33021;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11006"></a>46.1.&nbsp;&#25345;&#20037;&#23618;&#30340;&#20248;&#21270;</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#23558;&#28040;&#24687;&#26085;&#24535;&#25918;&#21040;&#21333;&#29420;&#30340;&#29289;&#29702;&#21367;&#19978;&#12290;&#22914;&#26524;&#19982;&#20854;&#23427;&#25968;&#25454;&#20849;&#20139;&#65292;&#20363;&#22914;&#20107;&#21153;&#31649;&#29702;&#12289;&#25968;&#25454;&#24211;&#25110;&#20854;&#23427;&#26085;&#24535;&#31561;&#65292;&#37027;&#20040;&#23601;&#20250;
                    &#22686;&#21152;&#35835;&#20889;&#30340;&#36127;&#25285;&#65292;&#30913;&#22836;&#20250;&#22312;&#22810;&#20010;&#19981;&#21516;&#25991;&#20214;&#20043;&#38388;&#39057;&#32321;&#22320;&#31227;&#21160;&#65292;&#26497;&#22823;&#22320;&#38477;&#20302;&#24615;&#33021;&#12290;&#25105;&#20204;&#30340;&#26085;&#24535;&#31995;&#32479;&#37319;&#29992;&#30340;&#26159;&#21482;
                    &#28155;&#21152;&#30340;&#27169;&#24335;&#65292;&#30446;&#30340;&#23601;&#26159;&#26368;&#22823;&#31243;&#24230;&#28187;&#23569;&#30913;&#22836;&#30340;&#31227;&#21160;&#12290;&#22914;&#26524;&#30913;&#30424;&#34987;&#20849;&#20139;&#65292;&#37027;&#20040;&#36825;&#19968;&#30446;&#30340;&#23558;&#19981;&#33021;&#36798;&#21040;&#12290;&#21478;&#22806;&#22914;&#26524;
                    &#20320;&#20351;&#29992;&#20998;&#39029;&#36716;&#23384;&#25110;&#22823;&#28040;&#24687;&#21151;&#33021;&#26102;&#65292;&#20320;&#26368;&#22909;&#20998;&#21035;&#23558;&#23427;&#20204;&#25918;&#21040;&#21508;&#33258;&#30340;&#29420;&#31435;&#21367;&#20013;&#12290;</p></li><li><p>&#23613;&#37327;&#20943;&#23569;&#26085;&#24535;&#25991;&#20214;&#30340;&#25968;&#37327;&#12290;<tt class="literal">journal-min-files</tt>&#21442;&#25968;&#30340;&#35774;&#32622;&#24212;&#20197;&#28385;&#36275;&#24179;&#22343;
                    &#36816;&#34892;&#38656;&#35201;&#20026;&#20934;&#12290;&#22914;&#26524;&#20320;&#21457;&#29616;&#31995;&#32479;&#20013;&#32463;&#24120;&#26377;&#26032;&#30340;&#26085;&#24535;&#25991;&#20214;&#34987;&#21019;&#24314;&#65292;&#36825;&#35828;&#26126;&#25345;&#20037;&#30340;&#25968;&#25454;&#37327;&#24456;&#22823;&#65292;&#20320;&#38656;&#35201;&#36866;&#24403;&#22686;&#21152;
                    &#36825;&#20010;&#21442;&#25968;&#30340;&#20540;&#65292;&#20197;&#20351;HornetQ&#26356;&#22810;&#26102;&#20505;&#26159;&#22312;&#37325;&#29992;&#25991;&#20214;&#65292;&#32780;&#19981;&#26159;&#21019;&#24314;&#26032;&#25991;&#20214;&#12290;</p></li><li><p>&#26085;&#24535;&#25991;&#20214;&#30340;&#22823;&#23567;&#12290;&#26085;&#24535;&#25991;&#20214;&#30340;&#22823;&#23567;&#26368;&#22909;&#35201;&#19982;&#30913;&#30424;&#30340;&#19968;&#20010;&#26609;&#38754;&#30340;&#23481;&#37327;&#23545;&#40784;&#12290;&#40664;&#35748;&#20540;&#26159;10MiB&#65292;&#23427;&#22312;&#32477;&#22823;&#22810;&#25968;
                    &#30340;&#31995;&#32479;&#20013;&#33021;&#22815;&#28385;&#36275;&#38656;&#35201;&#12290;</p></li><li><p>&#20351;&#29992;AIO&#26085;&#24535;&#12290;&#22312;Linux&#19979;&#65292;&#23613;&#37327;&#20351;&#29992;AIO&#22411;&#30340;&#26085;&#24535;&#12290;AIO&#30340;&#21487;&#25193;&#23637;&#24615;&#35201;&#22909;&#20110;Java&#30340;NIO&#12290;</p></li><li><p>&#20248;&#21270; <tt class="literal">journal-buffer-timeout</tt>&#12290;&#22914;&#26524;&#22686;&#21152;&#23427;&#30340;&#20540;&#65292;&#21534;&#21520;&#37327;&#20250;&#22686;&#21152;&#65292;&#20294;&#26159;
                    &#24310;&#36831;&#20063;&#20250;&#22686;&#21152;&#12290;</p></li><li><p>&#22914;&#26524;&#20351;&#29992;AIO&#65292;&#36866;&#24403;&#22686;&#21152;<tt class="literal">journal-max-io</tt>&#21487;&#33021;&#20250;&#25552;&#39640;&#24615;&#33021;&#12290;&#22914;&#26524;&#20351;&#29992;&#30340;&#26159;NIO&#65292;
                    &#35831;&#19981;&#35201;&#25913;&#21464;&#36825;&#20010;&#21442;&#25968;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11037"></a>46.2.&nbsp;&#20248;&#21270;JMS</h2></div></div><div></div></div><p>&#22914;&#26524;&#20351;&#29992;JMS&#25509;&#21475;&#65292;&#26377;&#20197;&#19979;&#20960;&#20010;&#26041;&#38754;&#21487;&#20197;&#25913;&#36827;&#24615;&#33021;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20851;&#38381;&#28040;&#24687;id&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#36825;&#20010;id&#65292;&#29992;<tt class="literal">MessageProducer</tt>&#30340;
                    <tt class="literal">setDisableMessageID()</tt>&#26041;&#27861;&#21487;&#20197;&#20851;&#38381;&#23427;&#12290;&#36825;&#21487;&#20197;&#20943;&#23569;&#28040;&#24687;&#30340;&#22823;&#23567;&#24182;&#19988;
                    &#30465;&#21435;&#20102;&#21019;&#24314;&#21807;&#19968;ID&#30340;&#26102;&#38388;&#12290;</p></li><li><p>&#20851;&#38381;&#28040;&#24687;&#30340;&#26102;&#38388;&#25139;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#26102;&#38388;&#25139;&#65292;&#29992;<tt class="literal">MessageProducer</tt>&#30340;<tt class="literal">setDisableMessageTimeStamp()</tt>&#26041;&#27861;&#23558;&#20854;&#20851;&#38381;&#12290;</p></li><li><p>&#23613;&#37327;&#36991;&#20813;&#20351;&#29992;<tt class="literal">ObjectMessage</tt>&#12290;<tt class="literal">ObjectMessage</tt>&#20250;&#24102;
                    &#26469;&#39069;&#22806;&#30340;&#24320;&#38144;&#12290;<tt class="literal">ObjectMessage</tt>&#20351;&#29992;Java&#30340;&#24207;&#21015;&#21270;&#23558;&#23427;&#24207;&#21015;&#21270;&#20026;&#23383;&#33410;&#27969;&#12290;&#22312;&#23545;&#23567;&#30340;&#23545;&#35937;
                    &#36827;&#34892;&#24207;&#21015;&#21270;&#20250;&#21344;&#29992;&#22823;&#37327;&#30340;&#31354;&#38388;&#65292;&#20351;&#20256;&#36755;&#30340;&#25968;&#25454;&#37327;&#21152;&#22823;&#12290;&#21478;&#22806;&#65292;Java&#30340;&#24207;&#21015;&#21270;&#19982;&#20854;&#23427;&#23450;&#21046;&#30340;&#25216;&#26415;&#30456;&#27604;&#35201;&#24930;&#12290;&#21482;&#26377;&#22312;&#19981;&#24471;
                    &#20197;&#30340;&#24773;&#20917;&#19979;&#25165;&#20351;&#29992;&#23427;&#12290;&#27604;&#22914;&#24403;&#20320;&#22312;&#36816;&#34892;&#26102;&#19981;&#30693;&#36947;&#23545;&#35937;&#30340;&#20855;&#20307;&#31867;&#22411;&#26102;&#65292;&#21487;&#20197;&#29992;ObjectMessage&#12290;</p></li><li><p>&#36991;&#20813;&#20351;&#29992;<tt class="literal">AUTO_ACKNOWLEDGE</tt>&#12290; <tt class="literal">AUTO_ACKNOWLEDGE</tt>
                    &#20351;&#24471;&#27599;&#25910;&#21040;&#19968;&#20010;&#28040;&#24687;&#23601;&#35201;&#21521;&#26381;&#21153;&#22120;&#21457;&#36865;&#19968;&#20010;&#36890;&#30693;&#65293;&#65293;&#36825;&#26679;&#22686;&#21152;&#30340;&#32593;&#32476;&#20256;&#36755;&#30340;&#36127;&#25285;&#12290;&#22914;&#26524;&#21487;&#33021;&#65292;&#23613;&#37327;&#20351;&#29992;
                    <tt class="literal">DUPS_OK_ACKNOWLEDGE</tt>&#25110;&#32773;<tt class="literal">CLIENT_ACKNOWLEDGE</tt>&#12290;&#25110;&#32773;&#20351;&#29992;&#20107;&#21153;&#24615;&#20250;&#35805;&#65292;&#23558;&#36890;&#30693;&#22312;&#25552;&#20132;&#26102;&#25209;&#37327;&#23436;&#25104;&#12290;</p></li><li><p>&#36991;&#20813;&#25345;&#20037;&#21270;&#28040;&#24687;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;JMS&#28040;&#24687;&#26159;&#25345;&#20037;&#30340;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#25345;&#20037;&#28040;&#24687;&#65292;&#21017;&#23558;&#20854;&#35774;&#23450;&#20026;&#38750;&#25345;&#20037;&#12290;
                    &#25345;&#20037;&#28040;&#24687;&#37117;&#20250;&#34987;&#20889;&#21040;&#30913;&#30424;&#20013;&#65292;&#36825;&#32473;&#31995;&#32479;&#24102;&#26469;&#20102;&#26126;&#26174;&#30340;&#36127;&#25285;&#12290;</p></li><li><p>&#23558;&#22810;&#20010;&#21457;&#36865;&#25110;&#36890;&#30693;&#25918;&#21040;&#19968;&#20010;&#20107;&#21153;&#20013;&#23436;&#25104;&#12290;&#36825;&#26679;HornetQ&#21482;&#38656;&#35201;&#19968;&#27425;&#32593;&#32476;&#30340;&#24448;&#36820;&#26469;&#21457;&#29983;&#20107;&#21153;&#30340;&#25552;&#20132;&#65292;&#32780;&#19981;&#26159;&#27599;&#27425;&#21457;&#36865;
                    &#25110;&#36890;&#30693;&#23601;&#38656;&#35201;&#19968;&#27425;&#32593;&#32476;&#30340;&#24448;&#36820;&#36890;&#36805;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11094"></a>46.3.&nbsp;&#20854;&#23427;&#20248;&#21270;</h2></div></div><div></div></div><p>&#22312;HornetQ&#20013;&#36824;&#26377;&#20854;&#23427;&#19968;&#20123;&#22320;&#26041;&#21487;&#20197;&#20248;&#21270;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#20351;&#29992;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#12290;&#22914;&#26524;&#20320;&#22312;&#38750;&#20107;&#21153;&#26465;&#20214;&#19979;&#21457;&#36865;&#25345;&#20037;&#30340;&#28040;&#24687;&#65292;&#24182;&#19988;&#35201;&#20445;&#35777;&#22312;send()&#36820;&#22238;&#26102;&#25345;&#20037;&#28040;&#24687;&#24050;&#32463;&#21040;&#36798;&#26381;
                    &#21153;&#22120;&#65292;&#19981;&#35201;&#20351;&#29992;&#38459;&#22622;&#24335;&#21457;&#36865;&#30340;&#26041;&#24335;&#65292;&#24212;&#35813;&#20351;&#29992;&#24322;&#27493;&#21457;&#36865;&#36890;&#30693;&#30340;&#26041;&#24335;&#12290;&#21442;&#35265;<a href="#send-guarantees" title="Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;">Chapter&nbsp;20, <i>&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</i></a>&#20013;&#30340;&#35828;&#26126;&#12290;</p></li><li><p>&#20351;&#29992;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#12290;&#39044;&#20808;&#36890;&#30693;&#23601;&#26159;&#22312;&#28040;&#24687;&#21457;&#24448;&#23458;&#25143;&#31471;<tt class="literal">&#20043;&#21069;</tt>&#36827;&#34892;&#36890;&#30693;&#12290;&#23427;&#33410;&#30465;&#20102;&#27491;&#24120;
                    &#30340;&#28040;&#24687;&#36890;&#30693;&#25152;&#21344;&#29992;&#30340;&#36890;&#36805;&#26102;&#38388;&#12290;&#35814;&#32454;&#30340;&#35299;&#37322;&#35831;&#21442;&#35265;
                        <a href="#pre-acknowledge" title="Chapter&nbsp;29.&nbsp;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;">Chapter&nbsp;29, <i>&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</i></a>&#12290;</p></li><li><p>&#20851;&#38381;&#23433;&#20840;&#12290;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">security-enabled</tt>
                    &#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#20197;&#20851;&#38381;&#23433;&#20840;&#12290;&#36825;&#21487;&#20197;&#24102;&#26469;&#19968;&#20123;&#24615;&#33021;&#30340;&#25552;&#39640;&#12290;</p></li><li><p>&#20851;&#38381;&#25345;&#20037;&#21270;&#12290;&#22914;&#26524;&#19981;&#20320;&#19981;&#38656;&#35201;&#28040;&#24687;&#25345;&#20037;&#21270;&#65292;&#21487;&#20197;&#23558;<tt class="literal">hornetq-configuration.xml</tt>
                    &#25991;&#20214;&#20013;&#30340;<tt class="literal">persistence-enabled</tt>&#21442;&#25968;&#35774;&#20026;false&#26469;&#23436;&#20840;&#20851;&#38381;&#25345;&#20037;&#21151;&#33021;&#12290;</p></li><li><p>&#37319;&#29992;&#24310;&#36831;&#26041;&#24335;&#20107;&#21153;&#21516;&#27493;&#12290;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">journal-sync-transactional</tt>&#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#21487;&#20197;&#24471;&#21040;
                    &#26356;&#22909;&#30340;&#20107;&#21153;&#25345;&#20037;&#21270;&#30340;&#24615;&#33021;&#12290;&#20294;&#26159;&#36825;&#26679;&#20570;&#21487;&#33021;&#20250;&#36896;&#25104;&#22312;&#21457;&#29983;&#25925;&#38556;&#26102;&#20107;&#21153;&#30340;&#20002;&#22833;&#12290;&#26377;&#20851;&#35814;&#32454;&#30340;&#35828;&#26126;&#21442;&#35265;
                    <a href="#send-guarantees" title="Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;">Chapter&nbsp;20, <i>&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</i></a>&#12290;</p></li><li><p>&#37319;&#29992;&#24310;&#36831;&#26041;&#24335;&#38750;&#20107;&#21153;&#21516;&#27493;&#12290;&#23558;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#30340;<tt class="literal">journal-sync-non-transactional</tt>&#21442;&#25968;&#35774;&#20026;<tt class="literal">false</tt>&#21487;&#20197;&#24471;&#21040;
                    &#26356;&#22909;&#30340;&#38750;&#20107;&#21153;&#25345;&#20037;&#21270;&#30340;&#24615;&#33021;&#12290;&#20294;&#26159;&#36825;&#26679;&#20570;&#21487;&#33021;&#20250;&#36896;&#25104;&#22312;&#21457;&#29983;&#25925;&#38556;&#26102;&#25345;&#20037;&#28040;&#24687;&#30340;&#20002;&#22833;&#12290;&#26377;&#20851;&#35814;&#32454;&#30340;&#35828;&#26126;&#21442;&#35265;
                    <a href="#send-guarantees" title="Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;">Chapter&nbsp;20, <i>&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</i></a>&#12290;</p></li><li><p>&#37319;&#29992;&#38750;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#28040;&#24687;&#12290;&#23558;&#25991;&#20214;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#30340;&#21442;&#25968;
                    <tt class="literal">block-on-non-durable-send</tt>&#35774;&#20026;<tt class="literal">false</tt>
                    &#65288;&#20351;&#29992;JMS&#21644;JNDI&#26102;&#65289;&#25110;&#32773;&#30452;&#25509;&#22312;&#19978;&#36827;&#34892;&#30456;&#24212;&#30340;&#35774;&#32622;&#65292;&#21487;&#20197;&#20351;
                    &#28040;&#24687;&#21457;&#36865;&#26102;&#19981;&#38459;&#22622;&#31561;&#24453;&#26381;&#21153;&#22120;&#30340;&#21709;&#24212;&#12290;&#21442;&#35265; <a href="#send-guarantees" title="Chapter&nbsp;20.&nbsp;&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;">Chapter&nbsp;20, <i>&#21457;&#36865;&#19982;&#25552;&#20132;&#30340;&#20445;&#35777;</i></a>&#12290;</p></li><li><p>&#22914;&#26524;&#20320;&#30340;&#25509;&#25910;&#32773;&#36895;&#24230;&#24456;&#24555;&#65292;&#20320;&#21487;&#20197;&#22686;&#21152;consumer-window-size&#12290;&#36825;&#26679;&#23454;&#38469;&#19978;&#23601;&#20851;&#38381;&#20102;&#27969;&#25511;&#21046;&#30340;&#21151;&#33021;&#12290;</p></li><li><p>&#22871;&#25509;&#23383;NIO&#19982;&#26087;&#30340;IO&#23545;&#27604;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#22312;&#26381;&#21153;&#22120;&#31471;&#20351;&#29992;&#22871;&#25509;&#23383;NIO&#25216;&#26415;&#65292;&#32780;&#22312;&#23458;&#25143;&#31471;&#21017;&#20351;&#29992;&#26087;&#30340;&#65288;&#38459;&#22622;&#65289;
                    IO&#65288;&#21442;&#35265;&#20256;&#36755;&#37197;&#32622;&#19968;&#31456;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#65289;&#12290;NIO&#27604;&#26087;&#30340;&#38459;&#22622;&#24335;IO&#26377;&#26356;
                    &#24378;&#30340;&#21487;&#25193;&#23637;&#24615;&#65292;&#20294;&#26159;&#20063;&#20250;&#24102;&#26469;&#19968;&#20123;&#24310;&#26102;&#12290;&#22914;&#26524;&#20320;&#30340;&#26381;&#21153;&#22120;&#35201;&#21516;&#26102;&#26377;&#25968;&#21315;&#20010;&#36830;&#25509;&#65292;&#20351;&#29992;NIO&#25928;&#26524;&#27604;&#36739;&#22909;&#12290;&#20294;&#26159;&#22914;&#26524;
                    &#36830;&#25509;&#25968;&#24182;&#27809;&#26377;&#36825;&#20040;&#22810;&#65292;&#20320;&#21487;&#20197;&#37197;&#32622;&#25509;&#25910;&#22120;&#20351;&#29992;&#26087;&#30340;IO&#36824;&#25552;&#39640;&#24615;&#33021;&#12290;</p></li><li><p>&#23613;&#37327;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#32780;&#19981;&#29992;JMS&#12290;&#20351;&#29992;JMS&#25509;&#21475;&#20250;&#31245;&#24494;&#27604;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#24615;&#33021;&#35201;&#20302;&#20123;&#12290;&#36825;&#26159;&#22240;&#20026;&#25152;&#26377;JMS&#25805;&#20316;
                    &#23454;&#38469;&#19978;&#35201;&#36716;&#21270;&#20026;&#26680;&#24515;&#30340;&#25805;&#20316;&#25165;&#33021;&#20026;&#26381;&#21153;&#22120;&#25152;&#22788;&#29702;&#12290;&#22312;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#26102;&#65292;&#23613;&#37327;&#20351;&#29992;&#24102;&#26377;
                    <tt class="literal">SimpleString</tt>&#31867;&#22411;&#21442;&#25968;&#30340;&#26041;&#27861;&#12290;<tt class="literal">SimpleString</tt>&#19982;
                    java.lang.String&#19981;&#21516;&#65292;&#23427;&#22312;&#20889;&#20837;&#20256;&#36755;&#23618;&#26102;&#19981;&#38656;&#35201;&#25335;&#36125;&#12290;&#25152;&#20197;&#20320;&#22914;&#26524;&#22312;&#35843;&#29992;&#20013;&#37325;&#29992;<tt class="literal">SimpleString</tt>&#23545;&#35937;&#21487;&#20197;&#36991;&#20813;&#19981;&#24517;&#35201;&#30340;&#25335;&#36125;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11196"></a>46.4.&nbsp;&#20256;&#36755;&#23618;&#30340;&#20248;&#21270;</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>TCP&#32531;&#23384;&#22823;&#23567;&#12290;&#22914;&#26524;&#20320;&#30340;&#32593;&#32476;&#36895;&#24230;&#24456;&#24555;&#65292;&#24182;&#19988;&#20320;&#30340;&#20027;&#26426;&#20063;&#24456;&#24555;&#65292;&#20320;&#21487;&#20197;&#36890;&#36807;&#22686;&#21152;TCP&#30340;&#21457;&#36865;&#21644;&#25509;&#25910;&#32531;&#23384;
                    &#26469;&#25552;&#39640;&#24615;&#33021;&#12290;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#20013;&#30340;&#35814;&#32454;&#35828;&#26126;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#27880;&#24847;&#26576;&#20123;&#25805;&#20316;&#31995;&#32479;&#65292;&#22914;&#26368;&#36817;&#30340;Linux&#29256;&#26412;&#20013;&#65292;&#21253;&#25324;&#20102;TCP&#33258;&#21160;&#20248;&#21270;&#21151;&#33021;&#12290;&#22914;&#26524;&#20877;&#25163;&#24037;&#35774;&#32622;TCP&#32531;&#23384;
                    &#20250;&#23548;&#33268;&#33258;&#21160;&#20248;&#21270;&#22833;&#25928;&#65292;&#26368;&#32066;&#20351;&#24615;&#33021;&#19979;&#38477;&#65281;
                     </p></div></li><li><p>&#22686;&#21152;&#26381;&#21153;&#22120;&#20013;&#25991;&#20214;&#21477;&#26564;&#25968;&#37327;&#38480;&#21046;&#12290;&#22914;&#26524;&#20320;&#30340;&#26381;&#21153;&#22120;&#23558;&#35201;&#22788;&#29702;&#24456;&#22810;&#24182;&#34892;&#30340;&#36830;&#25509;&#65292;&#25110;&#32773;&#23458;&#25143;&#31471;&#22312;&#24555;&#36895;&#19981;&#20572;&#22320;
                    &#25171;&#24320;&#21644;&#20851;&#38381;&#36830;&#25509;&#65292;&#20320;&#35201;&#30830;&#20445;&#22312;&#26381;&#21153;&#22120;&#31471;&#26377;&#36275;&#22815;&#30340;&#25991;&#20214;&#21477;&#26564;&#20197;&#20379;&#20351;&#29992;&#12290;</p><p>&#36825;&#20010;&#38480;&#21046;&#22312;&#19981;&#21516;&#24179;&#21488;&#26377;&#19981;&#21516;&#30340;&#26041;&#27861;&#12290;&#22312;Linux&#31995;&#32479;&#20013;&#65292;&#20320;&#21487;&#20197;&#32534;&#36753;&#25991;&#20214;<tt class="literal">/etc/security/limits.conf</tt>&#65292;&#22686;&#21152;&#20197;&#19979;&#20869;&#23481;&#65306;
                    </p><pre class="programlisting">
serveruser     soft    nofile  20000
serveruser     hard    nofile  20000                   
                </pre><p>
                    &#23427;&#35774;&#32622;&#20102;&#29992;&#25143;<tt class="literal">serveruser</tt>&#21487;&#20197;&#26368;&#22810;&#25171;&#24320;20000&#20010;&#25991;&#20214;&#21477;&#26564;&#12290;</p></li><li><p>&#21033;&#29992;&#21442;&#25968;<tt class="literal">batch-delay</tt>&#24182;&#23558;&#21442;&#25968;<tt class="literal">direct-deliver</tt>
                    &#35774;&#20026;false&#26469;&#25552;&#39640;&#23567;&#28040;&#24687;&#30340;&#22788;&#29702;&#25928;&#29575;&#12290;HornetQ&#22312;&#20854;<tt class="literal">hornetq-configuration.xml</tt>
                    &#20013;&#39044;&#20808;&#37197;&#32622;&#20102;&#19968;&#20010;&#36830;&#25509;&#22120;&#65295;&#25509;&#21463;&#22120;&#23545;&#65288;<tt class="literal">netty-throughput</tt>&#65289;&#65292;&#24182;&#19988;&#22312;
                    <tt class="literal">hornetq-jms.xml</tt>&#20013;&#37197;&#32622;&#20102;&#19968;&#20010;JMS&#36830;&#25509;&#24037;&#21378;&#65288;
                    <tt class="literal">ThroughputConnectionFactory</tt>&#65289;&#12290;&#23427;&#20204;&#21487;&#20197;&#29992;&#22312;&#23567;&#28040;&#24687;&#30340;&#22788;&#29702;&#24212;&#29992;&#20013;&#20197;&#25552;
                    &#20379;&#26368;&#20339;&#21585;&#21520;&#37327;&#12290;&#21442;&#35265;<a href="#configuring-transports" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11245"></a>46.5.&nbsp;&#20248;&#21270;&#34394;&#25311;&#26426;</h2></div></div><div></div></div><p>&#25105;&#20204;&#24378;&#28872;&#24314;&#35758;&#20320;&#20351;&#29992;&#26368;&#26032;&#30340;Java 6&#34394;&#25311;&#26426;&#12290;&#23427;&#22312;&#24456;&#22810;&#26041;&#38754;&#23545;&#20197;&#21069;Java 5&#30340;&#34394;&#25311;&#26426;&#36827;&#34892;&#20102;&#25913;&#36827;&#65292;&#29305;&#21035;&#26159;&#22312;&#32593;&#32476;&#21151;&#33021;&#26041;&#38754;&#12290;
            &#36825;&#26159;&#26681;&#25454;&#25105;&#20204;&#20869;&#37096;&#20351;&#29992;Sun&#30340;&#23454;&#29616;&#27979;&#35797;&#30340;&#32080;&#26524;&#65292;&#21487;&#33021;&#19981;&#36866;&#29992;&#20110;&#20854;&#23427;&#30340;Java&#23454;&#29616;&#65288;&#20363;&#22914;IBM&#25110;JRockit&#65289;&#12290;</p><div class="itemizedlist"><ul type="disc"><li><p>&#25289;&#22334;&#22238;&#25910;&#12290;&#20026;&#20102;&#20351;&#26381;&#21153;&#22120;&#30340;&#36816;&#34892;&#27604;&#36739;&#24179;&#28369;&#65292;&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;&#24182;&#34892;&#25289;&#22334;&#22238;&#25910;&#30340;&#31639;&#27861;&#12290;&#20363;&#22914;&#22312;Sun&#30340;JDK&#20351;&#29992;
                    JVM&#36873;&#39033;<tt class="literal">-XX:+UseParallelGC</tt>.</p></li><li><p><a name="perf-tuning.memory"></a>&#20869;&#23384;&#35774;&#32622;&#12290;&#23613;&#37327;&#20026;&#26381;&#21153;&#22120;&#20998;&#37197;&#26356;&#22810;&#30340;&#20869;&#23384;&#12290;HornetQ&#21033;&#29992;&#20854;&#20998;&#39029;&#36716;&#23384;&#25216;&#26415;&#21487;&#20197;&#22312;&#24456;&#23569;&#30340;&#20869;&#23384;&#19979;&#36816;&#34892;&#65288;&#22312;
                    <a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">Chapter&nbsp;24, <i>&#20998;&#39029;&#36716;&#23384;</i></a>&#20013;&#26377;&#35828;&#26126;&#65289;&#12290;&#20294;&#26159;&#22914;&#26524;&#25152;&#26377;&#38431;&#21015;&#37117;&#22312;&#20869;&#23384;&#36816;&#34892;&#65292;&#24615;&#33021;&#23558;&#20250;&#24456;&#22909;&#12290;&#20855;&#20307;&#38656;&#35201;
                    &#22810;&#23569;&#20869;&#23384;&#35201;&#30001;&#20320;&#30340;&#38431;&#21015;&#30340;&#22823;&#23567;&#21644;&#25968;&#37327;&#20197;&#21450;&#28040;&#24687;&#30340;&#22823;&#23567;&#21644;&#25968;&#37327;&#20915;&#23450;&#12290;&#20351;&#29992;JVM&#21442;&#25968;<tt class="literal">-Xms</tt>
                    &#21644;<tt class="literal">-Xmx</tt>&#26469;&#20026;&#20320;&#30340;&#26381;&#21153;&#22120;&#20998;&#37197;&#20869;&#23384;&#12290;&#25105;&#20204;&#24314;&#35758;&#20004;&#20010;&#21442;&#25968;&#30340;&#35774;&#20026;&#30456;&#21516;&#30340;&#20540;&#12290;</p></li><li><p>&#20027;&#21160;&#36873;&#39033;&#65288;Aggressive options&#65289;&#12290;&#19981;&#21516;JVM&#26377;&#19981;&#21516;&#30340;JVM&#20248;&#21270;&#21442;&#25968;&#12290;&#23545;&#20110;Sun&#30340;Hotspot JVM&#65292;&#22312;<a href="http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp" target="_top">&#36825;&#37324;</a>&#26377;&#19968;&#20010;&#23436;&#25972;&#30340;&#21442;&#25968;&#21015;&#34920;&#12290;&#25105;&#20204;&#24314;&#35758;&#33267;&#23569;&#35201;&#20351;&#29992; <tt class="literal">-XX:+AggressiveOpts</tt> &#21644;<tt class="literal">
                        -XX:+UseFastAccessorMethods</tt>&#36873;&#39033;&#12290;&#26681;&#25454;&#19981;&#21516;&#30340;&#24179;&#21488;&#65292;&#21487;&#33021;&#36824;&#26377;&#20854;&#23427;&#19968;&#20123;&#21442;&#25968;&#20379;&#20320;&#20351;&#29992;&#65292;
                    &#20197;&#25552;&#39640;JVM&#30340;&#24615;&#33021;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e11280"></a>46.6.&nbsp;&#36991;&#20813;&#36829;&#32972;&#35774;&#35745;&#27169;&#24335;</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>&#37325;&#29992;&#36830;&#25509;&#65295;&#20250;&#35805;&#65295;&#25509;&#25910;&#32773;&#65295;&#21457;&#36865;&#32773;&#12290;&#26368;&#24120;&#35265;&#30340;&#38169;&#35823;&#24656;&#24597;&#23601;&#26159;&#27599;&#21457;&#36865;&#65295;&#25509;&#25910;&#19968;&#20010;&#28040;&#24687;&#37117;&#35201;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#36830;&#25509;
                    &#65295;&#20250;&#35805;&#65295;&#21457;&#36865;&#32773;&#25110;&#25509;&#25910;&#32773;&#12290;&#36825;&#26679;&#38750;&#24120;&#28010;&#36153;&#36164;&#28304;&#12290;&#36825;&#20123;&#23545;&#35937;&#30340;&#21019;&#24314;&#35201;&#21344;&#29992;&#26102;&#38388;&#21644;&#32593;&#32476;&#24102;&#23485;&#12290;&#23427;&#20204;&#24212;&#35813;&#36827;&#34892;&#37325;&#29992;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#26377;&#20123;&#24120;&#29992;&#30340;&#26694;&#26550;&#22914;Spring JMS Template&#22312;&#20351;&#29992;JMS&#26102;&#36829;&#32972;&#20102;&#35774;&#35745;&#27169;&#24335;&#12290;&#22914;&#26524;&#20320;&#22312;&#20351;&#29992;&#20102;&#23427;&#21518;&#24615;&#33021;
                        &#21463;&#21040;&#20102;&#24433;&#21709;&#12290;&#36825;&#19981;&#26159;HornetQ&#30340;&#21407;&#22240;&#65281;Spring&#30340;JMS&#27169;&#26495;&#21482;&#26377;&#19982;&#33021;&#32531;&#23384;JMS&#20250;&#35805;&#30340;&#24212;&#29992;&#26381;&#21153;&#22120;&#19968;&#36215;&#20351;&#29992;
                        &#25165;&#26159;&#23433;&#20840;&#30340;&#65292;&#24182;&#19988;&#21482;&#33021;&#26159;&#29992;&#20110;&#21457;&#36865;&#28040;&#24687;&#12290;&#20351;&#29992;&#23427;&#22312;&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#21516;&#27493;&#25509;&#25910;&#28040;&#24687;&#26159;&#19981;&#23433;&#20840;&#30340;&#12290;</p></div></li><li><p>&#36991;&#20813;&#20351;&#29992;&#32321;&#38145;&#30340;&#28040;&#24687;&#26684;&#24335;&#12290;&#22914;XML&#65292;&#23427;&#20250;&#20351;&#25968;&#25454;&#37327;&#21464;&#22823;&#36827;&#32780;&#38477;&#20302;&#24615;&#33021;&#12290;&#25152;&#20197;&#24212;&#35813;&#23613;&#37327;&#36991;&#20813;&#22312;&#28040;&#24687;&#20307;&#20013;&#20351;&#29992;XML&#12290;</p></li><li><p>&#19981;&#35201;&#20026;&#27599;&#20010;&#35831;&#27714;&#37117;&#21019;&#24314;&#26032;&#30340;&#20020;&#26102;&#38431;&#21015;&#12290;&#20020;&#26102;&#38431;&#21015;&#36890;&#24120;&#29992;&#20110;&#35831;&#27714;&#65293;&#21709;&#24212;&#27169;&#24335;&#30340;&#28040;&#24687;&#24212;&#29992;&#12290;&#22312;&#36825;&#20010;&#27169;&#24335;&#20013;&#28040;&#24687;&#34987;&#21457;&#24448;
                    &#19968;&#20010;&#30446;&#30340;&#65292;&#23427;&#24102;&#26377;&#19968;&#20010;reply-to&#30340;&#22836;&#23646;&#24615;&#25351;&#21521;&#19968;&#20010;&#26412;&#22320;&#30340;&#20020;&#26102;&#38431;&#21015;&#30340;&#22320;&#22336;&#12290;&#24403;&#28040;&#24687;&#34987;&#25910;&#21040;&#21518;&#65292;&#25509;&#25910;&#26041;&#23558;&#21709;&#24212;&#20570;&#20026;&#28040;&#24687;&#21457;
                    &#24448;&#37027;&#20010;reply-to&#25351;&#23450;&#30340;&#20020;&#26102;&#30340;&#22320;&#22336;&#12290;&#22914;&#26524;&#27599;&#21457;&#19968;&#20010;&#28040;&#24687;&#37117;&#21019;&#24314;&#19968;&#20010;&#20020;&#26102;&#38431;&#21015;&#65292;&#37027;&#20040;&#24615;&#33021;&#23558;&#20250;&#21463;&#24456;&#22823;&#24433;&#21709;&#12290;&#27491;&#30830;&#30340;
                    &#20316;&#27861;&#26159;&#22312;&#21457;&#36865;&#28040;&#24687;&#26102;&#37325;&#29992;&#20020;&#26102;&#38431;&#21015;&#12290;</p></li><li><p>&#23613;&#37327;&#19981;&#35201;&#20351;&#29992;MDB&#12290;&#20351;&#29992;MDB&#65292;&#28040;&#24687;&#30340;&#25509;&#25910;&#36807;&#31243;&#35201;&#27604;&#30452;&#25509;&#25509;&#25910;&#22797;&#26434;&#24471;&#22810;&#65292;&#35201;&#25191;&#34892;&#24456;&#22810;&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#37096;&#30340;&#20195;&#30721;&#12290;
                    &#22312;&#35774;&#35745;&#24212;&#29992;&#26102;&#35201;&#38382;&#19968;&#19979;&#26159;&#21542;&#30495;&#30340;&#38656;&#35201;MDB&#65311;&#21487;&#19981;&#21487;&#20197;&#30452;&#25509;&#20351;&#29992;&#28040;&#24687;&#25509;&#25910;&#32773;&#23436;&#25104;&#21516;&#26679;&#30340;&#20219;&#21153;&#65311;</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="configuration-index"></a>Chapter&nbsp;47.&nbsp;&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;</h2></div></div><div></div></div><p>&#26412;&#31456;&#32473;&#20986;&#20102;HornetQ&#37197;&#32622;&#21442;&#25968;&#30340;&#32034;&#24341;&#65292;&#20197;&#20415;&#26597;&#38405;&#12290;&#28857;&#20987;&#20219;&#24847;&#19968;&#20010;&#37197;&#32622;&#21442;&#25968;&#21487;&#20197;&#36716;&#21040;&#20854;&#25152;&#23646;&#30340;&#31456;&#33410;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="server.configuration"></a>47.1.&nbsp;&#26381;&#21153;&#22120;&#37197;&#32622;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e11324"></a>47.1.1.&nbsp;hornetq-configuration.xml</h3></div></div><div></div></div><p>HornetQ&#20027;&#35201;&#26680;&#24515;&#26381;&#21153;&#22120;&#37197;&#32622;&#25991;&#20214;</p><div class="table"><a name="d0e11329"></a><p class="title"><b>Table&nbsp;47.1.&nbsp;&#26381;&#21153;&#22120;&#37197;&#32622;</b></p><table summary="&#26381;&#21153;&#22120;&#37197;&#32622;" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>&#21517;&#31216;</th><th>&#31867;&#22411;</th><th>&#35828;&#26126;</th><th>&#40664;&#35748;&#20540;</th></tr></thead><tbody><tr><td><a href="#configuring.live.backup" title="39.1.1.1.1.&nbsp;&#37197;&#32622;">backup</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26412;&#26381;&#21153;&#22120;&#26159;&#38598;&#32676;&#20013;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#30340;&#22791;&#20221;&#26381;&#21153;&#22120;</td><td>false</td></tr><tr><td><a href="#configuring.live.backup" title="39.1.1.1.1.&nbsp;&#37197;&#32622;">backup-connector-ref</a></td><td>String</td><td>&#29992;&#20110;&#36830;&#25509;&#22791;&#20221;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring.bindings.journal" title="15.1.&nbsp;&#37197;&#32622;&#32465;&#23450;&#26085;&#24535;">bindings-directory</a></td><td>String</td><td>&#20445;&#23384;&#25345;&#20037;&#32465;&#23450;&#30340;&#30446;&#24405;the directory to store the persisted bindings to</td><td>data/bindings</td></tr><tr><td><a href="#clusters" title="Chapter&nbsp;38.&nbsp;&#38598;&#32676;">clustered</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26381;&#21153;&#22120;&#26159;&#38598;&#32676;&#20013;&#30340;&#33410;&#28857;</td><td>false</td></tr><tr><td><a href="#connection-ttl" title="Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;">connection-ttl-override</a></td><td>Long</td><td>&#34920;&#31034;&#22312;&#25509;&#25910;&#21040;&#19968;&#20010;ping&#20043;&#21069;&#36830;&#25509;&#20445;&#25345;&#26377;&#25928;&#30340;&#26102;&#38388;&#65288;&#21333;&#20301;&#27627;&#31186;&#65289;</td><td>-1</td></tr><tr><td><a href="#configuring.bindings.journal" title="15.1.&nbsp;&#37197;&#32622;&#32465;&#23450;&#26085;&#24535;">create-bindings-dir</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26381;&#21153;&#22120;&#22312;&#21551;&#21160;&#26102;&#21019;&#24314;&#32465;&#23450;&#30340;&#30446;&#24405;</td><td>true</td></tr><tr><td><a href="#configuring.message.journal.create-journal-dir">create-journal-dir</a></td><td>Boolean</td><td>true&#34920;&#31034;&#21019;&#24314;&#26085;&#24535;&#30446;&#24405;</td><td>true</td></tr><tr><td><a href="#using-server.configuration" title="6.6.&nbsp;&#37197;&#32622;&#25991;&#20214;">file-deployment-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26381;&#21153;&#22120;&#20174;&#37197;&#32622;&#25991;&#20214;&#20013;&#35835;&#21462;&#37197;&#32622;</td><td>true</td></tr><tr><td><a href="#duplicate.id.cache" title="37.2.&nbsp;&#37197;&#32622;&#37325;&#22797;ID&#32531;&#23384;">id-cache-size</a></td><td>Integer</td><td>&#39044;&#20808;&#29983;&#25104;&#30340;&#28040;&#24687;id&#30340;&#32531;&#23384;&#22823;&#23567;</td><td>2000</td></tr><tr><td><a href="#configuring.message.journal.journal-buffer-size">journal-buffer-size</a></td><td>Long</td><td>&#26085;&#24535;&#20869;&#37096;&#32531;&#23384;&#30340;&#22823;&#23567;</td><td>128 KiB</td></tr><tr><td><a href="#configuring.message.journal.journal-buffer-timeout">journal-buffer-timeout</a></td><td>Long</td><td>T&#23558;&#26085;&#24535;&#32531;&#20914;&#25968;&#25454;&#21047;&#26032;&#30340;&#31561;&#24453;&#26102;&#38388;&#65288;&#32435;&#31186;&#65289;</td><td>20000</td></tr><tr><td><a href="#configuring.message.journal.journal-compact-min-files">journal-compact-min-files</a></td><td>Integer</td><td>&#24320;&#22987;&#25972;&#29702;&#25968;&#25454;&#30340;&#26368;&#23567;&#25968;&#25454;&#25991;&#20214;&#25968;&#12290;</td><td>10</td></tr><tr><td><a href="#configuring.message.journal.journal-compact-percentage">journal-compact-percentage</a></td><td>Integer</td><td>&#24320;&#22987;&#21387;&#32553;&#26085;&#24535;&#26102;&#30340;&#26377;&#25928;&#25968;&#25454;&#30334;&#20998;&#27604;&#12290;</td><td>30</td></tr><tr><td><a href="#configuring.message.journal.journal-directory">journal-directory</a></td><td>String</td><td>&#26085;&#24535;&#25991;&#20214;&#25152;&#22312;&#30340;&#20301;&#32622;</td><td>data/journal</td></tr><tr><td><a href="#configuring.message.journal.journal-file-size">journal-file-size</a></td><td>Long</td><td>&#27599;&#20010;&#26085;&#24535;&#25991;&#20214;&#30340;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>128 * 1024</td></tr><tr><td><a href="#configuring.message.journal.journal-max-io">journal-max-io</a></td><td>Integer</td><td>&#26576;&#19968;&#26102;&#21051;&#20445;&#23384;&#22312;AIO&#38431;&#21015;&#20013;&#30340;&#26368;&#22823;&#20889;&#35831;&#27714;&#25968;</td><td>500</td></tr><tr><td><a href="#configuring.message.journal.journal-min-files">journal-min-files</a></td><td>Integer</td><td>&#39044;&#20808;&#21019;&#24314;&#30340;&#26085;&#24535;&#25991;&#20214;&#25968;</td><td>2</td></tr><tr><td><a href="#configuring.message.journal.journal-sync-transactional">journal-sync-transactional</a></td><td>Boolean</td><td>&#22914;&#26524;&#26159;true&#65292;&#31561;&#20107;&#21153;&#25968;&#25454;&#21516;&#27493;&#21040;&#26085;&#24535;&#21518;&#20877;&#21521;&#23458;&#25143;&#31471;&#36820;&#22238;</td><td>true</td></tr><tr><td><a href="#configuring.message.journal.journal-sync-non-transactional">journal-sync-non-transactional</a></td><td>Boolean</td><td>&#22914;&#26524;&#26159;true&#65292;&#31561;&#38750;&#20107;&#21153;&#25968;&#25454;&#21040;&#26085;&#24535;&#21518;&#20877;&#21521;&#23458;&#25143;&#31471;&#36820;&#22238;</td><td>true</td></tr><tr><td><a href="#configuring.message.journal.journal-type">journal-type</a></td><td>ASYNCIO|NIO</td><td>&#26085;&#24535;&#23384;&#21462;&#30340;&#26041;&#24335;</td><td>ASYNCIO</td></tr><tr><td><a href="#management.jmx.configuration" title="30.2.1.&nbsp;&#37197;&#32622;JMX">jmx-management-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#36890;&#36807;JMX&#21487;&#20197;&#20351;&#29992;&#31649;&#29702;&#25509;&#21475;</td><td>true</td></tr><tr><td><a href="#management.jmx.configuration" title="30.2.1.&nbsp;&#37197;&#32622;JMX">jmx-domain</a></td><td>String</td><td>&#29992;&#20110;HornetQ MBean&#27880;&#20876;&#21040;MBeanServer&#30340;JMX&#22495;&#21517;</td><td>org.hornetq</td></tr><tr><td><a href="#large.message.configuring" title="23.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#30340;&#37197;&#32622;">large-messages-directory</a></td><td>String</td><td>&#23384;&#25918;&#22823;&#28040;&#24687;&#30340;&#30446;&#24405;</td><td>data/largemessages</td></tr><tr><td><a href="#management.core.configuration" title="30.3.1.&nbsp;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;">management-address</a></td><td>String</td><td>&#31649;&#29702;&#28040;&#24687;&#21457;&#36865;&#30340;&#22320;&#22336;</td><td>jms.queue.hornetq.management</td></tr><tr><td><a href="#clusters.clusteruser" title="38.3.2.&nbsp;&#38598;&#32676;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;">cluster-user</a></td><td>String</td><td>&#38598;&#32676;&#36830;&#25509;&#30340;&#29992;&#25143;&#21517;</td><td>HORNETQ.CLUSTER.ADMIN.USER</td></tr><tr><td><a href="#clusters.clusteruser" title="38.3.2.&nbsp;&#38598;&#32676;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;">cluster-password</a></td><td>String</td><td>&#38598;&#32676;&#36830;&#25509;&#30340;&#29992;&#25143;&#23494;&#30721;</td><td>CHANGE ME!!</td></tr><tr><td><a href="#management.notifications.core.configuration" title="30.5.2.1.&nbsp;&#37197;&#32622;&#26680;&#24515;&#31649;&#29702;&#36890;&#30693;&#22320;&#22336;">management-notification-address</a></td><td>String</td><td>&#29992;&#20110;&#25509;&#25910;&#31649;&#29702;&#36890;&#30693;&#30340;&#22320;&#22336;</td><td>hornetq.notifications</td></tr><tr><td><a href="#configuring.message.counters" title="30.6.1.&nbsp;&#37197;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;">message-counter-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#20351;&#29992;&#28040;&#24687;&#35745;&#25968;&#22120;</td><td>false</td></tr><tr><td><a href="#configuring.message.counters" title="30.6.1.&nbsp;&#37197;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;">message-counter-max-day-history</a></td><td>Integer</td><td>&#28040;&#24687;&#35745;&#25968;&#22120;&#21382;&#21490;&#20445;&#23384;&#30340;&#22825;&#25968;</td><td>10</td></tr><tr><td><a href="#configuring.message.counters" title="30.6.1.&nbsp;&#37197;&#32622;&#28040;&#24687;&#35745;&#25968;&#22120;">message-counter-sample-period</a></td><td>Long</td><td>&#28040;&#24687;&#35745;&#25968;&#22120;&#21462;&#26679;&#30340;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>10000</td></tr><tr><td><a href="#configuring.expiry.reaper" title="22.3.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22238;&#25910;&#32447;&#31243;">message-expiry-scan-period</a></td><td>Long</td><td>&#36807;&#26399;&#28040;&#24687;&#25195;&#25551;&#21608;&#26399;&#65288;&#27627;&#31186;&#65289;</td><td>30000</td></tr><tr><td><a href="#configuring.expiry.reaper" title="22.3.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22238;&#25910;&#32447;&#31243;">message-expiry-thread-priority</a></td><td>Integer</td><td>&#36807;&#26399;&#28040;&#24687;&#32447;&#31243;&#30340;&#20248;&#20808;&#32423;</td><td>3</td></tr><tr><td><a href="#paging.main.config" title="24.2.&nbsp;&#37197;&#32622;">paging-directory</a></td><td>String</td><td>&#20998;&#39029;&#36716;&#23384;&#28040;&#24687;&#30340;&#20445;&#23384;&#30446;&#24405;</td><td>data/paging</td></tr><tr><td><a href="#configuring.delivery.count.persistence" title="21.3.&nbsp;&#20256;&#36882;&#35745;&#25968;&#30340;&#25345;&#20037;&#21270;">
                                    persist-delivery-count-before-delivery</a></td><td>Boolean</td><td>true&#34920;&#31034;&#20256;&#36882;&#35745;&#25968;&#22312;&#20256;&#36882;&#20043;&#21069;&#20445;&#23384;&#12290;false&#34920;&#31034;&#21482;&#26377;&#24403;&#28040;&#24687;&#34987;&#21462;&#28040;&#26102;&#25165;&#20445;&#23384;&#12290;</td><td>false</td></tr><tr><td><a href="#persistence.enabled" title="15.6.&nbsp;&#37197;&#32622;HornetQ&#19981;&#20351;&#29992;&#25345;&#20037;&#21270;">persistence-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26381;&#21153;&#22120;&#20351;&#29992;&#22522;&#20110;&#25991;&#20214;&#30340;&#26085;&#24535;&#20570;&#25345;&#20037;&#21270;</td><td>true</td></tr><tr><td><a href="#duplicate.id.cache" title="37.2.&nbsp;&#37197;&#32622;&#37325;&#22797;ID&#32531;&#23384;">persist-id-cache</a></td><td>Boolean</td><td>true&#34920;&#31034;id&#34987;&#20445;&#23384;&#21040;&#26085;&#24535;&#20013;</td><td>true</td></tr><tr><td><a href="#server.scheduled.thread.pool" title="41.1.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;">scheduled-thread-pool-max-size</a></td><td>Integer</td><td>&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;&#30340;&#32447;&#31243;&#25968;&#12290;</td><td>5</td></tr><tr><td><a href="#security" title="Chapter&nbsp;31.&nbsp;&#23433;&#20840;">security-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#20351;&#29992;&#23433;&#20840;&#21151;&#33021;</td><td>true</td></tr><tr><td><a href="#security" title="Chapter&nbsp;31.&nbsp;&#23433;&#20840;">security-invalidation-interval</a></td><td>Long</td><td>&#23433;&#20840;&#32531;&#23384;&#30340;&#26377;&#25928;&#26102;&#38388;&#65288;&#27627;&#31186;&#65289;</td><td>10000</td></tr><tr><td><a href="#server.scheduled.thread.pool" title="41.1.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#21487;&#35745;&#21010;&#32447;&#31243;&#27744;">thread-pool-max-size</a></td><td>Integer</td><td>&#20027;&#32447;&#31243;&#27744;&#30340;&#32447;&#31243;&#25968;&#12290;-1&#34920;&#31034;&#25968;&#37327;&#19981;&#38480;</td><td>-1</td></tr><tr><td><a href="#connection-ttl.async-connection-execution" title="17.3.&nbsp;&#37197;&#32622;&#24322;&#27493;&#36830;&#25509;&#20219;&#21153;&#25191;&#34892;">async-connection-execution-enabled</a></td><td>Boolean</td><td>&#25509;&#25910;&#30340;&#25968;&#25454;&#21253;&#26159;&#21542;&#30001;&#32447;&#31243;&#27744;&#30340;&#32447;&#31243;&#26469;&#22788;&#29702;</td><td>true</td></tr><tr><td><a href="#transaction-config" title="Chapter&nbsp;18.&nbsp;&#37197;&#32622;&#36164;&#28304;&#31649;&#29702;&#22120;&#65288;Resource Manager&#65289;">transaction-timeout</a></td><td>Long</td><td>&#20107;&#21153;&#22312;&#24314;&#31435;&#21518;&#32463;&#36807;&#22810;&#38271;&#26102;&#38388;&#21518;&#21487;&#20197;&#20174;&#36164;&#28304;&#31649;&#29702;&#22120;&#65288;resource manager&#65289;&#21024;&#38500;&#65288;&#27627;&#31186;&#65289;</td><td>60000</td></tr><tr><td><a href="#transaction-config" title="Chapter&nbsp;18.&nbsp;&#37197;&#32622;&#36164;&#28304;&#31649;&#29702;&#22120;&#65288;Resource Manager&#65289;">transaction-timeout-scan-period</a></td><td>Long</td><td>&#25195;&#25551;&#36229;&#26102;&#20107;&#21153;&#30340;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>1000</td></tr><tr><td><a href="#wildcard-routing" title="Chapter&nbsp;12.&nbsp;&#20351;&#29992;&#36890;&#37197;&#31526;&#23454;&#29616;&#28040;&#24687;&#36335;&#30001;">wild-card-routing-enabled</a></td><td>Boolean</td><td>true&#34920;&#31034;&#26381;&#21153;&#22120;&#25903;&#25345;&#36890;&#37197;&#31526;&#36335;&#30001;</td><td>true</td></tr><tr><td><a href="#perf-tuning.memory">memory-measure-interval</a></td><td>Long</td><td>&#37319;&#26679;JVM&#20869;&#23384;&#30340;&#21608;&#26399;&#65288;&#27627;&#31186;&#65292;-1&#34920;&#31034;&#19981;&#37319;&#26679;&#65289;</td><td>-1</td></tr><tr><td><a href="#perf-tuning.memory">memory-warning-threshold</a></td><td>Integer</td><td>&#21487;&#29992;&#20869;&#23384;&#36798;&#21040;&#36825;&#20010;&#30334;&#20998;&#27604;&#26102;&#65292;&#32473;&#20986;&#35686;&#21578;&#20449;&#24687;</td><td>25</td></tr><tr><td><a href="#configuring-transports.connectors" title="16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;">connectors</a></td><td>Connector</td><td>&#36830;&#25509;&#22120;&#30340;&#37197;&#32622;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">connector.name (attribute)</a></td><td>String</td><td>&#36830;&#25509;&#22120;&#30340;&#21517;&#23383;&#65293;&#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.connectors" title="16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;">connector.factory-class</a></td><td>String</td><td>&#36830;&#25509;&#24037;&#21378;&#30340;&#23454;&#29616;&#31867;&#21517;&#65293;&#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.connectors" title="16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;">connector.param</a></td><td>&#36830;&#25509;&#22120;&#30340;&#37197;&#32622;&#21442;&#25968;</td><td>&#19968;&#20010;&#38190;&#65293;&#20540;&#23545;&#65292;&#34920;&#31034;&#19968;&#20010;&#36830;&#25509;&#22120;&#30340;&#21442;&#25968;&#37197;&#32622;&#12290;&#19968;&#20010;&#36830;&#25509;&#22120;&#21487;&#20197;&#26377;&#22810;&#20010;&#36825;&#26679;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.connectors" title="16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;">connector.param.key (&#23646;&#24615;)</a></td><td>String</td><td>&#21442;&#25968;&#30340;&#38190; - &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.connectors" title="16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;">connector.param.value (attribute)</a></td><td>String</td><td>&#21442;&#25968;&#30340;&#20540; - &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptors</a></td><td>Acceptor</td><td>&#19968;&#32452;&#25509;&#25910;&#22120;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptor.name (&#23646;&#24615;)</a></td><td>String</td><td>&#25509;&#25910;&#22120;&#30340;&#21517;&#23383; &#65293; &#21487;&#36873;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptor.factory-class</a></td><td>String</td><td>&#25509;&#25910;&#22120;&#24037;&#21378;&#23454;&#29616;&#31867;&#21517; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptor.param</a></td><td>&#19968;&#20010;&#25509;&#25910;&#22120;&#30340;&#37197;&#32622;&#21442;&#25968;</td><td>&#29992;&#26469;&#37197;&#32622;&#25509;&#25910;&#22120;&#30340;&#38190;&#65293;&#20540;&#23545;&#12290;&#19968;&#20010;&#25509;&#25910;&#22120;&#21487;&#20197;&#26377;&#22810;&#20010;&#21442;&#25968;&#12290;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptor.param.key (&#23646;&#24615;)</a></td><td>String</td><td>&#21442;&#25968;&#30340;&#38190; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#configuring-transports.acceptors" title="16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;">acceptor.param.value (attribute)</a></td><td>String</td><td>&#21442;&#25968;&#30340;&#20540; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-groups</a></td><td>BroadcastGroup</td><td>&#19968;&#32452;&#24191;&#25773;&#32452;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.name (attribute)</a></td><td>String</td><td>&#24191;&#25773;&#32452;&#30340;&#21517;&#23383;&#65288;&#24517;&#38656;&#26159;&#21807;&#19968;&#30340;&#65289;&#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.local-bind-address</a></td><td>String</td><td>&#25968;&#25454;&#25253;&#25991;&#22871;&#25509;&#23383;&#30340;&#26412;&#22320;&#32465;&#23450;&#22320;&#22336;</td><td>&#20869;&#31995;&#32479;&#20869;&#26680;&#36873;&#25321;&#30340;IP&#22320;&#22336;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.local-bind-port</a></td><td>Integer</td><td>&#25968;&#25454;&#25253;&#25991;&#22871;&#25509;&#23383;&#30340;&#26412;&#22320;&#32465;&#23450;&#31471;&#21475;</td><td>-1 &#65288;&#21311;&#21517;&#31471;&#21475;&#65289;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.group-address</a></td><td>String</td><td>&#24191;&#25773;&#22320;&#22336; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.group-port</a></td><td>Integer</td><td>&#24191;&#25773;&#20351;&#29992;&#30340;UDP&#31471;&#21475; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.broadcast-period</a></td><td>Long</td><td>&#24191;&#25773;&#30340;&#26102;&#38388;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>2000</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.connector-ref</a></td><td>&#19968;&#20010;&#36830;&#25509;&#22120;&#23545;</td><td>&#24191;&#25773;&#30340;&#19968;&#20010;&#36830;&#25509;&#22120;&#21644;&#19968;&#20010;&#21487;&#36873;&#30340;&#22791;&#20221;&#36830;&#25509;&#22120;&#12290;&#19968;&#20010;&#24191;&#25773;&#32452;&#21487;&#20197;&#26377;&#22810;&#20010;&#36825;&#26679;&#30340;&#36830;&#25509;&#22120;&#23545;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.connector-ref.connector-name (attribute)</a></td><td>String</td><td>&#20027;&#36830;&#25509;&#22120;&#21517; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.broadcast-groups" title="38.2.1.&nbsp;&#24191;&#25773;&#32452;">broadcast-group.connector-ref.backup-connector-name (attribute)</a></td><td>String</td><td>&#22791;&#20221;&#36830;&#25509;&#22120;&#21517; &#65293; &#21487;&#36873;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-groups</a></td><td>DiscoveryGroup</td><td>&#19968;&#32452;&#21457;&#29616;&#32452;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-group.name (&#23646;&#24615;)</a></td><td>String</td><td>&#21457;&#29616;&#32452;&#30340;&#21517;&#23383;&#65288;&#20855;&#26377;&#21807;&#19968;&#24615;&#65289; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-group.local-bind-address</a></td><td>String</td><td>&#21457;&#29616;&#32452;&#25152;&#32465;&#23450;&#30340;&#26412;&#22320;&#22320;&#22336;</td><td>&nbsp;</td></tr><tr><td><a name="configuration.discovery-group.group-address"></a><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-group.group-address</a></td><td>String</td><td>&#21457;&#29616;&#32452;&#30417;&#21548;&#30340;&#24191;&#25773;IP&#22320;&#22336; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a name="configuration.discovery-group.group-port"></a><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-group.group-port</a></td><td>Integer</td><td>&#24191;&#25773;&#32452;&#30417;&#21548;&#30340;UDP&#31471;&#21475; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a name="configuration.discovery-group.refresh-timeout"></a><a href="#clusters.discovery-groups" title="38.2.2.&nbsp;&#21457;&#29616;&#32452;">discovery-group.refresh-timeout</a></td><td>Integer</td><td>&#21457;&#29616;&#32452;&#31561;&#24453;&#26356;&#26032;&#30340;&#26102;&#38388;&#12290;&#22914;&#26524;&#26576;&#20010;&#26381;&#21153;&#22120;&#19978;&#27425;&#24191;&#25773;&#21040;&#36798;&#21518;&#32463;&#36807;&#36825;&#20010;&#26102;&#38388;&#21518;&#36824;&#27809;&#26377;&#25910;&#21040;&#19979;&#27425;&#24191;&#25773;&#65292;&#37027;&#20040;
                                  &#35813;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;&#23545;&#23558;&#20174;&#21015;&#34920;&#20013;&#21024;&#38500;</td><td>5000 (&#27627;&#31186;)</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">diverts</a></td><td>Divert</td><td>&#19968;&#32452;&#36716;&#21457;&#22120;</td><td>&nbsp;</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.name (attribute)</a></td><td>String</td><td>&#36716;&#21457;&#22120;&#30340;&#21517;&#23383;&#65288;&#24517;&#38656;&#26159;&#21807;&#19968;&#30340;&#65289; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.routing-name</a></td><td>String</td><td>&#36716;&#21457;&#22120;&#30340;&#36335;&#30001;&#21517;&#31216; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.address</a></td><td>String</td><td>&#36716;&#21457;&#22120;&#30340;&#28304;&#22320;&#22336; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.forwarding-address</a></td><td>String</td><td>&#36716;&#21457;&#22120;&#30340;&#36716;&#21457;&#22320;&#22336; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.exclusive</a></td><td>Boolean</td><td>&#36716;&#21457;&#22120;&#26159;&#21542;&#26159;&#21807;&#19968;&#30340;</td><td>false</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.filter</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#26680;&#24515;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</td><td>null</td></tr><tr><td><a href="#diverts" title="Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;">divert.transformer-class-name</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#36716;&#25442;&#22120;&#30340;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#predefined.queues" title="25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;">queues</a></td><td>Queue</td><td>&#19968;&#32452;&#39044;&#20808;&#37197;&#32622;&#30340;&#38431;&#21015;</td><td>&nbsp;</td></tr><tr><td><a href="#predefined.queues" title="25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;">queues.name
                                (&#23646;&#24615;)</a></td><td>String</td><td>&#38431;&#21015;&#29420;&#29305;&#30340;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#predefined.queues" title="25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;">queues.address</a></td><td>String</td><td>&#38431;&#21015;&#30340;&#22320;&#22336; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#predefined.queues" title="25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;">queues.filter</a></td><td>String</td><td>&#38431;&#21015;&#21487;&#36873;&#30340;&#26680;&#24515;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</td><td>null</td></tr><tr><td><a href="#predefined.queues" title="25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;">queues.durable</a></td><td>Boolean</td><td>&#26159;&#21542;&#25345;&#20037;&#38431;&#21015;</td><td>true</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges</a></td><td>Bridge</td><td>&#19968;&#32452;&#26725;</td><td>&nbsp;</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.name
                                (&#23646;&#24615;)</a></td><td>String</td><td>&#26725;&#30340;&#29420;&#29305;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.queue-name</a></td><td>String</td><td>&#26725;&#25509;&#25910;&#28040;&#24687;&#30340;&#28304;&#38431;&#21015;&#21517; &#65293; &#24517;&#38656;&#25351;&#23450;&#30340;&#21442;&#25968;</td><td>&nbsp;</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.forwarding-address</a></td><td>String</td><td>&#26725;&#35201;&#36716;&#21457;&#30340;&#22320;&#22336;&#12290;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#21017;&#20351;&#29992;&#21407;&#22987;&#30340;&#22320;&#22336;</td><td>null</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.filter</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#26680;&#24515;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</td><td>null</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.transformer-class-name</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#36716;&#25442;&#22120;&#31867;&#21517;</td><td>null</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.retry-interval</a></td><td>Long</td><td>&#37325;&#35797;&#30340;&#26102;&#38388;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>2000 ms</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.retry-interval-multiplier</a></td><td>Double</td><td>&#37325;&#35797;&#38388;&#38548;&#30340;&#36882;&#22686;&#31995;&#25968;</td><td>1.0</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.reconnect-attempts</a></td><td>Integer</td><td>&#26368;&#22823;&#37325;&#35797;&#27425;&#25968;&#65292;-1&#20195;&#34920;&#26080;&#38480;&#27425;</td><td>-1</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.failover-on-server-shutdown</a></td><td>Boolean</td><td>&#22914;&#26524;&#30446;&#26631;&#26381;&#21153;&#22120;&#27491;&#24120;&#20851;&#26426;&#26159;&#21542;&#20173;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;</td><td>false</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.use-duplicate-detection</a></td><td>Boolean</td><td>&#26159;&#21542;&#22312;&#36716;&#21457;&#30340;&#28040;&#24687;&#20013;&#28155;&#21152;&#37325;&#22797;&#26816;&#27979;&#30340;&#22836;</td><td>true</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.discovery-group-ref</a></td><td>String</td><td>&#26725;&#20351;&#29992;&#30340;&#21457;&#29616;&#32452;&#21517;</td><td>null</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.connector-ref.connector-name
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#20027;&#36830;&#25509;&#30340;&#36830;&#25509;&#22120;&#21517;</td><td>&nbsp;</td></tr><tr><td><a href="#core-bridges" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;">bridges.connector-ref.backup-connector-name
                                (&#23646;&#24615;)</a></td><td>String</td><td>&#22791;&#20221;&#36830;&#25509;&#30340;&#36830;&#25509;&#22120;&#21517;&#65288;&#21487;&#36873;&#65289;</td><td>null</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections</a></td><td>ClusterConnection</td><td>&#19968;&#32452;&#38598;&#32676;&#36830;&#25509;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.name (attribute)</a></td><td>String</td><td>&#38598;&#32676;&#36830;&#25509;&#30340;&#29420;&#29305;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.address</a></td><td>String</td><td>&#38598;&#32676;&#36830;&#25509;&#30340;&#22320;&#22336;&#21517;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.forward-when-no-consumers</a></td><td>Boolean</td><td>&#22914;&#26524;&#30446;&#26631;&#27809;&#26377;&#21512;&#36866;&#30340;&#25509;&#25910;&#32773;&#65292;&#26159;&#21542;&#20173;&#28982;&#21521;&#23427;&#20998;&#37197;&#28040;&#24687;&#65311;</td><td>false</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.max-hops</a></td><td>Integer</td><td>&#38598;&#32676;&#25299;&#25169;&#20013;&#30340;&#26368;&#22823;&#36339;&#25968;&#65288;hops&#65289;</td><td>1</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.retry-interval</a></td><td>Long</td><td>&#38598;&#32676;&#36830;&#25509;&#37325;&#35797;&#30340;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>2000</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.use-duplicate-detection</a></td><td>Boolean</td><td>&#26159;&#21542;&#22312;&#36716;&#21457;&#30340;&#28040;&#24687;&#20013;&#28155;&#21152;&#37325;&#22797;&#26816;&#27979;&#30340;&#28040;&#24687;&#22836;</td><td>true</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.discovery-group-ref</a></td><td>String</td><td>&#26725;&#25152;&#20351;&#29992;&#30340;&#21457;&#29616;&#32452;&#30340;&#21517;&#23383;</td><td>null</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.connector-ref.connector-name
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#20027;&#36830;&#25509;&#30340;&#36830;&#25509;&#22120;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.cluster-connections" title="38.3.1.&nbsp;&#37197;&#32622;&#38598;&#32676;&#36830;&#25509;">cluster-connections.connector-ref.backup-connector-name
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#22791;&#20221;&#36830;&#25509;&#25152;&#20351;&#29992;&#30340;&#36830;&#25509;&#22120;&#21517;&#23383;</td><td>null</td></tr><tr><td><a href="#security.settings.roles" title="31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;">security-settings</a></td><td>SecuritySetting</td><td>&#19968;&#32452;&#23433;&#20840;&#35774;&#32622;</td><td>&nbsp;</td></tr><tr><td><a href="#security.settings.roles" title="31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;">security-settings.match
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#23433;&#20840;&#25152;&#24212;&#29992;&#30340;&#22320;&#22336;&#21305;&#37197;&#23383;&#31526;&#20018;</td><td>&nbsp;</td></tr><tr><td><a href="#security.settings.roles" title="31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;">security-settings.permission</a></td><td>&#23433;&#20840;&#35768;&#21487;</td><td>&#22320;&#22336;&#30340;&#19968;&#20010;&#35768;&#21487;</td><td>&nbsp;</td></tr><tr><td><a href="#security.settings.roles" title="31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;">security-settings.permission.type (attribute)</a></td><td>&#35768;&#21487;&#31867;&#22411;</td><td>&#35768;&#21487;&#30340;&#31867;&#22411;</td><td>&nbsp;</td></tr><tr><td><a href="#security.settings.roles" title="31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;">security-settings.permission.roles (attribute)</a></td><td>Roles</td><td>&#20197;&#36887;&#21495;&#20998;&#38548;&#30340;&#19968;&#32452;&#35282;&#33394;&#65292;&#36825;&#20123;&#35282;&#33394;&#23558;&#25317;&#26377;&#30456;&#24212;&#30340;&#35768;&#21487;</td><td>&nbsp;</td></tr><tr><td><a href="#queue-attributes.address-settings" title="25.3.&nbsp;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;">address-settings</a></td><td>AddressSetting</td><td>&#19968;&#32452;&#22320;&#22336;&#35774;&#32622;</td><td>&nbsp;</td></tr><tr><td><a href="#undelivered-messages.configuring" title="21.2.1.&nbsp;&#37197;&#32622;&#27515;&#20449;&#22320;&#22336;">address-settings.dead-letter-address</a></td><td>String</td><td>&#27515;&#28040;&#24687;&#25152;&#21457;&#24448;&#30340;&#22320;&#22336;</td><td>&nbsp;</td></tr><tr><td><a href="#undelivered-messages.configuring" title="21.2.1.&nbsp;&#37197;&#32622;&#27515;&#20449;&#22320;&#22336;">address-settings.max-delivery-attempts</a></td><td>Integer</td><td>&#21457;&#24448;&#27515;&#20449;&#22320;&#22336;&#20043;&#21069;&#25152;&#23581;&#35797;&#30340;&#20256;&#36882;&#27425;&#25968;</td><td>10</td></tr><tr><td><a href="#message-expiry.configuring" title="22.2.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;">address-settings.expiry-address</a></td><td>String</td><td>&#36807;&#26399;&#28040;&#24687;&#25152;&#21457;&#24448;&#30340;&#22320;&#22336;</td><td>&nbsp;</td></tr><tr><td><a href="#undelivered-messages.delay" title="21.1.1.&nbsp;&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;">address-settings.redelivery-delay</a></td><td>Long</td><td>&#37325;&#26032;&#20256;&#36882;&#19968;&#20010;&#21462;&#28040;&#30340;&#28040;&#24687;&#21069;&#25152;&#31561;&#24453;&#30340;&#26102;&#38388;&#65288;&#27627;&#31186;&#65289;</td><td>0</td></tr><tr><td><a href="#last-value-queues" title="Chapter&nbsp;27.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;&#65288;Last-Value Queues&#65289;">address-settings.last-value-queue</a></td><td>boolean</td><td>&#38431;&#21015;&#26159;&#21542;&#26159;&#19968;&#20010;&#26368;&#26032;&#20540;&#38431;&#21015;</td><td>false</td></tr><tr><td><a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">address-settings.page-size-bytes</a></td><td>Long</td><td>&#19968;&#20010;&#22320;&#22336;&#30340;&#20998;&#39029;&#30340;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>10 * 1024 * 1024</td></tr><tr><td><a href="#paging" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">address-settings.max-size-bytes</a></td><td>Long</td><td>&#22320;&#22336;&#30340;&#20998;&#39029;&#36716;&#23384;&#30340;&#26368;&#22823;&#20540;&#65288;&#23383;&#33410;&#65289;</td><td>-1</td></tr><tr><td><a href="#clusters.message-redistribution" title="38.6.&nbsp;&#28040;&#24687;&#20877;&#20998;&#37197;">address-settings.redistribution-delay</a></td><td>Long</td><td>&#38431;&#21015;&#26368;&#21518;&#19968;&#20010;&#25509;&#25910;&#32773;&#20851;&#38381;&#21518;&#38656;&#35201;&#31561;&#24453;&#22810;&#38271;&#26102;&#38388;&#20877;&#23558;&#28040;&#24687;&#37325;&#26032;&#20998;&#37197;&#65288;&#27627;&#31186;&#65289;</td><td>-1</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e12548"></a>47.1.2.&nbsp;hornetq-jms.xml</h3></div></div><div></div></div><p>&#35813;&#25991;&#20214;&#26159;&#26381;&#21153;&#22120;&#31471;JMS&#26381;&#21153;&#25152;&#20351;&#29992;&#30340;&#65292;&#29992;&#26469;&#35013;&#36733;JMS&#38431;&#21015;&#65292;&#35805;&#39064;&#21644;&#36830;&#25509;&#24037;&#21378;&#12290;</p><div class="table"><a name="d0e12553"></a><p class="title"><b>Table&nbsp;47.2.&nbsp;JMS&#26381;&#21153;&#22120;&#37197;&#32622;</b></p><table summary="JMS&#26381;&#21153;&#22120;&#37197;&#32622;" border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th>&#21517;&#31216;</th><th>&#31867;&#22411;</th><th>&#35828;&#26126;</th><th>&#40664;&#35748;&#20540;</th></tr></thead><tbody><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">connection-factory</a></td><td>ConnectionFactory</td><td>&#19968;&#32452;&#27880;&#20876;&#21040;JNDI&#30340;&#36830;&#25509;&#24037;&#21378;</td><td>&nbsp;</td></tr><tr><td><a name="configuration.connection-factory.auto-group"></a><a href="#message-grouping.jmsconfigure" title="28.2.&nbsp;&#20351;&#29992;JMS">connection-factory.auto-group</a></td><td>Boolean</td><td>&#26159;&#21542;&#33258;&#21160;&#20351;&#29992;&#28040;&#24687;&#32452;</td><td>false</td></tr><tr><td><a href="#clusters.static.servers" title="38.5.2.&nbsp;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;">connection-factory.connectors</a></td><td>String</td><td>&#19968;&#32452;&#20379;&#36830;&#25509;&#24037;&#21378;&#20351;&#29992;&#30340;&#36830;&#25509;&#22120;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.static.servers" title="38.5.2.&nbsp;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;">connection-factory.connectors.connector-ref.connector-name (&#23646;&#24615;)</a></td><td>String</td><td>&#36830;&#25509;&#20027;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;&#21517;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters.static.servers" title="38.5.2.&nbsp;&#25351;&#23450;&#26381;&#21153;&#22120;&#21015;&#34920;&#20197;&#32452;&#25104;&#38598;&#32676;">connection-factory.connectors.connector-ref.backup-connector-name (attribute)</a></td><td>String</td><td>&#36830;&#25509;&#22791;&#20221;&#26381;&#21153;&#22120;&#30340;&#36830;&#25509;&#22120;&#21517;</td><td>&nbsp;</td></tr><tr><td><a href="#clusters-discovery.groups.clientside" title="38.2.4.&nbsp;&#23458;&#25143;&#31471;&#30340;&#21457;&#29616;&#32452;">connection-factory.discovery-group-ref.discovery-group-name (&#23646;&#24615;)</a></td><td>String</td><td>&#36830;&#25509;&#24037;&#21378;&#30340;&#21457;&#29616;&#32452;&#21517;</td><td>&nbsp;</td></tr><tr><td><a name="configuration.connection-factory.discovery-initial-wait-timeout"></a><a href="#clusters-discovery.groups.clientside" title="38.2.4.&nbsp;&#23458;&#25143;&#31471;&#30340;&#21457;&#29616;&#32452;">connection-factory.discovery-initial-wait-timeout</a></td><td>Long</td><td>&#21457;&#29616;&#32452;&#39318;&#27425;&#31561;&#24453;&#24191;&#25773;&#30340;&#26102;&#38388;</td><td>10000</td></tr><tr><td><a name="configuration.connection-factory.block-on-acknowledge"></a><a href="#send-guarantees.nontrans.acks" title="20.3.&nbsp;&#38750;&#20107;&#21153;&#24615;&#36890;&#30693;&#30340;&#20445;&#35777;">connection-factory.block-on-acknowledge</a></td><td>Boolean</td><td>&#28040;&#24687;&#26159;&#21542;&#20197;&#21516;&#27493;&#26041;&#24335;&#36890;&#30693;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.block-on-non-durable-send"></a><a href="#non-transactional-sends" title="20.2.&nbsp;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;">connection-factory.block-on-non-durable-send</a></td><td>Boolean</td><td>&#26159;&#21542;&#20197;&#21516;&#27493;&#26041;&#24335;&#21457;&#36865;&#38750;&#25345;&#20037;&#28040;&#24687;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.block-on-durable-send"></a><a href="#non-transactional-sends" title="20.2.&nbsp;&#38750;&#20107;&#21153;&#24615;&#28040;&#24687;&#21457;&#36865;&#30340;&#20445;&#35777;">connection-factory.block-on-durable-send</a></td><td>Boolean</td><td>&#26159;&#21542;&#20197;&#21516;&#27493;&#26041;&#24335;&#21457;&#36865;&#25345;&#20037;&#28040;&#24687;</td><td>true</td></tr><tr><td><a name="configuration.connection-factory.call-timeout"></a>connection-factory.call-timeout</td><td>Long</td><td>&#36828;&#31243;&#35843;&#29992;&#36229;&#26102;&#26102;&#38388;&#65288;&#27627;&#31186;&#65289;</td><td>30000</td></tr><tr><td><a name="configuration.connection-factory.client-failure-check-period"></a><a href="#dead.connections" title="17.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#23545;&#22833;&#25928;&#36830;&#25509;&#30340;&#28165;&#38500;">connection-factory.client-failure-check-period</a></td><td>Long</td><td>&#23458;&#25143;&#31471;&#22914;&#26524;&#22312;&#36825;&#20010;&#26102;&#38388;&#20869;&#27809;&#26377;&#25910;&#21040;&#26381;&#21153;&#22120;&#25968;&#25454;&#21253;&#65292;&#23558;&#35748;&#20026;&#36830;&#25509;&#20986;&#29616;&#25925;&#38556;&#12290;</td><td>5000</td></tr><tr><td><a name="configuration.connection-factory.client-id"></a><a href="#using-jms.clientid" title="7.6.&nbsp;Client ID&#30340;&#35774;&#32622;">connection-factory.client-id</a></td><td>String</td><td>&#36830;&#25509;&#24037;&#21378;&#39044;&#20808;&#37197;&#32622;&#30340;&#23458;&#25143;ID</td><td>null</td></tr><tr><td><a name="configuration.connection-factory.connection-load-balancing-policy-class-name"></a><a href="#clusters.client.loadbalancing" title="38.4.&nbsp;&#23458;&#25143;&#31471;&#36127;&#36733;&#22343;&#34913;">
                                  connection-factory.connection-load-balancing-policy-class-name</a></td><td>String</td><td>&#36127;&#36733;&#22343;&#34913;&#31867;&#21517;</td><td>org.hornetq.api.core.client.loadbalance.RoundRobinConnectionLoadBalancingPolicy</td></tr><tr><td><a name="configuration.connection-factory.connection-ttl"></a><a href="#dead.connections" title="17.1.&nbsp;&#26381;&#21153;&#22120;&#31471;&#23545;&#22833;&#25928;&#36830;&#25509;&#30340;&#28165;&#38500;">connection-factory.connection-ttl</a></td><td>Long</td><td>&#36830;&#25509;&#30340;&#23384;&#27963;&#26102;&#38388;&#65288;&#27627;&#31186;&#65289;</td><td>1 * 60000</td></tr><tr><td><a name="configuration.connection-factory.consumer-max-rate"></a><a href="#flow-control.rate.core.api" title="19.1.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;">connection-factory.consumer-max-rate</a></td><td>Integer</td><td>&#25509;&#25910;&#32773;&#27599;&#31186;&#38047;&#25509;&#25910;&#28040;&#24687;&#30340;&#26368;&#24555;&#36895;&#24230;</td><td>-1</td></tr><tr><td><a name="configuration.connection-factory.consumer-window-size"></a><a href="#flow-control.core.api" title="19.1.1.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;&#36827;&#34892;&#27969;&#25511;&#21046;">connection-factory.consumer-window-size</a></td><td>Integer</td><td>&#25509;&#25910;&#32773;&#27969;&#25511;&#21046;&#23481;&#22120;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>1024 * 1024</td></tr><tr><td><a name="configuration.connection-factory.dups-ok-batch-size"></a><a href="#using-jms.dupsokbatchsize" title="7.7.&nbsp;&#35774;&#32622;DUPS_OK&#30340;Batch Size ">connection-factory.dups-ok-batch-size</a></td><td>Integer</td><td>&#22312;DUPS_OK_ACKNOWLEDGE&#27169;&#24335;&#19979;&#25209;&#37327;&#36890;&#30693;&#30340;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>1024 * 1024</td></tr><tr><td><a href="#ha.automatic.failover" title="39.2.1.&nbsp;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;">connection-factory.failover-on-initial-connection</a></td><td>Boolean</td><td>&#22914;&#26524;&#39318;&#27425;&#36830;&#25509;&#20027;&#26381;&#21153;&#22120;&#22833;&#36133;&#26159;&#21542;&#22833;&#25928;&#22791;&#25588;&#36830;&#25509;&#21040;&#22791;&#20221;&#26381;&#21153;&#22120;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.failover-on-server-shutdown"></a><a href="#ha.automatic.failover" title="39.2.1.&nbsp;&#33258;&#21160;&#23458;&#25143;&#31471;&#22833;&#25928;&#22791;&#25588;">connection-factory.failover-on-server-shutdown</a></td><td>Boolean</td><td>&#22312;&#26381;&#21153;&#22120;&#20572;&#26426;&#26102;&#26159;&#21542;&#36827;&#34892;&#22833;&#25928;&#22791;&#25588;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.min-large-message-size"></a><a href="#large-messages.core.config" title="23.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#30340;API">connection-factory.min-large-message-size</a></td><td>Integer</td><td>&#22823;&#28040;&#24687;&#30340;&#26368;&#23567;&#20540;&#65292;&#22823;&#23567;&#36229;&#36807;&#35813;&#20540;&#30340;&#25353;&#22823;&#28040;&#24687;&#22788;&#29702;</td><td>100 * 1024</td></tr><tr><td><a href="#large-messages.cache.client" title="23.5.&nbsp;&#22312;&#23458;&#25143;&#31471;&#32531;&#23384;&#22823;&#28040;&#24687;">connection-factory.cache-large-message-client</a></td><td>Boolean</td><td>true&#34920;&#31034;&#36825;&#20010;&#36830;&#25509;&#24037;&#21378;&#20250;&#23558;&#22823;&#28040;&#24687;&#20445;&#23384;&#22312;&#20020;&#26102;&#25991;&#20214;&#20013;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.pre-acknowledge"></a><a href="#pre-acknowledge.configure" title="29.1.&nbsp;&#20351;&#29992;PRE_ACKNOWLEDGE">connection-factory.pre-acknowledge</a></td><td>Boolean</td><td>&#26159;&#21542;&#22312;&#28040;&#24687;&#21457;&#36865;&#20043;&#21069;&#25552;&#21069;&#36890;&#30693;</td><td>false</td></tr><tr><td><a name="configuration.connection-factory.producer-max-rate"></a><a href="#flow-control.producer.rate.core.api" title="19.2.2.1.&nbsp;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;Core API&#65289;">connection-factory.producer-max-rate</a></td><td>Integer</td><td>&#21457;&#36865;&#28040;&#24687;&#30340;&#26368;&#22823;&#36895;&#24230;</td><td>-1</td></tr><tr><td><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.producer-window-size</a></td><td>Integer</td><td>&#21457;&#36865;&#32773;&#21457;&#36865;&#28040;&#24687;&#30340;&#31383;&#21475;&#22823;&#23567;</td><td>1024 * 1024</td></tr><tr><td><a name="configuration.connection-factory.confirmation-window-size"></a><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.confirmation-window-size</a></td><td>Integer</td><td>&#20250;&#35805;&#24674;&#22797;&#30340;&#30830;&#35748;&#31383;&#21475;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>1024 * 1024</td></tr><tr><td><a name="configuration.connection-factory.reconnect-attempts"></a><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.reconnect-attempts</a></td><td>Integer</td><td>&#37325;&#35797;&#30340;&#26368;&#22823;&#27425;&#25968;&#65292; -1 &#34920;&#31034;&#26080;&#38480;&#27425;</td><td>0</td></tr><tr><td><a name="configuration.connection-factory.retry-interval"></a><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.retry-interval</a></td><td>Long</td><td>&#27599;&#27425;&#37325;&#35797;&#30340;&#26102;&#38388;&#38388;&#38548;&#65288;&#27627;&#31186;&#65289;</td><td>2000</td></tr><tr><td><a name="configuration.connection-factory.retry-interval-multiplier"></a><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.retry-interval-multiplier</a></td><td>Double</td><td>&#37325;&#35797;&#38388;&#38548;&#26102;&#38388;&#30340;&#36882;&#22686;&#31995;&#25968;</td><td>1.0</td></tr><tr><td><a href="#client-reconnection" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;">connection-factory.max-retry-interval</a></td><td>Integer</td><td>&#26368;&#22823;&#37325;&#35797;&#38388;&#38548;&#12290;</td><td>2000</td></tr><tr><td><a name="configuration.connection-factory.scheduled-thread-pool-max-size"></a><a href="#thread-pooling.client.side" title="41.2.&nbsp;&#23458;&#25143;&#31471;&#32447;&#31243;&#31649;&#29702;">connection-factory.scheduled-thread-pool-max-size</a></td><td>Integer</td><td><span class="emphasis"><em>&#21487;&#35745;&#21010;&#32447;&#31243;</em></span>&#27744;&#30340;&#22823;&#23567;</td><td>5</td></tr><tr><td><a name="configuration.connection-factory.thread-pool-max-size"></a><a href="#thread-pooling.client.side" title="41.2.&nbsp;&#23458;&#25143;&#31471;&#32447;&#31243;&#31649;&#29702;">connection-factory.thread-pool-max-size</a></td><td>Integer</td><td>&#32447;&#31243;&#27744;&#22823;&#23567;</td><td>-1</td></tr><tr><td><a name="configuration.connection-factory.transaction-batch-size"></a><a href="#using-jms.txbatchsize" title="7.8.&nbsp;&#35774;&#32622;&#20107;&#21153;&#65288;Transaction&#65289;&#30340;Batch Size">
                                  connection-factory.transaction-batch-size</a></td><td>Integer</td><td>&#20351;&#29992;&#20107;&#21153;&#24615;&#20250;&#35805;&#26102;&#21457;&#36865;&#36890;&#30693;&#30340;&#25209;&#37327;&#22823;&#23567;&#65288;&#23383;&#33410;&#65289;</td><td>1024 * 1024</td></tr><tr><td><a name="configuration.connection-factory.use-global-pools"></a><a href="#thread-pooling.client.side" title="41.2.&nbsp;&#23458;&#25143;&#31471;&#32447;&#31243;&#31649;&#29702;">connection-factory.use-global-pools</a></td><td>Boolean</td><td>&#26159;&#21542;&#20351;&#29992;&#20840;&#23616;&#32447;&#31243;&#27744;</td><td>true</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">queue</a></td><td>Queue</td><td>&#21019;&#24314;&#24182;&#27880;&#20876;&#21040;JNDI&#30340;&#38431;&#21015;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">queue.name
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#38431;&#21015;&#30340;&#21807;&#19968;&#21517;&#23383;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">queue.entry</a></td><td>String</td><td>&#38431;&#21015;&#30340;JNDI&#30340;&#19978;&#19979;&#25991;&#65288;context&#65289;&#12290;&#19968;&#20010;&#38431;&#21015;&#21487;&#20197;&#26377;&#22810;&#20010;JNDI&#30340;&#19978;&#19979;&#25991;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">queue.durable</a></td><td>Boolean</td><td>&#26159;&#21542;&#25345;&#20037;&#38431;&#21015;</td><td>true</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">queue.filter</a></td><td>String</td><td>&#21487;&#36873;&#30340;&#38431;&#21015;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">topic</a></td><td>Topic</td><td>&#21019;&#24314;&#24182;&#27880;&#20876;&#21040;JNDI&#30340;&#35805;&#39064;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">topic.name
                                    (&#23646;&#24615;)</a></td><td>String</td><td>&#35805;&#39064;&#30340;&#21807;&#19968;&#21517;</td><td>&nbsp;</td></tr><tr><td><a href="#using-jms.server.configuration" title="7.2.&nbsp;JMS&#26381;&#21153;&#30340;&#37197;&#32622;">topic.entry</a></td><td>String</td><td>&#35805;&#39064;&#30340;JNDI&#19978;&#19979;&#25991;&#65288;context&#65289;&#12290;&#19968;&#20010;&#35805;&#39064;&#21487;&#20197;&#26377;&#22810;&#20010;&#19978;&#19979;&#25991;&#12290;</td><td>&nbsp;</td></tr></tbody></table></div></div></div></div></div></body></html>