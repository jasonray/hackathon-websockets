<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;25.&nbsp;&#38431;&#21015;&#23646;&#24615;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="paging.html" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;"><link rel="next" href="scheduled-messages.html" title="Chapter&nbsp;26.&nbsp;&#23450;&#26399;&#28040;&#24687;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;25.&nbsp;&#38431;&#21015;&#23646;&#24615;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="paging.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="scheduled-messages.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="queue-attributes"></a>Chapter&nbsp;25.&nbsp;&#38431;&#21015;&#23646;&#24615;</h2></div></div><div></div></div><p>&#26377;&#20004;&#31181;&#26041;&#27861;&#21487;&#20197;&#35774;&#32622;&#38431;&#21015;&#30340;&#23646;&#24615;&#12290;&#19968;&#31181;&#20351;&#29992;&#37197;&#32622;&#25991;&#20214;&#65292;&#21478;&#19968;&#31181;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65288;core API&#65289;&#12290;
        &#26412;&#31456;&#35762;&#36848;&#36825;&#20123;&#23646;&#24615;&#30340;&#37197;&#32622;&#20197;&#21450;&#36825;&#20123;&#23646;&#24615;&#30340;&#20316;&#29992;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="predefined.queues"></a>25.1.&nbsp;&#39044;&#23450;&#20041;&#30340;&#38431;&#21015;</h2></div></div><div></div></div><p>&#36890;&#36807;&#37197;&#32622;&#21487;&#20197;&#23450;&#20041;&#38431;&#21015;&#12290;&#38431;&#21015;&#30340;&#23450;&#20041;&#21487;&#20197;&#22312;&#26680;&#24515;&#23618;&#23450;&#20041;&#65292;&#20063;&#21487;&#20197;&#22312;JMS&#23618;&#26469;&#23450;&#20041;&#12290;&#39318;&#20808;&#25105;&#20204;&#30475;&#19968;&#19979;JMS&#23618;&#12290;</p><p>&#19979;&#38754;&#23601;&#26159;&#19968;&#20010;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#23450;&#20041;&#30340;&#19968;&#20010;&#38431;&#21015;&#30340;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;queue name="selectorQueue"&gt;
      &lt;entry name="/queue/selectorQueue"/&gt;
      &lt;selector string="color='red'"/&gt;
      &lt;durable&gt;true&lt;/durable&gt;
&lt;/queue&gt;</pre><p>&#36825;&#20010;&#38431;&#21015;&#30340;name&#23646;&#24615;&#23450;&#20041;&#20102;&#38431;&#21015;&#30340;&#21517;&#23383;&#12290;&#20363;&#23376;&#20013;&#25105;&#20204;&#37319;&#29992;&#20102;&#19968;&#31181;&#21629;&#21517;&#30340;&#24815;&#20363;&#65292;&#22240;&#20123;&#23545;&#24212;&#30340;&#26680;&#24515;&#38431;&#21015;&#30340;&#21517;&#23383;&#26159;
            <tt class="literal">jms.queue.selectorQueue</tt>&#12290;</p><p>&#22312;entry&#21333;&#20803;&#20869;&#23450;&#20041;&#30340;&#21517;&#23383;&#29992;&#26469;&#23558;&#38431;&#21015;&#32465;&#23450;&#20110;JNDI&#12290;&#36825;&#26159;&#24517;&#19981;&#21487;&#23569;&#30340;&#12290;&#19968;&#20010;&#38431;&#21015;&#21487;&#20197;&#26377;&#22810;&#20010;entry&#23450;&#20041;&#65292;&#27599;&#20010;
            &#23450;&#20041;&#20013;&#30340;&#21517;&#23383;&#37117;&#32465;&#23450;&#21040;&#21516;&#19968;&#20010;&#38431;&#21015;&#12290;</p><p>selector&#21333;&#20803;&#23450;&#20041;&#30340;&#26159;&#38431;&#21015;&#30340;&#36873;&#25321;&#22120;&#12290;&#23450;&#20041;&#20102;&#36873;&#25321;&#22120;&#21518;&#65292;&#21482;&#26377;&#19982;&#36873;&#25321;&#22120;&#30456;&#21305;&#37197;&#30340;&#28040;&#24687;&#25165;&#33021;&#34987;&#21152;&#21040;&#38431;&#21015;&#20013;&#12290;
            &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#39033;&#12290;&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36873;&#25321;&#22120;&#65292;&#38431;&#21015;&#23558;&#40664;&#35748;&#27809;&#26377;&#36873;&#25321;&#22120;&#12290;</p><p>durable&#23450;&#20041;&#20102;&#38431;&#21015;&#26159;&#21542;&#26159;&#19968;&#20010;&#21487;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;&#36825;&#20063;&#26159;&#19968;&#20010;&#21487;&#36873;&#39033;&#65292;&#40664;&#35748;&#20540;&#26159;true&#12290;</p><p>&#22914;&#26524;&#22312;&#26680;&#24515;&#23618;&#23450;&#20041;&#38431;&#21015;&#65292;&#21017;&#20351;&#29992;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#12290;
            &#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;queues&gt;     
   	&lt;queue name="jms.queue.selectorQueue"&gt;
   	    &lt;address&gt;jms.queue.selectorQueue&lt;/address&gt;
   	    &lt;filter string="color='red'"/&gt;
       &lt;durable&gt;true&lt;/durable&gt;
   	&lt;/queue&gt;
&lt;/queues&gt;</pre><p>&#23427;&#30340;&#37197;&#32622;&#19982;JMS&#30340;&#37197;&#32622;&#24456;&#30456;&#20284;&#65292;&#20294;&#26377;&#19977;&#20010;&#19981;&#21516;&#20043;&#22788;&#65306;</p><div class="orderedlist"><ol type="1"><li><p>&#38431;&#21015;&#30340;name&#23646;&#24615;&#26159;&#38431;&#21015;&#30340;&#30495;&#27491;&#21517;&#23383;&#65292;&#19981;&#26159;JMS&#20013;&#30340;&#21517;&#23383;&#12290;</p></li><li><p>address&#19968;&#39033;&#23450;&#20041;&#20102;&#28040;&#24687;&#36335;&#30001;&#30340;&#22320;&#22336;&#12290;</p></li><li><p>&#27809;&#26377;entry&#21333;&#20803;&#12290;</p></li><li><p>filter&#30340;&#23450;&#20041;&#20351;&#29992;<span class="emphasis"><em>&#26680;&#24515;&#36807;&#28388;&#22120;&#35821;&#27861;</em></span> &#65288;&#22312;
                        <a href="filter-expressions.html" title="Chapter&nbsp;14.&nbsp;&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;">Chapter&nbsp;14, <i>&#36807;&#28388;&#22120;&#34920;&#36798;&#24335;</i></a>&#20013;&#25551;&#36848;&#65289;&#65292;&#19981;&#26159;JMS&#30340;&#36873;&#25321;&#22120;&#35821;&#27861;&#12290;</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e4689"></a>25.2.&nbsp;&#20351;&#29992;&#25509;&#21475;&#65288;API&#65289;&#21019;&#24314;&#38431;&#21015;</h2></div></div><div></div></div><p>&#38431;&#21015;&#36824;&#21487;&#20197;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#25110;&#31649;&#29702;&#25509;&#21475;&#26469;&#21019;&#24314;&#12290;</p><p>&#26680;&#24515;&#25509;&#21475;&#30340;<tt class="literal">org.hornetq.api.core.client.ClientSession</tt>&#25509;&#21475;&#21487;&#20197;&#29992;&#26469;
              &#21019;&#24314;&#38431;&#21015;&#12290;&#23427;&#26377;&#20960;&#20010;<tt class="literal">createQueue</tt>&#26041;&#27861;&#65292;&#21487;&#20197;&#22312;&#21019;&#24314;&#38431;&#21015;&#26102;&#23545;&#19978;&#36848;&#30340;&#23646;&#24615;&#36827;&#34892;&#35774;&#32622;&#12290;
              &#38500;&#27492;&#20043;&#22806;&#65292;&#36824;&#26377;&#19968;&#20010;&#39069;&#22806;&#30340;&#23646;&#24615;<tt class="literal">temporary</tt>&#21487;&#20197;&#35774;&#32622;&#12290;&#22914;&#26524;&#23558;&#20854;&#35774;&#20026;true&#65292;
              &#37027;&#20040;&#38431;&#21015;&#22312;&#20250;&#35805;&#26029;&#24320;&#26102;&#23558;&#34987;&#21024;&#38500;&#12290;</p><p>&#22312;<a href="management.html" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;">Chapter&nbsp;30, <i>&#31649;&#29702;</i></a>&#20013;&#35762;&#36848;&#20102;&#22914;&#20309;&#29992;&#31649;&#29702;&#25509;&#21475;&#26469;&#21019;&#24314;&#38431;&#21015;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="queue-attributes.address-settings"></a>25.3.&nbsp;&#36890;&#36807;&#22320;&#22336;&#35774;&#32622;&#26469;&#37197;&#32622;&#38431;&#21015;&#23646;&#24615;</h2></div></div><div></div></div><p>&#26377;&#20123;&#23646;&#24615;&#30340;&#23450;&#20041;&#20013;&#22320;&#22336;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;&#12290;&#19979;&#38754;&#26159;<tt class="literal">hornetq-configuration.xml</tt>
            &#25991;&#20214;&#20013;&#30340;&#19968;&#20010;<tt class="literal">address-setting</tt>&#30340;&#37197;&#32622;&#20363;&#23376;&#12290;</p><pre class="programlisting">&lt;address-settings&gt;
    &lt;address-setting match="jms.queue.exampleQueue"&gt;
        &lt;dead-letter-address&gt;jms.queue.deadLetterQueue&lt;/dead-letter-address&gt;
        &lt;max-delivery-attempts&gt;3&lt;/max-delivery-attempts&gt;
        &lt;redelivery-delay&gt;5000&lt;/redelivery-delay&gt;
        &lt;expiry-address&gt;jms.queue.expiryQueue&lt;/expiry-address&gt;
        &lt;last-value-queue&gt;true&lt;/last-value-queue&gt;        
        &lt;max-size-bytes&gt;100000&lt;/max-size-bytes&gt;
        &lt;page-size-bytes&gt;20000&lt;/page-size-bytes&gt;
        &lt;redistribution-delay&gt;0&lt;/redistribution-delay&gt;
        &lt;send-to-dla-on-no-route&gt;true&lt;/send-to-dla-on-no-route&gt;
        &lt;address-full-policy&gt;PAGE&lt;/address-full-policy&gt;
     &lt;/address-setting&gt;
&lt;/address-settings&gt;</pre><p>&#36890;&#36807;&#19978;&#36848;&#30340;&#22320;&#22336;&#35774;&#23450;&#21487;&#20197;&#23558;&#22810;&#20010;&#23646;&#24615;&#24212;&#29992;&#20110;&#25152;&#26377;&#19982;<tt class="literal">match</tt>&#23646;&#24615;&#30456;&#21305;&#37197;&#30340;&#22320;&#22336;&#12290;
            &#19978;&#38754;&#20363;&#23376;&#20013;&#25152;&#23450;&#20041;&#30340;&#23646;&#24615;&#24212;&#29992;&#20110;<tt class="literal">jms.queue.exampleQueue</tt>&#30340;&#22320;&#22336;&#12290;&#22914;&#26524;&#20351;&#29992;
            &#36890;&#37197;&#31526;&#65292;&#23601;&#21487;&#20197;&#23558;&#36825;&#20123;&#23646;&#24615;&#24212;&#29992;&#20110;&#19968;&#32452;&#21305;&#37197;&#30340;&#22320;&#22336;&#12290;&#36890;&#37197;&#31526;&#30340;&#35814;&#32454;&#35828;&#26126;&#22312;<a href="wildcard-syntax.html" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">&#36825;&#37324;</a>&#12290;</p><p>&#20363;&#22914;&#22312;<tt class="literal">match</tt>&#20013;&#23450;&#20041;&#23383;&#31526;&#20018;<tt class="literal">jms.queue.#</tt>&#65292;&#37027;&#20040;
        &#23450;&#20041;&#30340;&#23646;&#24615;&#23601;&#20250;&#24212;&#29992;&#20110;&#25152;&#26377;&#20197;<tt class="literal">jms.queue.</tt>&#24320;&#22836;&#30340;&#22320;&#22336;&#65293;&#65293;&#21363;&#25152;&#26377;&#30340;JMS&#38431;&#21015;&#12290;</p><p>&#36825;&#20123;&#23646;&#24615;&#22312;&#26412;&#25163;&#20876;&#30340;&#21508;&#20010;&#22320;&#26041;&#26377;&#30456;&#24212;&#30340;&#20171;&#32461;&#12290;&#22312;&#27492;&#22788;&#32473;&#20986;&#20102;&#31616;&#21333;&#30340;&#35299;&#37322;&#21508;&#23427;&#25152;&#22312;&#31456;&#30340;&#36830;&#25509;&#12290;</p><p><tt class="literal">max-delivery-attempts</tt>&#23450;&#20041;&#20102;&#26368;&#22823;&#37325;&#20256;&#36882;&#30340;&#27425;&#25968;&#12290;&#19968;&#20010;&#28040;&#24687;&#22914;&#26524;&#21453;&#22797;&#20256;&#36882;&#36229;&#36807;
            &#20102;&#36825;&#20010;&#20540;&#23558;&#20250;&#34987;&#21457;&#24448;&#27515;&#20449;&#22320;&#22336;<tt class="literal">dead-letter-address</tt>&#12290;&#30456;&#20851;&#30340;&#23436;&#25972;&#30340;&#35299;&#37322;&#22312;
            <a href="undelivered-messages.html#undelivered-messages.configuring" title="21.2.1.&nbsp;&#37197;&#32622;&#27515;&#20449;&#22320;&#22336;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">redelivery-delay</tt>&#23450;&#20041;&#20102;&#37325;&#26032;&#20256;&#36882;&#30340;&#24310;&#36831;&#12290;&#23427;&#25511;&#21046;HornetQ&#22312;&#37325;&#26032;
            &#20256;&#36882;&#19968;&#20010;&#34987;&#21462;&#28040;&#30340;&#28040;&#24687;&#26102;&#35201;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;&#21442;&#35265;<a href="undelivered-messages.html#undelivered-messages.delay" title="21.1.1.&nbsp;&#24310;&#36831;&#20877;&#20256;&#36882;&#30340;&#37197;&#32622;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">expiry-address</tt>&#23450;&#20041;&#20102;&#36807;&#26399;&#28040;&#24687;&#30340;&#21457;&#36865;&#22320;&#22336;&#12290;&#21442;&#35265;<a href="message-expiry.html#message-expiry.configuring" title="22.2.&nbsp;&#37197;&#32622;&#36807;&#26399;&#22320;&#22336;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">last-value-queue</tt> &#23450;&#20041;&#19968;&#20010;&#38431;&#21015;&#26159;&#21542;&#20351;&#29992;&#26368;&#26032;&#20540;&#12290;&#21442;&#35265;<a href="last-value-queues.html" title="Chapter&nbsp;27.&nbsp;&#26368;&#26032;&#20540;&#38431;&#21015;&#65288;Last-Value Queues&#65289;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">max-size-bytes</tt>&#21644;<tt class="literal">page-size-bytes</tt>&#29992;&#26469;&#35774;&#32622;&#22320;&#22336;&#30340;&#20998;&#39029;&#36716;&#23384;&#21151;&#33021;&#12290;
            &#23427;&#20204;&#22312;<a href="paging.html" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">&#36825;&#37324;</a>&#26377;&#35814;&#32454;&#30340;&#35299;&#37322;&#12290;</p><p><tt class="literal">redistribution-delay</tt>&#23450;&#20041;&#20102;&#24403;&#26368;&#21518;&#19968;&#20010;&#25509;&#25910;&#32773;&#20851;&#38381;&#26102;&#37325;&#26032;&#20998;&#37197;&#38431;&#21015;&#28040;&#24687;&#21069;&#25152;&#31561;&#24453;&#30340;&#26102;&#38388;&#12290;
            &#21442;&#35265;<a href="clusters.html#clusters.message-redistribution" title="38.6.&nbsp;&#28040;&#24687;&#20877;&#20998;&#37197;">&#36825;&#37324;</a>&#12290;</p><p><tt class="literal">send-to-dla-on-no-route</tt>&#12290;&#24403;&#19968;&#20010;&#28040;&#24687;&#34987;&#36865;&#21040;&#26576;&#20010;&#22320;&#22336;&#26102;&#65292;&#21487;&#33021;&#19981;&#20250;&#34987;&#36335;&#30001;&#21040;&#20219;&#20309;&#19968;&#20010;&#38431;&#21015;&#12290;
            &#20363;&#22914;&#35813;&#22320;&#22336;&#27809;&#26377;&#32465;&#23450;&#20219;&#20309;&#38431;&#21015;&#30340;&#24773;&#20917;&#65292;&#25110;&#32773;&#23427;&#25152;&#26377;&#30340;&#38431;&#21015;&#30340;&#36873;&#25321;&#22120;&#19982;&#35813;&#28040;&#24687;&#19981;&#21305;&#37197;&#26102;&#12290;&#36825;&#26679;&#30340;&#28040;&#24687;&#36890;&#24120;&#24773;&#20917;&#19979;&#20250;&#34987;&#20002;&#24323;&#12290;&#36825;&#26102;
            &#22914;&#26524;&#23558;&#36825;&#20010;&#21442;&#25968;&#35774;&#20026;true&#65292;&#21017;&#22914;&#26524;&#36825;&#20010;&#22320;&#22336;&#37197;&#32622;&#20102;&#27515;&#20449;&#22320;&#22336;&#30340;&#35805;&#65292;&#36825;&#26679;&#30340;&#28040;&#24687;&#23601;&#20250;&#34987;&#21457;&#36865;&#21040;&#35813;&#22320;&#22336;&#30340;&#27515;&#20449;&#22320;&#22336;&#65288;DLA&#65289;&#12290;</p><p><tt class="literal">address-full-policy</tt>&#12290;&#36825;&#20010;&#23646;&#24615;&#26377;&#19977;&#20010;&#21487;&#33021;&#30340;&#20540;&#65306;PAGE&#12289; DROP &#25110; BLOCK&#12290;&#23427;&#20915;&#23450;&#20102;
            &#22914;&#26524;&#22320;&#22336;&#30340;&#28040;&#24687;&#25152;&#21344;&#29992;&#30340;&#20869;&#23384;&#36798;&#21040;&#20102;<tt class="literal">max-size-bytes</tt>&#25152;&#23450;&#20041;&#30340;&#20540;&#26102;&#65292;&#22914;&#20309;&#22788;&#29702;&#21518;&#32487;&#21040;&#26469;&#30340;&#28040;&#24687;&#12290;
            &#40664;&#35748;&#20540;&#26159;PAGE&#65292;&#23601;&#26159;&#23558;&#21518;&#32493;&#30340;&#28040;&#24687;&#20998;&#39029;&#36716;&#23384;&#21040;&#30913;&#30424;&#19978;&#12290;DROP&#21017;&#34920;&#31034;&#20002;&#24323;&#21518;&#32493;&#30340;&#28040;&#24687;&#12290;BLOCK&#34920;&#31034;&#38459;&#22622;&#28040;&#24687;&#30340;&#21457;&#36865;&#26041;&#21457;&#36865;&#21518;&#32493;
            &#30340;&#28040;&#24687;&#12290;&#21442;&#35265;<a href="flow-control.html" title="Chapter&nbsp;19.&nbsp;&#27969;&#25511;&#21046;">Chapter&nbsp;19, <i>&#27969;&#25511;&#21046;</i></a>&#21644;<a href="paging.html" title="Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;">Chapter&nbsp;24, <i>&#20998;&#39029;&#36716;&#23384;</i></a>&#12290;
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="paging.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="scheduled-messages.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;24.&nbsp;&#20998;&#39029;&#36716;&#23384;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;26.&nbsp;&#23450;&#26399;&#28040;&#24687;</td></tr></table></div></body></html>