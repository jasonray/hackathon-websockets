<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;&#20351;&#29992;HornetQ&#26381;&#21153;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="architecture.html" title="Chapter&nbsp;5.&nbsp;&#24635;&#20307;&#26550;&#26500;"><link rel="next" href="using-jms.html" title="Chapter&nbsp;7.&nbsp;&#20351;&#29992;JMS"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;&#20351;&#29992;HornetQ&#26381;&#21153;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="architecture.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="using-jms.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="using-server"></a>Chapter&nbsp;6.&nbsp;&#20351;&#29992;HornetQ&#26381;&#21153;</h2></div></div><div></div></div><p>&#26412;&#31456;&#23558;&#20171;&#32461;&#22914;&#20309;&#20351;&#29992;HornetQ&#26381;&#21153;&#12290;</p><p>&#20854;&#20013;&#30340;&#20869;&#23481;&#21253;&#25324;&#26381;&#21153;&#22120;&#30340;&#20301;&#32622;&#65292;&#22914;&#20309;&#21551;&#21160;&#21644;&#20572;&#27490;HornetQ&#26381;&#21153;&#22120;&#12290;&#26412;&#31456;&#36824;&#23558;&#35299;&#37322;HornetQ&#30340;&#30446;&#24405;&#32467;&#26500;&#65292;&#20854;&#20013;&#30340;&#25991;&#20214;&#21450;&#20854;&#29992;&#36884;&#12290;</p><p>&#26412;&#31456;&#20013;&#25152;&#25552;&#21040;&#30340;HornetQ&#26381;&#21153;&#22120;&#26159;&#25351;HornetQ&#40664;&#35748;&#37197;&#32622;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#65292;&#21253;&#21547;JMS&#26381;&#21153;&#21644;JNDI&#26381;&#21153;&#12290;</p><p>&#23545;&#20110;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#30340;HornetQ&#65292;&#20854;&#22522;&#26412;&#32467;&#26500;&#26159;&#19968;&#26679;&#30340;&#65292;&#21482;&#26159;&#26377;&#19968;&#20123;&#23567;&#30340;&#24046;&#21035;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e603"></a>6.1.&nbsp;&#26381;&#21153;&#30340;&#21551;&#21160;&#21644;&#20572;&#27490;</h2></div></div><div></div></div><p>&#22312;HornetQ&#30340;&#23433;&#35013;&#30446;&#24405;&#19979;<tt class="literal">bin</tt>&#23376;&#30446;&#24405;&#20013;&#21253;&#21547;&#26377;&#19968;&#20010;unit/linux&#33050;&#26412;run.sh&#21644;&#23545;&#24212;&#30340;Windows&#25209;&#22788;&#29702;&#25991;&#20214;run.bat&#12290;</p><p>&#22914;&#26524;&#20320;&#26159;&#22312;Unix/Linux&#29615;&#22659;&#65292;&#22312;bin&#30446;&#24405;&#19979;&#36816;&#34892;<tt class="literal">./run.sh</tt>&#12290;</p><p>&#22914;&#26524;&#26159;&#22312;Windows&#29615;&#22659;&#65292;&#21017;&#22312;bin&#30446;&#24405;&#19979;&#36816;&#34892; <tt class="literal">run.bat</tt>&#12290;</p><p>&#36825;&#20010;&#33050;&#26412;&#25991;&#20214;&#20250;&#35774;&#32622;classpath&#20197;&#21450;&#21508;&#31181;JVM&#21442;&#25968;&#65292;&#24182;&#21551;&#21160;JBoss Microcontainer&#12290;JBoss Microcontainer&#26159;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#23481;&#22120;&#12290;
              &#23427;&#34987;&#29992;&#26469;&#37096;&#32626;HornetQ&#30340;POJO&#23545;&#35937;&#12290;</p><p>&#35201;&#20572;&#27490;&#26381;&#21153;&#65292;&#36816;&#34892;&#20854;&#20013;&#30340;&#30456;&#24212;&#33050;&#26412;&#65306;&#22312;Unix/Linux&#29615;&#22659;&#19979;&#65292;&#36816;&#34892; <tt class="literal">stop.sh</tt>&#12290;
              &#22312;Windows&#29615;&#22659;&#65292;&#36816;&#34892; <tt class="literal">run.bat</tt>&#12290;</p><p>&#27880;&#24847;HornetQ&#38656;&#35201;&#22312;Java 6&#21450;&#20197;&#19978;&#29256;&#26412;&#25165;&#33021;&#27491;&#24120;&#36816;&#34892;&#12290;</p><p>&#21551;&#21160;&#21644;&#20572;&#27490;&#33050;&#26412;&#22312;&#40664;&#35748;&#26465;&#20214;&#19979;&#35835;&#21462;<tt class="literal">config/stand-alone/non-clustered</tt>&#30446;&#24405;&#19979;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
              &#22914;&#26524;&#35201;&#25351;&#21521;&#20854;&#20182;&#30446;&#24405;&#65292;&#21487;&#20197;&#22312;&#21629;&#20196;&#34892;&#23454;&#29616;&#65292;&#20363;&#22914;&#65306; <tt class="literal">./run.sh ../config/stand-alone/clustered</tt>&#12290;
              &#36825;&#19968;&#26041;&#27861;&#21516;&#26679;&#36866;&#29992;&#20110;Windows&#25209;&#22788;&#29702;&#25991;&#20214;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e641"></a>6.2.&nbsp;&#26381;&#21153;&#22120;&#31471;JVM&#21442;&#25968;&#30340;&#35774;&#32622;</h2></div></div><div></div></div><p>&#22312;&#21551;&#21160;&#33050;&#26412;<tt class="literal">run.sh</tt>&#21644;<tt class="literal">run.bat</tt>&#20013;&#35774;&#32622;&#20102;&#19968;&#20123;JVM&#21442;&#25968;&#65292;
              &#36825;&#20123;&#21442;&#25968;&#20027;&#35201;&#26159;&#35843;&#25972;Java 6&#30340;&#36816;&#34892;&#29615;&#22659;&#21450;&#25289;&#22334;&#22238;&#25910;&#30340;&#31574;&#30053;&#12290;&#25105;&#20204;&#24314;&#35758;&#37319;&#29992;&#24182;&#34892;&#25289;&#22334;&#22238;&#25910;&#30340;&#26041;&#27861;&#12290;
              &#36825;&#31181;&#26041;&#27861;&#21487;&#20197;&#23558;&#25289;&#22334;&#22238;&#25910;&#25152;&#36896;&#25104;&#30340;&#24310;&#26102;&#36827;&#34892;&#24179;&#22343;&#20998;&#37197;&#65292;&#26377;&#25928;&#20943;&#23569;&#30001;&#20110;&#25289;&#22334;&#22238;&#25910;&#24341;&#36215;&#30340;&#38271;&#26102;&#38388;&#26242;&#20572;&#30340;&#24773;&#20917;&#12290;</p><p>&#40664;&#35748;&#26465;&#20214;&#19979;HornetQ&#38656;&#35201;&#26368;&#22823;1GB&#30340;&#20869;&#23384;&#31354;&#38388;&#12290;&#36890;&#36807;<tt class="literal">-Xms</tt>&#21644;<tt class="literal">-Xmx</tt>&#21487;&#20197;&#35843;&#25972;Java&#31243;&#24207;&#20869;&#23384;&#30340;&#20351;&#29992;&#12290;</p><p>&#20320;&#21487;&#20197;&#21521;&#21551;&#21160;&#33050;&#26412;&#20013;&#28155;&#21152;&#20854;&#23427;&#30340;&#21442;&#25968;&#25110;&#20462;&#25913;&#24050;&#26377;&#30340;&#21442;&#25968;&#65292;&#24050;&#28385;&#36275;&#20320;&#30340;&#38656;&#35201;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e662"></a>6.3.&nbsp;&#26381;&#21153;&#22120;&#31471;&#30340;classpath</h2></div></div><div></div></div><p>HornetQ&#22312;&#20854;classpath&#20013;&#23547;&#25214;&#37197;&#32622;&#25991;&#20214;&#12290;</p><p>classpath&#34987;&#23450;&#20041;&#22312;<tt class="literal">run.sh</tt>&#21644;<tt class="literal">run.bat</tt>&#33050;&#26412;&#20013;&#12290;&#22312;HornetQ&#30340;&#21457;&#24067;&#20013;&#65292;&#21551;&#21160;&#33050;&#26412;&#23558;&#38750;&#38598;&#32676;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#21152;&#36827;&#20102;classpath&#20013;&#12290;&#35813;&#30446;&#24405;&#21253;&#25324;&#20102;&#19968;&#32452;&#37197;&#32622;&#25991;&#20214;&#65292;&#21487;&#20197;&#35753;HornetQ&#20197;&#22522;&#26412;&#30340;&#38750;&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#12290;&#23427;&#30340;&#20855;&#20307;&#20301;&#32622;&#26159;&#22312;HornetQ&#21457;&#24067;&#26681;&#30446;&#24405;&#19979; config/stand-along/non-clustered/ &#23376;&#30446;&#24405;&#12290;</p><p>&#22312;HornetQ&#30340;&#21457;&#24067;&#21253;&#20013;&#21253;&#25324;&#20102;&#19968;&#32452;&#26631;&#20934;&#30340;&#37197;&#32622;&#30446;&#24405;&#65292;&#23427;&#20204;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#38750;&#38598;&#32676;&#26041;&#24335;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#37197;&#32622;</p></li><li><p>&#38598;&#32676;&#26041;&#24335;&#30340;&#29420;&#31435;&#26381;&#21153;&#22120;&#37197;&#32622;</p></li><li><p>&#38750;&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;</p></li><li><p>&#38598;&#32676;&#26041;&#24335;&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;</p></li></ul></div><p>&#24403;&#28982;&#20320;&#21487;&#20197;&#21019;&#24314;&#33258;&#24049;&#23450;&#20041;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#12290;&#35201;&#27880;&#24847;&#30340;&#26159;&#23558;&#20320;&#30340;&#30446;&#24405;&#21152;&#21040;classpath&#20013;&#20197;&#20415;HornetQ&#33021;&#27491;&#30830;&#25214;&#21040;&#24182;&#21152;&#36733;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-server.library.path"></a>6.4.&nbsp;Library Path</h2></div></div><div></div></div><p>&#22914;&#26524;&#35201;&#22312;Linux&#19978;&#20351;&#29992;&#24322;&#27493;IO&#30340;&#26085;&#24535;&#65288;<a href="persistence.html#aio-journal">Asynchronous IO Journal</a>&#65289;&#65292;
              &#20320;&#38656;&#35201;&#22312;java&#36873;&#39033;&#20013;&#25351;&#23450;<tt class="literal">java.library.path</tt>&#12290;<tt class="literal">run.sh</tt>&#33050;&#26412;&#21487;&#20197;&#33258;&#21160;&#23436;&#25104;&#36825;&#19968;&#27493;&#12290;</p><p>&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;<tt class="literal">java.library.path</tt>&#65292;JVM&#23558;&#20351;&#29992;<tt class="literal">LD_LIBRARY_PATH</tt>&#29615;&#22659;&#21464;&#37327;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e714"></a>6.5.&nbsp;&#31995;&#32479;&#21464;&#37327;</h2></div></div><div></div></div><p>HornetQ&#21629;&#20196;&#34892;&#21487;&#20197;&#25509;&#21463;&#31995;&#32479;&#21464;&#37327;&#26469;&#37197;&#32622;&#26085;&#24535;&#65288;logging&#65289;&#12290;&#26377;&#20851;logging&#37197;&#32622;&#30340;&#20855;&#20307;&#20449;&#24687;&#21442;&#35265;<a href="logging.html" title="Chapter&nbsp;42.&nbsp;&#26085;&#24535;&#65288;Logging&#65289;">Chapter&nbsp;42, <i>&#26085;&#24535;&#65288;Logging&#65289;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="using-server.configuration"></a>6.6.&nbsp;&#37197;&#32622;&#25991;&#20214;</h2></div></div><div></div></div><p>&#37197;&#32622;&#25991;&#20214;&#30340;&#36335;&#24452;&#23450;&#20041;&#22312; <tt class="literal">run.sh</tt> &#21644; <tt class="literal">run.bat</tt> &#33050;&#26412;&#20013;&#30340;classpath&#37324;&#12290;&#35813;&#36335;&#24452;&#19979;&#21487;&#20197;&#21253;&#21547;&#20197;&#19979;&#25991;&#20214;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">hornetq-beans.xml</tt> &#65288;&#22914;&#26524;&#26159;&#36816;&#34892;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#65292;&#21017;&#20026; <tt class="literal">hornetq-jboss-beans.xml</tt>&#65289;&#12290;&#36825;&#26159;JBoss Microcontainer&#30340;bean&#37197;&#32622;&#25991;&#20214;&#12290;&#20854;&#20013;&#23450;&#20041;&#20102;HornetQ&#30340;
                    &#21508;&#31181;bean&#65292;&#20197;&#21450;&#23427;&#20204;&#20043;&#38388;&#30340;&#20381;&#36182;&#20851;&#31995;&#12290;HornetQ&#30340;bean&#37117;&#26159;&#19968;&#20123;POJO&#12290;&#26159;JBoss Microcontainer&#20445;&#35777;&#20102;&#36825;&#20123;bean&#30340;&#27491;&#30830;&#35013;&#36733;&#21644;&#36816;&#34892;&#12290;</p></li><li><p><tt class="literal">hornetq-configuration.xml</tt>&#12290;&#36825;&#20010;&#26159;HornetQ&#30340;&#20027;&#35201;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;
                    &#20854;&#20013;&#30340;&#25152;&#26377;&#21442;&#25968;&#22312;<a href="configuration-index.html" title="Chapter&nbsp;47.&nbsp;&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;">Chapter&nbsp;47, <i>&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;</i></a>&#20013;&#32473;&#20986;&#20102;&#35299;&#37322;. &#22312; <a href="using-server.html#usingserver.mainconfig" title="6.9.&nbsp;&#20027;&#37197;&#32622;&#25991;&#20214;">Section&nbsp;6.9, &#8220;&#20027;&#37197;&#32622;&#25991;&#20214;&#8221;</a> &#20063;&#26377;&#26356;&#22810;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290;</p></li><li><p><tt class="literal">hornetq-queues.xml</tt>&#12290;&#36825;&#20010;&#25991;&#20214;&#37324;&#21253;&#21547;&#20102;&#39044;&#23450;&#20041;&#30340;queue&#20197;&#21450;&#23427;&#20204;&#30340;&#37197;&#32622;&#65292;&#21253;&#25324;&#23433;&#20840;&#35774;&#32622;&#12290;
                    &#36825;&#26159;&#19968;&#20010;&#21487;&#36873;&#30340;&#25991;&#20214;&#65292;&#37324;&#38754;&#25152;&#26377;&#30340;&#20869;&#23481;&#37117;&#21487;&#20197;&#25918;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;
                    &#22312;&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;&#30446;&#24405;&#19979;&#24182;&#27809;&#26377;&#36825;&#20010;&#25991;&#20214;&#12290;HornetQ&#20043;&#25152;&#20197;&#25552;&#20379;&#36825;&#20010;&#25991;&#20214;&#26159;&#20026;&#20102;&#29992;&#25143;&#20415;&#20110;&#31649;&#29702;&#20182;&#20204;&#30340;queue&#12290;&#22312;classpath&#20013;
                    &#20801;&#35768;&#21253;&#21547;&#22810;&#20010; <tt class="literal">hornetq-queues.xml</tt> &#25991;&#20214;&#12290;&#25152;&#26377;&#30340;&#36825;&#20123;&#25991;&#20214;&#37117;&#20250;&#34987;&#21152;&#36733;&#12290;</p></li><li><p><tt class="literal">hornetq-users.xml</tt>&#12290;&#29992;&#25143;&#20449;&#24687;&#25991;&#20214;&#12290;HornetQ&#26412;&#36523;&#23454;&#29616;&#20102;&#19968;&#20010;&#22522;&#26412;&#30340;
                    &#23433;&#20840;&#31649;&#29702;&#22120;&#65288;security manager&#65289;&#65292;&#23427;&#20174;&#36825;&#20010;&#25991;&#20214;&#20869;&#35835;&#21462;&#29992;&#25143;&#30340;&#23433;&#20840;&#20449;&#24687;&#65292;&#22914;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#21644;&#35282;&#33394;&#12290;
                    &#24819;&#20102;&#35299;&#26356;&#22810;&#20851;&#20110;&#23433;&#20840;&#30340;&#20449;&#24687;&#65292;&#21442;&#35265; <a href="security.html" title="Chapter&nbsp;31.&nbsp;&#23433;&#20840;">Chapter&nbsp;31, <i>&#23433;&#20840;</i></a>&#12290;</p></li><li><p><tt class="literal">hornetq-jms.xml</tt>&#12290;&#36825;&#20010;&#25991;&#20214;&#21253;&#21547;&#26377;JMS&#23545;&#35937;&#12290;HornetQ&#30340;&#40664;&#35748;&#37197;&#32622;&#20013;&#21253;&#21547;&#26377;JMS&#26381;&#21153;&#65292;
                    &#23427;&#20174;&#36825;&#20010;&#25991;&#20214;&#20013;&#35835;&#21462;JMS Queue&#65292;Topic&#21644;ConnectionFactory&#24182;&#23558;&#23427;&#20204;&#37096;&#32626;&#21040;JNDI&#26381;&#21153;&#20013;&#12290;&#22914;&#26524;&#20320;&#19981;&#20351;&#29992;JMS&#65292;
                    &#25110;&#32773;&#20320;&#19981;&#38656;&#35201;&#37096;&#32626;&#36825;&#20123;JMS&#23545;&#35937;&#65292;&#37027;&#20040;&#20320;&#23601;&#19981;&#38656;&#35201;&#36825;&#20010;&#25991;&#20214;&#12290;&#26377;&#20851;JMS&#30340;&#20351;&#29992;&#35814;&#35265;<a href="using-jms.html" title="Chapter&nbsp;7.&nbsp;&#20351;&#29992;JMS">Chapter&nbsp;7, <i>&#20351;&#29992;JMS</i></a>&#12290;</p></li><li><p><tt class="literal">logging.properties</tt> &#36825;&#20010;&#25991;&#20214;&#29992;&#20110;&#37197;&#32622;logging
                    handlers&#12290;&#35814;&#35265; <a href="logging.html" title="Chapter&nbsp;42.&nbsp;&#26085;&#24535;&#65288;Logging&#65289;">Chapter&nbsp;42, <i>&#26085;&#24535;&#65288;Logging&#65289;</i></a>&#12290;</p></li><li><p><tt class="literal">log4j.xml</tt>&#12290; &#36825;&#26159; Log4j handler&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#23558;<tt class="literal">file-deployment-enabled</tt> &#21442;&#25968;
                  &#23450;&#20041;&#20026;false&#65292;&#21017;HornetQ&#23558;&#19981;&#20250;&#21152;&#36733;&#20854;&#23427;&#30340;&#37197;&#32622;&#25991;&#20214;&#12290;&#36825;&#20010;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#26159;true&#12290;</p></div><p>&#25152;&#26377;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#21442;&#25968;&#37117;&#21487;&#20197;&#29992;&#31995;&#32479;&#21464;&#37327;&#26469;&#23450;&#20041;&#20854;&#20540;&#12290;&#20197;&#19979;&#29992;&#19968;&#20010;connector&#30340;&#37197;&#32622;&#26469;&#35828;&#26126;&#65306;</p><pre class="programlisting">&lt;connector name="netty"&gt;
         &lt;factory-class&gt;org.hornetq.integration.transports.netty.NettyConnectorFactory
           &lt;/factory-class&gt;
         &lt;param key="host"  value="${hornetq.remoting.netty.host:localhost}" type="String"/&gt;
         &lt;param key="port"  value="${hornetq.remoting.netty.port:5445}" type="Integer"/&gt;
&lt;/connector&gt;</pre><p>&#22312;&#19978;&#38754;&#30340;&#37197;&#32622;&#20013;&#25105;&#20204;&#23450;&#20041;&#20102;&#20004;&#20010;&#31995;&#32479;&#21464;&#37327; <tt class="literal">hornetq.remoting.netty.host</tt> &#21644; <tt class="literal">hornetq.remoting.netty.port</tt>&#12290;&#23427;&#20204;&#30340;&#20540;&#20250;&#34987;&#30456;&#24212;&#30340;&#31995;&#32479;&#21464;&#37327;&#30340;&#20540;&#65288;&#22914;&#26524;&#23450;&#20041;&#20102;&#30340;&#35805;&#65289;&#25152;&#26367;&#20195;&#12290;
                &#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36825;&#20123;&#31995;&#32479;&#21464;&#37327;&#65292;&#23427;&#20204;&#30340;&#40664;&#35748;&#20540;&#23558;&#20998;&#21035;&#20026; localhost &#21450; 5445&#12290;&#20063;&#21487;&#20197;&#19981;&#32473;&#20986;&#40664;&#35748;&#20540;&#65292;&#20294;&#22914;&#26524;&#36825;&#26679;&#23601;
                <span class="emphasis"><em>&#24517;&#39035;</em></span>&#35201;&#23450;&#20041;&#30456;&#24212;&#30340;&#31995;&#32479;&#21464;&#37327;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="server.microcontainer.configuration"></a>6.7.&nbsp;JBoss Microcontainer Beans &#25991;&#20214;</h2></div></div><div></div></div><p>HornetQ&#30340;POJO&#23545;&#35937;&#26159;&#30001;<a href="http://www.jboss.org/jbossmc/" target="_top"> JBoss Microcontainer
            </a>&#36827;&#34892;&#21152;&#36733;&#21644;&#36816;&#34892;&#30340;&#12290;JBoss Microcontainer&#26159;&#19968;&#20010;&#36731;&#37327;&#32423;&#30340;&#21152;&#36733;&#24037;&#20855;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#26159;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#36816;&#34892;&#65292;HornetQ&#21516;&#26679;&#38656;&#35201;&#19968;&#20010;bean&#30340;&#37197;&#32622;&#25991;&#20214;&#26469;&#23558;&#20854;&#37096;&#32626;&#21040;JBoss&#20013;&#12290;&#20294;&#26159;&#36825;&#19982;&#21333;&#29420;&#36816;&#34892;&#26102;&#30340;&#37197;&#32622;&#25991;&#20214;&#30053;&#26377;&#19981;&#21516;&#12290;
                &#36825;&#26159;&#22240;&#20026;&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#24050;&#32463;&#37096;&#32626;&#20102;&#19968;&#20123;&#26381;&#21153;&#65292;&#22914;&#23433;&#20840;&#26381;&#21153;&#31561;&#12290;&#25152;&#20197;&#22312;HornetQ&#20013;&#36825;&#20123;&#26381;&#21153;&#23601;&#19981;&#38656;&#35201;&#20877;&#37096;&#32626;&#20102;&#12290;</p></div><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;HornetQ&#20316;&#20026;&#21333;&#29420;&#26381;&#21153;&#22120;&#26102;&#30340;&#19968;&#20010;&#37197;&#32622;&#25991;&#20214;&#20363;&#23376;&#65306;</p><p>
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;deployment xmlns="urn:jboss:bean-deployer:2.0"&gt;

&lt;bean name="Naming" class="org.jnp.server.NamingBeanImpl"/&gt;

&lt;!-- JNDI server. Disable this if you don't want JNDI --&gt;
&lt;bean name="JNDIServer" class="org.jnp.server.Main"&gt;
   &lt;property name="namingInfo"&gt;
      &lt;inject bean="Naming"/&gt;
   &lt;/property&gt;
   &lt;property name="port"&gt;1099&lt;/property&gt;
   &lt;property name="bindAddress"&gt;localhost&lt;/property&gt;
   &lt;property name="rmiPort"&gt;1098&lt;/property&gt;
   &lt;property name="rmiBindAddress"&gt;localhost&lt;/property&gt;
&lt;/bean&gt;

&lt;!-- MBean server --&gt;
&lt;bean name="MBeanServer" class="javax.management.MBeanServer"&gt;
   &lt;constructor factoryClass="java.lang.management.ManagementFactory"
      factoryMethod="getPlatformMBeanServer"/&gt;
&lt;/bean&gt; 

&lt;!-- The core configuration --&gt;
&lt;bean name="Configuration" class="org.hornetq.core.config.impl.FileConfiguration"&gt;
&lt;/bean&gt;

&lt;!-- The security manager --&gt;
&lt;bean name="HornetQSecurityManager" 
      class="org.hornetq.spi.core.security.HornetQSecurityManagerImpl"&gt;
   &lt;start ignored="true"/&gt;
   &lt;stop ignored="true"/&gt;
&lt;/bean&gt;

&lt;!-- The core server --&gt;
&lt;bean name="HornetQServer" class="org.hornetq.core.server.impl.HornetQServerImpl"&gt;
   &lt;start ignored="true"/&gt;
   &lt;stop ignored="true"/&gt;  
   &lt;constructor&gt;
      &lt;parameter&gt;
         &lt;inject bean="Configuration"/&gt;
      &lt;/parameter&gt;
      &lt;parameter&gt;
         &lt;inject bean="MBeanServer"/&gt;
      &lt;/parameter&gt;
      &lt;parameter&gt;
         &lt;inject bean="HornetQSecurityManager"/&gt;
      &lt;/parameter&gt;        
   &lt;/constructor&gt;         
&lt;/bean&gt;

&lt;!-- The JMS server --&gt;
&lt;bean name="JMSServerManager" 
      class="org.hornetq.jms.server.impl.JMSServerManagerImpl"&gt;
   &lt;constructor&gt;         
      &lt;parameter&gt;
         &lt;inject bean="HornetQServer"/&gt;
      &lt;/parameter&gt;         
   &lt;/constructor&gt;
&lt;/bean&gt;

&lt;/deployment&gt;</pre><p>
        </p><p>&#25105;&#20204;&#20174;&#19978;&#21487;&#20197;&#30475;&#20986;HornetQ&#30340;&#21333;&#29420;&#26381;&#21153;&#22120;&#65288;&#20197;&#21450;&#26680;&#24515;&#26381;&#21153;&#22120;&#65289;&#21253;&#25324;&#20102;&#19968;&#20123;POJO&#23545;&#35937;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>JNDIServer</p><p>&#24456;&#22810;&#23458;&#25143;&#31471;&#38656;&#35201;JNDI&#26469;&#33719;&#21462;JMS&#30340;&#23545;&#35937;&#65292;&#22240;&#27492;&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;JNDI&#26381;&#21153;&#26469;&#28385;&#36275;&#23427;&#20204;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;JNDI&#65292;&#21487;&#20197;&#22312;&#37197;&#32622;
                      &#25991;&#20214;&#20013;&#23558;&#23427;&#20204;&#27880;&#37322;&#25481;&#12290;</p></li><li><p>MBeanServer</p><p>&#36825;&#20010;&#23545;&#35937;&#25552;&#20379;&#20102;JMX&#31649;&#29702;&#25509;&#21475;&#12290;&#23427;&#26159;&#19968;&#20010;MBean&#26381;&#21153;&#22120;&#65292;&#21487;&#31649;&#29702;&#30340;&#23545;&#35937;&#21487;&#20197;&#27880;&#20876;&#21040;&#36825;&#20010;&#26381;&#21153;&#22120;&#19978;&#12290;
                      &#36890;&#24120;&#36825;&#23601;&#26159;&#19968;&#20010;JVM&#20869;&#37096;&#30340;&#40664;&#35748;&#30340;&#24179;&#21488;MBean&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;&#20123;&#26381;&#21153;&#65292;&#21487;&#20197;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#23558;&#20854;&#27880;&#37322;&#25110;&#21024;&#38500;&#12290;</p></li><li><p>Configuration</p><p>&#36825;&#26159;HornetQ&#30340;Configuration&#23545;&#35937;&#12290;&#40664;&#35748;&#26102;&#23427;&#26159;&#19968;&#20010;FileConfiguration&#23545;&#35937;&#12290;&#23427;&#21487;&#20197;&#20174;&#25991;&#20214;&#31995;&#32479;&#20013;&#35835;&#21462;
                    &#37197;&#32622;&#20449;&#24687;&#12290;&#26377;&#20123;&#24773;&#20917;&#19979;&#65288;&#22914;&#23884;&#20837;&#24335;HornetQ&#65289;&#20320;&#21487;&#20197;&#23558;&#23427;&#23450;&#20041;&#20026;&#20854;&#23427;&#23545;&#35937;&#65292;&#20197;&#20415;&#29992;&#20854;&#23427;&#26041;&#27861;&#33719;&#24471;&#37197;&#32622;&#20449;&#24687;&#12290;</p></li><li><p>Security Manager. &#21487;&#37197;&#32622;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#20351;&#29992; <tt class="literal">hornetq-users.xml</tt> &#25991;&#20214;&#20013;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;
                    &#23427;&#20063;&#21487;&#20197;&#37197;&#32622;&#20026;&#19968;&#20010;JAAS&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#24403;HornetQ&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;&#26102;&#65292;&#23427;&#36824;&#21487;&#20197;&#37197;&#32622;&#20026;JBoss&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#20197;&#36798;&#21040;&#26356;&#32039;&#23494;&#30340;&#38598;&#25104;&#12290;
                    &#22914;&#26524;&#19981;&#38656;&#35201;&#23433;&#20840;&#31649;&#29702;&#65292;&#20320;&#20063;&#21487;&#20197;&#23558;&#23427;&#21024;&#38500;&#12290;</p></li><li><p>HornetQServer</p><p>&#36825;&#26159;HornetQ&#30340;&#26680;&#24515;&#26381;&#21153;&#23545;&#35937;&#65292;&#20960;&#20046;&#25152;&#26377;&#30340;&#26680;&#24515;&#21151;&#33021;&#37117;&#22312;&#36825;&#37324;&#12290;</p></li><li><p><a name="bean-jmsservermanager"></a>JMSServerManager</p><p>&#36825;&#20010;&#23545;&#35937;&#23558;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;JMS&#30340;&#23545;&#35937;&#36827;&#34892;&#37096;&#32626;&#65292;&#27604;&#22914;JMS Queues, Topics
                      &#20197;&#21450;ConnectionFactory&#12290;&#23427;&#36824;&#25552;&#20379;&#19968;&#22871;&#31616;&#21333;&#30340;&#31649;&#29702;&#25509;&#21475;&#20197;&#26041;&#20415;&#22320;&#23545;&#36825;&#20123;JMS&#23545;&#35937;&#36827;&#34892;&#31649;&#29702;&#12290;&#36890;&#24120;&#23427;&#21482;&#26159;&#23558;&#24037;&#20316;&#20195;&#29702;&#32473;
                      &#26680;&#24515;&#26381;&#21153;&#22120;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#36827;&#34892;JMS&#23545;&#35937;&#30340;&#37096;&#32626;&#19982;&#31649;&#29702;&#65292;&#21487;&#20197;&#23558;&#23427;&#20174;&#37197;&#32622;&#20013;&#21435;&#25481;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="server.microkernel.configuration"></a>6.8.&nbsp;JBoss AS4 MBean &#26381;&#21153;</h2></div></div><div></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#26412;&#33410;&#21482;&#35752;&#35770;&#22312;JBoss AS 4&#19978;&#37197;&#32622;HornetQ&#12290;&#20854;&#19982;JBoss Microcontainer&#30340;&#37197;&#32622;&#24456;&#30456;&#20284;&#12290;</p></div><p>
            </p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;server&gt;

   &lt;mbean code="org.hornetq.service.HornetQFileConfigurationService"
      name="org.hornetq:service=HornetQFileConfigurationService"&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.JBossASSecurityManagerService"
      name="org.hornetq:service=JBossASSecurityManagerService"&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.HornetQStarterService" 
      name="org.hornetq:service=HornetQStarterService"&gt;
      &lt;!--lets let the JMS Server start us--&gt;
         &lt;attribute name="Start"&gt;false&lt;/attribute&gt;

      &lt;depends optional-attribute-name="SecurityManagerService"
         proxy-type="attribute"&gt;org.hornetq:service=JBossASSecurityManagerService&lt;/depends&gt;
      &lt;depends optional-attribute-name="ConfigurationService"
         proxy-type="attribute"&gt;org.hornetq:service=HornetQFileConfigurationService&lt;/depends&gt;
   &lt;/mbean&gt;

   &lt;mbean code="org.hornetq.service.HornetQJMSStarterService"
      name="org.hornetq:service=HornetQJMSStarterService"&gt;
      &lt;depends optional-attribute-name="HornetQServer"
         proxy-type="attribute"&gt;org.hornetq:service=HornetQStarterService&lt;/depends&gt;
   &lt;/mbean&gt;
   
&lt;/server&gt;
            </pre><p>
        </p><p>&#36825;&#20010;jboss-service.xml&#21253;&#21547;&#22312;hornetq-service.sar&#25991;&#20214;&#20013;&#65292;&#23427;&#29992;&#26469;&#37197;&#32622;AS4&#20013;&#23884;&#20837;&#36816;&#34892;&#30340;HornetQ&#12290;
              &#22312;&#36825;&#20010;&#37197;&#32622;&#25991;&#20214;&#20013;&#25105;&#20204;&#21551;&#21160;&#20102;&#20197;&#19979;&#20960;&#20010;&#26381;&#21153;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>HornetQFileConfigurationService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#30340;&#20219;&#21153;&#26159;&#31649;&#29702; <tt class="literal">FileConfiguration POJO</tt>&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;</p></li><li><p>JBossASSecurityManagerService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528; <tt class="literal">JBossASSecurityManager</tt> POJO&#30340;&#29983;&#21629;&#21608;&#26399;&#12290;</p></li><li><p>HornetQStarterService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528;<tt class="literal">HornetQServer</tt> POJO&#12290;&#23427;&#20381;&#36182;&#20110; JBossASSecurityManagerService &#21644;
                      HornetQFileConfigurationService &#36825;&#20004;&#20010;MBean&#12290;</p></li><li><p>HornetQJMSStarterService</p><p>&#36825;&#20010;MBean&#26381;&#21153;&#31649;&#29702;&#30528; <tt class="literal">JMSServerManagerImpl</tt> POJO&#23545;&#35937;&#12290;&#22914;&#26524;&#19981;&#38656;&#35201;JMS&#65292;&#21487;&#20197;&#21435;&#25481;&#36825;&#20010;&#26381;&#21153;&#12290;</p></li><li><p>JMSServerManager</p><p>&#29992;&#20110;&#21551;&#21160;JMSServerManager&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usingserver.mainconfig"></a>6.9.&nbsp;&#20027;&#37197;&#32622;&#25991;&#20214;</h2></div></div><div></div></div><p>HornetQ &#26680;&#24515;&#26381;&#21153;&#30340;&#37197;&#32622;&#20445;&#23384;&#22312; <tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#12290;
&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288; FileConfiguration bean &#35835;&#21462;&#36825;&#20010;&#25991;&#20214;&#26469;&#23545;&#28040;&#24687;&#26381;&#21153;&#22120;&#36827;&#34892;&#37197;&#32622;&#12290;</p><p>HornetQ&#26377;&#24456;&#22810;&#30340;&#37197;&#32622;&#21442;&#25968;&#12290;&#37319;&#29992;&#40664;&#35748;&#30340;&#37197;&#32622;&#22312;&#32477;&#22823;&#22810;&#25968;&#24773;&#20917;&#19979;&#21487;&#20197;&#24456;&#22909;&#30340;&#36816;&#34892;&#12290;&#20107;&#23454;&#19978;&#27599;&#19968;&#20010;&#21442;&#25968;&#37117;&#26377;&#40664;&#35748;&#30340;&#22788;&#29702;&#65292;&#22240;&#27492;&#19968;&#20010;&#21482;&#21253;&#21547;&#26377;&#19968;&#20010;&#31354;
              &#30340;<tt class="literal">configuration</tt>&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;&#19968;&#20010;&#26377;&#25928;&#30340;&#25991;&#20214;&#12290;&#23545;&#21508;&#20010;&#21442;&#25968;&#30340;&#35299;&#37322;&#36143;&#31359;&#20110;&#26412;&#25163;&#20876;&#12290;&#20320;&#36824;&#21487;&#21442;&#21442;&#29031;
               <a href="configuration-index.html" title="Chapter&nbsp;47.&nbsp;&#37197;&#32622;&#21442;&#25968;&#32034;&#24341;">&#36825;&#37324;</a>&#26469;&#26597;&#25214;&#20320;&#24819;&#30475;&#30340;&#21442;&#25968;&#12290;</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="architecture.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="using-jms.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;&#24635;&#20307;&#26550;&#26500;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;7.&nbsp;&#20351;&#29992;JMS</td></tr></table></div></body></html>