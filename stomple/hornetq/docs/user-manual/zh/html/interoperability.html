<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;45.&nbsp;&#20114;&#25805;&#20316;&#24615;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="intercepting-operations.html" title="Chapter&nbsp;44.&nbsp;&#25318;&#25130;&#25805;&#20316;"><link rel="next" href="perf-tuning.html" title="Chapter&nbsp;46.&nbsp;&#24615;&#33021;&#35843;&#20248;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;45.&nbsp;&#20114;&#25805;&#20316;&#24615;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="intercepting-operations.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="perf-tuning.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="interoperability"></a>Chapter&nbsp;45.&nbsp;&#20114;&#25805;&#20316;&#24615;</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="stomp"></a>45.1.&nbsp;Stomp</h2></div></div><div></div></div><p><a href="http://stomp.codehaus.org/" target="_top">Stomp</a>&#26159;&#19968;&#20010;&#22522;&#20110;&#25991;&#26412;&#30340;&#21327;&#35758;&#12290;&#20351;&#29992;Stomp&#21327;&#35758;&#30340;
            &#23458;&#25143;&#31471;&#21487;&#20197;&#19982;Stomp&#30340;&#20195;&#29702;&#65288;broker&#65289;&#36827;&#34892;&#36890;&#36805;&#12290;</p><p><a href="http://stomp.codehaus.org/Clients" target="_top">Stomp&#23458;&#25143;&#31471;</a>&#25903;&#25345;&#22810;&#31181;&#35821;&#35328;&#21644;&#24179;&#21488;&#65292;&#22240;&#27492;
        &#23427;&#26377;&#30528;&#24456;&#22909;&#30340;&#20114;&#25805;&#20316;&#24615;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stomp.native"></a>45.1.1.&nbsp;&#20869;&#24314;Stomp&#25903;&#25345;</h3></div></div><div></div></div><p>HornetQ&#20869;&#24314;&#25903;&#25345;Stomp&#21151;&#33021;&#12290;&#35201;&#20351;&#29992;Stomp&#21457;&#36865;&#19982;&#25509;&#25910;&#28040;&#24687;&#65292;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;<tt class="literal">NettyAcceptor</tt>&#65292;
            &#20854;&#20013;&#30340;<tt class="literal">protocol</tt>&#21442;&#25968;&#20540;&#24212;&#35774;&#20026;<tt class="literal">stomp</tt>&#65306;</p><pre class="programlisting">
	&lt;acceptor name="stomp-acceptor"&gt;
		&lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;		&lt;param key="protocol"  value="stomp"/&gt;
		&lt;param key="port"  value="61613"/&gt;
	&lt;/acceptor&gt;
</pre><p>&#26377;&#20102;&#19978;&#36848;&#30340;&#37197;&#32622;&#65292;HornetQ&#23601;&#21487;&#20197;&#22312;&#31471;&#21475;<tt class="literal">61613</tt>&#65288;&#36825;&#26159;Stomp&#20195;&#29702;&#30340;&#40664;&#35748;&#31471;&#21475;&#65289;&#25509;&#21463;Stomp&#36830;&#25509;&#20102;&#12290;</p><p><tt class="literal">stomp</tt>&#20363;&#23376;&#23637;&#31034;&#20102;&#22914;&#20309;&#22312;HornetQ&#20013;&#37197;&#32622;Stomp&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10800"></a>45.1.1.1.&nbsp;&#38480;&#21046;</h4></div></div><div></div></div><p>&#28040;&#24687;&#30340;&#36890;&#30693;&#19981;&#26159;&#20107;&#21153;&#24615;&#30340;&#12290;ACK&#20449;&#21495;&#19981;&#33021;&#20316;&#20026;&#20107;&#21153;&#30340;&#19968;&#37096;&#20998;&#26469;&#20256;&#36755;&#65288;&#22914;&#26524;&#35774;&#32622;&#20102;<tt class="literal">transaction</tt>
              &#23646;&#24615;&#65292;&#23427;&#23558;&#34987;&#24573;&#30053;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10808"></a>45.1.2.&nbsp;Stomp&#30446;&#26631;&#19982;HornetQ&#30340;&#22320;&#22336;&#21644;&#38431;&#21015;&#30340;&#26144;&#23556;</h3></div></div><div></div></div><p>Stomp&#23458;&#25143;&#31471;&#22312;&#28040;&#24687;&#21457;&#36865;&#21644;&#35746;&#38405;&#20013;&#20351;&#29992;&#30340;&#26159;<span class="emphasis"><em>&#30446;&#26631;&#65288;destination&#65289;</em></span>&#12290;&#30446;&#26631;&#21517;&#31216;&#26159;&#31616;&#21333;&#30340;&#23383;&#31526;&#20018;&#65292;&#23545;&#24212;&#30340;&#26159;&#26381;&#21153;
            &#22120;&#31471;&#30340;&#30446;&#30340;&#22320;&#12290;&#19981;&#21516;&#26381;&#21153;&#22120;&#23545;&#36825;&#31181;&#26144;&#23556;&#26377;&#30528;&#19981;&#21516;&#30340;&#23454;&#29616;&#12290;</p><p>&#22312;HornetQ&#20013;&#36825;&#20123;&#30446;&#26631;&#34987;&#26144;&#23556;&#20026;<span class="emphasis"><em>&#22320;&#22336;</em></span>&#21644;<span class="emphasis"><em>&#38431;&#21015;</em></span>&#12290;
            &#24403;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#21457;&#36865;&#19968;&#20010;&#28040;&#24687;&#65288;&#20351;&#29992;<tt class="literal">SEND</tt>&#20449;&#21495;&#65289;&#21040;&#19968;&#20010;&#30446;&#26631;&#26102;&#65292;&#36825;&#20010;&#30446;&#26631;&#34987;&#26144;&#23556;&#21040;&#19968;&#20010;&#22320;&#22336;&#12290;
            &#22914;&#26524;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#35746;&#38405;&#65288;&#25110;&#35299;&#38500;&#35746;&#38405;&#65289;&#19968;&#20010;&#30446;&#26631;&#26102;&#65288;&#20351;&#29992;<tt class="literal">SUBSCRIBE</tt>&#25110;
            <tt class="literal">UNSUBSCRIBE</tt>&#65289;&#65292;&#36825;&#20010;&#30446;&#26631;&#34987;&#26144;&#23556;&#21040;&#19968;&#20010;HornetQ&#30340;&#38431;&#21015;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e10833"></a>45.1.3.&nbsp;Stomp&#19982;JMS&#30340;&#20114;&#25805;&#20316;&#24615;</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10836"></a>45.1.3.1.&nbsp;&#20351;&#29992;JMS&#30446;&#26631;</h4></div></div><div></div></div><p>&#27491;&#22914;<a href="jms-core-mapping.html" title="Chapter&nbsp;9.&nbsp;JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;">Chapter&nbsp;9, <i>JMS&#19982;&#20869;&#26680;API&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;</i></a>&#35299;&#37322;&#30340;&#37027;&#26679;&#65292;JMS&#30340;&#30446;&#26631;&#21516;&#26679;&#26144;&#23556;&#21040;HornetQ&#30340;&#22320;&#22336;&#19982;&#38431;&#21015;&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;
              Stomp&#21521;JMS&#30340;&#30446;&#26631;&#21457;&#36865;&#28040;&#24687;&#65292;&#37027;&#20040;Stomp&#30340;&#30446;&#26631;&#24517;&#39035;&#35201;&#36981;&#29031;&#30456;&#21516;&#30340;&#21629;&#21517;&#35268;&#21017;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#22914;&#26524;&#21521;JMS<span class="emphasis"><em>&#38431;&#21015;</em></span>&#21457;&#36865;&#25968;&#25454;&#25110;&#35746;&#38405;&#23427;&#65292;&#21017;&#38431;&#21015;&#30340;&#21517;&#31216;&#21069;&#32512;&#24517;&#39035;&#26159;<tt class="literal">jms.queue.</tt>&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#21521;&#21517;&#20026;<tt class="literal">orders</tt>&#30340;JMS&#38431;&#21015;&#21457;&#36865;&#28040;&#24687;&#65292;Stomp&#23458;&#25143;&#31471;&#24517;&#39035;&#21457;&#36865;&#20197;&#19979;&#20449;&#24687;&#65306;</p><pre class="programlisting">
SEND
destination:jms.queue.orders

hello queue orders
^@
                </pre></li><li><p>&#22914;&#26524;&#21521;JMS <span class="emphasis"><em>&#35805;&#39064;&#65288;topic&#65289;</em></span>&#21457;&#36865;&#25110;&#35746;&#38405;&#28040;&#24687;&#65292;&#35805;&#39064;&#21517;&#31216;&#21069;&#32512;&#24517;&#39035;&#26159;<tt class="literal">jms.topic.</tt>&#12290;</p><p>&#20363;&#22914;&#65292;&#22914;&#26524;&#35746;&#38405;&#21517;&#20026; <tt class="literal">stocks</tt>&#30340;JMS&#35805;&#39064;&#65292;Stomp&#23458;&#25143;&#31471;&#24517;&#39035;&#21457;&#36865;&#20197;&#19979;&#20449;&#24687;&#65306;</p><pre class="programlisting">
  SUBSCRIBE
  destination:jms.topic.stocks
  
  ^@
                </pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="d0e10876"></a>45.1.3.2.&nbsp;&#20351;&#29992;JMS&#25110;&#26680;&#24515;&#25509;&#21475;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;</h4></div></div><div></div></div><p>Stomp&#22522;&#26412;&#19978;&#26159;&#19968;&#20010;&#22522;&#20110;&#25991;&#26412;&#30340;&#21327;&#35758;&#12290;&#20026;&#20102;&#20351;&#29992;&#26356;&#31616;&#21333;&#65292;&#25105;&#20204;&#30340;Stomp&#23454;&#29616;&#36890;&#36807;&#26816;&#26597;<tt class="literal">content-length</tt>&#30340;&#20540;
               &#26469;&#20915;&#23450;&#22914;&#20309;&#23558;&#19968;&#20010;Stomp&#28040;&#24687;&#26144;&#23556;&#25104;&#19968;&#20010;JMS&#28040;&#24687;&#25110;&#26680;&#24515;&#28040;&#24687;&#12290;
             </p><p>&#22914;&#26524;&#22312;Stomp&#28040;&#24687;&#20013;<span class="emphasis"><em>&#27809;&#26377;</em></span><tt class="literal">content-length</tt>&#22836;&#65292;&#23427;&#23558;&#34987;&#26144;&#23556;&#20026;&#19968;&#20010;JMS&#30340;
               <span class="emphasis"><em>TextMessage</em></span>&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#26680;&#24515;&#28040;&#24687;&#65292;&#20854;&#28040;&#24687;&#20307;&#30340;&#32531;&#23384;&#26159;&#19968;&#20010;SimpleString&#12290;</p><p>&#22914;&#26524;Stomp&#28040;&#24687;&#20013;<span class="emphasis"><em>&#26377;</em></span><tt class="literal">content-length</tt>&#65292;&#21017;&#23427;&#34987;&#26144;&#23556;&#20026;&#19968;&#20010;JMS&#30340;
                   <span class="emphasis"><em>BytesMessage</em></span>&#65292;&#25110;&#32773;&#26159;&#19968;&#20010;&#26680;&#24515;&#28040;&#24687;&#65292;&#20854;&#28040;&#24687;&#20307;&#32531;&#23384;&#20013;&#26159;&#19968;&#20010;&#23383;&#33410;&#25968;&#32452;byte[]&#12290;</p><p>&#20174;&#19968;&#20010;JMS&#28040;&#24687;&#25110;&#26680;&#24515;&#28040;&#24687;&#26144;&#23556;&#20026;Stomp&#28040;&#24687;&#26102;&#36981;&#20174;&#21516;&#26679;&#30340;&#36923;&#36753;&#12290;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#21487;&#20197;&#36890;&#36807;&#26816;&#26597;
                   <tt class="literal">content-length</tt>&#26469;&#20915;&#23450;&#28040;&#24687;&#20307;&#30340;&#31867;&#22411;&#65288;&#23383;&#31526;&#20018;&#25110;&#23383;&#33410;&#65289;&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stomp.websockets"></a>45.1.4.&nbsp;&#36890;&#36807;Web Sockets&#20351;&#29992;Stomp</h3></div></div><div></div></div><p>HornetQ&#36824;&#25903;&#25345;&#36890;&#36807;<a href="http://dev.w3.org/html5/websockets/" target="_top">Web Sockets</a>&#20351;&#29992;Stomp&#12290;&#20219;&#20309;&#25903;&#25345;
            Web Socket&#30340;&#27983;&#35272;&#22120;&#20013;&#21487;&#20197;&#21033;&#29992;HornetQ&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;Stomp&#28040;&#24687;&#12290;</p><p>&#35201;&#20351;&#29992;&#20123;&#21151;&#33021;&#65292;&#24517;&#39035;&#37197;&#32622;&#19968;&#20010;<tt class="literal">NettyAcceptor</tt>&#65292;&#24182;&#35774;&#32622;<tt class="literal">protocol</tt>
            &#30340;&#20540;&#20026;<tt class="literal">stomp_ws</tt>&#65306;</p><pre class="programlisting">
&lt;acceptor name="stomp-ws-acceptor"&gt;
	&lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;
	&lt;param key="protocol" value="stomp_ws"/&gt;
	&lt;param key="port" value="61614"/&gt;
&lt;/acceptor&gt;
         </pre><p>&#20351;&#29992;&#19978;&#38754;&#37197;&#32622;&#65292;HornetQ&#22312;URL&#36335;&#24452;<tt class="literal">/stomp</tt>&#19979;&#31471;&#21475;<tt class="literal">61614</tt>&#25509;&#25910;Stomp&#36830;&#25509;&#12290;
            &#27983;&#35272;&#22120;&#28982;&#21518;&#23601;&#21487;&#20197;&#36830;&#25509;&#21040;<tt class="literal">ws://&lt;server&gt;:61614/stomp</tt>&#65292;&#20351;&#29992;Web Socket&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;
            Stomp&#28040;&#24687;&#20102;&#12290;</p><p>&#20026;&#20102;&#31616;&#21270;&#23458;&#25143;&#31471;&#30340;&#24320;&#21457;&#65292;&#22312;<a href="http://github.com/jmesnil/stomp-websocket" target="_top">GitHub</a>
            &#19978;&#25552;&#20379;&#20102;&#19968;&#20010;JavaScript&#24211;&#65288;&#21442;&#35265;<a href="http://jmesnil.net/stomp-websocket/doc/" target="_top">&#25991;&#26723;</a>&#65289;&#12290;</p><p><tt class="literal">stomp-websockets</tt>&#20363;&#23376;&#32473;&#20986;&#19968;&#22914;&#20309;&#37197;&#32622;HornetQ&#26381;&#21153;&#22120;&#20197;&#20351;&#27983;&#35272;&#22120;&#21644;Java&#24212;&#29992;&#31243;&#24207;&#36890;&#36807;&#19968;&#20010;JMS&#35805;&#39064;
            &#36827;&#34892;&#28040;&#24687;&#30340;&#20256;&#36882;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="stompconnect"></a>45.1.5.&nbsp;StompConnect</h3></div></div><div></div></div><p><a href="http://stomp.codehaus.org/StompConnect" target="_top">StompConnect</a>&#26159;&#19968;&#20010;Stomp&#20195;&#29702;&#26381;&#21153;&#22120;&#65292;
            &#23427;&#21487;&#20197;&#23558;Stomp&#21327;&#35758;&#36716;&#25442;&#20026;&#26631;&#20934;&#30340;JMS&#25509;&#21475;&#35843;&#29992;&#12290;&#22240;&#27492;&#65292;&#36890;&#36807;StompConnect&#30340;&#20316;&#29992;HornetQ&#21487;&#20197;&#20316;&#20026;&#19968;&#20010;Stomp&#20195;&#29702;&#65292;
            &#19982;&#20219;&#20309;&#19968;&#20010;Stomp&#23458;&#25143;&#31471;&#36890;&#36805;&#12290;&#36825;&#20123;&#23458;&#25143;&#31471;&#21487;&#20197;&#30001;C&#12289;C++&#12289;C#&#21450;.net&#31561;&#35821;&#35328;&#23454;&#29616;&#12290;</p><p>&#35201;&#36816;&#34892;StompConnect&#39318;&#20808;&#35201;&#21551;&#21160;HornetQ&#26381;&#21153;&#20197;&#21450;JNDI&#26381;&#21153;&#12290;</p><p>Stomp&#38656;&#35201;<tt class="literal">jndi.properties</tt>&#25991;&#20214;&#35201;&#22312;classpath&#20013;&#12290;&#35813;&#25991;&#20214;
            &#24212;&#26377;&#22914;&#19979;&#31867;&#20284;&#30340;&#20869;&#23481;&#65306;</p><pre class="programlisting">java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces</pre><p>&#35201;&#30830;&#20445;&#35813;&#25991;&#20214;&#19982;StompConnect&#30340;jar&#21253;&#20197;&#21450;HornetQ&#30340;jar&#25991;&#20214;&#37117;&#22312;classpath&#20013;&#12290;&#26368;&#21518;&#65292;&#36816;&#34892;
            <tt class="literal">java org.codehaus.stomp.jms.Main</tt>&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10974"></a>45.2.&nbsp;REST</h2></div></div><div></div></div><p>HornetQ&#21363;&#23558;&#25903;&#25345;REST&#65281;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e10979"></a>45.3.&nbsp;AMQP</h2></div></div><div></div></div><p>HornetQ&#21363;&#23558;&#25903;&#25345;AMQP&#65281;</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="intercepting-operations.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="perf-tuning.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;44.&nbsp;&#25318;&#25130;&#25805;&#20316;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;46.&nbsp;&#24615;&#33021;&#35843;&#20248;</td></tr></table></div></body></html>