<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;31.&nbsp;&#23433;&#20840;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="management.html" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;"><link rel="next" href="appserver-integration.html" title="Chapter&nbsp;32.&nbsp;Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;31.&nbsp;&#23433;&#20840;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="management.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="appserver-integration.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="security"></a>Chapter&nbsp;31.&nbsp;&#23433;&#20840;</h2></div></div><div></div></div><p>&#26412;&#31456;&#35762;&#36848;HornetQ&#30340;&#23433;&#20840;&#26426;&#21046;&#20197;&#21450;&#22914;&#20309;&#37197;&#32622;&#23427;&#12290;&#35201;&#23436;&#20840;&#20851;&#38381;&#23433;&#20840;&#65292;&#21482;&#35201;&#23558;<tt class="literal">hornetq-configuration.xml</tt>
        &#25991;&#20214;&#20013;&#30340;<tt class="literal">security-enabled</tt>&#21442;&#25968;&#35774;&#20026;false&#21363;&#21487;&#12290;</p><p>&#20986;&#20110;&#24615;&#33021;&#30340;&#32771;&#34385;&#65292;&#23433;&#20840;&#22312;HornetQ&#20013;&#34987;&#32531;&#23384;&#19968;&#23450;&#30340;&#26102;&#38388;&#12290;&#35201;&#25913;&#21464;&#36825;&#20010;&#26102;&#38388;&#65292;&#38656;&#35201;&#35774;&#32622;&#21442;&#25968;
        <tt class="literal">security-invalidation-interval</tt>&#65292;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;&#40664;&#35748;&#20540;&#26159;
        <tt class="literal">10000</tt>&#27627;&#31186;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="security.settings.roles"></a>31.1.&nbsp;&#22522;&#20110;&#35282;&#33394;&#30340;&#22320;&#22336;&#23433;&#20840;</h2></div></div><div></div></div><p>HornetQ&#37319;&#29992;&#20102;&#22522;&#20110;&#35282;&#33394;&#30340;&#23433;&#20840;&#27169;&#22411;&#26469;&#37197;&#32622;&#22320;&#22336;&#30340;&#23433;&#20840;&#20197;&#21450;&#20854;&#38431;&#21015;&#30340;&#23433;&#20840;&#12290;</p><p>&#27491;&#22914;&#22312;<a href="using-core.html" title="Chapter&nbsp;8.&nbsp;&#20351;&#29992;HornetQ&#20869;&#26680;">Chapter&nbsp;8, <i>&#20351;&#29992;HornetQ&#20869;&#26680;</i></a>&#35299;&#37322;&#30340;&#37027;&#26679;&#65292;HornetQ&#26680;&#24515;&#20027;&#35201;&#30001;&#32465;&#23450;&#21040;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#32452;&#25104;&#12290;
            &#28040;&#24687;&#34987;&#21457;&#36865;&#21040;&#22320;&#22336;&#21518;&#65292;&#26381;&#21153;&#22120;&#26597;&#25214;&#19982;&#20043;&#32465;&#23450;&#30340;&#38431;&#21015;&#65292;&#24182;&#23558;&#28040;&#24687;&#36335;&#30001;&#21040;&#36825;&#20123;&#38431;&#21015;&#20013;&#12290;</p><p>HornetQ&#21487;&#20197;&#22522;&#20110;&#22320;&#22336;&#26469;&#32473;&#38431;&#21015;&#23450;&#20041;&#26435;&#38480;&#12290;&#22312;&#23450;&#20041;&#26435;&#38480;&#26102;&#21487;&#20197;&#20351;&#29992;&#36890;&#37197;&#31526;'<tt class="literal">#</tt>'&#21644;
            '<tt class="literal">*</tt>'&#12290;</p><p>&#38431;&#21015;&#30340;&#26435;&#38480;&#26377;7&#31181;&#65292;&#23427;&#20204;&#26159;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">createDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#30340;&#22320;&#22336;&#19978;&#21019;&#24314;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">deleteDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#30340;&#22320;&#22336;&#19978;&#21024;&#38500;&#30456;&#24212;&#30340;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">createNonDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#22320;&#22336;&#19978;&#21019;&#24314;&#38750;&#25345;&#20037;&#30340;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">deleteNonDurableQueue</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#22312;&#30456;&#24212;&#22320;&#22336;&#19978;&#21024;&#38500;&#38750;&#25345;&#20037;&#38431;&#21015;&#12290;</p></li><li><p><tt class="literal">send</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#21521;&#30456;&#24212;&#22320;&#22336;&#21457;&#36865;&#28040;&#24687;&#12290;</p></li><li><p><tt class="literal">consume</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#20174;&#30456;&#24212;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#12290;</p></li><li><p><tt class="literal">manage</tt>&#12290;&#20801;&#35768;&#29992;&#25143;&#35843;&#29992;&#31649;&#29702;&#25805;&#20316;&#65292;&#21363;&#21521;&#31649;&#29702;&#22320;&#22336;&#21457;&#20851;&#31649;&#29702;&#28040;&#24687;&#12290;</p></li></ul></div><p>&#27599;&#20010;&#26435;&#38480;&#26377;&#19968;&#20010;&#35282;&#33394;&#34920;&#12290;&#22914;&#26524;&#29992;&#25143;&#30340;&#35282;&#33394;&#22312;&#36825;&#20010;&#34920;&#20013;&#65292;&#37027;&#20040;&#23427;&#23558;&#25317;&#26377;&#36825;&#20010;&#26435;&#38480;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#20010;&#31616;&#21333;&#30340;&#20363;&#23376;&#12290;&#19979;&#38754;&#26159;&#20174;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#25110;
              <tt class="literal">hornetq-queues.xml</tt>&#25991;&#20214;&#20013;&#25552;&#21462;&#30340;&#23433;&#20840;&#35774;&#32622;&#65306;</p><pre class="programlisting">
&lt;security-setting match="globalqueues.europe.#"&gt;
    &lt;permission type="createDurableQueue" roles="admin"/&gt;
    &lt;permission type="deleteDurableQueue" roles="admin"/&gt;
    &lt;permission type="createNonDurableQueue" roles="admin, guest, europe-users"/&gt;
    &lt;permission type="deleteNonDurableQueue" roles="admin, guest, europe-users"/&gt;
    &lt;permission type="send" roles="admin, europe-users"/&gt;
    &lt;permission type="consume" roles="admin, europe-users"/&gt;
&lt;/security-setting&gt;            
        </pre><p>&#22312;&#37197;&#32622;&#20013;&#23383;&#31526;'<tt class="literal">#</tt>'&#20195;&#34920;"&#20219;&#20309;&#21333;&#35789;&#24207;&#21015;&#8220;&#12290;&#21333;&#35789;&#30001;'<tt class="literal">.</tt>'&#23383;&#31526;&#20998;&#38548;&#12290;
            &#26377;&#20851;&#36890;&#37197;&#31526;&#30340;&#35821;&#27861;&#30340;&#23436;&#25972;&#35828;&#26126;&#35831;&#21442;&#35265;<a href="wildcard-syntax.html" title="Chapter&nbsp;13.&nbsp;&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;">Chapter&nbsp;13, <i>&#20102;&#35299; HornetQ &#36890;&#37197;&#31526;&#30340;&#35821;&#27861;</i></a>&#12290;&#19978;&#38754;&#30340;&#23433;&#20840;&#37197;&#32622;&#23545;&#20197;
            "globalqueues.europe."&#24320;&#22987;&#30340;&#22320;&#22336;&#26377;&#25928;&#65306;</p><p>&#21482;&#26377;&#20855;&#26377;<tt class="literal">admin</tt>&#35282;&#33394;&#30340;&#29992;&#25143;&#25165;&#21487;&#20197;&#21019;&#24314;&#21644;&#21024;&#38500;&#32465;&#23450;&#21040;&#20197;"globalqueues.europe."&#24320;&#22987;&#30340;&#22320;&#22336;&#30340;&#25345;&#20037;&#21270;&#38431;&#21015;&#12290;</p><p>&#20855;&#26377;<tt class="literal">admin</tt>&#12289;<tt class="literal">guest</tt>&#25110;<tt class="literal">europe-users</tt>
              &#35282;&#33394;&#30340;&#29992;&#25143;&#21487;&#20197;&#22312;&#20197;&#24320;&#22836;&#30340;&#22320;&#22336;&#19978;&#21019;&#24314;&#20020;&#26102;&#30340;&#38431;&#21015;&#12290;</p><p>&#20219;&#20309;&#20855;&#26377;<tt class="literal">admin</tt>&#25110;<tt class="literal">europe-users</tt>&#35282;&#33394;&#30340;&#29992;&#25143;&#21487;&#20197;&#21521;&#20197;"globalqueues.europe."&#24320;&#22836;&#30340;&#22320;&#22336;
            &#21457;&#36865;&#28040;&#24687;&#65292;&#24182;&#20174;&#32465;&#23450;&#21040;&#30456;&#21516;&#22320;&#22336;&#19978;&#30340;&#38431;&#21015;&#25509;&#25910;&#28040;&#24687;&#12290;</p><p>&#23433;&#20840;&#31649;&#29702;&#22120;&#22788;&#29702;&#19968;&#20010;&#29992;&#25143;&#21644;&#23427;&#30340;&#35282;&#33394;&#30340;&#23545;&#24212;&#20851;&#31995;&#12290;HornetQ&#26412;&#36523;&#33258;&#24102;&#19968;&#20010;&#29992;&#25143;&#31649;&#29702;&#22120;&#65292;&#33021;&#20174;&#25991;&#20214;&#20013;&#35835;&#21462;&#29992;&#25143;&#30340;&#36523;&#20221;&#20449;&#24687;&#12290;
            &#21478;&#22806;HornetQ&#36824;&#21487;&#20197;&#20351;&#29992;JAAS&#25110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#23433;&#20840;&#31649;&#29702;&#26426;&#21046;&#12290;</p><p>&#26377;&#20851;&#23433;&#20840;&#31649;&#29702;&#22120;&#30340;&#37197;&#32622;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;<a href="security.html#change-security-manager" title="31.4.&nbsp;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;">Section&nbsp;31.4, &#8220;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;&#8221;</a>&#12290;</p><p>&#22312;&#27599;&#20010;xml&#25991;&#20214;&#20013;&#21487;&#20197;&#26377;&#38646;&#20010;&#25110;&#22810;&#20010; <tt class="literal">security-setting</tt>&#12290;&#24403;&#19968;&#32452;&#22320;&#22336;&#26377;&#22810;&#20010;&#36825;&#26679;&#30340;&#35774;&#32622;&#26102;&#65292;
              HornetQ&#24635;&#26159;&#36873;&#21462;<span class="emphasis"><em>&#26356;&#20855;&#20307;&#30340;</em></span>&#21305;&#37197;&#12290;</p><p>&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#23454;&#20363;&#65292;&#19979;&#38754;&#26159;&#21478;&#19968;&#20010;<tt class="literal">security-setting</tt>&#65306;</p><pre class="programlisting">
&lt;security-setting match="globalqueues.europe.orders.#"&gt;
    &lt;permission type="send" roles="europe-users"/&gt;
    &lt;permission type="consume" roles="europe-users"/&gt;
&lt;/security-setting&gt;            
        </pre><p>&#22312;&#36825;&#20010;<tt class="literal">security-setting</tt>&#22359;&#20013;&#65292;&#23383;&#31526;&#20018;
            'globalqueues.europe.orders.#' &#35201;&#27604;&#23427;&#20043;&#21069;&#30340;&#23383;&#31526;&#20018;'globalqueues.europe.#'&#26356;&#20855;&#20307;&#12290;
            &#22240;&#27492;&#24403;&#19968;&#20010;&#22320;&#22336;&#19982;'globalqueues.europe.orders.#'&#21305;&#37197;&#26102;&#65292;&#23427;<span class="emphasis"><em>&#21482;</em></span>&#36873;&#25321;&#36825;&#20010;&#23433;&#20840;&#37197;&#32622;&#12290;</p><p>&#27880;&#24847;&#23433;&#20840;&#35774;&#32622;&#27809;&#26377;&#32487;&#25215;&#24615;&#12290;&#23545;&#20110;&#20687;'globalqueues.europe.orders.plastics'&#30340;&#22320;&#22336;&#65292;&#21482;&#35201;&#19978;&#38754;&#30340;&#35774;&#32622;
            &#33021;&#34987;&#37319;&#29992;&#12290;&#21363;&#35282;&#33394;europe-users&#26377;<tt class="literal">send</tt>&#21644;<tt class="literal">consume</tt>&#26435;&#38480;&#12290;&#26435;&#38480;
            <tt class="literal">createDurableQueue</tt>&#12289; <tt class="literal">deleteDurableQueue</tt>&#12289;<tt class="literal">createNonDurableQueue</tt>&#12289;<tt class="literal">deleteNonDurableQueue</tt>&#19981;&#20250;&#20174;&#20808;&#21069;&#30340;&#35774;&#32622;&#20013;&#32487;&#25215;&#12290;</p><p>&#30001;&#20110;&#26435;&#38480;&#30340;&#19981;&#21487;&#32487;&#25215;&#65292;&#22914;&#26524;&#25105;&#20204;&#19981;&#22312;&#26356;&#20855;&#20307;&#30340;security-setting&#35774;&#32622;&#20013;&#32473;&#20986;&#19968;&#20010;&#26435;&#38480;&#65292;&#36825;&#20010;&#26435;&#38480;&#23601;&#26159;&#27809;&#26377;&#30340;&#65292;&#19981;&#20250;&#22240;&#20026;&#32487;&#25215;&#32780;&#24102;&#26469;
            &#40635;&#28902;&#12290;&#21542;&#21017;&#23601;&#19981;&#21487;&#33021;&#23545;&#19968;&#32452;&#22320;&#22336;&#20013;&#30340;&#37096;&#20998;&#22320;&#22336;&#36827;&#34892;&#22914;&#27492;&#30340;&#35774;&#32622;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6734"></a>31.2.&nbsp;&#23433;&#20840;&#22871;&#25509;&#23383;&#23618;(SSL)&#20256;&#36755;</h2></div></div><div></div></div><p>&#24403;&#28040;&#24687;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#31471;&#65292;&#25110;&#26381;&#21153;&#22120;&#20043;&#38388;&#65288;&#27604;&#22914;&#20351;&#29992;&#26725;&#30340;&#24773;&#20917;&#65289;&#36890;&#36807;&#19968;&#20010;&#19981;&#20449;&#20219;&#30340;&#32593;&#32476;&#30456;&#20114;&#36890;&#20449;&#26102;&#65292;HornetQ
            &#25903;&#25345;&#20351;&#29992;&#21152;&#23494;&#30340;&#23433;&#20840;&#22871;&#25509;&#23383;&#65288;SSL&#65289;&#20256;&#36755;&#25968;&#25454;&#12290;</p><p>&#20851;&#20110;SSL&#30340;&#35814;&#32454;&#37197;&#32622;&#20449;&#24687;&#65292;&#35831;&#21442;&#35265;<a href="configuring-transports.html" title="Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;">Chapter&nbsp;16, <i>&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</i></a>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6743"></a>31.3.&nbsp;&#22522;&#26412;&#29992;&#25143;&#36523;&#20221;&#20449;&#24687;&#65288;Credentials&#65289;</h2></div></div><div></div></div><p>HornetQ&#33258;&#24102;&#19968;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#65288;security manager&#65289;&#21487;&#20197;&#20174;xml&#25991;&#20214;&#20013;&#35835;&#21462;&#29992;&#25143;&#36523;&#20221;&#20449;&#24687;&#65292;&#21363;&#29992;&#25143;&#21517;&#12289;
            &#23494;&#30721;&#12289;&#35282;&#33394;&#20449;&#24687;&#12290;&#35813;xml&#25991;&#20214;&#21517;&#20026;<tt class="literal">hornetq-users.xml</tt>&#65292;&#23427;&#24517;&#39035;&#35201;&#22312;classpath&#20013;&#12290;</p><p>&#22914;&#26524;&#20320;&#35201;&#20351;&#29992;&#36825;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#23601;&#23558;&#29992;&#25143;&#21517;&#65292;&#23494;&#30721;&#65292;&#35282;&#33394;&#31561;&#20449;&#24687;&#21152;&#20837;&#21040;&#36825;&#20010;&#25991;&#20214;&#20013;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;configuration xmlns="urn:hornetq" 
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:hornetq ../schemas/hornetq-users.xsd "&gt;
    
    &lt;defaultuser name="guest" password="guest"&gt;
        &lt;role name="guest"/&gt;
    &lt;/defaultuser&gt;
    
    &lt;user name="tim" password="marmite"&gt;
        &lt;role name="admin"/&gt;      
    &lt;/user&gt;
    
    &lt;user name="andy" password="doner_kebab"&gt;
        &lt;role name="admin"/&gt;
        &lt;role name="guest"/&gt;
    &lt;/user&gt;
    
    &lt;user name="jeff" password="camembert"&gt;
        &lt;role name="europe-users"/&gt;
        &lt;role name="guest"/&gt;
    &lt;/user&gt;
    
&lt;/configuration&gt;
        </pre><p>&#39318;&#20808;&#35201;&#27880;&#24847;&#30340;&#26159;<tt class="literal">defaultuser</tt>&#65292;&#23427;&#23450;&#20041;&#30340;&#26159;&#40664;&#35748;&#30340;&#29992;&#25143;&#12290;&#24403;&#23458;&#25143;&#31471;&#21019;&#24314;&#20250;&#35805;&#26102;
            &#27809;&#26377;&#25552;&#20379;&#29992;&#25143;&#21517;&#65295;&#23494;&#30721;&#26102;&#65292;&#23601;&#20250;&#20351;&#29992;&#36825;&#20010;&#29992;&#25143;&#12290;&#26681;&#25454;&#19978;&#36848;&#37197;&#32622;&#65292;&#36825;&#20010;&#40664;&#35748;&#29992;&#25143;&#26159;<tt class="literal">guest</tt>
            &#24182;&#19988;&#20182;&#30340;&#35282;&#33394;&#26159;<tt class="literal">guest</tt>&#12290;&#19968;&#20010;&#40664;&#35748;&#29992;&#25143;&#21487;&#20197;&#26377;&#22810;&#20010;&#35282;&#33394;&#12290;</p><p>&#21478;&#22806;&#19977;&#20010;&#29992;&#25143;&#20013;&#65292;&#29992;&#25143;<tt class="literal">tim</tt>&#20855;&#26377;&#35282;&#33394;<tt class="literal">admin</tt>&#12290;&#29992;&#25143;<tt class="literal">andy</tt>&#20855;&#26377;&#35282;&#33394;<tt class="literal">admin</tt>&#21644;<tt class="literal">guest</tt>&#65292;&#29992;&#25143;<tt class="literal">jeff</tt>
             &#20855;&#26377;&#35282;&#33394;<tt class="literal">europe-users</tt>&#21644;<tt class="literal">guest</tt>&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="change-security-manager"></a>31.4.&nbsp;&#26356;&#25442;&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>&#22914;&#26524;&#20320;&#19981;&#24819;&#29992;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21487;&#20197;&#36890;&#36807;&#20462;&#25913;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-beans.xml</tt>
            &#65288;&#25110;&#32773;&#22312;&#36816;&#34892;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#24773;&#20917;&#19979;<tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#65289;&#26469;&#26356;&#25442;&#12290;&#21516;&#26102;&#35201;&#26356;&#25442;
            <tt class="literal">HornetQSecurityManager</tt> bean &#30340;&#31867;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#27573;&#40664;&#35748;bean&#25991;&#20214;&#30340;&#20869;&#23481;&#65306;</p><pre class="programlisting">           
&lt;bean name="HornetQSecurityManager" 
      class="org.hornetq.spi.core.security.HornetQSecurityManagerImpl"&gt;
    &lt;start ignored="true"/&gt;
    &lt;stop ignored="true"/&gt;
&lt;/bean&gt;            
        </pre><p><tt class="literal">org.hornetq.spi.core.security.HornetQSecurityManagerImpl</tt>
            &#31867;&#23601;&#26159;HornetQ&#26381;&#21153;&#22120;&#30340;&#22312;&#29420;&#31435;&#36816;&#34892;&#26102;&#30340;&#40664;&#35748;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;</p><p>HornetQ&#33258;&#24102;&#26377;&#21478;&#22806;&#20004;&#20010;&#23433;&#20840;&#31649;&#29702;&#22120;&#21487;&#20379;&#20351;&#29992;&#12290;&#19968;&#20010;&#26159;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21478;&#19968;&#20010;&#26159;&#29992;&#26469;&#19982;JBoss&#24212;&#29992;&#26381;&#21153;
            &#22120;&#38598;&#25104;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#27492;&#22806;&#65292;&#20320;&#36824;&#21487;&#20197;&#32534;&#20889;&#23454;&#29616;&#20320;&#33258;&#24049;&#30340;&#23433;&#20840;&#31649;&#29702;&#22120;&#12290;&#39318;&#20808;&#35201;&#23454;&#29616;
            <tt class="literal">org.hornetq.core.security.SecurityManager</tt>&#25509;&#21475;&#65292;&#20877;&#23558;&#20320;&#30340;&#23454;&#29616;
            &#31867;&#23450;&#20041;&#21040;<tt class="literal">hornetq-beans.xml</tt>&#25991;&#20214;&#20013;&#21363;&#21487;&#65288;&#25110;&#32773;&#22312;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20013;
            &#20351;&#29992;<tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#65289;&#12290;</p><p>&#20197;&#19979;&#20998;&#21035;&#20171;&#32461;&#36825;&#20004;&#21681;&#23433;&#20840;&#31649;&#29702;&#22120;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6829"></a>31.5.&nbsp;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>JAAS&#34920;&#31034;&#8220;Java&#35748;&#35777;&#19982;&#25480;&#26435;&#26381;&#21153;&#8220;&#12290;&#23427;&#26159;Java&#24179;&#21488;&#26631;&#20934;&#30340;&#19968;&#37096;&#20998;&#12290;&#23427;&#25552;&#20379;&#20102;&#36827;&#34892;&#23433;&#20840;&#35748;&#35777;&#19982;&#25480;&#26435;&#30340;&#36890;&#29992;&#25509;&#21475;&#12290;
            &#23427;&#20801;&#35768;&#20320;&#25554;&#20837;&#33258;&#24049;&#30340;&#23433;&#20840;&#31649;&#29702;&#27169;&#22359;&#12290;</p><p>&#35201;&#37197;&#32622;&#20351;&#29992;&#20320;&#33258;&#24049;&#30340;JAAS&#23433;&#20840;&#23454;&#29616;&#65292;&#38656;&#35201;&#22312;bean&#25991;&#20214;&#20013;&#23450;&#20041;<tt class="literal">JAASSecurityManager</tt>&#12290;
            &#19979;&#38754;&#26159;&#19968;&#20010;&#20363;&#23376;&#65306;</p><pre class="programlisting">
&amp;lt;bean name="HornetQSecurityManager"
      class="org.hornetq.integration.jboss.security.JAASSecurityManager"&amp;gt;
    &amp;lt;start ignored="true"/&amp;gt;
    &amp;lt;stop ignored="true"/&amp;gt;

    &amp;lt;property name="ConfigurationName"&amp;gt;org.hornetq.jms.example.ExampleLoginModule&amp;lt;/property&amp;gt;
    &amp;lt;property name="Configuration"&amp;gt;
       &amp;lt;inject bean="ExampleConfiguration"/&amp;gt;
    &amp;lt;/property&amp;gt;
    &amp;lt;property name="CallbackHandler"&amp;gt;
       &amp;lt;inject bean="ExampleCallbackHandler"/&amp;gt;
    &amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;
        </pre><p>&#27880;&#24847;&#20320;&#38656;&#35201;&#20026;JAAS&#23433;&#20840;&#31649;&#29702;&#22120;&#25552;&#20379;&#19977;&#20010;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>ConfigurationName: <tt class="literal">LoginModule</tt>&#30340;&#21517;&#23383;&#12290;</p></li><li><p>Configuration: <tt class="literal">Configuration</tt>&#30340;&#23454;&#29616;&#12290;</p></li><li><p>CallbackHandler: <tt class="literal">CallbackHandler</tt>&#23454;&#29616;&#65292;&#29992;&#20110;&#29992;&#25143;&#20132;&#20114;&#12290;</p></li></ul></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6862"></a>31.5.1.&nbsp;&#20363;&#23376;</h3></div></div><div></div></div><p>&#21442;&#35265;<a href="examples.html#examples.jaas" title="11.1.19.&nbsp;JAAS">Section&nbsp;11.1.19, &#8220;JAAS&#8221;</a>&#12290;&#36825;&#20010;&#20363;&#23376;&#23637;&#31034;&#20102;&#24590;&#26679;&#22312;HornetQ&#20013;&#37197;&#32622;&#20351;&#29992;JAAS&#12290;</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6869"></a>31.6.&nbsp;JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#23433;&#20840;&#31649;&#29702;&#22120;</h2></div></div><div></div></div><p>JBoss &#24212;&#29992;&#26381;&#21153;&#22120;&#23433;&#20840;&#31649;&#29702;&#22120;&#36866;&#29992;&#20110;&#24403;HornetQ&#36816;&#34892;&#20110;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;&#20869;&#26102;&#12290;&#23427;&#21487;&#20197;&#19982;JBoss&#24212;&#29992;&#26381;&#21153;&#22120;
            &#30340;&#23433;&#20840;&#27169;&#22411;&#32039;&#23494;&#38598;&#25104;&#12290;</p><p>&#27492;&#23433;&#20840;&#31649;&#29702;&#22120;&#30340;&#31867;&#26159; <tt class="literal">org.hornetq.integration.jboss.security.JBossASSecurityManager</tt>&#12290;</p><p>&#35201;&#20102;&#35299;&#22914;&#20309;&#37197;&#32622;JBoss&#23433;&#20840;&#31649;&#29702;&#22120;&#65292;&#21487;&#20197;&#30475;&#19968;&#30524;HornetQ&#21457;&#24067;&#21253;&#20013;&#30456;&#20851;&#20363;&#23376;&#20013;&#30340;
            <tt class="literal">hornetq-jboss-beans.xml</tt>&#25991;&#20214;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e6884"></a>31.6.1.&nbsp;&#37197;&#32622;&#23458;&#25143;&#31471;&#30331;&#24405;</h3></div></div><div></div></div><p>JBoss&#21487;&#20197;&#37197;&#32622;&#20351;&#29992;&#23458;&#25143;&#30331;&#24405;&#12290;JEE&#30340;&#27169;&#22359;&#22914;servlet&#25110;EJB&#21487;&#20197;&#23558;&#23433;&#20840;&#35748;&#35777;&#20449;&#24687;&#35774;&#32622;&#21040;&#23433;&#20840;&#19978;&#19979;&#25991;&#65288;security context&#65289;&#20013;&#65292;
             &#29992;&#20110;&#25972;&#20010;&#35843;&#29992;&#36807;&#31243;&#12290;&#22914;&#26524;&#24819;&#22312;HornetQ&#22312;&#21457;&#36865;&#21644;&#25509;&#25910;&#28040;&#24687;&#26102;&#20351;&#29992;&#36825;&#20123;&#35748;&#35777;&#65288;credential&#65289;&#20449;&#24687;&#65292;&#38656;&#35201;&#23558;&#21442;&#25968;
             <tt class="literal">allowClientLogin</tt>&#35774;&#20026;true&#12290;&#23427;&#20250;&#36234;&#36807;HornetQ&#30340;&#36523;&#20221;&#39564;&#35777;&#36807;&#31243;&#24182;&#20250;&#20256;&#25773;&#23433;&#20840;&#19978;&#19979;&#25991;&#65288;security
             context&#65289;&#12290;&#22914;&#26524;&#20320;&#24819;&#35201;HornetQ&#20351;&#29992;&#20256;&#25773;&#30340;&#23433;&#20840;&#20449;&#24687;&#36827;&#34892;&#36523;&#20221;&#39564;&#35777;&#65292;&#38656;&#35201;&#21516;&#26102;&#23558;&#21442;&#25968;<tt class="literal">authoriseOnClientLogin</tt>
             &#35774;&#20026;true&#12290;</p><p>&#20851;&#20110;&#23458;&#25143;&#31471;&#30331;&#24405;&#30340;&#35814;&#32454;&#20449;&#24687;&#35831;&#35775;&#38382;<a href="http://community.jboss.org/wiki/ClientLoginModule" target="_top">&#36825;&#37324;</a>&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#22914;&#26524;&#28040;&#24687;&#26159;&#20197;&#38750;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#30340;&#65292;&#37027;&#20040;&#26377;&#21487;&#33021;&#22312;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#26102;&#65292;&#35843;&#29992;&#32447;&#31243;&#24050;&#32463;&#32467;&#26463;&#65292;&#23433;&#20840;&#19978;&#19979;&#25991;&#20063;&#34987;&#28165;&#38500;&#20102;&#12290;
          &#25152;&#20197;&#22914;&#26524;&#20351;&#29992;&#23433;&#20840;&#19978;&#19979;&#25991;&#65292;&#38656;&#35201;&#37319;&#29992;&#38459;&#22622;&#26041;&#24335;&#21457;&#36865;&#28040;&#24687;&#12290;</p></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e6903"></a>31.7.&nbsp;&#38598;&#32676;&#29992;&#25143;&#21517;&#65295;&#23494;&#30721;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>&#20026;&#20102;&#20351;&#38598;&#32676;&#36830;&#25509;&#27491;&#24120;&#24037;&#20316;&#65292;&#27599;&#20010;&#33410;&#28857;&#37117;&#24517;&#39035;&#19982;&#20854;&#23427;&#33410;&#28857;&#30456;&#36830;&#25509;&#12290;&#23427;&#20204;&#36830;&#25509;&#25152;&#20351;&#29992;&#30340;&#40664;&#35748;&#29992;&#25143;&#21517;&#21644;&#23494;&#30721;&#22312;&#27491;&#24335;&#20351;&#29992;&#26102;
            &#19968;&#23450;&#35201;&#20570;&#30456;&#24212;&#30340;&#26356;&#25913;&#65292;&#20197;&#38450;&#27490;&#23433;&#20840;&#38544;&#24739;&#12290;</p><p>&#35831;&#21442;&#35265;<a href="management.html" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;">Chapter&nbsp;30, <i>&#31649;&#29702;</i></a>&#20102;&#35299;&#24590;&#26679;&#21435;&#20570;&#12290;</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="management.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="appserver-integration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;30.&nbsp;&#31649;&#29702;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;32.&nbsp;Java EE&#21644;&#24212;&#29992;&#26381;&#21153;&#22120;&#30340;&#38598;&#25104;</td></tr></table></div></body></html>