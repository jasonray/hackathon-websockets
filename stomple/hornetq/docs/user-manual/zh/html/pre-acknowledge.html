<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;29.&nbsp;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="message-grouping.html" title="Chapter&nbsp;28.&nbsp;&#28040;&#24687;&#20998;&#32452;"><link rel="next" href="management.html" title="Chapter&nbsp;30.&nbsp;&#31649;&#29702;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;29.&nbsp;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="message-grouping.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="management.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="pre-acknowledge"></a>Chapter&nbsp;29.&nbsp;&#39044;&#20808;&#36890;&#30693;&#27169;&#24335;&#65288;pre-acknowledge&#65289;</h2></div></div><div></div></div><p>JMS &#35268;&#23450;&#20102;&#19977;&#31181;&#28040;&#24687;&#36890;&#30693;&#26041;&#24335;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">AUTO_ACKNOWLEDGE</tt></p></li><li><p><tt class="literal">CLIENT_ACKNOWLEDGE</tt></p></li><li><p><tt class="literal">DUPS_OK_ACKNOWLEDGE</tt></p></li></ul></div><p>&#36824;&#26377;&#19968;&#31181;&#24773;&#20917;JMS&#19981;&#25903;&#25345;&#65306;&#24212;&#29992;&#31243;&#24207;&#22312;&#20986;&#29616;&#25925;&#38556;&#26102;&#21487;&#20197;&#23481;&#24525;&#28040;&#24687;&#20002;&#22833;&#65292;&#36825;&#26679;&#21487;&#20197;&#22312;&#28040;&#24687;&#22312;&#20256;&#36882;&#32473;&#23458;&#25143;
      &#31471;<span class="emphasis"><em>&#20043;&#21069;</em></span>&#23601;&#36890;&#30693;&#26381;&#21153;&#22120;&#12290;</p><p>HornetQ&#25903;&#25345;&#36825;&#31181;&#27169;&#24335;&#65292;&#31216;&#20026;<span class="emphasis"><em>pre-acknowledge</em></span>&#12290;</p><p>&#36825;&#31181;&#27169;&#24335;&#30340;&#32570;&#28857;&#26159;&#28040;&#24687;&#22312;&#36890;&#30693;&#21518;&#65292;&#22914;&#26524;&#31995;&#32479;&#20986;&#29616;&#25925;&#38556;&#26102;&#65292;&#28040;&#24687;&#21487;&#33021;&#20002;&#22833;&#12290;&#24182;&#19988;&#22312;&#31995;&#32479;&#37325;&#21551;&#21518;&#35813;&#28040;&#24687;
      &#19981;&#33021;&#24674;&#22797;&#12290;</p><p>&#20351;&#29992;<tt class="literal">pre-acknowledgement</tt>&#27169;&#24335;&#21487;&#20197;&#33410;&#30465;&#32593;&#32476;&#20256;&#36755;&#21644;CPU&#22788;&#29702;&#36164;&#28304;&#12290;</p><p>&#32929;&#31080;&#20215;&#26684;&#26356;&#26032;&#26159;&#19968;&#20010;&#36866;&#29992;&#20110;&#27492;&#27169;&#24335;&#30340;&#20363;&#23376;&#12290;&#22914;&#26524;&#22240;&#20026;&#26381;&#21153;&#22120;&#25925;&#38556;&#20002;&#22833;&#20102;&#19968;&#20123;&#28040;&#24687;&#65292;&#31561;&#26381;&#21153;&#22120;&#37325;&#21551;&#21518;&#26032;&#30340;
      &#32929;&#31080;&#26356;&#26032;&#28040;&#24687;&#24456;&#24555;&#21040;&#36798;&#65292;&#20197;&#21069;&#20002;&#22833;&#30340;&#36807;&#26102;&#30340;&#32929;&#31080;&#28040;&#24687;&#21363;&#20351;&#20002;&#22833;&#20063;&#26080;&#20851;&#32039;&#35201;&#12290; </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#27880;&#24847;&#22914;&#26524;&#20320;&#20351;&#29992;pre-acknowledge&#27169;&#24335;&#65292;&#22312;&#25509;&#25910;&#28040;&#24687;&#31471;&#19981;&#33021;&#25903;&#25345;&#20107;&#21153;&#12290;&#22240;&#20026;&#36825;&#20010;&#27169;&#24335;&#19981;&#26159;&#22312;&#25552;&#20132;&#26102;
      &#36890;&#30693;&#28040;&#24687;&#65292;&#26159;&#22312;&#28040;&#24687;&#22312;&#20256;&#36882;&#20043;&#21069;&#23601;&#36890;&#30693;&#20102;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="pre-acknowledge.configure"></a>29.1.&nbsp;&#20351;&#29992;PRE_ACKNOWLEDGE</h2></div></div><div></div></div><p>&#36825;&#20010;&#27169;&#24335;&#22312;<tt class="literal">hornetq-jms.xml</tt>&#25991;&#20214;&#20013;
      &#30340;<tt class="literal">connection factory</tt>&#19979;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;connection-factory name="ConnectionFactory"&gt;
      &lt;connectors&gt;
         &lt;connector-ref connector-name="netty-connector"/&gt;
      &lt;/connectors&gt;
      &lt;entries&gt;
         &lt;entry name="ConnectionFactory"/&gt;
      &lt;/entries&gt;
      &lt;pre-acknowledge&gt;true&lt;/pre-acknowledge&gt;
&lt;/connection-factory&gt;</pre><p>&#21478;&#19968;&#20010;&#36873;&#25321;&#26159;&#20351;&#29992;JMS&#25509;&#21475;&#26469;&#35774;&#32622;pre-acknowledgement&#27169;&#24335;&#12290;&#21482;&#38656;&#35201;&#22312;&#21019;&#24314;JMS&#20250;&#35805;&#65288;session&#65289;
         &#26102;&#20351;&#29992;<tt class="literal">HornetQSession.PRE_ACKNOWLEDGE</tt>&#24120;&#25968;&#21363;&#21487;&#12290;</p><pre class="programlisting">
// messages will be acknowledge on the server *before* being delivered to the client
Session session = connection.createSession(false, HornetQSession.PRE_ACKNOWLEDGE);
      </pre><p>&#20320;&#36824;&#21487;&#20197;&#30452;&#25509;&#22312;<tt class="literal">HornetQConnectionFactory</tt>&#23454;&#20363;&#19978;&#35774;&#32622;&#35813;&#27169;&#24335;&#12290;</p><p>&#21478;&#22806;&#65292;&#22914;&#26524;&#20351;&#29992;&#26680;&#24515;&#25509;&#21475;&#65292;&#21017;&#22312;<tt class="literal">ClientSessionFactory</tt>&#23454;&#20363;&#19978;&#30452;&#25509;
            &#35774;&#32622;&#35813;&#27169;&#24335;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e5156"></a>29.2.&nbsp;&#20363;&#23376;</h2></div></div><div></div></div><p>&#21442;&#35265;<a href="examples.html#examples.pre-acknowledge" title="11.1.35.&nbsp;&#39044;&#20808;&#36890;&#30693;">Section&nbsp;11.1.35, &#8220;&#39044;&#20808;&#36890;&#30693;&#8221;</a>&#12290;&#36825;&#26159;&#19968;&#20010;&#20351;&#29992;JMS&#30340;&#20363;&#23376;&#12290;</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="message-grouping.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="management.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;28.&nbsp;&#28040;&#24687;&#20998;&#32452;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;30.&nbsp;&#31649;&#29702;</td></tr></table></div></body></html>