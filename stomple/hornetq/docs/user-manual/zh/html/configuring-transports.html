<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="persistence.html" title="Chapter&nbsp;15.&nbsp;&#25345;&#20037;&#21270;"><link rel="next" href="connection-ttl.html" title="Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="persistence.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="connection-ttl.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="configuring-transports"></a>Chapter&nbsp;16.&nbsp;&#20256;&#36755;&#23618;&#30340;&#37197;&#32622;</h2></div></div><div></div></div><p>HornetQ&#30340;&#20256;&#36755;&#23618;&#26159;&#8220;&#21487;&#25554;&#25300;&#30340;&#8221;&#12290;&#36890;&#36807;&#28789;&#27963;&#30340;&#37197;&#32622;&#21644;&#19968;&#22871;&#26381;&#21153;&#25552;&#20379;&#25509;&#21475;&#65288;SPI&#65289;&#65292;HornetQ&#21487;&#20197;&#24456;&#23481;&#26131;&#22320;&#26356;&#25442;&#20854;&#20256;&#36755;&#23618;&#12290;</p><p>&#22312;&#26412;&#31456;&#20013;&#25105;&#20204;&#23558;&#23545;HornetQ&#30340;&#20256;&#36755;&#30456;&#20851;&#30340;&#27010;&#24565;&#20316;&#20986;&#35299;&#37322;&#65292;&#24182;&#35828;&#26126;&#23427;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.acceptors"></a>16.1.&nbsp;&#25509;&#25910;&#22120;&#65288;Acceptor&#65289;</h2></div></div><div></div></div><p>&#25509;&#25910;&#22120;&#65288;<span class="emphasis"><em>acceptor</em></span>&#65289;&#26159; HornetQ &#30340;&#20256;&#36755;&#23618;&#20013;&#26368;&#20026;&#37325;&#35201;&#30340;&#27010;&#24565;&#20043;&#19968;&#12290;&#39318;&#20808;
            &#20171;&#32461;&#19968;&#19979;&#22312;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#26159;&#24590;&#26679;&#23450;&#20041;&#19968;&#20010;&#25509;&#25910;&#22120;&#30340;&#65306;</p><pre class="programlisting">
&lt;acceptors&gt;                
    &lt;acceptor name="netty"&gt;
        &lt;factory-class&gt;
org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
        &lt;/factory-class&gt;
        &lt;param key="port" value="5446"/&gt;
    &lt;/acceptor&gt;
&lt;/acceptors&gt;            
        </pre><p>&#25152;&#26377;&#25509;&#25910;&#22120;&#37117;&#22312; <tt class="literal">acceptors</tt>&#21333;&#20803;&#65288;element&#65289;&#20869;&#23450;&#20041;&#12290;&#22312;<tt class="literal">acceptors</tt>
            &#20869;&#21487;&#20197;&#26377;&#38646;&#20010;&#25110;&#22810;&#20010;&#25509;&#25910;&#22120;&#30340;&#23450;&#20041;&#12290;&#27599;&#20010;&#26381;&#21153;&#22120;&#25152;&#25317;&#26377;&#30340;&#25509;&#25910;&#22120;&#30340;&#25968;&#37327;&#26159;&#27809;&#26377;&#38480;&#21046;&#30340;&#12290;</p><p>&#27599;&#20010;&#25509;&#25910;&#22120;&#37117;&#35201;&#23450;&#20041;&#20854;&#19982;HornetQ&#26381;&#21153;&#22120;&#36830;&#25509;&#30340;&#26041;&#24335;&#12290;</p><p>&#20197;&#19978;&#30340;&#20363;&#23376;&#20013;&#25105;&#20204;&#23450;&#20041;&#20102;&#19968;&#20010;<a href="http://jboss.org/netty" target="_top">Netty</a>&#25509;&#25910;&#22120;&#12290;&#23427;&#22312;&#31471;&#21475;<tt class="literal">5446</tt>&#30417;&#21548;&#36830;&#25509;&#35831;&#27714;&#12290;</p><p>&#22312;<tt class="literal">acceptor</tt>&#21333;&#20803;&#20869;&#26377;&#19968;&#20010;&#23376;&#21333;&#20803;<tt class="literal">factory-class</tt>&#12290;&#36825;&#20010;&#21333;&#20803;&#26159;&#29992;&#26469;
            &#23450;&#20041;&#21019;&#24314;&#36830;&#25509;&#22120;&#30340;&#24037;&#21378;&#31867;&#12290;&#19968;&#20010;&#36830;&#25509;&#22120;&#24037;&#21378;&#31867;&#24517;&#39035;&#35201;&#23454;&#29616;<tt class="literal">AcceptorFactory</tt>&#25509;&#21475;&#12290;&#19978;&#20363;&#20013;&#25105;&#20204;&#23450;&#20041;
            &#30340;&#36830;&#25509;&#22120;&#24037;&#21378;&#26159;&#31867;NettyAcceptorFactory&#20351;&#29992;Netty&#26469;&#24314;&#31435;&#36830;&#25509;&#12290;&#26377;&#20010;&#36825;&#20010;&#31867;&#23450;&#20041;&#65292;HornetQ&#23601;&#30693;&#36947;&#20102;&#29992;&#20160;&#20040;&#20256;&#36755;&#26469;&#24314;&#31435;&#36830;&#25509;&#20102;&#12290;</p><p>&#22312;<tt class="literal">acceptor</tt>&#20013;&#36824;&#21487;&#20197;&#37197;&#32622;&#38646;&#25110;&#22810;&#20010;&#21442;&#25968;<tt class="literal">param</tt>&#12290;&#22312;&#27599;&#20010;<tt class="literal">param</tt>
            &#20013;&#23450;&#20041;&#30340;&#26159;&#38190;-&#20540;&#23545;&#65288;key-value&#65289;&#12290;&#36825;&#20123;&#21442;&#25968;&#29992;&#26469;&#37197;&#32622;&#26576;&#20010;&#20256;&#36755;&#23454;&#29616;&#12290;&#19981;&#21516;&#20256;&#36755;&#26377;&#19981;&#21516;&#30340;&#37197;&#32622;&#21442;&#25968;&#12290;</p><p>&#20687;IP&#22320;&#22336;&#12289;&#31471;&#21475;&#21495;&#31561;&#37117;&#26159;&#20256;&#36755;&#37197;&#32622;&#21442;&#25968;&#30340;&#20363;&#23376;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.connectors"></a>16.2.&nbsp;&#36830;&#25509;&#22120;&#65288;Connectors&#65289;</h2></div></div><div></div></div><p>&#25509;&#25910;&#22120;&#23450;&#20041;&#30340;&#26159;&#22914;&#20309;&#22312;&#26381;&#21153;&#22120;&#31471;&#25509;&#25910;&#36830;&#25509;&#65292;&#32780;&#36830;&#25509;&#22120;&#21017;&#26159;&#23450;&#20041;&#23458;&#25143;&#31471;&#22914;&#20309;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#12290;</p><p>&#20197;&#19979;&#26159;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#19968;&#20010;&#36830;&#25509;&#22120;&#37197;&#32622;&#30340;&#20363;&#23376;&#12290;</p><pre class="programlisting">
&lt;connectors&gt;
    &lt;connector name="netty"&gt;
        &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyConnectorFactory
        &lt;/factory-class&gt;
        &lt;param key="port" value="5446"/&gt;
    &lt;/connector&gt;
&lt;/connectors&gt;            
        </pre><p>&#36830;&#25509;&#22120;&#30340;&#37197;&#32622;&#22312;<tt class="literal">connectors</tt>&#21333;&#20803;&#20013;&#12290;&#21487;&#20197;&#23450;&#20041;&#19968;&#20010;&#25110;&#22810;&#20010;&#36830;&#25509;&#22120;&#12290;&#27599;&#20010;&#26381;&#21153;&#22120;&#37197;&#32622;&#30340;&#36830;&#25509;&#22120;
            &#25968;&#37327;&#26159;&#27809;&#26377;&#38480;&#21046;&#30340;&#12290;</p><p>&#20320;&#21487;&#33021;&#27880;&#24847;&#21040;&#20102;&#65292;&#26082;&#28982;&#36830;&#25509;&#22120;&#26159;&#23450;&#20041;<span class="emphasis"><em>&#23458;&#25143;&#31471;</em></span>&#22914;&#20309;&#36830;&#25509;&#26381;&#21153;&#22120;&#30340;&#65292;&#37027;&#20040;&#20026;&#20160;&#20040;&#35201;&#23450;&#20041;&#22312;
              <span class="emphasis"><em>&#26381;&#21153;&#22120;</em></span>&#31471;&#21602;&#65311;&#21407;&#22240;&#22914;&#19979;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#26381;&#21153;&#22120;&#26377;&#26102;&#20063;&#38656;&#35201;&#20570;&#20026;&#23458;&#25143;&#31471;&#21435;&#36830;&#25509;&#20854;&#23427;&#30340;&#26381;&#21153;&#22120;&#65292;&#27604;&#22914;&#24403;&#19968;&#20010;&#26381;&#21153;&#22120;&#36890;&#36807;&#26725;&#36830;&#25509;&#21040;&#21478;&#19968;&#20010;&#26381;&#21153;&#22120;&#65292;&#25110;&#32773;&#26159;&#38598;&#32676;
                    &#20013;&#26381;&#21153;&#22120;&#20043;&#38388;&#30340;&#20114;&#30456;&#36890;&#36805;&#12290;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#26381;&#21153;&#22120;&#23601;&#35201;&#30693;&#36947;&#22914;&#20309;&#19982;&#21478;&#19968;&#21488;&#26381;&#21153;&#22120;&#24314;&#31435;&#36830;&#25509;&#12290;&#22240;&#27492;&#38656;&#35201;&#22312;
                    <span class="emphasis"><em>connectors</em></span>&#19979;&#23450;&#20041;&#36830;&#25509;&#22120;&#12290;</p></li><li><p>&#22914;&#26524;&#20320;&#20351;&#29992;JMS&#26381;&#21153;&#65292;&#38656;&#35201;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#30340;&#23454;&#20363;&#24182;&#32465;&#23450;&#21040;JNDI&#12290;&#22312;HornetQ&#21019;&#24314;
                    <tt class="literal">HornetQConnectionFactory</tt>&#26102;&#38656;&#35201;&#36830;&#25509;&#22120;&#30340;&#24517;&#35201;&#20449;&#24687;&#65292;&#20197;&#20415;&#36825;&#20010;&#36830;&#25509;&#24037;&#21378;
                    &#33021;&#30693;&#36947;&#23427;&#22914;&#20309;&#19982;HornetQ&#26381;&#21153;&#22120;&#30456;&#36830;&#25509;&#12290;</p><p>&#36825;&#19968;&#20449;&#24687;&#34987;&#23450;&#20041;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-jms.xml</tt>&#20013;&#30340;<tt class="literal">connector-ref</tt>&#21333;&#20803;&#19979;&#12290;&#19979;&#38754;&#36825;&#27573;&#37197;&#32622;
                        &#23601;&#26159;&#20174;&#35813;&#37197;&#32622;&#25991;&#20214;&#20013;&#25552;&#21462;&#30340;&#30456;&#20851;&#37096;&#20998;&#65292;&#23427;&#23637;&#31034;&#20102;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#26159;&#22914;&#20309;&#24341;&#29992;&#23450;&#20041;&#22312;&#37197;&#32622;&#25991;&#20214;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#30340;&#36830;&#25509;&#22120;&#30340;&#65306;</p><pre class="programlisting">
&lt;connection-factory name="ConnectionFactory"&gt;
    &lt;connectors&gt;
       &lt;connector-ref connector-name="netty"/&gt;
    &lt;/connectors&gt;
    &lt;entries&gt;
        &lt;entry name="ConnectionFactory"/&gt;
        &lt;entry name="XAConnectionFactory"/&gt;
    &lt;/entries&gt;
&lt;/connection-factory&gt;                
            </pre></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="configuring-transports.client.side"></a>16.3.&nbsp;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#37197;&#32622;&#20256;&#36755;&#23618;</h2></div></div><div></div></div><p>&#24590;&#26679;&#37197;&#32622;&#19968;&#20010;&#20869;&#26680;<tt class="literal">ClientSessionFactory</tt>&#20197;&#35753;&#23427;&#30693;&#36947;&#22914;&#20309;&#36830;&#25509;&#26381;&#21153;&#22120;&#30340;&#20449;&#24687;&#21602;&#65311;</p><p>&#22312;&#30452;&#25509;&#37197;&#32622;&#20869;&#26680;<tt class="literal">ClientSessionFactory</tt>&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#38388;&#25509;&#22320;&#20351;&#29992;&#36830;&#25509;&#22120;&#12290;&#24403;&#28982;&#22312;&#36825;&#31181;&#24773;&#20917;
            &#19979;&#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#36830;&#25509;&#22120;&#26159;&#27809;&#26377;&#24847;&#20041;&#30340;&#12290;&#25105;&#20204;&#36890;&#36807;&#23558;&#24517;&#35201;&#21442;&#25968;&#20256;&#32473;<tt class="literal">ClientSessionFactory</tt>&#30340;
            &#26041;&#27861;&#26469;&#21578;&#35785;&#20351;&#29992;&#20160;&#20040;&#26679;&#30340;&#36830;&#25509;&#22120;&#24037;&#21378;&#12290;</p><p>&#22312;&#19979;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;<tt class="literal">ClientSessionFactory</tt>&#65292;&#23427;&#21487;&#20197;&#30452;&#25509;&#36830;&#25509;&#21040;&#25105;&#20204;&#20808;&#21069;&#23450;
            &#20041;&#30340;&#25509;&#25910;&#22120;&#19978;&#12290;&#23427;&#20351;&#29992;&#30340;&#26159;&#26631;&#20934;&#30340;Netty TCP&#20256;&#36755;&#23618;&#65292;&#36830;&#25509;&#20027;&#26426;&#26159;localhost&#65288;&#40664;&#35748;&#65289;&#65292;&#31471;&#21475;5446&#65306;</p><pre class="programlisting">
Map&lt;String, Object&gt; connectionParams = new HashMap&lt;String, Object&gt;();
    
connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME, 
                    5446);

TransportConfiguration transportConfiguration = 
    new TransportConfiguration(
    "org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", 
    connectionParams);

ClientSessionFactory sessionFactory = HornetQClient.createClientSessionFactory(transportConfiguration);

ClientSession session = sessionFactory.createSession(...);

etc                       
        </pre><p>&#22914;&#26524;&#22312;&#23458;&#25143;&#31471;&#30452;&#25509;&#20351;&#29992;JMS&#30340;&#36830;&#25509;&#24037;&#21378;&#30340;&#35805;&#65292;&#20063;&#21487;&#20197;&#29992;&#31867;&#20284;&#30340;&#26041;&#27861;&#32780;&#19981;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#23450;&#20041;&#36830;&#25509;&#22120;&#25110;&#22312;
            <tt class="literal">hornetq-jms.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#21019;&#24314;&#36830;&#25509;&#24037;&#21378;&#65306;</p><pre class="programlisting">
Map&lt;String, Object&gt; connectionParams = new HashMap&lt;String, Object&gt;();

connectionParams.put(org.hornetq.core.remoting.impl.netty.TransportConstants.PORT_PROP_NAME, 5446);

TransportConfiguration transportConfiguration = 
    new TransportConfiguration(
    "org.hornetq.core.remoting.impl.netty.NettyConnectorFactory", 
    connectionParams);

ConnectionFactory connectionFactory = HornetQJMSClient.createConnectionFactory(transportConfiguration);

Connection jmsConnection = connectionFactory.createConnection();

etc                       
        </pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e2860"></a>16.4.&nbsp;&#37197;&#32622; Netty &#20256;&#36755;&#23618;</h2></div></div><div></div></div><p>HornetQ&#24403;&#21069;&#20351;&#29992;<a href="http://www.jboss.org/netty/" target="_top">Netty</a>&#20316;&#20026;&#20854;&#40664;&#35748;&#30340;&#36830;&#25509;&#23618;&#12290;Netty&#26159;&#19968;&#20010;&#39640;&#24615;&#33021;&#30340;&#24213;&#23618;&#32593;&#32476;&#24211;.</p><p>Netty&#20256;&#36755;&#30340;&#37197;&#32622;&#26377;&#20960;&#31181;&#19981;&#21516;&#30340;&#26041;&#27861;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#20256;&#32479;&#30340;Java IO&#65288;&#38459;&#22622;&#26041;&#24335;&#65289;&#12289;NIO&#65288;&#38750;&#38459;&#22622;&#65289;&#25110;&#30452;&#25509;&#20351;&#29992;
            TCP socket&#21450;SSL&#12290;&#25110;&#32773;&#20351;&#29992;HTTP&#25110;HTTPS&#21327;&#35758;&#12290;&#21516;&#26102;&#36824;&#21487;&#33021;&#20351;&#29992;servlet&#36827;&#34892;&#20256;&#36755;&#12290;</p><p>&#37319;&#29992;Netty&#24212;&#35813;&#33021;&#28385;&#36275;&#32477;&#22823;&#37096;&#20998;&#30340;&#20256;&#36755;&#35201;&#27714;&#12290;</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e2872"></a>16.4.1.&nbsp;&#37197;&#32622; Netty TCP</h3></div></div><div></div></div><p>Netty TCP &#26159;&#31616;&#21333;&#30340;&#38750;&#21152;&#23494;&#30340;&#22522;&#20110;TCP socket&#30340;&#20256;&#36755;&#12290;&#23427;&#21487;&#20197;&#20351;&#29992;&#38459;&#22622;&#24335;&#30340;Java IO&#25110;&#38750;&#38459;&#22622;&#24335;&#30340;Java NIO&#12290;
                &#25105;&#20204;&#24314;&#35758;&#22312;&#26381;&#21153;&#22120;&#31471;&#37319;&#29992;&#38750;&#38459;&#22622;&#24335;&#30340;NIO&#20197;&#33719;&#24471;&#33391;&#22909;&#30340;&#24182;&#21457;&#22788;&#29702;&#33021;&#21147;&#12290;&#24403;&#24182;&#21457;&#33021;&#21147;&#24182;&#19981;&#26159;&#24456;&#37325;&#35201;&#26102;&#65292;&#21487;&#20197;&#20351;&#29992;&#38459;&#22622;&#24335;
                &#30340;&#26041;&#24335;&#20197;&#22686;&#21152;&#21709;&#24212;&#30340;&#36895;&#24230;&#12290;</p><p>&#22914;&#26524;&#20320;&#30340;&#24212;&#29992;&#26159;&#36816;&#34892;&#22312;&#19981;&#20449;&#20219;&#30340;&#32593;&#32476;&#19978;&#65292;&#20320;&#24212;&#35813;&#36873;&#25321;&#20351;&#29992;SSL&#25110;HTTPS&#12290;</p><p>Netty TCP&#30340;&#25152;&#26377;&#36830;&#25509;&#37117;&#26159;&#20174;&#23458;&#25143;&#31471;&#21457;&#36215;&#30340;&#12290;&#26381;&#21153;&#22120;&#31471;&#19981;&#21521;&#23458;&#25143;&#31471;&#21457;&#36215;&#20219;&#20309;&#36830;&#25509;&#12290;&#22312;&#26377;&#38450;&#28779;&#22681;&#30340;&#29615;&#22659;&#20013;&#65292;&#36825;&#31181;&#26041;&#24335;
                &#26159;&#27604;&#36739;&#36866;&#21512;&#30340;&#12290;&#22240;&#20026;&#38450;&#28779;&#22681;&#21482;&#20801;&#35768;&#21333;&#26041;&#21521;&#30340;&#36830;&#25509;&#12290;</p><p>&#22312;<tt class="literal">org.hornetq.core.remoting.impl.netty.TransportConstants</tt>&#31867;&#20013;&#23450;&#20041;&#20102;&#25152;
                &#26377;&#30340;&#37197;&#32622;&#21442;&#25968;&#30340;&#21517;&#31216;&#65288;key&#65289;&#12290;&#23427;&#20204;&#24403;&#20013;&#32477;&#22823;&#22810;&#23044;&#26082;&#29992;&#20110;&#37197;&#32622;&#25509;&#25910;&#22120;&#20063;&#29992;&#20110;&#37197;&#32622;&#36830;&#25509;&#22120;&#65292;&#26377;&#19968;&#20123;&#21482;&#36866;&#29992;&#20110;&#25509;&#25910;&#22120;&#12290;
                &#19979;&#38754;&#21015;&#20986;&#30340;&#21442;&#25968;&#29992;&#20197;&#37197;&#32622;&#19968;&#20010;&#31616;&#21333;&#30340;Netty TCP&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">use-nio</tt>&#12290;&#22914;&#26524;&#35774;&#20026;<tt class="literal">true</tt>&#21017;&#20351;&#29992;&#38750;&#38459;&#22622;&#30340;Java
                        NIO&#12290;&#22914;&#26524;<tt class="literal">false</tt>&#21017;&#20351;&#29992;&#20256;&#32479;&#30340;&#38459;&#22622;&#26041;&#24335;&#30340;Java IO&#12290;</p><p>&#25105;&#20204;&#24314;&#35758;&#20351;&#29992;Java NIO&#22788;&#29702;&#24182;&#34892;&#36830;&#25509;&#12290;&#22240;&#20026;Java NIO&#19981;&#26159;&#20026;&#27599;&#19968;&#20010;&#36830;&#25509;&#20998;&#37197;&#19968;&#20010;&#32447;&#31243;&#65292;&#25152;&#20197;&#23427;&#35201;&#27604;&#20256;&#32479;&#30340;&#38459;&#22622;&#24335;
                        Java IO&#20855;&#26377;&#26356;&#24378;&#30340;&#24182;&#21457;&#36830;&#25509;&#30340;&#22788;&#29702;&#33021;&#21147;&#12290;&#22914;&#26524;&#20320;&#19981;&#38656;&#35201;&#22788;&#29702;&#24182;&#21457;&#36830;&#25509;&#65292;&#37027;&#20040;&#20351;&#29992;&#26087;&#30340;&#38459;&#22622;&#24335;&#30340;IO&#24615;&#33021;&#20250;&#22909;&#19968;&#20123;&#12290;&#36825;&#20010;&#21442;
                        &#25968;&#30340;&#40664;&#35748;&#20540;&#22312;&#26381;&#21153;&#22120;&#31471;&#26159;<tt class="literal">false</tt>&#65292;&#22312;&#23458;&#25143;&#31471;&#26159;<tt class="literal">false</tt>&#12290;
                        </p></li><li><p><tt class="literal">host</tt>&#12290;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#12290;&#23545;&#20110;&#25509;&#25910;&#22120;&#26469;&#35828;&#65292;&#23427;&#26159;&#26381;&#21153;&#22120;&#25509;&#25910;&#36830;&#25509;&#30340;&#22320;&#22336;&#12290;
                        &#23545;&#20110;&#36830;&#25509;&#22120;&#31471;&#65292;&#23427;&#26159;&#23458;&#25143;&#31471;&#36830;&#25509;&#30340;&#30446;&#26631;&#22320;&#22336;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">localhost</tt>&#12290;
                        &#22312;&#37197;&#32622;&#25509;&#25910;&#22120;&#26102;&#21487;&#20197;&#25351;&#23450;&#22810;&#20010;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#65292;&#20013;&#38388;&#29992;&#36887;&#21495;&#38548;&#24320;&#12290;&#22914;&#26524;&#25351;&#23450;&#30340;&#20027;&#26426;&#26159;<tt class="code">0.0.0.0</tt>&#65292;
                        &#21017;&#25509;&#25910;&#22120;&#23558;&#20174;&#20027;&#26426;&#19978;&#25152;&#26377;&#30340;&#32593;&#32476;&#25509;&#21475;&#20013;&#25509;&#21463;&#36830;&#25509;&#35831;&#27714;&#12290;&#36830;&#25509;&#22120;&#19981;&#20801;&#35768;&#25351;&#23450;&#22810;&#20010;&#20027;&#26426;&#22320;&#22336;&#65292;&#23427;&#21482;&#33021;&#19982;&#19968;&#20010;
                        &#22320;&#22336;&#24314;&#31435;&#36830;&#25509;&#12290;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&#19968;&#23450;&#19981;&#35201;&#24536;&#35760;&#25351;&#23450;&#19968;&#20010;&#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#65281;&#19968;&#20010;&#26381;&#21153;&#22120;&#35201;&#24819;&#25509;&#21463;&#26469;&#33258;&#20854;&#23427;&#33410;&#28857;&#30340;&#36830;&#25509;&#23601;&#24517;&#38656;&#26377;&#19968;&#20010;
                            &#20027;&#26426;&#21517;&#25110;IP&#22320;&#22336;&#26469;&#32465;&#23450;&#21450;&#30417;&#21548;&#22806;&#37096;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;&#40664;&#35748;&#30340;&#20027;&#26426;&#21517;localhost&#26159;&#19981;&#33021;&#25509;&#21463;&#22806;&#37096;&#30340;
                            &#36830;&#25509;&#35831;&#27714;&#30340;&#65281;</p></div></li><li><p><tt class="literal">port</tt>&#12290;&#36830;&#25509;&#30340;&#31471;&#21475;&#12290;&#29992;&#20110;&#37197;&#32622;&#36830;&#25509;&#22120;&#25110;&#25509;&#25910;&#22120;&#12290;&#36830;&#25509;&#22120;&#29992;&#27492;&#31471;&#21475;&#26469;&#24314;&#31435;
                        &#36830;&#25509;&#12290;&#25509;&#25910;&#22120;&#22312;&#20123;&#31471;&#21475;&#19978;&#30417;&#21548;&#36830;&#25509;&#35831;&#27714;&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">5445</tt>&#12290;</p></li><li><p><tt class="literal">tcp-no-delay</tt>&#12290;&#23558;&#23427;&#35774;&#20026;<tt class="literal">true</tt>&#23601;&#20250;&#20351;&#29992;
                            <a href="http://en.wikipedia.org/wiki/Nagle's_algorithm" target="_top">Nagle
                            &#31639;&#27861;</a>.&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;</p></li><li><p><tt class="literal">tcp-send-buffer-size</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;TCP&#30340;&#21457;&#36865;&#32531;&#20914;&#22823;&#23567;&#65292;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;
                        &#40664;&#35748;&#20540;&#26159;<tt class="literal">32768</tt>&#23383;&#33410;(32KiB)&#12290;</p><p>&#36825;&#20010;&#21442;&#25968;&#35201;&#26681;&#25454;&#20320;&#30340;&#32593;&#32476;&#30340;&#24102;&#23485;&#19982;&#26102;&#24310;&#30340;&#24773;&#20917;&#32780;&#35843;&#25972;&#12290;<a href="http://www-didc.lbl.gov/TCP-tuning/" target="_top">
                        &#36825;&#20010;&#38142;&#25509;</a>&#23545;&#27492;&#26377;&#24456;&#22909;&#30340;&#35770;&#36848;&#12290;</p><p>&#31616;&#35328;&#20043;&#65292;TCP&#30340;&#21457;&#36865;&#65295;&#25509;&#25910;&#32531;&#20914;&#30340;&#22823;&#23567;&#21487;&#20197;&#29992;&#19979;&#38754;&#20844;&#24335;&#26469;&#35745;&#31639;&#65306;</p><pre class="programlisting">
                        &#32531;&#20914;&#22823;&#23567; = &#24102;&#23485; * RTT
                    </pre><p>&#20854;&#20013;&#24102;&#23485;&#30340;&#21333;&#20301;&#26159; <span class="emphasis"><em>&#27599;&#31186;&#23383;&#33410;&#25968;</em></span>&#65292;RTT&#65288;&#32593;&#32476;&#24448;&#36820;&#31243;&#26102;&#38388;&#65289;&#30340;&#21333;&#20301;&#26159;&#31186;&#12290;
                          &#20351;&#29992;<tt class="literal">ping</tt>&#24037;&#20855;&#21487;&#20197;&#26041;&#20415;&#22320;&#27979;&#37327;&#20986;RTT&#12290;</p><p>&#23545;&#20110;&#24555;&#36895;&#32593;&#32476;&#21487;&#20197;&#36866;&#24403;&#21152;&#22823;&#32531;&#20914;&#30340;&#22823;&#23567;&#12290;</p></li><li><p><tt class="literal">tcp-receive-buffer-size</tt>&#12290;&#36825;&#20010;&#21442;&#25968;&#25351;&#23450;&#20102;TCP&#25509;&#25910;&#32531;&#20914;&#30340;&#22823;&#23567;&#65292;&#21333;&#20301;&#26159;&#23383;&#33410;&#12290;
                        &#40664;&#35748;&#20540;&#26159;<tt class="literal">32768</tt>&#23383;&#33410;(32KiB)&#12290;</p></li><li><p><tt class="literal">batch-delay</tt>&#12290;HornetQ&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#35813;&#21442;&#25968;&#65292;&#22312;&#25968;&#25454;&#21253;&#20889;&#20837;&#20256;&#36755;&#23618;&#20043;&#21069;&#26377;&#19968;&#20010;
                        &#26368;&#22823;&#24310;&#26102;&#65288;&#27627;&#31186;&#65289;&#65292;&#36798;&#21040;&#25209;&#37327;&#20889;&#20837;&#30340;&#30446;&#30340;&#12290;&#36825;&#26679;&#21487;&#20197;&#25552;&#39640;&#23567;&#28040;&#24687;&#30340;&#21457;&#36865;&#25928;&#29575;&#12290;&#20294;&#36825;&#26679;&#20570;&#20250;&#22686;&#21152;&#21333;&#20010;&#28040;&#24687;&#30340;&#24179;&#22343;&#21457;&#36865;
                        &#24310;&#36831;&#12290;&#40664;&#35748;&#20540;&#20026;<tt class="literal">0</tt>&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">direct-deliver</tt>&#12290;&#28040;&#24687;&#21040;&#36798;&#26381;&#21153;&#22120;&#21518;&#65292;&#40664;&#35748;&#26159;&#30001;&#19968;&#20010;&#19981;&#21516;&#30340;&#32447;&#31243;&#26469;&#23558;&#28040;&#24687;&#20256;&#36882;
                        &#21040;&#25509;&#25910;&#32773;&#12290;&#36825;&#26679;&#21487;&#20197;&#20351;&#26381;&#21153;&#30340;&#21585;&#21520;&#37327;&#21644;&#21487;&#25193;&#23637;&#24615;&#36798;&#21040;&#26368;&#20339;&#65292;&#29305;&#21035;&#26159;&#22312;&#22810;&#26680;&#30340;&#31995;&#32479;&#19978;&#25928;&#26524;&#26356;&#20026;&#26126;&#26174;&#12290;&#20294;&#26159;&#32447;&#31243;&#20999;&#25442;
                        &#20250;&#24102;&#26469;&#19968;&#20123;&#20256;&#36882;&#30340;&#24310;&#36831;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#24310;&#36831;&#26368;&#23567;&#65292;&#24182;&#19981;&#22312;&#24847;&#21585;&#21520;&#37327;&#30340;&#35805;&#65292;&#21487;&#20197;&#23558;&#21442;&#25968;<tt class="literal">direct-deliver</tt>&#35774;&#20026;true&#12290;&#40664;&#35748;&#20540;&#26159;<tt class="literal">true</tt>&#12290;&#22914;&#26524;&#20320;&#26356;&#24076;&#26395;&#26377;
                        &#36739;&#22823;&#30340;&#21585;&#21520;&#37327;&#30340;&#35805;&#65292;&#23558;&#23427;&#35774;&#20026;<tt class="literal">false</tt>&#12290;</p></li><li><p><tt class="literal">nio-remoting-threads</tt>&#12290;&#22914;&#26524;&#20351;&#29992;NIO&#65292;&#40664;&#35748;&#24773;&#20917;&#19979;HornetQ&#20250;&#20351;&#29992;&#31995;&#32479;&#20013;&#22788;&#29702;
                        &#22120;&#20869;&#26680;&#65288;&#25110;&#36229;&#32447;&#31243;&#65289;&#25968;&#37327;&#19977;&#20493;&#30340;&#32447;&#31243;&#26469;&#22788;&#29702;&#25509;&#25910;&#30340;&#25968;&#25454;&#21253;&#12290;&#20869;&#26680;&#30340;&#25968;&#37327;&#26159;&#36890;&#36807;&#35843;&#29992;<tt class="literal">Runtime.getRuntime().availableProcessors()</tt>&#26469;&#24471;&#21040;&#30340;&#12290;&#22914;&#26524;&#20320;&#24819;&#25913;&#21464;&#36825;&#20010;&#25968;&#37327;&#65292;
                        &#20320;&#21487;&#20197;&#35774;&#23450;&#26412;&#21442;&#25968;&#12290;&#40664;&#35748;&#30340;&#20540;&#26159;<tt class="literal">-1</tt>&#65292;&#34920;&#31034;&#32447;&#31243;&#25968;&#20026;<tt class="literal">Runtime.getRuntime().availableProcessors()</tt> * 3&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3013"></a>16.4.2.&nbsp;&#37197;&#32622;Netty SSL</h3></div></div><div></div></div><p>Netty SSL&#30340;&#37197;&#32622;&#19982;Netty TCP&#30456;&#20284;&#12290;&#23427;&#37319;&#29992;&#20102;&#23433;&#20840;&#22871;&#25509;&#23383;&#23618;&#65288;SSL&#65289;&#26469;&#25552;&#20379;&#21152;&#23494;&#30340;TCP&#36830;&#25509;&#12290;</p><p>&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;Netty SSL&#30340;&#20363;&#23376;&#26469;&#28436;&#31034;&#20854;&#37197;&#32622;&#21644;&#24212;&#29992;&#12290;</p><p>Netty SSL&#25317;&#26377;Netty TCP&#19968;&#26679;&#30340;&#21442;&#25968;&#65292;&#21478;&#22806;&#36824;&#26377;&#19979;&#21015;&#30340;&#38468;&#21152;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">ssl-enabled</tt>&#12290;&#24517;&#39035;&#35774;&#20026;<tt class="literal">true</tt>&#20197;&#20351;&#29992;SSL&#12290;</p></li><li><p><tt class="literal">key-store-path</tt>&#12290;&#23384;&#25918;SSL&#23494;&#38053;&#30340;&#36335;&#24452;&#65288;key store)&#12290;&#36825;&#26159;&#23384;&#25918;&#23458;&#25143;&#31471;&#35777;&#20070;&#30340;&#22320;&#26041;&#12290;</p></li><li><p><tt class="literal">key-store-password</tt>&#12290;&#29992;&#20110;&#35775;&#38382;key store&#30340;&#23494;&#30721;&#12290;</p></li><li><p><tt class="literal">trust-store-path</tt>&#12290;&#26381;&#21153;&#22120;&#31471;&#23384;&#25918;&#21487;&#20449;&#20219;&#23458;&#25143;&#35777;&#20070;&#30340;&#36335;&#24452;&#12290;</p></li><li><p><tt class="literal">trust-store-password</tt>&#12290;&#29992;&#20110;&#35775;&#38382;&#21487;&#20449;&#20219;&#23458;&#25143;&#35777;&#20070;&#65288;trust store)&#30340;&#23494;&#30721;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3051"></a>16.4.3.&nbsp;&#37197;&#32622;Netty HTTP</h3></div></div><div></div></div><p>Netty HTTP &#36890;&#36807;HTTP&#36890;&#36947;&#20256;&#36865;&#25968;&#25454;&#21253;&#12290;&#22312;&#26377;&#20123;&#29992;&#25143;&#29615;&#22659;&#20013;&#38450;&#28779;&#22681;&#21482;&#20801;&#35768;&#26377;HTTP&#36890;&#20449;&#65292;&#36825;&#26102;&#37319;&#29992;Netty HTTP&#20316;&#20026;HornetQ
                &#30340;&#20256;&#36755;&#23618;&#23601;&#33021;&#35299;&#20915;&#38382;&#39064;&#12290;</p><p>&#25105;&#20204;&#25552;&#20379;&#20102;&#19968;&#20010;Netty HTTP&#30340;&#20363;&#23376;&#26469;&#28436;&#31034;&#20854;&#37197;&#32622;&#21644;&#24212;&#29992;&#12290;</p><p>Netty HTTP&#20855;&#26377;&#21644;Netty TCP&#21516;&#26679;&#30340;&#37197;&#32622;&#21442;&#25968;&#65292;&#21478;&#22806;&#23427;&#36824;&#26377;&#20197;&#19979;&#21442;&#25968;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">http-enabled</tt>&#12290;&#22914;&#26524;&#35201;&#20351;&#29992;HTTP&#65292;&#36825;&#20010;&#21442;&#25968;&#24517;&#39035;&#35774;&#20026;<tt class="literal">true</tt>&#12290;</p></li><li><p><tt class="literal">http-client-idle-time</tt>&#12290;&#23458;&#25143;&#31471;&#31354;&#38386;&#26102;&#38388;&#12290;&#22914;&#26524;&#23458;&#25143;&#31471;&#30340;&#31354;&#38386;&#26102;&#38388;&#36229;&#36807;
                        &#36825;&#20010;&#20540;&#65292;Netty&#23601;&#20250;&#21457;&#36865;&#19968;&#20010;&#31354;&#30340;HTTP&#35831;&#27714;&#20197;&#20445;&#25345;&#36830;&#25509;&#19981;&#34987;&#20851;&#38381;&#12290;</p></li><li><p><tt class="literal">http-client-idle-scan-period</tt>&#12290;&#25195;&#25551;&#31354;&#38386;&#23458;&#25143;&#31471;&#30340;&#38388;&#38548;&#26102;&#38388;&#12290;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">http-response-time</tt>&#12290;&#26381;&#21153;&#22120;&#31471;&#21521;&#23458;&#25143;&#31471;&#21457;&#36865;&#31354;&#30340;http&#21709;&#24212;&#21069;&#30340;&#26368;&#22823;&#31561;&#24453;&#26102;&#38388;&#12290;</p></li><li><p><tt class="literal">http-server-scan-period</tt>&#12290;&#26381;&#21153;&#22120;&#25195;&#25551;&#38656;&#35201;&#21709;&#24212;&#30340;&#23458;&#25143;&#31471;&#30340;&#26102;&#38388;&#38388;&#38548;&#12290;&#21333;&#20301;&#26159;&#27627;&#31186;&#12290;</p></li><li><p><tt class="literal">http-requires-session-id</tt>&#12290;&#22914;&#26524;&#35774;&#20026;true&#65292;&#23458;&#25143;&#31471;&#22312;&#31532;&#19968;&#27425;&#35831;&#27714;&#21518;&#23558;&#31561;&#24453;
                        &#25509;&#25910;&#19968;&#20010;&#20250;&#35805;ID&#12290;http &#36830;&#25509;&#22120;&#29992;&#23427;&#26469;&#36830;&#25509;servlet&#25509;&#25910;&#22120;&#65288;&#19981;&#24314;&#35758;&#36825;&#26679;&#20351;&#29992;&#65289;&#12290;</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="d0e3094"></a>16.4.4.&nbsp;&#37197;&#32622;Netty Servlet</h3></div></div><div></div></div><p>HornetQ&#21487;&#20197;&#20351;&#29992;Netty servlet&#26469;&#20256;&#36755;&#28040;&#24687;&#12290;&#20351;&#29992;servlet&#21487;&#20197;&#23558;HornetQ&#30340;&#25968;&#25454;&#36890;&#36807;HTTP&#20256;&#36865;&#21040;&#19968;&#20010;
                &#36816;&#34892;&#30340;servlet&#65292;&#20877;&#30001;servlet&#36716;&#21457;&#32473;HornetQ&#26381;&#21153;&#22120;&#12290;</p><p>servlet&#19982;HTTP&#30340;&#19981;&#21516;&#20043;&#22788;&#22312;&#20110;&#65292;&#24403;&#29992;HTTP&#20256;&#36755;&#26102;&#65292;HornetQ&#22914;&#21516;&#19968;&#20010;web&#26381;&#21153;&#22120;&#65292;&#23427;&#30417;&#21548;&#22312;&#26576;&#20010;&#31471;&#21475;&#19978;&#30340;HTTP
                &#35831;&#27714;&#24182;&#36820;&#22238;&#21709;&#24212;&#12290;&#27604;&#22914;80&#31471;&#21475;&#25110;8080&#31471;&#21475;&#12290;&#32780;&#24403;&#20351;&#29992;servlet&#26102;&#65292;HornetQ&#30340;&#20256;&#36755;&#25968;&#25454;&#26159;&#36890;&#36807;&#36816;&#34892;&#22312;&#26576;&#19968;servlet&#23481;&#22120;
                &#20013;&#30340;&#19968;&#20010;&#29305;&#23450;&#30340;servlet&#26469;&#36716;&#21457;&#30340;&#12290;&#32780;&#36825;&#20010;sevlet&#23481;&#22120;&#20013;&#21516;&#26102;&#36824;&#21487;&#33021;&#36816;&#34892;&#20854;&#20182;&#30340;&#24212;&#29992;&#65292;&#22914;web&#26381;&#21153;&#12290;&#24403;&#19968;&#20010;&#20844;&#21496;&#26377;&#22810;&#20010;&#24212;&#29992;
                &#20294;&#21482;&#20801;&#35768;&#19968;&#20010;http&#31471;&#21475;&#21487;&#20197;&#35775;&#38382;&#26102;&#65292;servlet&#20256;&#36755;&#21487;&#20197;&#24456;&#22909;&#30340;&#35299;&#20915;HornetQ&#30340;&#20256;&#36755;&#38382;&#39064;&#12290;</p><p>&#35831;&#21442;&#35265;HornetQ&#25152;&#25552;&#20379;&#30340;servlet&#20363;&#23376;&#26469;&#20102;&#35299;&#35814;&#32454;&#30340;&#37197;&#32622;&#26041;&#27861;&#12290;</p><p>&#35201;&#22312;HornetQ&#20013;&#20351;&#29992;Netty servlet&#20256;&#36755;&#26041;&#24335;&#65292;&#38656;&#35201;&#20197;&#19979;&#27493;&#39588;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>&#37096;&#32626;servlet&#12290;&#19979;&#38754;&#26159;&#19968;&#20010;web.xml&#20363;&#23376;&#65306;</p><pre class="programlisting">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4"&gt;
   &lt;servlet&gt;
      &lt;servlet-name&gt;HornetQServlet&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.jboss.netty.channel.socket.http.HttpTunnelingServlet&lt;/servlet-class&gt;
      &lt;init-param&gt;
             &lt;param-name&gt;endpoint&lt;/param-name&gt;
             &lt;param-value&gt;local:org.hornetq&lt;/param-value&gt;
           &lt;/init-param&gt;
           &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
   &lt;/servlet&gt;

   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;HornetQServlet&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/HornetQServlet&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;
&lt;/web-app&gt;

</pre></li><li><p>&#25105;&#20204;&#36824;&#38656;&#35201;&#22312;&#26381;&#21153;&#22120;&#31471;&#21152;&#19978;&#19968;&#20010;&#29305;&#27530;&#30340;Netty invm &#25509;&#25910;&#22120;&#12290;</p><p>&#19979;&#38754;&#26159;&#20174;<tt class="literal">hornetq-configuration.xml</tt>&#37197;&#32622;&#25991;&#20214;&#20013;&#25688;&#21462;&#30340;&#23450;&#20041;&#25509;&#25910;&#22120;&#30340;&#37197;&#32622;&#37096;&#20998;&#65306;</p><pre class="programlisting">                    
&lt;acceptors&gt;

      &lt;acceptor name="netty-invm"&gt;
         &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
         &lt;/factory-class&gt;
         &lt;param key="use-invm" value="true"/&gt;
         &lt;param key="host" value="org.hornetq"/&gt;
      &lt;/acceptor&gt;

&lt;/acceptors&gt;                                         
                </pre></li><li><p>&#26368;&#21518;&#25105;&#20204;&#38656;&#35201;&#22312;&#23458;&#25143;&#31471;&#37197;&#32622;&#36830;&#25509;&#22120;&#65292;&#20063;&#26159;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#25991;&#20214;&#20013;&#26469;&#20570;&#12290;&#22914;&#19979;&#25152;&#31034;&#65306;</p><pre class="programlisting">&lt;connectors&gt;

      &lt;connector name="netty-servlet"&gt;
         &lt;factory-class&gt;
            org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory
         &lt;/factory-class&gt;
         &lt;param key="host" value="localhost"/&gt;
         &lt;param key="port" value="8080"/&gt;
         &lt;param key="use-servlet" value="true"/&gt;
         &lt;param key="servlet-path" value="/messaging/HornetQServlet"/&gt;
      &lt;/connector&gt;

 &lt;/connectors&gt;</pre></li></ul></div><p>&#19979;&#38754;&#21015;&#20986;&#20102;&#21021;&#22987;&#21270;&#21442;&#25968;&#20197;&#21450;&#23427;&#20204;&#30340;&#29992;&#36884;&#65306;</p><div class="itemizedlist"><ul type="disc"><li><p>endpoint - Netty&#25509;&#25910;&#22120;&#30340;&#21517;&#23383;&#12290;servlet&#23558;&#21521;&#23427;&#36716;&#21457;&#25968;&#25454;&#21253;&#12290;&#23427;&#19982;<tt class="literal">host</tt>&#21442;&#25968;&#30340;&#20540;&#26159;&#23545;&#24212;&#30340;&#12290;</p></li></ul></div><p>&#22312;<tt class="literal">web.xml</tt>&#20013;&#23450;&#20041;&#30340;servlet&#30340;URL&#24418;&#24335;&#19982;&#22312;&#36830;&#25509;&#22120;&#37197;&#32622;&#25991;&#20214;&#20013;&#23450;&#20041;&#30340;
                <tt class="literal">servlet-path</tt>&#20540;&#24212;&#35813;&#30456;&#21305;&#37197;&#12290;</p><p>servlet&#21487;&#20197;&#19982;SSL&#19968;&#36215;&#20351;&#29992;&#12290;&#21482;&#38656;&#35201;&#22312;&#36830;&#25509;&#22120;&#37197;&#32622;&#20013;&#21152;&#19978;&#19979;&#38754;&#30340;&#37197;&#32622;&#21363;&#21487;&#65306;</p><pre class="programlisting">    &lt;connector name="netty-servlet"&gt;
         &lt;factory-class&gt;org.hornetq.core.remoting.impl.netty.NettyAcceptorFactory&lt;/factory-class&gt;
         &lt;param key="host" value="localhost"/&gt;
         &lt;param key="port" value="8443"/&gt;
         &lt;param key="use-servlet" value="true"/&gt;
         &lt;param key="servlet-path" value="/messaging/HornetQServlet"/&gt;
         &lt;param key="ssl-enabled" value="true"/&gt;
         &lt;param key="key-store-path" value="path to a keystoree"/&gt;
         &lt;param key="key-store-password" value="keystore password"/&gt;
      &lt;/connector&gt;
</pre><p>&#21478;&#22806;&#20320;&#36824;&#38656;&#35201;&#20026;&#26381;&#21153;&#22120;&#25351;&#23450;&#19968;&#20010;KeyStore&#12290;&#25171;&#24320;<tt class="literal">server/default/deploy/jbossweb.sar</tt>
                   &#19979;&#30340;<tt class="literal">server.xml</tt>&#25991;&#20214;&#65292;&#25353;&#29031;&#19979;&#38754;&#30340;&#20869;&#23481;&#32534;&#36753;&#20854;&#20013;&#30340;SSL&#65295;TLS&#36830;&#25509;&#22120;&#37197;&#32622;&#65306;</p><pre class="programlisting">&lt;Connector protocol="HTTP/1.1" SSLEnabled="true"
           port="8443" address="${jboss.bind.address}"
           scheme="https" secure="true" clientAuth="false"
           keystoreFile="path to a keystore"
           keystorePass="keystore password" sslProtocol = "TLS" /&gt;

</pre><p>SSL&#38656;&#35201;keystore&#21644;&#35775;&#38382;&#23494;&#30721;&#12290;&#21442;&#35265;servlet ssl&#20363;&#23376;&#20197;&#20102;&#35299;&#26356;&#22810;&#30340;&#26377;&#20851;&#20449;&#24687;&#12290;</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="persistence.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="connection-ttl.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;15.&nbsp;&#25345;&#20037;&#21270;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;17.&nbsp;&#22833;&#25928;&#36830;&#25509;&#30340;&#26816;&#27979;</td></tr></table></div></body></html>