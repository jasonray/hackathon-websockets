<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="up" href="index.html" title="HornetQ 2.1&#29992;&#25143;&#25163;&#20876;"><link rel="previous" href="client-reconnection.html" title="Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;"><link rel="next" href="core-bridges.html" title="Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="client-reconnection.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="core-bridges.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="diverts"></a>Chapter&nbsp;35.&nbsp;&#28040;&#24687;&#30340;&#36716;&#21457;&#65288;divert)&#19982;&#20998;&#27969;</h2></div></div><div></div></div><p>&#22312;HornetQ&#20013;&#21487;&#20197;&#37197;&#32622;&#19968;&#20123;&#31216;&#20026;&#36716;&#21457;&#22120;&#65288;<span class="emphasis"><em>diverts</em></span>&#65289;&#30340;&#23545;&#35937;&#12290;</p><p>&#36716;&#21457;&#22120;&#21487;&#20197;&#23558;&#36335;&#30001;&#21040;&#19968;&#20010;&#22320;&#22336;&#30340;&#28040;&#24687;&#36879;&#26126;&#22320;&#36716;&#21457;&#21040;&#20854;&#23427;&#30340;&#22320;&#22336;&#21435;&#65292;&#19981;&#38656;&#35201;&#23458;&#25143;&#31471;&#30340;&#21442;&#19982;&#12290;</p><p>&#36716;&#21457;&#22120;&#21487;&#20197;&#26159;<span class="emphasis"><em>&#21807;&#19968;&#65288;exclusive&#65289;</em></span>&#30340;&#65292;&#21363;&#28040;&#24687;&#21482;&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#65292;&#19981;&#21457;&#21040;&#21407;
        &#26469;&#30340;&#22320;&#22336;&#65307;&#20063;&#21487;&#20197;&#26159;<span class="emphasis"><em>&#19981;&#21807;&#19968;&#65288;non-exclusive&#65289;</em></span>&#30340;&#65292;&#21363;&#28040;&#24687;&#22312;&#21457;&#24448;&#21407;&#26377;&#22320;&#22336;&#30340;
        &#21516;&#26102;&#65292;&#23427;&#30340;&#19968;&#20010;<span class="emphasis"><em>&#25335;&#36125;</em></span>&#34987;&#21457;&#24448;&#26032;&#30340;&#22320;&#22336;&#12290;&#19981;&#21807;&#19968;&#30340;&#36716;&#21457;&#22120;&#21487;&#20197;&#22312;&#24212;&#29992;&#20013;&#23558;&#28040;&#24687;&#36827;&#34892;
        <span class="emphasis"><em>&#20998;&#27969;&#65288;splitting&#65289;</em></span>&#12290;&#27604;&#22914;&#22312;&#19968;&#20010;&#35746;&#21333;&#31995;&#32479;&#20013;&#23427;&#21487;&#20197;&#29992;&#20110;&#30417;&#35270;&#21457;&#24448;&#35746;&#21333;&#38431;&#21015;&#20013;
        &#30340;&#27599;&#20010;&#35746;&#21333;&#28040;&#24687;&#12290;</p><p>&#36716;&#21457;&#22120;&#36824;&#21487;&#20197;&#24102;&#19968;&#20010;&#21487;&#36873;&#30340;&#28040;&#24687;&#36873;&#25321;&#22120;&#12290;&#21482;&#26377;&#34987;&#36873;&#25321;&#22120;&#36873;&#25321;&#30340;&#28040;&#24687;&#25165;&#20250;&#34987;&#36716;&#21457;&#12290;</p><p>&#36716;&#21457;&#22120;&#36824;&#21487;&#20197;&#24102;&#26377;&#19968;&#20010;<tt class="literal">&#36716;&#25442;&#22120;&#65288;Transformer&#65289;</tt>&#12290;&#23427;&#21487;&#20197;&#23558;&#28040;&#24687;&#36827;&#34892;&#36716;&#25442;&#12290;</p><p>&#36716;&#21457;&#22120;&#21482;&#22312;&#21516;&#19968;&#20010;&#26381;&#21153;&#22120;&#20013;&#30340;&#22320;&#22336;&#38388;&#36827;&#34892;&#36716;&#21457;&#12290;&#22914;&#26524;&#35201;&#21521;&#21478;&#22806;&#26381;&#21153;&#22120;&#20013;&#30340;&#22320;&#22336;&#36827;&#34892;&#36716;&#21457;&#65292;&#21487;&#20197;&#37319;&#29992;&#36716;&#21457;&#22120;&#19982;&#26725;&#37197;&#21512;
        &#26469;&#23454;&#29616;&#12290;&#20808;&#23558;&#28040;&#24687;&#36890;&#36807;&#36716;&#21457;&#22120;&#36716;&#21457;&#21040;&#19968;&#20010;&#23384;&#20648;&#19982;&#36716;&#21457;&#30340;&#38431;&#21015;&#20013;&#65292;&#20877;&#30001;&#19968;&#20010;&#26725;&#23558;&#36825;&#20010;&#38431;&#21015;&#30340;&#28040;&#24687;&#36716;&#21457;&#21040;&#36828;&#31243;&#26381;&#21153;&#22120;&#30340;&#30446;&#30340;
        &#22320;&#22336;&#20013;&#12290;</p><p>&#30001;&#36716;&#21457;&#22120;&#19982;&#26725;&#36827;&#34892;&#37197;&#21512;&#21487;&#20197;&#32452;&#25104;&#22797;&#26434;&#30340;&#36335;&#30001;&#31995;&#32479;&#12290;&#22312;&#26381;&#21153;&#22120;&#20013;&#30001;&#19968;&#32452;&#36716;&#21457;&#22120;&#21487;&#20197;&#24418;&#25104;&#19968;&#20010;&#28040;&#24687;&#36335;&#30001;&#34920;&#12290;&#22914;&#26524;&#21152;&#19978;&#26725;&#65292;&#23601;
        &#21487;&#20197;&#36827;&#19968;&#27493;&#24418;&#25104;&#19968;&#20010;&#20998;&#24067;&#24335;&#30340;&#21487;&#38752;&#30340;&#28040;&#24687;&#36335;&#30001;&#32593;&#12290;</p><p>&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#22312;<tt class="literal">hornetq-configuration.xml</tt>&#20013;&#23450;&#20041;&#12290;&#21487;&#20197;&#37197;&#32622;&#38646;&#20010;&#25110;&#22810;&#20010;&#36716;&#21457;&#22120;&#12290;</p><p>&#21442;&#35265;&#36716;&#21457;&#22120;&#30340;&#20363;&#23376;<a href="examples.html#divert-example" title="11.1.13.&nbsp;&#36716;&#31227;&#65288;Divert&#65289;">Section&nbsp;11.1.13, &#8220;&#36716;&#31227;&#65288;Divert&#65289;&#8221;</a>&#65292;&#23427;&#23637;&#31034;&#20102;&#22914;&#20309;&#37197;&#32622;&#19982;&#20351;&#29992;&#36716;&#21457;&#22120;&#12290;</p><p>&#35753;&#25105;&#20204;&#30475;&#19968;&#20123;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#20363;&#23376;&#65306;</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8487"></a>35.1.&nbsp;&#21807;&#19968;&#24335;&#36716;&#21457;&#22120;</h2></div></div><div></div></div><p>&#19979;&#38754;&#26159;&#19968;&#20010;&#21807;&#19968;&#24335;&#36716;&#21457;&#22120;&#30340;&#20363;&#23376;&#12290;&#23427;&#23558;&#25152;&#26377;&#31526;&#21512;&#26465;&#20214;&#30340;&#28040;&#24687;&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#65292;&#32780;&#26087;&#30340;&#22320;&#22336;&#23558;&#19981;&#33021;&#24471;&#21040;&#36825;&#20123;&#28040;&#24687;&#12290;</p><p>&#20197;&#19979;&#37197;&#32622;&#26469;&#33258;&#20110;divert&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;divert name="prices-divert"&gt;                  
    &lt;address&gt;jms.topic.priceUpdates&lt;/address&gt;
    &lt;forwarding-address&gt;jms.queue.priceForwarding&lt;/forwarding-address&gt;    
    &lt;filter string="office='New York'"/&gt;
    &lt;transformer-class-name&gt;
        org.hornetq.jms.example.AddForwardingTimeTransformer
    &lt;/transformer-class-name&gt;     
    &lt;exclusive&gt;true&lt;/exclusive&gt;
&lt;/divert&gt;                        
        </pre><p>&#22312;&#36825;&#37324;&#25105;&#20204;&#23450;&#20041;&#20102;&#19968;&#30456;&#21517;&#20026;&#8220;<tt class="literal">prices-divert</tt>&#8221;&#30340;&#36716;&#21457;&#22120;&#65292;&#23427;&#23558;&#21457;&#24448;
            &#8220;<tt class="literal">jms.topic.priceUpdates</tt>&#8221;&#65288;&#23545;&#24212;JMS&#35805;&#39064;<tt class="literal">priceUpdates</tt>&#65289;&#30340;&#28040;&#24687;&#36716;&#21521;&#21478;&#19968;&#20010;&#26412;&#22320;&#22320;&#22336;&#8220;<tt class="literal">jms.queue.priceForwarding</tt>&#8221;&#65288;&#23545;&#24212;JMS&#38431;&#21015;
                <tt class="literal">priceForwarding</tt>&#65289;&#12290;</p><p>&#25105;&#20204;&#36824;&#37197;&#32622;&#20102;&#19968;&#30456;&#28040;&#24687;&#36807;&#28388;&#22120;&#12290;&#21482;&#26377;<tt class="literal">office</tt>&#23646;&#24615;&#20540;&#20026;<tt class="literal">New York</tt>
            &#30340;&#28040;&#24687;&#25165;&#34987;&#36716;&#21457;&#21040;&#26032;&#22320;&#22336;&#65292;&#20854;&#23427;&#28040;&#24687;&#21017;&#32487;&#32493;&#21457;&#24448;&#21407;&#22320;&#22336;&#12290;&#22914;&#26524;&#27809;&#26377;&#23450;&#20041;&#36807;&#28388;&#22120;&#65292;&#25152;&#26377;&#28040;&#24687;&#23558;&#34987;&#36716;&#21457;&#12290;</p><p>&#26412;&#20363;&#20013;&#36824;&#37197;&#32622;&#20102;&#19968;&#20010;&#36716;&#25442;&#22120;&#30340;&#31867;&#12290;&#24403;&#27599;&#36716;&#21457;&#19968;&#20010;&#28040;&#24687;&#26102;&#65292;&#35813;&#36716;&#25442;&#22120;&#23601;&#34987;&#25191;&#34892;&#19968;&#27425;&#12290;&#36716;&#25442;&#22120;&#21487;&#20197;&#23545;&#28040;&#24687;&#22312;&#36716;&#21457;&#21069;&#36827;&#34892;
            &#26356;&#25913;&#12290;&#36825;&#37324;&#30340;&#36716;&#25442;&#22120;&#21482;&#26159;&#22312;&#28040;&#24687;&#20013;&#21152;&#20837;&#20102;&#19968;&#20010;&#35760;&#24405;&#36716;&#21457;&#26102;&#38388;&#30340;&#28040;&#24687;&#22836;&#12290;</p><p>&#26412;&#20363;&#20013;&#28040;&#24687;&#34987;&#36716;&#21457;&#21040;&#19968;&#20010;&#8217;&#23384;&#36142;&#19982;&#36716;&#21457;&#26159;&#8216;&#38431;&#21015;&#65292;&#28982;&#21518;&#36890;&#36807;&#19968;&#20010;&#26725;&#23558;&#28040;&#24687;&#36716;&#21457;&#21040;&#21478;&#19968;&#20010;HornetQ&#26381;&#21153;&#22120;&#20013;&#12290;</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d0e8525"></a>35.2.&nbsp;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;</h2></div></div><div></div></div><p>&#19979;&#38754;&#25105;&#20204;&#26469;&#30475;&#19968;&#20010;&#19981;&#21807;&#19968;&#30340;&#36716;&#21457;&#22120;&#12290;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#23558;&#28040;&#24687;&#30340;<span class="emphasis"><em>&#25335;&#36125;</em></span>&#36716;&#21457;&#21040;&#26032;&#30340;&#22320;&#22336;&#20013;&#65292;
            &#21407;&#28040;&#24687;&#21017;&#32487;&#32493;&#21457;&#24448;&#21407;&#26377;&#22320;&#22336;&#12290;</p><p>&#22240;&#27492;&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#21487;&#20197;&#23558;&#28040;&#24687;&#36827;&#34892;&#20998;&#27969;&#65288;splitting&#65289;&#12290;</p><p>&#19981;&#21807;&#19968;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#19982;&#21807;&#19968;&#36716;&#21457;&#22120;&#30340;&#37197;&#32622;&#20013;&#19968;&#26679;&#30340;&#65292;&#20063;&#21487;&#20197;&#24102;&#19968;&#20010;&#21487;&#36873;&#30340;&#36807;&#28388;&#22120;&#21644;&#36716;&#25442;&#22120;&#12290;&#19979;&#38754;&#30340;&#37197;&#32622;&#20063;&#26159;&#20986;&#33258;
             divert&#20363;&#23376;&#65306;</p><pre class="programlisting">
&lt;divert name="order-divert"&gt;                 
    &lt;address&gt;jms.queue.orders&lt;/address&gt;
    &lt;forwarding-address&gt;jms.topic.spyTopic&lt;/forwarding-address&gt;         
    &lt;exclusive&gt;false&lt;/exclusive&gt;
&lt;/divert&gt;                       
        </pre><p>The above divert example takes a copy of every message sent to the address '<tt class="literal">jms.queue.orders</tt>' (Which corresponds to a JMS Queue called '<tt class="literal">orders</tt>') and sends it to a local address called '<tt class="literal">jms.topic.SpyTopic</tt>' (which corresponds to a JMS Topic called '<tt class="literal">SpyTopic</tt>').</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="client-reconnection.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="core-bridges.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;34.&nbsp;&#23458;&#25143;&#31471;&#37325;&#26032;&#36830;&#25509;&#19982;&#20250;&#35805;&#24674;&#22797;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;36.&nbsp;&#26680;&#24515;&#26725;</td></tr></table></div></body></html>